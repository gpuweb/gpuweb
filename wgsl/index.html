<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>WebGPU Shading Language</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in § N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *     -> ins/del.c### for candidate and proposed changes (amendments)
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *   - .correction for "candidate corrections"       (div, aside, details, section)
 *   - .addition   for "candidate additions"         (div, aside, details, section)
 *   - .correction.proposed for "proposed corrections" (div, aside, details, section)
 *   - .addition.proposed   for "proposed additions"   (div, aside, details, section)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Outdated warning for old specs
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/* color variables included separately for reliability */

/******************************************************************************/
/*                                    Body                                    */
/******************************************************************************/

	html {
	}

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;			  /* limit line length to 50em for readability   */
		margin: 0 auto;				/* center text within page                    */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag    */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		color: black;
		color: var(--text);
		background: white top left fixed no-repeat;
		background: var(--bg) top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em; }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border: solid var(--logo-bg);
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		background: var(--logo-bg);
		color: white;
		color: var(--logo-text);
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		background: var(--logo-active-bg);
		border-color: #c00;
		border-color: var(--logo-active-bg);
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small; }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 3;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;

			color: #707070;
			color: var(--tocnav-normal-text);
			background: white;
			background: var(--tocnav-normal-bg);
		}
		#toc-nav > a:hover,
		#toc-nav > a:focus {
			color: black;
			color: var(--tocnav-hover-text);
			background: #f8f8f8;
			background: var(--tocnav-hover-bg);
		}
		#toc-nav > a:active {
			color: #c00;
			color: var(--tocnav-active-text);
			background: white;
			background: var(--tocnav-active-bg);
		}

		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;	/* Inherit the font family. */
		line-height: 1.2;		/* Keep wrapped headings compact */
		hyphens: manual;		/* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		color: var(--heading-text);
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#profile-and-date {
		/* #profile-and-date is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > :not(.head) + hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		color: black;
		color: var(--hr-text);
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	border-left: 0.5em solid #DEF;
	border-left: 0.5em solid var(--algo-border);
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	 padding: .5em;
	 border: thin solid #ddd;
	 border: thin solid var(--algo-border);
	 border-radius: .5em;
	 margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	 margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	 margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	margin-left: -2em;
	}
	dl.switch {
	padding-left: 2em;
	}
	dl.switch > dt {
	text-indent: -1.5em;
	margin-top: 1em;
	}
	dl.switch > dt + dt {
	margin-top: 0;
	}
	dl.switch > dt::before {
	content: '\21AA';
	padding: 0 0.5em 0 0;
	display: inline-block;
	width: 1em;
	text-align: right;
	line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: inherit;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del {
		color: #aa0000;
		color: var(--del-text);
		background: transparent;
		background: var(--del-bg);
		text-decoration: line-through;
	}
	ins {
		color: #006100;
		color: var(--ins-text);
		background: transparent;
		background: var(--ins-bg);
		text-decoration: underline;
	}

	/* for amendments (candidate/proposed changes) */

	.amendment ins, .correction ins, .addition ins,
	ins[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment del, .correction del, .addition del,
	del[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment.proposed ins, .correction.proposed ins, .addition.proposed ins,
	ins[class^=c].proposed {
		text-decoration-style: double;
	}
	.amendment.proposed del, .correction.proposed del, .addition.proposed del,
	del[class^=c].proposed {
		text-decoration-style: double;
	}

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		hyphens: none;
		text-transform: none;
		text-align: left;
		text-align: start;
		font-variant: normal;
		orphans: 3;
		widows: 3;
		page-break-before: avoid;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

	/* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		color: var(--a-normal-text);
		text-decoration: underline #707070;
		text-decoration: underline var(--a-normal-underline);
		text-decoration-skip-ink: none;
	}
	a:visited {
		color: #034575;
		color: var(--a-visited-text);
		text-decoration-color: #bbb;
		text-decoration-color: var(--a-visited-underline);
	}

	/* Indicate interaction with the link */
	a[href]:focus,
	a[href]:hover {
		text-decoration-thickness: 2px;
	}
	a[href]:active {
		color: #c00;
		color: var(--a-active-text);
		text-decoration-color: #c00;
		text-decoration-color: var(--a-active-underline);
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	img, svg {
		/* Intentionally not color-scheme aware. */
		background: white;
	}

	/* For autogen numbers, add
	  .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,	.sidefigure img,	figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
		height: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em;
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em; }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote,
	.amendment, .correction, .addition {
		margin: 1em auto;
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	blockquote > :first-child,
	.note  > p:first-child,
	.issue > p:first-child,
	.amendment > p:first-child,
	.correction > p:first-child,
	.addition > p:first-child {
		margin-top: 0;
	}
	blockquote > :last-child,
	.note  > p:last-child,
	.issue > p:last-child,
	.amendment > p:last-child,
	.correction > p:last-child,
	.addition > p:last-child {
		margin-bottom: 0;
	}


	.issue::before, .issue > .marker,
	.example::before, .example > .marker,
	.note::before, .note > .marker,
	details.note > summary > .marker,
	.amendment::before, .amendment > .marker,
	details.amendment > summary > .marker,
	.addition::before, .addition > .marker,
	addition.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	correction.amendment > summary > .marker
	{
		text-transform: uppercase;
		padding-right: 1em;
	}

	.example::before, .example > .marker {
		display: block;
		padding-right: 0em;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
		border-color: var(--blockquote-border);
		background: transparent;
		background: var(--blockquote-bg);
		color: currentcolor;
		color: var(--blockquote-text);
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #e05252;
		border-color: var(--issue-border);
		background: #fbe9e9;
		background: var(--issue-bg);
		color: black;
		color: var(--issue-text);
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		color: #831616;
		color: var(--issueheading-text);
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	  or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #e0cb52;
		border-color: var(--example-border);
		background: #fcfaee;
		background: var(--example-bg);
		color: black;
		color: var(--example-text);
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		color: #574b0f;
		color: var(--exampleheading-text);
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	  or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52e052;
		border-color: var(--note-border);
		background: #e9fbe9;
		background: var(--note-bg);
		color: black;
		color: var(--note-text);
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary {
		color: hsl(120, 70%, 30%);
		color: var(--noteheading-text);
	}
	/* Add .note::before { content: "Note "; } for autogen label,
	  or use class="marker" to mark up the label in source. */

	details.note[open] > summary {
		border-bottom: 1px silver solid;
		border-bottom: 1px var(--notesummary-underline) solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		border-color: var(--assertion-border);
		background: #EEE;
		background: var(--assertion-bg);
		color: black;
		color: var(--assertion-text);
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-color: var(--advisement-border);
		border-style: none solid;
		background: #fec;
		background: var(--advisement-bg);
		color: black;
		color: var(--advisement-text);
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement::before, .advisement > .marker {
		color: #b35f00;
		color: var(--advisementheading-text);
	}

/** Amendment Box *************************************************************/

	.amendment, .correction, .addition {
		border-color: #330099;
		border-color: var(--amendment-border);
		background: #F5F0FF;
		background: var(--amendment-bg);
		color: black;
		color: var(--amendment-text);
	}
	.amendment.proposed, .correction.proposed, .addition.proposed {
		border-style: solid;
		border-block-width: 0.25em;
	}
	.amendment::before, .amendment > .marker,
	details.amendment > summary::before, details.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	details.correction > summary::before, details.correction > summary > .marker,
	.addition::before, .addition > .marker,
	details.addition > summary::before, details.addition > summary > .marker {
		color: #220066;
		color: var(--amendmentheading-text);
	}
	.amendment.proposed::before, .amendment.proposed > .marker,
	details.amendment.proposed > summary::before, details.amendment.proposed > summary > .marker,
	.correction.proposed::before, .correction.proposed > .marker,
	details.correction.proposed > summary::before, details.correction.proposed > summary > .marker,
	.addition.proposed::before, .addition.proposed > .marker,
	details.addition.proposed > summary::before, details.addition.proposed > summary > .marker {
		font-weight: bold;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: hsla(40,100%,50%,0.95);
		background: var(--warning-bg);
		color: black;
		color: var(--warning-text);
		padding: .75em 1em;
		border: red;
		border: var(--warning-border);
		border-style: solid none;
		box-shadow: 0 2px 8px black;
		text-align: center;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 0;
		right: 0;
		bottom: 2em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #def;
		background: var(--def-bg);
		margin: 1.2em 0;
		border-left: 0.5em solid #8ccbf2;
		border-left: 0.5em solid var(--def-border);
		color: black;
		color: var(--def-text);
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
		border-bottom: 1px solid var(--defrow-border);
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def td.footnote {
		padding-top: 0.6em;
	}
	table.def td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		<table class="data"> highlights structural relationships in a table
		when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		Use class="complex data" for particularly complicated tables --
		(This will draw more lines: busier, but clearer.)

		Use class="long" on table cells with paragraph-like contents
		(This will adjust text alignment accordingly.)
		Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-color: var(--datacell-border);
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		border-top: 1px solid var(--datacell-border);
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		border: 1px solid var(--datacell-border);
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
		vertical-align: baseline;
		text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding: 0.1rem 1px 0;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Switch to using border-bottom for underlines */
		text-decoration: none;
		border-bottom: 1px solid;
		/* Reverse color scheme */
		color: black;
		color: var(--toclink-text);
		border-color: #3980b5;
		border-color: var(--toclink-underline);
	}
	.toc a:visited {
		color: black;
		color: var(--toclink-visited-text);
		border-color: #054572;
		border-color: var(--toclink-visited-underline);
	}
	.toc a:focus,
	.toc a:hover {
		background: rgba(75%, 75%, 75%, .25);
		background: var(--a-hover-bg);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
	}
	.toc {
		line-height: 1.1em;
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li			{ font-weight: bold;   }
	.toc > li li		 { font-weight: normal; }
	.toc > li li li	  { font-size:   95%;	}
	.toc > li li li li	{ font-size:   90%;	}
	.toc > li li li li li { font-size:   85%;	}

	/* @supports not (display:grid) { */
		.toc > li			{ margin: 1.5rem 0;	}
		.toc > li li		 { margin: 0.3rem 0;	}
		.toc > li li li	  { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}
		.toc > li li li li .secno { font-size: 85%; }
		.toc > li li li li li .secno { font-size: 100%; }

		.toc li {
			clear: both;
		}

		:not(li) > .toc			 { margin-left:  5rem; }
		.toc .secno				 { margin-left: -5rem; }
		.toc > li li li .secno	  { margin-left: -7rem; }
		.toc > li li li li .secno	{ margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc			 { margin-left:  4rem; }
			.toc .secno				 { margin-left: -4rem; }
			.toc > li li li			 { margin-left:  1rem; }
			.toc > li li li .secno	  { margin-left: -5rem; }
			.toc > li li li li .secno	{ margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
		/* Loosen it on wide screens */
		@media screen and (min-width: 78em) {
			body:not(.toc-inline) :not(li) > .toc			 { margin-left:  4rem; }
			body:not(.toc-inline) .toc .secno				 { margin-left: -4rem; }
			body:not(.toc-inline) .toc > li li li			 { margin-left:  1rem; }
			body:not(.toc-inline) .toc > li li li .secno	  { margin-left: -5rem; }
			body:not(.toc-inline) .toc > li li li li .secno	{ margin-left: -6rem; }
			body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			  comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover,
		#toc .content:focus {
			background: rgba(75%, 75%, 75%, .25);
			background: var(--a-hover-bg);
			border-bottom: 3px solid #054572;
			border-bottom: 3px solid var(--toclink-underline);
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index	  { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li	{ margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em; }
	ul.index dl	{ margin-top: 0; }
	ul.index dt	{ margin: .2em 0 .2em 20px;}
	ul.index dd	{ margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span:not(.dfn-paneled) {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
			color: var(--indexinfo-text);
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		color: black;
		color: var(--indextable-hover-text);
		background: #f7f8f9;
		background: var(--indextable-hover-bg);
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/** Outdated warning **********************************************************/

.outdated-spec {
	color: black;
	color: var(--outdatedspec-text);
	background-color: rgba(0,0,0,0.5);
	background-color: var(--outdatedspec-bg);
}

.outdated-warning {
	position: fixed;
	bottom: 50%;
	left: 0;
	right: 0;
	margin: 0 auto;
	width: 50%;
	background: maroon;
	background: var(--outdated-bg);
	color: white;
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	position: absolute;
	top: 0;
	right:0;
	margin: 0;
	border: 0;
	padding: 0.25em 0.5em;
	background: transparent;
	color: white;
	color: var(--outdated-text);
	font:1em sans-serif;
	text-align:center;
}

.outdated-warning span {
	display: block;
}

.outdated-collapsed {
	bottom: 0;
	border-radius: 0;
	width: 100%;
	padding: 0;
}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}

		.outdated-warning {
			position: absolute;
			border-style: solid;
			border-color: red;
		}

		.outdated-warning input {
			display: none;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good item positioning:
		  "content column" is 50ems wide at max; less on smaller screens.
		  Extra space (after ToC + content) is empty on the right.

		  1. When item < content column, centers item in column.
		  2. When content < item < available, left-aligns.
		  3. When item > available, fills available + scroll bar.
		*/
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			* http://lea.verou.me/2012/04/background-attachment-local/
			*
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
						top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
						top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version 4f053d00e, updated Tue Aug 10 14:13:32 2021 -0700" name="generator">
  <link href="https://www.w3.org/TR/WGSL/" rel="canonical">
  <meta content="261e89fffc967950242ce8fdf2cd46a36be98c16" name="document-revision">
<style>
tr:nth-child(2n) {
  background-color: #b0b0b050;
}
thead {
  background-color: #b0b0b050;
  font-weight: bold;
}
.nowrap {
  white-space:nowrap;
}
.small {
  font-size: smaller;
}
</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-var-click-highlighting */

    var { cursor: pointer; }
    var.selected0 { background-color: #F4D200; box-shadow: 0 0 0 2px #F4D200; }
    var.selected1 { background-color: #FF87A2; box-shadow: 0 0 0 2px #FF87A2; }
    var.selected2 { background-color: #96E885; box-shadow: 0 0 0 2px #96E885; }
    var.selected3 { background-color: #3EEED2; box-shadow: 0 0 0 2px #3EEED2; }
    var.selected4 { background-color: #EACFB6; box-shadow: 0 0 0 2px #EACFB6; }
    var.selected5 { background-color: #82DDFF; box-shadow: 0 0 0 2px #82DDFF; }
    var.selected6 { background-color: #FFBCF2; box-shadow: 0 0 0 2px #FFBCF2; }
    </style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">WebGPU Shading Language</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="profile-and-date"><span class="content">Editor’s Draft, <time class="dt-updated" datetime="2021-08-26">26 August 2021</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://gpuweb.github.io/gpuweb/wgsl/">https://gpuweb.github.io/gpuweb/wgsl/</a>
     <dt>Latest published version:
     <dd><a href="https://www.w3.org/TR/WGSL/">https://www.w3.org/TR/WGSL/</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/gpuweb/gpuweb/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard" data-editor-id="99785"><a class="p-name fn u-email email" href="mailto:dneto@google.com">David Neto</a> (<a class="p-org org" href="https://www.google.com">Google</a>)
     <dd class="editor p-author h-card vcard" data-editor-id="77180"><a class="p-name fn u-email email" href="mailto:mmaxfield@apple.com">Myles C. Maxfield</a> (<span class="p-org org">Apple Inc.</span>)
     <dt class="editor">Former Editor:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:dsinclair@google.com">dan sinclair</a> (<a class="p-org org" href="https://www.google.com">Google</a>)
     <dt>Participate:
     <dd><a href="https://github.com/gpuweb/gpuweb/issues/new?labels=wgsl">File an issue</a> (<a href="https://github.com/gpuweb/gpuweb/issues?q=is%3Aissue+is%3Aopen+label%3Awgsl">open issues</a>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2021 the Contributors to the WebGPU Shading Language Specification, published by the <a href="http://www.w3.org/community/gpu/">GPU for the Web Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>Shading language for WebGPU.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   This specification was published by the <a href="https://www.w3.org/community/gpu/">GPU for the Web Community Group</a>.
It is not a W3C Standard nor is it on the W3C Standards Track.

Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. 
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#goals"><span class="secno">1.1</span> <span class="content">Goals</span></a>
      <li><a href="#technical-overview"><span class="secno">1.2</span> <span class="content">Technical Overview</span></a>
      <li><a href="#notation"><span class="secno">1.3</span> <span class="content">Notation</span></a>
     </ol>
    <li>
     <a href="#program-lifecycle"><span class="secno">2</span> <span class="content">Shader Lifecycle</span></a>
     <ol class="toc">
      <li><a href="#kinds-of-errors"><span class="secno">2.1</span> <span class="content">Kinds of errors</span></a>
     </ol>
    <li>
     <a href="#textual-structure"><span class="secno">3</span> <span class="content">Textual structure TODO</span></a>
     <ol class="toc">
      <li><a href="#comments"><span class="secno">3.1</span> <span class="content">Comments</span></a>
      <li><a href="#tokens"><span class="secno">3.2</span> <span class="content">Tokens TODO</span></a>
      <li><a href="#literals"><span class="secno">3.3</span> <span class="content">Literals TODO</span></a>
      <li><a href="#keywords"><span class="secno">3.4</span> <span class="content">Keywords TODO</span></a>
      <li><a href="#identifiers"><span class="secno">3.5</span> <span class="content">Identifiers TODO</span></a>
      <li><a href="#attributes"><span class="secno">3.6</span> <span class="content">Attributes</span></a>
      <li><a href="#directives"><span class="secno">3.7</span> <span class="content">Directives TODO</span></a>
      <li><a href="#declaration-and-scope"><span class="secno">3.8</span> <span class="content">Declaration and scope</span></a>
     </ol>
    <li>
     <a href="#types"><span class="secno">4</span> <span class="content">Types</span></a>
     <ol class="toc">
      <li>
       <a href="#type-checking-section"><span class="secno">4.1</span> <span class="content">Type Checking</span></a>
       <ol class="toc">
        <li><a href="#typing-tables-section"><span class="secno">4.1.1</span> <span class="content">Type rule tables</span></a>
       </ol>
      <li>
       <a href="#plain-types-section"><span class="secno">4.2</span> <span class="content">Plain Types</span></a>
       <ol class="toc">
        <li><a href="#bool-type"><span class="secno">4.2.1</span> <span class="content">Boolean Type</span></a>
        <li><a href="#integer-types"><span class="secno">4.2.2</span> <span class="content">Integer Types</span></a>
        <li><a href="#floating-point-types"><span class="secno">4.2.3</span> <span class="content">Floating Point Type</span></a>
        <li><a href="#scalar-types"><span class="secno">4.2.4</span> <span class="content">Scalar Types</span></a>
        <li><a href="#vector-types"><span class="secno">4.2.5</span> <span class="content">Vector Types</span></a>
        <li><a href="#matrix-types"><span class="secno">4.2.6</span> <span class="content">Matrix Types</span></a>
        <li><a href="#atomic-types"><span class="secno">4.2.7</span> <span class="content">Atomic Types</span></a>
        <li><a href="#array-types"><span class="secno">4.2.8</span> <span class="content">Array Types</span></a>
        <li><a href="#struct-types"><span class="secno">4.2.9</span> <span class="content">Structure Types</span></a>
        <li><a href="#composite-types"><span class="secno">4.2.10</span> <span class="content">Composite Types</span></a>
        <li><a href="#constructible-types"><span class="secno">4.2.11</span> <span class="content">Constructible Types</span></a>
       </ol>
      <li>
       <a href="#memory"><span class="secno">4.3</span> <span class="content">Memory</span></a>
       <ol class="toc">
        <li><a href="#memory-locations-section"><span class="secno">4.3.1</span> <span class="content">Memory Locations</span></a>
        <li><a href="#memory-access-mode"><span class="secno">4.3.2</span> <span class="content">Memory Access Mode</span></a>
        <li><a href="#storable-types"><span class="secno">4.3.3</span> <span class="content">Storable Types</span></a>
        <li><a href="#io-shareable-types"><span class="secno">4.3.4</span> <span class="content">IO-shareable Types</span></a>
        <li><a href="#host-shareable-types"><span class="secno">4.3.5</span> <span class="content">Host-shareable Types</span></a>
        <li><a href="#storage-class"><span class="secno">4.3.6</span> <span class="content">Storage Classes</span></a>
        <li>
         <a href="#memory-layouts"><span class="secno">4.3.7</span> <span class="content">Memory Layout</span></a>
         <ol class="toc">
          <li><a href="#alignment-and-size"><span class="secno">4.3.7.1</span> <span class="content">Alignment and Size</span></a>
          <li><a href="#structure-layout-rules"><span class="secno">4.3.7.2</span> <span class="content">Structure Layout Rules</span></a>
          <li><a href="#array-layout-rules"><span class="secno">4.3.7.3</span> <span class="content">Array Layout Rules</span></a>
          <li><a href="#internal-value-layout"><span class="secno">4.3.7.4</span> <span class="content">Internal Layout of Values</span></a>
          <li><a href="#storage-class-layout-constraints"><span class="secno">4.3.7.5</span> <span class="content">Storage Class Layout Constraints</span></a>
         </ol>
       </ol>
      <li>
       <a href="#memory-view-types"><span class="secno">4.4</span> <span class="content">Memory View Types</span></a>
       <ol class="toc">
        <li><a href="#access-mode-defaults"><span class="secno">4.4.1</span> <span class="content">Access Mode Defaults</span></a>
        <li><a href="#originating-variable-section"><span class="secno">4.4.2</span> <span class="content">Originating variable</span></a>
        <li><a href="#ref-ptr-use-cases"><span class="secno">4.4.3</span> <span class="content">Use cases for references and pointers</span></a>
        <li><a href="#forming-references-and-pointers"><span class="secno">4.4.4</span> <span class="content">Forming reference and pointer values</span></a>
        <li><a href="#pointers-other-languages"><span class="secno">4.4.5</span> <span class="content">Comparison with references and pointers in other languages</span></a>
       </ol>
      <li>
       <a href="#texture-types"><span class="secno">4.5</span> <span class="content">Texture and Sampler Types</span></a>
       <ol class="toc">
        <li><a href="#texel-formats"><span class="secno">4.5.1</span> <span class="content">Texel formats</span></a>
        <li><a href="#sampled-texture-type"><span class="secno">4.5.2</span> <span class="content">Sampled Texture Types</span></a>
        <li><a href="#multisampled-texture-type"><span class="secno">4.5.3</span> <span class="content">Multisampled Texture Types</span></a>
        <li><a href="#external-texture-type"><span class="secno">4.5.4</span> <span class="content">External Sampled Texture Types</span></a>
        <li><a href="#texture-storage"><span class="secno">4.5.5</span> <span class="content">Storage Texture Types</span></a>
        <li><a href="#texture-depth"><span class="secno">4.5.6</span> <span class="content">Depth Texture Types</span></a>
        <li><a href="#sampler-type"><span class="secno">4.5.7</span> <span class="content">Sampler Type</span></a>
        <li><a href="#texture-types-grammar"><span class="secno">4.5.8</span> <span class="content">Texture Types Grammar</span></a>
       </ol>
      <li><a href="#type-aliases"><span class="secno">4.6</span> <span class="content">Type Aliases TODO</span></a>
      <li><a href="#type-declarations"><span class="secno">4.7</span> <span class="content">Type Declaration Grammar</span></a>
     </ol>
    <li>
     <a href="#var-and-let"><span class="secno">5</span> <span class="content"><code>var</code> and <code>let</code></span></a>
     <ol class="toc">
      <li><a href="#module-scope-variables"><span class="secno">5.1</span> <span class="content">Module Scope Variables</span></a>
      <li><a href="#module-constants"><span class="secno">5.2</span> <span class="content">Module Constants</span></a>
      <li><a href="#function-scope-variables"><span class="secno">5.3</span> <span class="content">Function Scope Variables and Constants</span></a>
      <li><a href="#never-alias-assumption"><span class="secno">5.4</span> <span class="content">Never-alias assumption TODO</span></a>
     </ol>
    <li>
     <a href="#expressions"><span class="secno">6</span> <span class="content">Expressions TODO</span></a>
     <ol class="toc">
      <li><a href="#literal-expressions"><span class="secno">6.1</span> <span class="content">Literal Expressions TODO</span></a>
      <li><a href="#parenthesized-expressions"><span class="secno">6.2</span> <span class="content">Parenthesized Expressions</span></a>
      <li><a href="#type-constructor-expr"><span class="secno">6.3</span> <span class="content">Type Constructor Expressions</span></a>
      <li><a href="#zero-value-expr"><span class="secno">6.4</span> <span class="content">Zero Value Expressions</span></a>
      <li><a href="#conversion-expr"><span class="secno">6.5</span> <span class="content">Conversion Expressions</span></a>
      <li><a href="#bitcast-expr"><span class="secno">6.6</span> <span class="content">Reinterpretation of Representation Expressions</span></a>
      <li>
       <a href="#composite-value-decomposition-expr"><span class="secno">6.7</span> <span class="content">Composite Value Decomposition Expressions</span></a>
       <ol class="toc">
        <li>
         <a href="#vector-access-expr"><span class="secno">6.7.1</span> <span class="content">Vector Access Expression</span></a>
         <ol class="toc">
          <li><a href="#vector-single-component"><span class="secno">6.7.1.1</span> <span class="content">Vector single component selection</span></a>
          <li><a href="#vector-multi-component"><span class="secno">6.7.1.2</span> <span class="content">Vector multiple component selection</span></a>
          <li><a href="#component-reference-from-vector-reference"><span class="secno">6.7.1.3</span> <span class="content">Component reference from vector reference</span></a>
         </ol>
        <li><a href="#matrix-access-expr"><span class="secno">6.7.2</span> <span class="content">Matrix Access Expression</span></a>
        <li><a href="#array-access-expr"><span class="secno">6.7.3</span> <span class="content">Array Access Expression</span></a>
        <li><a href="#struct-access-expr"><span class="secno">6.7.4</span> <span class="content">Structure Access Expression</span></a>
       </ol>
      <li><a href="#logical-expr"><span class="secno">6.8</span> <span class="content">Logical Expressions</span></a>
      <li><a href="#arithmetic-expr"><span class="secno">6.9</span> <span class="content">Arithmetic Expressions</span></a>
      <li><a href="#comparison-expr"><span class="secno">6.10</span> <span class="content">Comparison Expressions TODO</span></a>
      <li><a href="#bit-expr"><span class="secno">6.11</span> <span class="content">Bit Expressions TODO</span></a>
      <li><a href="#function-call-expr"><span class="secno">6.12</span> <span class="content">Function Call Expression</span></a>
      <li><a href="#var-identifier-expr"><span class="secno">6.13</span> <span class="content">Variable Identifier Expression</span></a>
      <li><a href="#formal-parameter-expr"><span class="secno">6.14</span> <span class="content">Formal Parameter Expression</span></a>
      <li><a href="#address-of-expr"><span class="secno">6.15</span> <span class="content">Address-Of Expression</span></a>
      <li><a href="#indirection-expr"><span class="secno">6.16</span> <span class="content">Indirection Expression</span></a>
      <li><a href="#constant-identifier-expr"><span class="secno">6.17</span> <span class="content">Constant Identifier Expression</span></a>
      <li><a href="#expression-grammar"><span class="secno">6.18</span> <span class="content">Expression Grammar Summary</span></a>
     </ol>
    <li>
     <a href="#statements"><span class="secno">7</span> <span class="content">Statements TODO</span></a>
     <ol class="toc">
      <li><a href="#compound-statement"><span class="secno">7.1</span> <span class="content">Compound Statement</span></a>
      <li><a href="#assignment"><span class="secno">7.2</span> <span class="content">Assignment Statement</span></a>
      <li>
       <a href="#control-flow"><span class="secno">7.3</span> <span class="content">Control flow TODO</span></a>
       <ol class="toc">
        <li><a href="#sequence-statement"><span class="secno">7.3.1</span> <span class="content">Sequence TODO</span></a>
        <li><a href="#if-statement"><span class="secno">7.3.2</span> <span class="content">If Statement</span></a>
        <li><a href="#switch-statement"><span class="secno">7.3.3</span> <span class="content">Switch Statement</span></a>
        <li><a href="#loop-statement"><span class="secno">7.3.4</span> <span class="content">Loop Statement</span></a>
        <li><a href="#for-statement"><span class="secno">7.3.5</span> <span class="content">For Statement</span></a>
        <li><a href="#break-statement"><span class="secno">7.3.6</span> <span class="content">Break</span></a>
        <li><a href="#continue-statement"><span class="secno">7.3.7</span> <span class="content">Continue</span></a>
        <li><a href="#continuing-statement"><span class="secno">7.3.8</span> <span class="content">Continuing Statement</span></a>
        <li><a href="#return-statement"><span class="secno">7.3.9</span> <span class="content">Return Statement</span></a>
        <li><a href="#discard-statement"><span class="secno">7.3.10</span> <span class="content">Discard Statement</span></a>
       </ol>
      <li><a href="#function-call-statement"><span class="secno">7.4</span> <span class="content">Function Call Statement</span></a>
      <li><a href="#statements-summary"><span class="secno">7.5</span> <span class="content">Statements Grammar Summary</span></a>
     </ol>
    <li>
     <a href="#functions"><span class="secno">8</span> <span class="content">Functions</span></a>
     <ol class="toc">
      <li><a href="#function-declaration-sec"><span class="secno">8.1</span> <span class="content">Declaring a user-defined function</span></a>
      <li><a href="#function-calls"><span class="secno">8.2</span> <span class="content">Function calls</span></a>
      <li><a href="#function-restriction"><span class="secno">8.3</span> <span class="content">Restrictions on functions</span></a>
     </ol>
    <li>
     <a href="#entry-points"><span class="secno">9</span> <span class="content">Entry Points TODO</span></a>
     <ol class="toc">
      <li><a href="#shader-stages-sec"><span class="secno">9.1</span> <span class="content">Shader Stages</span></a>
      <li>
       <a href="#entry-point-decl"><span class="secno">9.2</span> <span class="content">Entry point declaration</span></a>
       <ol class="toc">
        <li><a href="#entry-point-attributes"><span class="secno">9.2.1</span> <span class="content">Function attributes for entry points</span></a>
       </ol>
      <li>
       <a href="#shader-interface"><span class="secno">9.3</span> <span class="content">Shader Interface</span></a>
       <ol class="toc">
        <li>
         <a href="#pipeline-inputs-outputs"><span class="secno">9.3.1</span> <span class="content">Pipeline Input and Output Interface</span></a>
         <ol class="toc">
          <li><a href="#builtin-inputs-outputs"><span class="secno">9.3.1.1</span> <span class="content">Built-in Inputs and Outputs</span></a>
          <li><a href="#user-defined-inputs-outputs"><span class="secno">9.3.1.2</span> <span class="content">User-defined Inputs and Outputs</span></a>
          <li><a href="#interpolation"><span class="secno">9.3.1.3</span> <span class="content">Interpolation</span></a>
          <li><a href="#input-output-locations"><span class="secno">9.3.1.4</span> <span class="content">Input-output Locations</span></a>
         </ol>
        <li><a href="#resource-interface"><span class="secno">9.3.2</span> <span class="content">Resource interface</span></a>
        <li><a href="#resource-layout-compatibility"><span class="secno">9.3.3</span> <span class="content">Resource layout compatibility</span></a>
       </ol>
      <li>
       <a href="#pipeline-compatibility"><span class="secno">9.4</span> <span class="content">Pipeline compatibility TODO</span></a>
       <ol class="toc">
        <li><a href="#input-output-matching"><span class="secno">9.4.1</span> <span class="content">Input-output matching rules TODO</span></a>
       </ol>
     </ol>
    <li>
     <a href="#language-extensions"><span class="secno">10</span> <span class="content">Language extensions</span></a>
     <ol class="toc">
      <li><a href="#enable-directive-section"><span class="secno">10.1</span> <span class="content">Enable Directive</span></a>
     </ol>
    <li><a href="#wgsl-module"><span class="secno">11</span> <span class="content">WGSL program TODO</span></a>
    <li>
     <a href="#execution"><span class="secno">12</span> <span class="content">Execution TODO</span></a>
     <ol class="toc">
      <li>
       <a href="#invocation-of-an-entry-point"><span class="secno">12.1</span> <span class="content">Invocation of an entry point TODO</span></a>
       <ol class="toc">
        <li><a href="#before-entry-point-begins"><span class="secno">12.1.1</span> <span class="content">Before an entry point begins TODO</span></a>
        <li>
         <a href="#program-order"><span class="secno">12.1.2</span> <span class="content">Program order (within an invocation) TODO</span></a>
         <ol class="toc">
          <li><a href="#function-scope-variable-lifetime"><span class="secno">12.1.2.1</span> <span class="content">Function-scope variable lifetime and initialization TODO</span></a>
          <li><a href="#statement-order"><span class="secno">12.1.2.2</span> <span class="content">Statement order TODO</span></a>
          <li><a href="#intra-statement-order"><span class="secno">12.1.2.3</span> <span class="content">Intra-statement order (or lack) TODO</span></a>
         </ol>
       </ol>
      <li>
       <a href="#uniformity"><span class="secno">12.2</span> <span class="content">Uniformity TODO</span></a>
       <ol class="toc">
        <li><a href="#uniform-control-flow"><span class="secno">12.2.1</span> <span class="content">Uniform control flow TODO</span></a>
        <li><a href="#divergence-reconvergence"><span class="secno">12.2.2</span> <span class="content">Divergence and reconvergence TODO</span></a>
        <li><a href="#uniformity-restrictions"><span class="secno">12.2.3</span> <span class="content">Uniformity restrictions TODO</span></a>
       </ol>
      <li><a href="#compute-shader-workgroups"><span class="secno">12.3</span> <span class="content">Compute Shaders and Workgroups</span></a>
      <li>
       <a href="#collective-operations"><span class="secno">12.4</span> <span class="content">Collective operations TODO</span></a>
       <ol class="toc">
        <li><a href="#barrier"><span class="secno">12.4.1</span> <span class="content">Barrier TODO</span></a>
        <li><a href="#derivatives"><span class="secno">12.4.2</span> <span class="content">Derivatives</span></a>
        <li><a href="#arrayed-resource-access"><span class="secno">12.4.3</span> <span class="content">Arrayed resource access TODO</span></a>
       </ol>
      <li>
       <a href="#floating-point-evaluation"><span class="secno">12.5</span> <span class="content">Floating Point Evaluation</span></a>
       <ol class="toc">
        <li><a href="#floating-point-accuracy"><span class="secno">12.5.1</span> <span class="content">Floating Point Accuracy</span></a>
        <li><a href="#floating-point-conversion"><span class="secno">12.5.2</span> <span class="content">Floating point conversion</span></a>
       </ol>
     </ol>
    <li><a href="#memory-model"><span class="secno">13</span> <span class="content">Memory Model TODO</span></a>
    <li>
     <a href="#grammar"><span class="secno">14</span> <span class="content">Keyword and Token Summary</span></a>
     <ol class="toc">
      <li><a href="#keyword-summary"><span class="secno">14.1</span> <span class="content">Keyword Summary</span></a>
      <li><a href="#reserved-keywords"><span class="secno">14.2</span> <span class="content">Reserved Keywords</span></a>
      <li><a href="#syntactic-tokens"><span class="secno">14.3</span> <span class="content">Syntactic Tokens</span></a>
     </ol>
    <li><a href="#builtin-variables"><span class="secno">15</span> <span class="content">Built-in variables</span></a>
    <li>
     <a href="#builtin-functions"><span class="secno">16</span> <span class="content">Built-in functions</span></a>
     <ol class="toc">
      <li><a href="#logical-builtin-functions"><span class="secno">16.1</span> <span class="content">Logical built-in functions</span></a>
      <li><a href="#value-testing-builtin-functions"><span class="secno">16.2</span> <span class="content">Value-testing built-in functions</span></a>
      <li><a href="#float-builtin-functions"><span class="secno">16.3</span> <span class="content">Float built-in functions</span></a>
      <li><a href="#integer-builtin-functions"><span class="secno">16.4</span> <span class="content">Integer built-in functions</span></a>
      <li><a href="#matrix-builtin-functions"><span class="secno">16.5</span> <span class="content">Matrix built-in functions</span></a>
      <li><a href="#vector-builtin-functions"><span class="secno">16.6</span> <span class="content">Vector built-in functions</span></a>
      <li><a href="#derivative-builtin-functions"><span class="secno">16.7</span> <span class="content">Derivative built-in functions</span></a>
      <li>
       <a href="#texture-builtin-functions"><span class="secno">16.8</span> <span class="content">Texture built-in functions</span></a>
       <ol class="toc">
        <li><a href="#texturedimensions"><span class="secno">16.8.1</span> <span class="content"><code>textureDimensions</code></span></a>
        <li><a href="#textureload"><span class="secno">16.8.2</span> <span class="content"><code>textureLoad</code></span></a>
        <li><a href="#texturenumlayers"><span class="secno">16.8.3</span> <span class="content"><code>textureNumLayers</code></span></a>
        <li><a href="#texturenumlevels"><span class="secno">16.8.4</span> <span class="content"><code>textureNumLevels</code></span></a>
        <li><a href="#texturenumsamples"><span class="secno">16.8.5</span> <span class="content"><code>textureNumSamples</code></span></a>
        <li><a href="#texturesample"><span class="secno">16.8.6</span> <span class="content"><code>textureSample</code></span></a>
        <li><a href="#texturesamplebias"><span class="secno">16.8.7</span> <span class="content"><code>textureSampleBias</code></span></a>
        <li><a href="#texturesamplecompare"><span class="secno">16.8.8</span> <span class="content"><code>textureSampleCompare</code></span></a>
        <li><a href="#texturesamplecomparelevel"><span class="secno">16.8.9</span> <span class="content"><code>textureSampleCompareLevel</code></span></a>
        <li><a href="#texturesamplegrad"><span class="secno">16.8.10</span> <span class="content"><code>textureSampleGrad</code></span></a>
        <li><a href="#texturesamplelevel"><span class="secno">16.8.11</span> <span class="content"><code>textureSampleLevel</code></span></a>
        <li><a href="#texturestore"><span class="secno">16.8.12</span> <span class="content"><code>textureStore</code></span></a>
       </ol>
      <li>
       <a href="#atomic-builtin-functions"><span class="secno">16.9</span> <span class="content">Atomic built-in functions</span></a>
       <ol class="toc">
        <li><a href="#atomic-load"><span class="secno">16.9.1</span> <span class="content">Atomic Load</span></a>
        <li><a href="#atomic-store"><span class="secno">16.9.2</span> <span class="content">Atomic Store</span></a>
        <li><a href="#atomic-rmw"><span class="secno">16.9.3</span> <span class="content">Atomic Read-Modify-Write</span></a>
       </ol>
      <li><a href="#pack-builtin-functions"><span class="secno">16.10</span> <span class="content">Data packing built-in functions</span></a>
      <li><a href="#unpack-builtin-functions"><span class="secno">16.11</span> <span class="content">Data unpacking built-in functions</span></a>
      <li><a href="#sync-builtin-functions"><span class="secno">16.12</span> <span class="content">Synchronization built-in functions</span></a>
      <li><a href="#value-steering-functions"><span class="secno">16.13</span> <span class="content">Value-steering functions</span></a>
     </ol>
    <li><a href="#junkyard"><span class="secno">17</span> <span class="content">MATERIAL TO BE MOVED TO A NEW HOME OR DELETED</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p>WebGPU Shading Language (WGSL) is the shader language for <a data-link-type="biblio" href="#biblio-webgpu">[WebGPU]</a>.
That is, an application using the WebGPU API uses WGSL to express the programs, known as shaders,
that run on the GPU.</p>
   <div class="example wgsl global-scope" id="example-da6ae6e1">
    <a class="self-link" href="#example-da6ae6e1"></a> 
<pre class="highlight"><c- p>[[</c-><c- n>stage</c-><c- p>(</c-><c- n>fragment</c-><c- p>)]]</c->
<c- k>fn</c-> <c- nf>main</c-><c- p>()</c-> -> <c- p>[[</c-><c- n>location</c-><c- p>(</c-><c- mi>0</c-><c- p>)]]</c-> <c- n>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-> <c- p>{</c->
    <c- k>return</c-> <c- n>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>(</c-><c- mf>0.4</c-><c- p>,</c-> <c- mf>0.4</c-><c- p>,</c-> <c- mf>0.8</c-><c- p>,</c-> <c- mf>1.0</c-><c- p>);</c->
<c- p>}</c->
</pre>
   </div>
   <h3 class="heading settled" data-level="1.1" id="goals"><span class="secno">1.1. </span><span class="content">Goals</span><a class="self-link" href="#goals"></a></h3>
   <ul>
    <li data-md>
     <p>Trivially convertable to <a data-link-type="biblio" href="#biblio-spir-v">[SPIR-V]</a></p>
    <li data-md>
     <p>Constructs are defined as normative references to their <a data-link-type="biblio" href="#biblio-spir-v">[SPIR-V]</a> counterparts</p>
    <li data-md>
     <p>All features in WGSL are directly translatable to <a data-link-type="biblio" href="#biblio-spir-v">[SPIR-V]</a>. (No polymorphism, no general pointers, no overloads, etc)</p>
    <li data-md>
     <p>Features and semantics are exactly the ones of <a data-link-type="biblio" href="#biblio-spir-v">[SPIR-V]</a></p>
    <li data-md>
     <p>Each item in this spec <em>must</em> provide the mapping to <a data-link-type="biblio" href="#biblio-spir-v">[SPIR-V]</a> for the construct</p>
   </ul>
   <h3 class="heading settled" data-level="1.2" id="technical-overview"><span class="secno">1.2. </span><span class="content">Technical Overview</span><a class="self-link" href="#technical-overview"></a></h3>
   <p>WebGPU issues a unit of work to the GPU in the form of a <a href="https://gpuweb.github.io/gpuweb/#gpu-command">GPU command</a>.
WGSL is concerned with two kinds of GPU commands:</p>
   <ul>
    <li data-md>
     <p>a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="draw-command">draw command</dfn> executes a <a data-link-type="dfn" href="#gpurenderpipeline" id="ref-for-gpurenderpipeline">render pipeline</a> in the context of <a data-link-type="dfn" href="#pipeline-input" id="ref-for-pipeline-input">inputs</a>, <a data-link-type="dfn" href="#pipeline-output" id="ref-for-pipeline-output">outputs</a>, and attached <a data-link-type="dfn" href="#resource" id="ref-for-resource">resources</a>.</p>
    <li data-md>
     <p>a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="dispatch-command">dispatch command</dfn> executes a <a data-link-type="dfn" href="#gpucomputepipeline" id="ref-for-gpucomputepipeline">compute pipeline</a> in the context of <a data-link-type="dfn" href="#pipeline-input" id="ref-for-pipeline-input①">inputs</a> and attached <a data-link-type="dfn" href="#resource" id="ref-for-resource①">resources</a>.</p>
   </ul>
   <p>Both kinds of pipelines use shaders written in WGSL.</p>
   <p>A <dfn data-dfn-type="dfn" data-noexport id="shader">shader<a class="self-link" href="#shader"></a></dfn> is the portion of a WGSL program that executes a <a data-link-type="dfn" href="#shader-stages" id="ref-for-shader-stages">shader stage</a> in a pipeline.
A shader comprises:</p>
   <ul>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#entry-point" id="ref-for-entry-point">entry point</a> <a data-link-type="dfn" href="#function-function" id="ref-for-function-function">function</a>.</p>
    <li data-md>
     <p>The transitive closure of all called functions, starting with the entry point.
This set includes both <a data-link-type="dfn" href="#user-defined-function" id="ref-for-user-defined-function">user-defined</a> and <a data-link-type="dfn" href="#built-in-functions" id="ref-for-built-in-functions">built-in</a> functions.
(For a more rigorous definition, see "<a data-link-type="dfn" href="#functions-in-a-shader-stage" id="ref-for-functions-in-a-shader-stage">functions in a shader stage</a>".)</p>
    <li data-md>
     <p>The set of variables and constants <a data-link-type="dfn" href="#statically-accessed" id="ref-for-statically-accessed">statically accessed</a> by all those functions.</p>
    <li data-md>
     <p>The set of types used to define or analyze all those functions, variables, and constants.</p>
   </ul>
   <p>When executing a shader stage, the implementation:</p>
   <ul>
    <li data-md>
     <p>Binds <a data-link-type="dfn" href="#resource" id="ref-for-resource②">resources</a> to variables in the shader’s <a data-link-type="dfn" href="#resource-interface-of-a-shader" id="ref-for-resource-interface-of-a-shader">resource interface</a>,
making the contents of those resources available to the shader during execution.</p>
    <li data-md>
     <p>Allocates storage for other <a data-link-type="dfn" href="#module-scope" id="ref-for-module-scope">module-scope</a> variables,
and populates that storage with the specified initial values.</p>
    <li data-md>
     <p>Populates the formal parameters of the entry point, if they exist, with the stage’s pipeline inputs.</p>
    <li data-md>
     <p>Connects the entry point return value, if one exists, to the stage’s pipeline outputs.</p>
    <li data-md>
     <p>Then it invokes the entry point.</p>
   </ul>
   <p>A WGSL program is organized into:</p>
   <ul>
    <li data-md>
     <p>Functions, which specify execution behaviour.</p>
    <li data-md>
     <p>Statements, which are declarations or units of executable behaviour.</p>
    <li data-md>
     <p>Literals, which are text representations for pure mathematical values.</p>
    <li data-md>
     <p>Constants, each providing a name for a value computed at a specific time.</p>
    <li data-md>
     <p>Variables, each providing a name for storage for holding a value.</p>
    <li data-md>
     <p>Expressions, each of which combines a set of values to produce a result value.</p>
    <li data-md>
     <p>Types, each of which describes:</p>
     <ul>
      <li data-md>
       <p>A set of values.</p>
      <li data-md>
       <p>Constraints on supported expressions.</p>
      <li data-md>
       <p>The semantics of those expressions.</p>
     </ul>
   </ul>
   <p>WGSL is an imperative language: behaviour is specified as a sequence of statements to execute.
Statements:</p>
   <ul>
    <li data-md>
     <p>Declare constants or variables</p>
    <li data-md>
     <p>Modify the contents of variables</p>
    <li data-md>
     <p>Modify execution order using structured programming constructs:</p>
     <ul>
      <li data-md>
       <p>Selective execution: if/else/elseif, switch</p>
      <li data-md>
       <p>Repetition: loop, for</p>
      <li data-md>
       <p>Escaping a nested execution construct: break, continue</p>
      <li data-md>
       <p>Refactoring: function call and return</p>
      <li data-md>
       <p>Discard (fragment shaders only): terminating the invocation and throwing away the output</p>
     </ul>
    <li data-md>
     <p>Evaluate expressions to compute values as part of the above behaviours.</p>
   </ul>
   <p>WGSL is statically typed: each value computed by a particular expression is in a specific type,
determined only by examining the program source.</p>
   <p>WGSL has types to describe booleans, numbers, vectors, matrices, and aggregations
of these in the form of arrays and structures.
Additional types describe memory.</p>
   <p>WGSL does not have implicit conversions or promotions between numeric or boolean types.
Converting a value from one numeric or boolean type to another requires
an explicit <a href="#conversion-expr">conversion</a>, <a href="#type-constructor-expr">construction</a>, or <a href="#bitcast-expr">reinterpretation of bits</a>.
This also applies to vector types.</p>
   <p>WGSL has texture and sampler types.
Together with their associated built-in functions, these support functionality
commonly used for graphics rendering, and commonly provided by GPUs.</p>
   <p>The work of a shader stage is partitioned into one or more <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="invocations">invocations</dfn>,
each of which executes the entry point, but under slightly different conditions.
Invocations in a shader stage share access to certain variables:</p>
   <ul>
    <li data-md>
     <p>All invocations in the stage share the resources in the shader interface.</p>
    <li data-md>
     <p>In a <a data-link-type="dfn" href="#compute-shader-stage" id="ref-for-compute-shader-stage">compute shader</a>, invocations in the same <a data-link-type="dfn" href="#compute-shader-stage-workgroup" id="ref-for-compute-shader-stage-workgroup">workgroup</a> share
 variables in the <a data-link-type="dfn" href="#storage-classes-workgroup" id="ref-for-storage-classes-workgroup">workgroup</a> <a data-link-type="dfn" href="#storage-classes" id="ref-for-storage-classes">storage class</a>.
 Invocations in different workgroups do not share those variables.</p>
   </ul>
   <p>However, the invocations act on different sets of pipeline inputs, including built-in inputs
that provide an identifying value to distinguish an invocation from its peers.
Also, each invocation has its own independent storage space in the form
of variables in the <a data-link-type="dfn" href="#storage-classes-private" id="ref-for-storage-classes-private">private</a> and <a data-link-type="dfn" href="#storage-classes-function" id="ref-for-storage-classes-function">function</a> storage classes.</p>
   <p>Invocations within a shader stage execute concurrently, and may often execute in parallel.
The shader author is responsible for ensuring the dynamic behaviour of the invocations
in a shader stage:</p>
   <ul>
    <li data-md>
     <p>Meet the uniformity requirements of certain primitive operations, including texture sampling and control barriers.</p>
    <li data-md>
     <p>Coordinate potentially conflicting accesses to shared variables, to avoid race conditions.</p>
   </ul>
   <p>WGSL sometimes permits several possible behaviours for a given feature.
This is a portability hazard, as different implementations may exhibit the different behaviours.
The design of WGSL aims to minimize such cases, but is constrained by feasibility,
and goals for achieving high performance across a broad range of devices.</p>
   <h3 class="heading settled" data-level="1.3" id="notation"><span class="secno">1.3. </span><span class="content">Notation</span><a class="self-link" href="#notation"></a></h3>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="floor-expression">floor expression</dfn> is defined over real numbers <var>x</var>:</p>
   <ul>
    <li data-md>
     <p>⌊<var>x</var>⌋ = <var>k</var>, where <var>k</var> is the unique integer such that <var>k</var> ≤ <var>x</var> &lt; <var>k</var>+1</p>
   </ul>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ceiling-expression">ceiling expression</dfn> is defined over real numbers <var>x</var>:</p>
   <ul>
    <li data-md>
     <p>⌈<var>x</var>⌉ = <var>k</var>, where <var>k</var> is the unique integer such that <var>k</var>-1 &lt; <var>x</var> ≤ <var>k</var></p>
   </ul>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="roundup">roundUp</dfn> function is defined for positive integers <var>k</var> and <var>n</var> as:</p>
   <ul>
    <li data-md>
     <p>roundUp(<var>k</var>, <var>n</var>) = ⌈<var>n</var> ÷ <var>k</var>⌉ × <var>k</var></p>
   </ul>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="transpose">transpose</dfn> of an <var>n</var>-column <var>m</var>-row matrix <var>A</var> is the <var>m</var>-column <var>n</var>-row matrix <var>A</var><sup>T</sup> formed by copying the rows of <var>A</var> as the columns of <var>A</var><sup>T</sup>:</p>
   <ul>
    <li data-md>
     <p>transpose(<var>A</var>) = <var>A</var><sup>T</sup></p>
    <li data-md>
     <p>transpose(<var>A</var>)<sub><var>i</var>,<var>j</var></sub> = <var>A</var><sub><var>j</var>,<var>i</var></sub></p>
   </ul>
   <p>The transpose of a column vector is defined by interpreting the column vector as a 1-row matrix.
Similarly, the transpose of a row vector is defined by interpreting the row vector as a 1-column matrix.</p>
   <h2 class="heading settled" data-level="2" id="program-lifecycle"><span class="secno">2. </span><span class="content">Shader Lifecycle</span><a class="self-link" href="#program-lifecycle"></a></h2>
   <p>There are four key events in the lifecycle of a WGSL program and the shaders it may contain.
The first two correspond to the WebGPU API methods used to prepare a WGSL program
for execution.
The last two are the start and end of execution of a shader.</p>
   <p>The events are:</p>
   <ol>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="shader-module-creation">Shader module creation</dfn></p>
     <ul>
      <li data-md>
       <p>This occurs when the <a href="https://gpuweb.github.io/gpuweb/#dom-gpudevice-createshadermodule">WebGPU createShaderModule</a> method
is called.
The source text for a WGSL program is provided at this time.</p>
     </ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pipeline-creation">Pipeline creation</dfn></p>
     <ul>
      <li data-md>
       <p>This occurs when the <a href="https://gpuweb.github.io/gpuweb/#dom-gpudevice-createcomputepipeline">WebGPU createComputePipeline</a> method
or the <a href="https://gpuweb.github.io/gpuweb/#dom-gpudevice-createrenderpipeline">WebGPU createRenderPipeline</a> method
is invoked.
These methods use one or more previously created shader modules, together with other
configuration information.</p>
     </ul>
    <li data-md>
     <p><dfn data-dfn-type="dfn" data-noexport id="shader-execution-start">Shader execution start<a class="self-link" href="#shader-execution-start"></a></dfn></p>
     <ul>
      <li data-md>
       <p>This occurs when a <a data-link-type="dfn" href="#draw-command" id="ref-for-draw-command">draw</a> or <a data-link-type="dfn" href="#dispatch-command" id="ref-for-dispatch-command">dispatch command</a> is issued to the GPU,
begins executing the pipeline,
and invokes the <a data-link-type="dfn" href="#shader-stages" id="ref-for-shader-stages①">shader stage</a> <a data-link-type="dfn" href="#entry-point" id="ref-for-entry-point①">entry point</a> function.</p>
     </ul>
    <li data-md>
     <p><dfn data-dfn-type="dfn" data-noexport id="shader-execution-end">Shader execution end<a class="self-link" href="#shader-execution-end"></a></dfn></p>
     <ul>
      <li data-md>
       <p>This occurs when all work in the shader completes:</p>
       <ul>
        <li data-md>
         <p>all its <a data-link-type="dfn" href="#invocations" id="ref-for-invocations">invocations</a> terminate</p>
        <li data-md>
         <p>and all accesses to <a data-link-type="dfn" href="#resource" id="ref-for-resource③">resources</a> complete</p>
        <li data-md>
         <p>outputs, if any, are passed to downstream pipeline stages.</p>
       </ul>
     </ul>
   </ol>
   <p>The events are ordered due to:</p>
   <ul>
    <li data-md>
     <p>data dependencies: shader execution requires a pipeline, and a pipeline requires a shader module.</p>
    <li data-md>
     <p>causality: the shader must start executing before it can finish executing.</p>
   </ul>
   <h3 class="heading settled" data-level="2.1" id="kinds-of-errors"><span class="secno">2.1. </span><span class="content">Kinds of errors</span><a class="self-link" href="#kinds-of-errors"></a></h3>
   <p>A <dfn data-dfn-type="dfn" data-export id="program-error">program error<a class="self-link" href="#program-error"></a></dfn> is a failure to satisfy the requirements of this specification.</p>
   <p>There are three kinds of errors, corresponding to the shader lifecycle:</p>
   <ul>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="shader-creation-error">shader-creation error</dfn> is an error feasibly detectable at <a data-link-type="dfn" href="#shader-module-creation" id="ref-for-shader-module-creation">shader module creation</a> time.
Detection must rely only on the WGSL program source text
and other information available to the <code>createShaderModule</code> API method.</p>
    <li data-md>
     <p>A <dfn data-dfn-type="dfn" data-export id="pipeline-creation-error">pipeline-creation error<a class="self-link" href="#pipeline-creation-error"></a></dfn> is an error feasibly detectable at <a data-link-type="dfn" href="#pipeline-creation" id="ref-for-pipeline-creation">pipeline creation</a> time.
Detection must rely only on the WGSL program source text
and other information available to the particular pipeline creation API method.</p>
    <li data-md>
     <p>A <dfn data-dfn-type="dfn" data-export id="dynamic-error">dynamic error<a class="self-link" href="#dynamic-error"></a></dfn> is an error occurring during shader execution.
These errors may or may not be detectable.</p>
   </ul>
   <p class="note" role="note"><span>Note:</span> For example, a race condition may not be detectable.</p>
   <p>Each requirement in this specification corresponds to a single kind of error.
Generally, a requirement corresponds to the earliest error kind at which its violation could be feasibly detected.
When unclear, the corresponding error kind is explicitly specified.</p>
   <p>The WebGPU specification describes the consequences of each kind of error.</p>
   <p>TODO: Update the WebGPU spec, referring back to the three kinds of errors defined here.</p>
   <h2 class="heading settled" data-level="3" id="textual-structure"><span class="secno">3. </span><span class="content">Textual structure TODO</span><a class="self-link" href="#textual-structure"></a></h2>
   <p>TODO: This is a stub.</p>
   <p>A WGSL program is text.
This specification does not prescribe a particular encoding for that text.
However, UTF-8 is always a valid encoding for a WGSL program.</p>
   <p class="note" role="note"><span>Note:</span> The intent of promoting UTF-8 like this is to simplify interchange of WGSL programs
and to encourage interoperability among tools.</p>
   <h3 class="heading settled" data-level="3.1" id="comments"><span class="secno">3.1. </span><span class="content">Comments</span><a class="self-link" href="#comments"></a></h3>
   <p>Comments begin with <code>//</code> and continue to the end of the current line. There are no multi-line comments.</p>
   <p>TODO: What indicates the end of a line?  (E.g. A line ends at the next linefeed or at the end of the program)</p>
   <h3 class="heading settled" data-level="3.2" id="tokens"><span class="secno">3.2. </span><span class="content">Tokens TODO</span><a class="self-link" href="#tokens"></a></h3>
   <h3 class="heading settled" data-level="3.3" id="literals"><span class="secno">3.3. </span><span class="content">Literals TODO</span><a class="self-link" href="#literals"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <th>Token
      <th>Definition 
    <tbody>
     <tr>
      <td><code>DECIMAL_FLOAT_LITERAL</code>
      <td><code>(-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?</code> 
     <tr>
      <td><code>HEX_FLOAT_LITERAL</code>
      <td><code>-?0x([0-9a-fA-F]*\.?[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)(p|P)(\+|-)?[0-9]+</code> 
     <tr>
      <td><code>INT_LITERAL</code>
      <td><code>-?0x[0-9a-fA-F]+|0|-?[1-9][0-9]*</code> 
     <tr>
      <td><code>UINT_LITERAL</code>
      <td><code>0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u</code> 
   </table>
   <p class="note" role="note"><span>Note:</span> literals are parsed greedily. This means that for statements like <code>a -5</code> this will <em>not</em> parse as <code>a</code> <code>minus</code> <code>5</code> but instead as <code>a</code> <code>-5</code> which
      may be unexpected. A space must be inserted after the <code>-</code> if the first
      expression is desired.</p>
<pre class="def">const_literal
  : INT_LITERAL
  | UINT_LITERAL
  | FLOAT_LITERAL
  | TRUE
  | FALSE
</pre>
<pre class="def">FLOAT_LITERAL
  : DECIMAL_FLOAT_LITERAL
  | HEX_FLOAT_LITERAL
</pre>
   <h3 class="heading settled" data-level="3.4" id="keywords"><span class="secno">3.4. </span><span class="content">Keywords TODO</span><a class="self-link" href="#keywords"></a></h3>
   <p>TODO: <em>Stub</em></p>
   <p>See <a href="#keyword-summary">§ 14.1 Keyword Summary</a> for a list of keywords.</p>
   <h3 class="heading settled" data-level="3.5" id="identifiers"><span class="secno">3.5. </span><span class="content">Identifiers TODO</span><a class="self-link" href="#identifiers"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <th>Token
      <th>Definition 
    <tbody>
     <tr>
      <td><code>IDENT</code>
      <td><code>[a-zA-Z][0-9a-zA-Z_]*</code> 
   </table>
   <p>An identifier must not have the same spelling as a keyword or as a reserved keyword.</p>
   <h3 class="heading settled" data-level="3.6" id="attributes"><span class="secno">3.6. </span><span class="content">Attributes</span><a class="self-link" href="#attributes"></a></h3>
   <p>An <dfn data-dfn-type="dfn" data-noexport id="attribute">attribute<a class="self-link" href="#attribute"></a></dfn> modifies an object or type.
WGSL provides a unified syntax for applying attributes.
Attributes are used for a variety of purposes such as specifying the interface with the API.
Generally speaking, from the language’s point-of-view, attributes can be
ignored for the purposes of type and semantic checking.</p>
   <p>An attribute must not be specified more than once per object or type.</p>
<pre class="def">attribute_list
  : ATTR_LEFT (attribute COMMA)* attribute ATTR_RIGHT

attribute
  : IDENT PAREN_LEFT (literal_or_ident COMMA)* literal_or_ident PAREN_RIGHT
  | IDENT

literal_or_ident
  : FLOAT_LITERAL
  | INT_LITERAL
  | UINT_LITERAL
  | IDENT
</pre>
   <table class="data">
    <caption>Attributes defined in WGSL</caption>
    <thead>
     <tr>
      <th>Attribute
      <th>Valid Values
      <th>Description 
    <tbody>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="attribute" data-dfn-type="dfn" data-noexport id="attribute-align"><code>align</code></dfn> 
      <td>positive i32 literal 
      <td>
       Must only be applied to a member of a <a data-link-type="dfn" href="#structure" id="ref-for-structure">structure</a> type. 
       <p>Must be a power of 2.</p>
       <p>See memory layout <a href="#alignment-and-size">alignment and size</a>.</p>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="attribute" data-dfn-type="dfn" data-lt="binding" data-noexport id="attribute-binding"><code>binding</code> </dfn>
      <td>non-negative i32 literal 
      <td>
       Must only be applied to a <a data-link-type="dfn" href="#resource" id="ref-for-resource④">resource</a> variable. 
       <p>Specifies the binding number of the resource in a bind <a data-link-type="dfn" href="#attribute-group" id="ref-for-attribute-group">group</a>.
    See <a href="#resource-interface">§ 9.3.2 Resource interface</a>.</p>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="attribute" data-dfn-type="dfn" data-noexport id="attribute-block"><code>block</code></dfn> 
      <td><em>None</em> 
      <td>
       Must only be applied to a <a data-link-type="dfn" href="#structure" id="ref-for-structure①">structure</a> type. 
       <p>Indicates this structure type represents the contents of a buffer
    resource occupying a single binding slot in the <a data-link-type="dfn" href="#resource-interface-of-a-shader" id="ref-for-resource-interface-of-a-shader①">shader’s resource interface</a>.</p>
       <p>The <code>block</code> attribute must be applied to a structure type used as the <a data-link-type="dfn" href="#store-type" id="ref-for-store-type">store type</a> of a <a data-link-type="dfn" href="#uniform-buffer" id="ref-for-uniform-buffer">uniform buffer</a> or <a data-link-type="dfn" href="#storage-buffer" id="ref-for-storage-buffer">storage buffer</a> variable.</p>
       <p>A structure type with the block attribute must not be:</p>
       <ul>
        <li data-md>
         <p>the element type of an <a data-link-type="dfn" href="#array" id="ref-for-array">array</a> type</p>
        <li data-md>
         <p>the member type in another structure</p>
       </ul>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="attribute" data-dfn-type="dfn" data-lt="builtin" data-noexport id="attribute-builtin"><code>builtin</code> </dfn>
      <td>a builtin variable identifier 
      <td>
       Must only be applied to an entry point function parameter, entry point
    return type, or member of a <a data-link-type="dfn" href="#structure" id="ref-for-structure②">structure</a>. 
       <p>Declares a builtin variable.
    See <a href="#builtin-variables">§ 15 Built-in variables</a>.</p>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="attribute" data-dfn-type="dfn" data-lt="group" data-noexport id="attribute-group"><code>group</code> </dfn>
      <td>non-negative i32 literal 
      <td>
       Must only be applied to a <a data-link-type="dfn" href="#resource" id="ref-for-resource⑤">resource</a> variable. 
       <p>Specifies the binding group of the resource.
    See <a href="#resource-interface">§ 9.3.2 Resource interface</a>.</p>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="attribute" data-dfn-type="dfn" data-lt="interpolate" data-noexport id="attribute-interpolate"><code>interpolate</code> </dfn>
      <td>
       One or two parameters. 
       <p>The first parameter must be an <a data-link-type="dfn" href="#interpolation-type" id="ref-for-interpolation-type">interpolation type</a>.
    The second parameter, if present, must specify the <a data-link-type="dfn" href="#interpolation-sampling" id="ref-for-interpolation-sampling">interpolation sampling</a>.</p>
      <td>
       Must only be applied to an entry point function parameter, entry point
    return type, or member of a <a data-link-type="dfn" href="#structure" id="ref-for-structure③">structure</a> type.
    Must only be applied to declarations of scalars or vectors of floating-point type.
    Must not be used with the <a data-link-type="dfn" href="#compute" id="ref-for-compute">compute</a> shader stage. 
       <p>Specifies how the user-defined IO must be interpolated.
    The attribute is only significant on user-defined <a data-link-type="dfn" href="#vertex" id="ref-for-vertex">vertex</a> outputs
    and <a data-link-type="dfn" href="#fragment" id="ref-for-fragment">fragment</a> inputs.
    See <a href="#interpolation">§ 9.3.1.3 Interpolation</a>.</p>
     <tr>
      <td><dfn data-dfn-for="attribute" data-dfn-type="dfn" data-lt="invariant" data-noexport id="attribute-invariant"><code>invariant</code> <a class="self-link" href="#attribute-invariant"></a></dfn>
      <td><em>None</em> 
      <td>
       Must only be applied to the <code>position</code> built-in variable. 
       <p>When applied to the <code>position</code> <a data-link-type="dfn" href="#built-in-output-variable" id="ref-for-built-in-output-variable">built-in output variable</a> of a vertex
    shader, the computation of the result is invariant across different
    programs and different invocations of the same entry point.
    That is, if the data and control flow match for two <code>position</code> outputs in
    different entry points, then the result values are guaranteed to be the
    same.
    There is no affect on a <code>position</code> <a data-link-type="dfn" href="#built-in-input-variable" id="ref-for-built-in-input-variable">built-in input variable</a>.</p>
       <p class="note" role="note"><span>Note:</span> this attribute maps to the <code>Invariant</code> decoration in SPIR-V, the <code>precise</code> qualifier in HLSL, and the <code>invariant</code> qualifier in GLSL.</p>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="attribute" data-dfn-type="dfn" data-lt="location" data-noexport id="attribute-location"><code>location</code> </dfn>
      <td>non-negative i32 literal 
      <td>
       Must only be applied to an entry point function parameter, entry point
    return type, or member of a <a data-link-type="dfn" href="#structure" id="ref-for-structure④">structure</a> type.
    Must only be applied to declarations of <a data-link-type="dfn" href="#numeric-scalar" id="ref-for-numeric-scalar">numeric scalar</a> or <a data-link-type="dfn" href="#numeric-vector" id="ref-for-numeric-vector">numeric
    vector</a> type.
    Must not be used with the <a data-link-type="dfn" href="#compute" id="ref-for-compute①">compute</a> shader stage. 
       <p>Specifies a part of the user-defined IO of an entry point.
    See <a href="#input-output-locations">§ 9.3.1.4 Input-output Locations</a>.</p>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="attribute" data-dfn-type="dfn" data-lt="override" data-noexport id="attribute-override"><code>override</code> </dfn>
      <td>An optional, non-negative i32 literal 
      <td>
       Must only be applied to module scope constant declaration of <a data-link-type="dfn" href="#scalar" id="ref-for-scalar">scalar</a> type. 
       <p>Specifies a <a data-link-type="dfn" href="#pipeline-overridable" id="ref-for-pipeline-overridable">pipeline-overridable</a> constant.
    In the WebGPU API, pipeline overridable constants are specified by the identifier
    of the constant the attribute is applied to.
    If the optional parameter is specified, the pipeline overridable constant
    is referred to by the numeric id specified instead.</p>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="attribute" data-dfn-type="dfn" data-noexport id="attribute-size"><code>size</code></dfn> 
      <td>positive i32 literal 
      <td>
       Must only be applied to a member of a <a data-link-type="dfn" href="#structure" id="ref-for-structure⑤">structure</a> type. 
       <p>The number of bytes reserved in the struct for this member.</p>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="attribute" data-dfn-type="dfn" data-noexport id="attribute-stage"><code>stage</code></dfn> 
      <td><code>compute</code>, <code>vertex</code>, or <code>fragment</code> 
      <td>
       Must only be applied to a function declaration. 
       <p>Declares an entry point by specifying its pipeline stage.</p>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="attribute" data-dfn-type="dfn" data-noexport id="attribute-stride"><code>stride</code></dfn> 
      <td>positive i32 literal 
      <td>
       Must only be applied to an <a data-link-type="dfn" href="#array" id="ref-for-array①">array</a> type. 
       <p>The number of bytes from the start of one element of the array to the
    start of the next element.</p>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="attribute" data-dfn-type="dfn" data-noexport id="attribute-workgroup_size"><code>workgroup_size</code></dfn> 
      <td>
       One, two or three parameters. 
       <p>Each parameter is either a literal or <a href="#module-constants">module-scope constant</a>.
    All parameters must be of the same type, either i32 or u32.</p>
      <td>
       Must be applied to a <a data-link-type="dfn" href="#compute-shader-stage" id="ref-for-compute-shader-stage①">compute shader</a> entry point function.
    Must not be applied to any other object. 
       <p>Specifies the x, y, and z dimensions of the <a data-link-type="dfn" href="#workgroup-grid" id="ref-for-workgroup-grid">workgroup grid</a> for the compute shader.</p>
       <p>The first parameter specifies the x dimension.
    The second parameter, if provided, specifies the y dimension, otherwise is assumed to be 1.
    The third parameter, if provided, specifies the z dimension, otherwise is assumed to be 1.
    Each dimension must be at least 1 and at most an upper bound specified by the WebGPU API.</p>
   </table>
   <h3 class="heading settled" data-level="3.7" id="directives"><span class="secno">3.7. </span><span class="content">Directives TODO</span><a class="self-link" href="#directives"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="directive">directive</dfn> is a token sequence which modifies how a WGSL
program is processed by a WebGPU implementation.
See <a href="#enable-directive-section">§ 10.1 Enable Directive</a>.</p>
   <h3 class="heading settled" data-level="3.8" id="declaration-and-scope"><span class="secno">3.8. </span><span class="content">Declaration and scope</span><a class="self-link" href="#declaration-and-scope"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="declaration">declaration</dfn> associates an identifier with one of
the following kinds of objects:</p>
   <ul>
    <li data-md>
     <p>a type</p>
    <li data-md>
     <p>a value</p>
    <li data-md>
     <p>a variable</p>
    <li data-md>
     <p>a function</p>
    <li data-md>
     <p>a formal parameter</p>
   </ul>
   <p>In other words, a declaration introduces a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="name">name</dfn> for an object.
A name cannot be used before it is declared.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="scope">scope</dfn> of a declaration is the set of
program locations where a use of the declared identifier potentially denotes
its associated object.
We say the identifier is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="in-scope">in scope</dfn> (of the declaration) at those source locations.</p>
   <p>Each kind of declaration has its own rule for determining its scope.
In general the scope is a span of text beginning immediately after the end of the
declaration.</p>
   <p>Certain objects are provided by the WebGPU implementation,
and are treated as if they have already been declared at the start of a WGSL program.
We say such objects are <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="predeclared">predeclared</dfn>.
Their scope is the entire WGSL program.
Examples of predeclared objects are:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#built-in-functions" id="ref-for-built-in-functions①">built-in functions</a>, and</p>
    <li data-md>
     <p>built-in types.</p>
   </ul>
   <p>A declaration must not introduce a name when that identifier is
already in scope with the same end scope as another instance of that name.
When an identifier is used in scope of one or more declarations for that name,
the identifier will denote the object of the declaration appearing closest to
that use.
We say the identifier use <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="resolves">resolves</dfn> to that declaration.</p>
   <p class="note" role="note"><span>Note:</span> A declaration always precedes its identifier’s scope.
Therefore, the nearest in scope declaration of an identifier always precedes the
use of the identifier.</p>
   <div class="example no-marker" id="example-0659df8c">
    <a class="self-link" href="#example-0659df8c"></a>
    <div class="marker">EXAMPLE: Valid and invalid declarations</div>
<pre>// Invalid, cannot reuse built-in function names.
var&lt;private> modf: f32 = 0.0;

// Valid, foo_1 is in scope until the end of the program.
var&lt;private> foo: f32 = 0.0; // foo_1

// Valid, bar_1 is in scope until the end of the program.
var&lt;private> bar: u32 = 0u; // bar_1

// Valid, my_func_1 is in scope until the end of the program.
// Valid, foo_2 is in scope until the end of the function.
fn my_func(foo: f32) { // my_func_1, foo_2
  // Any reference to 'foo' resolves to the function parameter.

  // Invalid, the scope of foo_2 ends at the of the function.
  var foo: f32; // foo_3

  // Valid, bar_2 is in scope until the end of the function.
  var bar: u32; // bar_2
  // References to 'bar' resolve to bar_2
  {
    // Valid, bar_3 is in scope until the end of the compound statement.
    var bar: u32; // bar_3
    // References to 'bar' resolve to bar_3

    // Invalid, bar_4 has the same end scope as bar_3.
    var bar: i32; // bar_4

    // Valid, i_1 is in scope until the end of the for loop
    for (var i: i32 = 0; i &lt; 10; i = i + 1) { // i_1
      // Invalid, i_2 has the same end scope as i_1.
      var i: i32 = 1; // i_2.
    }
  }

  // Invalid, bar_5 has the same end scope as bar_2.
  var bar: u32; // bar_5
}

// Invalid, bar_6 has the same end scope as bar_1.
var&lt;private> bar: u32 = 1u; // bar_6

// Invalid, my_func_2 has the same end scope as my_func_1.
fn my_func() { } // my_func_2

// Valid, my_foo_1 is in scope until the end of the program.
fn my_foo(
  // Valid, my_foo_2 is in scope until the end of the function.
  my_foo: i32 // my_foo_2
) { }
</pre>
   </div>
   <p>There are multiple levels of scoping depending on how and where things are
declared.</p>
   <p>When an identifier is used, it must be in scope for some declaration, or as part of a directive.</p>
   <p>A declaration is at <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="module-scope">module scope</dfn> if the declaration appears outside
the text of any other declaration.</p>
   <p class="note" role="note"><span>Note:</span> Only a <a data-link-type="dfn" href="#function-declaration" id="ref-for-function-declaration">function declaration</a> can contain other declarations.</p>
   <h2 class="heading settled" data-level="4" id="types"><span class="secno">4. </span><span class="content">Types</span><a class="self-link" href="#types"></a></h2>
   <p>Programs calculate values.</p>
   <p>In WGSL, a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="type">type</dfn> is set of values, and each value belongs to exactly one type.
A value’s type determines the syntax and semantics of operations that can be performed on that value.</p>
   <p>For example, the mathematical number 1 corresponds to three distinct values in WGSL:</p>
   <ul>
    <li data-md>
     <p>the 32-bit signed integer value <code>1</code>,</p>
    <li data-md>
     <p>the 32-bit unsigned integer value <code>1u</code>, and</p>
    <li data-md>
     <p>the 32-bit floating point value <code>1.0</code>.</p>
   </ul>
   <p>WGSL treats these as different because their machine representation and operations differ.</p>
   <p>A type is either <a data-link-type="dfn" href="#predeclared" id="ref-for-predeclared">predeclared</a>, or created in WGSL source via a <a data-link-type="dfn" href="#declaration" id="ref-for-declaration">declaration</a>.</p>
   <p>We distinguish between the <em>concept</em> of a type and the <em>syntax</em> in WGSL to denote that type.
In many cases the spelling of a type in this specification is the same as its WGSL syntax.
For example:</p>
   <ul>
    <li data-md>
     <p>the set of 32-bit unsigned integer values is spelled <code>u32</code> in this specification,
and also in a WGSL program.</p>
    <li data-md>
     <p>the spelling is different for structure types, or types containing structures.</p>
   </ul>
   <p>Some WGSL types are only used for analyzing a source program and
for determining the program’s runtime behaviour.
This specification will describe such types, but they do not appear in WGSL source text.</p>
   <p class="note" role="note"><span>Note:</span> WGSL <a data-link-type="dfn" href="#reference-type" id="ref-for-reference-type">reference types</a> are not written in WGSL programs. See TODO forward reference to ptr/ref.</p>
   <h3 class="heading settled" data-level="4.1" id="type-checking-section"><span class="secno">4.1. </span><span class="content">Type Checking</span><a class="self-link" href="#type-checking-section"></a></h3>
   <p>A WGSL value is computed by evaluating an expression.
An <dfn data-dfn-type="dfn" data-noexport id="expression">expression<a class="self-link" href="#expression"></a></dfn> is a segment of source text
parsed as one of the WGSL grammar rules whose name ends with "<code>_expression</code>".
An expression <em>E</em> can contain <dfn data-dfn-type="dfn" data-noexport id="subexpressions">subexpressions<a class="self-link" href="#subexpressions"></a></dfn> which are expressions properly contained
in the outer expression <em>E</em>.</p>
   <p>The particular value produced by an expression evaluation depends on:</p>
   <ul>
    <li data-md>
     <p><dfn data-dfn-type="dfn" data-noexport id="static-context">static context<a class="self-link" href="#static-context"></a></dfn>:
the source text surrounding the expression, and</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="dynamic-context">dynamic context</dfn>:
the state of the invocation evaluating the expression,
and the execution context in which the invocation is running.</p>
   </ul>
   <p>The values that may result from evaluating a particular expression will always belong to a specific WGSL type,
known as the <dfn data-dfn-type="dfn" data-noexport id="static-type">static type<a class="self-link" href="#static-type"></a></dfn> of the expression.
The rules of WGSL are designed so that the static type of an expression depends only on the expression’s static context.</p>
   <p>Statements often use expressions, and may place requirements on the static types of those expressions.
For example:</p>
   <ul>
    <li data-md>
     <p>The condition expression of an <code>if</code> statement must be of type <a data-link-type="dfn" href="#bool" id="ref-for-bool">bool</a>.</p>
    <li data-md>
     <p>In a <code>let</code> declaration, the initializer must evaluate to the declared type of the constant.</p>
   </ul>
   <p><dfn data-dfn-type="dfn" data-noexport id="type-checking">Type checking<a class="self-link" href="#type-checking"></a></dfn> a successfully parsed WGSL program is the process of mapping
each expression to its static type,
and determining if the type requirements of each statement are satisfied.</p>
   <p>A <dfn data-dfn-type="dfn" data-noexport id="type-assertion">type assertion<a class="self-link" href="#type-assertion"></a></dfn> is a mapping from some WGSL source expression to a WGSL type.
The notation</p>
   <blockquote>
    <p><em>e</em> : <em>T</em></p>
   </blockquote>
   <p>is a type assertion meaning <em>T</em> is the static type of WGSL expression <em>e</em>.</p>
   <p class="note" role="note"><span>Note:</span> A type assertion is a statement of fact about the text of a program.
It is not a runtime check.</p>
   <p>Finding static types for expressions can be performed by recursively applying type rules.
A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="type-rule">type rule</dfn> has two parts:</p>
   <ul>
    <li data-md>
     <p>A conclusion, stated as a type assertion for an expression.
The expression in the type assertion is specified schematically,
using <em>italicized</em> names to denote subexpressions
or other syntactically-determined parameters.</p>
    <li data-md>
     <p>Preconditions, consisting of:</p>
     <ul>
      <li data-md>
       <p>Type assertions for subexpressions, when there are subexpressions.</p>
      <li data-md>
       <p>Conditions on the other schematic parameters, if any.</p>
      <li data-md>
       <p>How the expression is used in a statement.</p>
      <li data-md>
       <p>Optionally, other static context.</p>
     </ul>
   </ul>
   <p>A <dfn data-dfn-type="dfn" data-noexport id="type-rule-applies-to-an-expression">type rule applies to an expression<a class="self-link" href="#type-rule-applies-to-an-expression"></a></dfn> when:</p>
   <ul>
    <li data-md>
     <p>The rule’s conclusion matches a valid parse of the expression, and</p>
    <li data-md>
     <p>The rule’s preconditions are satisfied.</p>
   </ul>
   <p>TODO: write an example such as <code>1+2</code>, or <code>3 - a</code>, where <code>a</code> is in-scope of a let declaration with <code>i32</code> type.</p>
   <p>The type rules are designed so that if parsing succeeds, at most one type rule will apply to each expression.
If a type rule applies to an expression, then the conclusion is asserted, and therefore determines the static type of the expression.</p>
   <p>A WGSL source program is <dfn data-dfn-type="dfn" data-noexport id="well-typed">well-typed<a class="self-link" href="#well-typed"></a></dfn> when:</p>
   <ul>
    <li data-md>
     <p>The static type can be determined for each expression in the program by applying the type rules, and</p>
    <li data-md>
     <p>The type requirements for each statement are satisfied.</p>
   </ul>
   <p>Otherwise there is a <dfn data-dfn-type="dfn" data-noexport id="type-error">type error<a class="self-link" href="#type-error"></a></dfn> and the source program is not a valid WGSL program.</p>
   <p>WGSL is a <dfn data-dfn-type="dfn" data-noexport id="statically-typed-language">statically typed language<a class="self-link" href="#statically-typed-language"></a></dfn> because type checking a WGSL program will either succeed or
discover a type error, while only having to inspect the program source text.</p>
   <p>TODO(dneto): Lazy-decay is a tie-breaking rule. The above description can accomodate it by
using priority-levels on potentially-matching type rules.</p>
   <h4 class="heading settled" data-level="4.1.1" id="typing-tables-section"><span class="secno">4.1.1. </span><span class="content">Type rule tables</span><a class="self-link" href="#typing-tables-section"></a></h4>
   <p>The WGSL <a data-link-type="dfn" href="#type-rule" id="ref-for-type-rule">type rules</a> are organized into <dfn data-dfn-type="dfn" data-noexport id="type-rule-tables">type rule tables<a class="self-link" href="#type-rule-tables"></a></dfn>,
with one row per type rule.</p>
   <p>The <dfn data-dfn-type="dfn" data-noexport id="semantics-of-an-expression">semantics of an expression<a class="self-link" href="#semantics-of-an-expression"></a></dfn> is the effect of evaluating that expression,
and is primarily the production of a result value.
The <em>Description</em> column of the type rule that applies to an expression will specify the expression’s semantics.
The semantics usually depends on the values of the type rule parameters, including
the assumed values of any subexpressions.
Sometimes the semantics of an expression includes effects other than producing
a result value, such as the non-result-value effects of its subexpressions.</p>
   <p>TODO: example: non-result-value effect is any side effect of a function call subexpression.</p>
   <h3 class="heading settled" data-level="4.2" id="plain-types-section"><span class="secno">4.2. </span><span class="content">Plain Types</span><a class="self-link" href="#plain-types-section"></a></h3>
   <p><a data-link-type="dfn" href="#plain-type" id="ref-for-plain-type">Plain types</a> are the types for representing boolean values, numbers, vectors,
matrices, or aggregations of such values.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="plain-type">plain type</dfn> is either a <a data-link-type="dfn" href="#scalar" id="ref-for-scalar①">scalar</a> type, an <a data-link-type="dfn" href="#atomic-type" id="ref-for-atomic-type">atomic</a> type, or a <a data-link-type="dfn" href="#composite" id="ref-for-composite">composite</a> type.</p>
   <p class="note" role="note"><span>Note:</span> Plain types in WGSL are similar to Plain-Old-Data types in C++, but also include atomic types.</p>
   <h4 class="heading settled" data-level="4.2.1" id="bool-type"><span class="secno">4.2.1. </span><span class="content">Boolean Type</span><a class="self-link" href="#bool-type"></a></h4>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="bool">bool</dfn> type contains the values <code>true</code> and <code>false</code>.</p>
   <h4 class="heading settled" data-level="4.2.2" id="integer-types"><span class="secno">4.2.2. </span><span class="content">Integer Types</span><a class="self-link" href="#integer-types"></a></h4>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="u32">u32</dfn> type is the set of 32-bit unsigned integers.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="i32">i32</dfn> type is the set of 32-bit signed integers.
It uses a two’s complementation representation, with the sign bit in the most significant bit position.</p>
   <h4 class="heading settled" data-level="4.2.3" id="floating-point-types"><span class="secno">4.2.3. </span><span class="content">Floating Point Type</span><a class="self-link" href="#floating-point-types"></a></h4>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="f32">f32</dfn> type is the set of 32-bit floating point values of the <a data-link-type="biblio" href="#biblio-ieee-754">IEEE-754</a> binary32 (single precision) format.
See <a href="#floating-point-evaluation">§ 12.5 Floating Point Evaluation</a> for details.</p>
   <h4 class="heading settled" data-level="4.2.4" id="scalar-types"><span class="secno">4.2.4. </span><span class="content">Scalar Types</span><a class="self-link" href="#scalar-types"></a></h4>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="scalar">scalar</dfn> types are <a data-link-type="dfn" href="#bool" id="ref-for-bool①">bool</a>, <a data-link-type="dfn" href="#i32" id="ref-for-i32">i32</a>, <a data-link-type="dfn" href="#u32" id="ref-for-u32">u32</a>, and <a data-link-type="dfn" href="#f32" id="ref-for-f32">f32</a>.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="numeric-scalar">numeric scalar</dfn> types are <a data-link-type="dfn" href="#i32" id="ref-for-i32①">i32</a>, <a data-link-type="dfn" href="#u32" id="ref-for-u32①">u32</a>, and <a data-link-type="dfn" href="#f32" id="ref-for-f32①">f32</a>.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="integer-scalar">integer scalar</dfn> types are <a data-link-type="dfn" href="#i32" id="ref-for-i32②">i32</a> and <a data-link-type="dfn" href="#u32" id="ref-for-u32②">u32</a>.</p>
   <h4 class="heading settled" data-level="4.2.5" id="vector-types"><span class="secno">4.2.5. </span><span class="content">Vector Types</span><a class="self-link" href="#vector-types"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="vector">vector</dfn> is a grouped sequence of 2, 3, or 4 <a data-link-type="dfn" href="#scalar" id="ref-for-scalar②">scalar</a> components.</p>
   <table class="data">
    <thead>
     <tr>
      <th>Type
      <th>Description 
    <tbody>
     <tr>
      <td>vec<em>N</em>&lt;<em>T</em>>
      <td>Vector of <em>N</em> elements of type <em>T</em>. <em>N</em> must be in {2, 3, 4} and <em>T</em> must be one of the <a data-link-type="dfn" href="#scalar" id="ref-for-scalar③">scalar</a> types.
                          We say <em>T</em> is the <dfn data-dfn-type="dfn" data-noexport id="component-type">component type<a class="self-link" href="#component-type"></a></dfn> of the vector. 
   </table>
   <p>A vector is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="numeric-vector">numeric vector</dfn> if its component type is a <a data-link-type="dfn" href="#numeric-scalar" id="ref-for-numeric-scalar①">numeric scalar</a>.</p>
   <p>Key use cases of a vector include:</p>
   <ul>
    <li data-md>
     <p>to express both a direction and a magnitude.</p>
    <li data-md>
     <p>to express a position in space.</p>
    <li data-md>
     <p>to express a color in some color space.
For example, the components could be intensities of red, green, and blue,
while the fourth component could be an alpha (opacity) value.</p>
   </ul>
   <p>Many operations on vectors act <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="component-wise">component-wise</dfn>, i.e. the
result vector is formed by operating on each component independently.</p>
   <div class="example wgsl no-marker" id="example-cba2eafd">
    <a class="self-link" href="#example-cba2eafd"></a>
    <div class="marker">EXAMPLE: Vector</div>
<pre class="highlight"><c- n>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->  <c- c1>// is a vector of two f32s.</c->
</pre>
   </div>
   <div class="example component-wise addition no-marker" id="example-e3209b55">
    <a class="self-link" href="#example-e3209b55"></a>
    <div class="marker">EXAMPLE: Component-wise addition</div>
<pre class="highlight"><c- a>let</c-> <c- n>x</c-> : <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-> <c- o>=</c-> <c- n>a</c-> <c- o>+</c-> <c- n>b</c-><c- p>;</c-> <c- c1>// a and b are vec3&lt;f32></c->
<c- c1>// x[0] = a[0] + b[0]</c->
<c- c1>// x[1] = a[1] + b[1]</c->
<c- c1>// x[2] = a[2] + b[2]</c->
</pre>
   </div>
   <h4 class="heading settled" data-level="4.2.6" id="matrix-types"><span class="secno">4.2.6. </span><span class="content">Matrix Types</span><a class="self-link" href="#matrix-types"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="matrix">matrix</dfn> is a grouped sequence of 2, 3, or 4 floating point vectors.</p>
   <table class="data">
    <thead>
     <tr>
      <th>Type
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="matrix type">
      <td>mat<var>N</var>x<var>M</var>&lt;f32> 
      <td>Matrix of <var>N</var> columns and <var>M</var> rows, where <var>N</var> and <var>M</var> are both in {2, 3, 4}.
        Equivalently, it can be viewed as <var>N</var> column vectors of type vec<var>M</var>&lt;f32>. 
   </table>
   <p>The key use case for a matrix is to embody a linear transformation.
In this interpretation, the vectors of a matrix are treated as column vectors.</p>
   <p>The product operator (<code>*</code>) is used to either:</p>
   <ul>
    <li data-md>
     <p>scale the transformation by a scalar magnitude.</p>
    <li data-md>
     <p>apply the transformation to a vector.</p>
    <li data-md>
     <p>combine the transformation with another matrix.</p>
   </ul>
   <p>See <a href="#arithmetic-expr">§ 6.9 Arithmetic Expressions</a>.</p>
   <div class="example wgsl no-marker" id="example-2a4f7518">
    <a class="self-link" href="#example-2a4f7518"></a>
    <div class="marker">EXAMPLE: Matrix</div>
<pre class="highlight"><c- n>mat2x3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->  <c- c1>// This is a 2 column, 3 row matrix of 32-bit floats.</c->
             <c- c1>// Equivalently, it is 2 column vectors of type vec3&lt;f32>.</c->
</pre>
   </div>
   <h4 class="heading settled" data-level="4.2.7" id="atomic-types"><span class="secno">4.2.7. </span><span class="content">Atomic Types</span><a class="self-link" href="#atomic-types"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="atomic-type">atomic type</dfn> encapsulates a <a data-link-type="dfn" href="#scalar" id="ref-for-scalar④">scalar</a> type such that:</p>
   <ul>
    <li data-md>
     <p>atomic objects provide certain guarantees to concurrent observers, and</p>
    <li data-md>
     <p>the only valid operations on atomic objects are the <a href="#atomic-builtin-functions">atomic builtin functions</a>.</p>
   </ul>
   <table class="data">
    <thead>
     <tr>
      <th>Type
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="atomic type">
      <td>atomic&lt;<var>T</var>> 
      <td>Atomic of type <var>T</var>. <var>T</var> must be either <a data-link-type="dfn" href="#u32" id="ref-for-u32③">u32</a> or <a data-link-type="dfn" href="#i32" id="ref-for-i32③">i32</a>. 
   </table>
   <p>An expression must not evaluate to an atomic type.</p>
   <p>Atomic types may only be instantiated by variables in the <a data-link-type="dfn" href="#storage-classes-workgroup" id="ref-for-storage-classes-workgroup①">workgroup</a> storage class or by <a data-link-type="dfn" href="#storage-buffer" id="ref-for-storage-buffer①">storage buffer</a> variables with a <a data-link-type="dfn" href="#access-read_write" id="ref-for-access-read_write">read_write</a> access mode.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="atomic-modification">atomic modification</dfn> is any operation on an atomic object which sets the content of the object.
The operation counts as a modification even if the new value is the same as the object’s existing value.</p>
   <p>In WGSL, atomic modifications are mutually ordered, for each object.
That is, during execution of a shader stage, for each atomic object <em>A</em>, all
agents observe the same order of modification operations applied to <em>A</em>.
The ordering for distinct atomic objects may not be related in any way; no
causality is implied.
Note that variables in <a data-link-type="dfn" href="#storage-classes-workgroup" id="ref-for-storage-classes-workgroup②">workgroup</a> storage are shared within a <a data-link-type="dfn" href="#compute-shader-stage-workgroup" id="ref-for-compute-shader-stage-workgroup①">workgroup</a>, but are not shared between different
workgroups.</p>
   <p>TODO: Add links the eventual memory model descriptions.</p>
   <div class="example storage atomic no-marker" id="example-2db65af9">
    <a class="self-link" href="#example-2db65af9"></a>
    <div class="marker">EXAMPLE: Mapping atomics in a storage variable to SPIR-V</div>
<pre>[[block]] struct S {
  a: atomic&lt;i32>;
  b: atomic&lt;u32>;
};

[[group(0), binding(0)]]
var&lt;storage,read_write> x: S;

// Maps to the following SPIR-V:
// - When atomic types are members of a struct, the Volatile decoration
//   is annotated on the member.
// OpDecorate %S Block
// OpMemberDecorate %S 0 Volatile
// OpMemberDecorate %S 1 Volatile
// ...
// %i32 = OpTypeInt 32 1
// %u32 = OpTypeInt 32 0
// %S = OpTypeStruct %i32 %u32
// %ptr_storage_S = OpTypePointer StorageBuffer %S
// %x = OpVariable %ptr_storage_S StorageBuffer
</pre>
   </div>
   <div class="example workgroup atomic no-marker" id="example-8b8378d0">
    <a class="self-link" href="#example-8b8378d0"></a>
    <div class="marker">EXAMPLE: Mapping atomics in a workgroup variable to SPIR-V</div>
<pre>var&lt;workgroup> x: atomic&lt;u32>;

// Maps to the following SPIR-V:
// - When atomic types are directly instantiated by a variable,  the Volatile
//   decoration is annotated on the OpVariable.
// OpDecorate %x Volatile
// ...
// %u32 = OpTypeInt 32 0
// %ptr_workgroup_u32 = OpTypePointer Workgroup %S
// %x = OpVariable %ptr_workgroup_u32 Workgroup
</pre>
   </div>
   <h4 class="heading settled" data-level="4.2.8" id="array-types"><span class="secno">4.2.8. </span><span class="content">Array Types</span><a class="self-link" href="#array-types"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="array">array</dfn> is an indexable grouping of element values.</p>
   <table class="data">
    <thead>
     <tr>
      <th>Type
      <th>Description 
    <tbody>
     <tr>
      <td class="algorithm" data-algorithm="fixed-size array type">array&lt;<var>E</var>,<var>N</var>> 
      <td>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fixed-size-array">fixed-size array</dfn> with <var>N</var> elements of type <var>E</var>.<br> <var>N</var> is called the <dfn data-dfn-type="dfn" data-noexport id="element-count">element count<a class="self-link" href="#element-count"></a></dfn> of the array. 
     <tr>
      <td class="algorithm" data-algorithm="runtime-sized array type">array&lt;<var>E</var>> 
      <td>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="runtime-sized">runtime-sized</dfn> array of elements of type <var>E</var>.
          These may only appear in specific contexts.<br> 
   </table>
   <p>When specified, an element count expression <var>N</var> must:</p>
   <ul>
    <li data-md>
     <p>be a literal, or the name of a <a href="#module-constants">module-scope constant</a> that is not <a data-link-type="dfn" href="#pipeline-overridable" id="ref-for-pipeline-overridable①">pipeline-overridable</a>, and</p>
    <li data-md>
     <p>evaluate to an <a data-link-type="dfn" href="#integer-scalar" id="ref-for-integer-scalar">integer scalar</a> with value greater than zero.</p>
   </ul>
   <p class="note" role="note"><span>Note:</span> The element count value is fully determined at <a data-link-type="dfn" href="#shader-module-creation" id="ref-for-shader-module-creation①">shader module creation</a> time.</p>
   <p>Two array types are the same if and only if all of the following are true:</p>
   <ul>
    <li data-md>
     <p>They have the same element type.</p>
    <li data-md>
     <p>Their element count specifications match, i.e. either of the following is true:</p>
     <ul>
      <li data-md>
       <p>They are both runtime-sized.</p>
      <li data-md>
       <p>They are both fixed-sized with equal-valued element counts,
even if one is signed and the other is unsigned.
(Signed and unsigned values are comparable in this case because element counts must
be greater than zero.)</p>
     </ul>
   </ul>
   <p class="issue" id="issue-36e81624"><a class="self-link" href="#issue-36e81624"></a> Array types should differ if they have different element strides.
See https://github.com/gpuweb/gpuweb/issues/1534</p>
   <div class="example fixed-size array types no-marker" id="example-ed22b879">
    <a class="self-link" href="#example-ed22b879"></a>
    <div class="marker">EXAMPLE: Example fixed-size array types</div>
<pre>// array&lt;f32,8> and array&lt;i32,8> are different types:
// different element types
var&lt;private> a: array&lt;f32,8>;
var&lt;private> b: array&lt;i32,8>;
var&lt;private> c: array&lt;i32,8u>;  // array&lt;i32,8> and array&lt;i32,8u> are the same type

let width = 8;
let height = 8;

// array&lt;i32,8>, array&lt;i32,8u>, and array&lt;i32,width> are the same type.
// Their element counts evaluate to 8.
var&lt;private> d: array&lt;i32,width>;

// array&lt;i32,height> and array&lt;i32,width> are the same type.
var&lt;private> e: array&lt;i32,width>;
var&lt;private> f: array&lt;i32,height>;
</pre>
   </div>
   <p>The first element in an array is at index 0, and each successive element is at the next integer index.
See <a href="#array-access-expr">§ 6.7.3 Array Access Expression</a>.</p>
   <p>An array element type must be one of:</p>
   <ul>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#scalar" id="ref-for-scalar⑤">scalar</a> type</p>
    <li data-md>
     <p>a vector type</p>
    <li data-md>
     <p>a matrix type</p>
    <li data-md>
     <p>an <a data-link-type="dfn" href="#atomic-type" id="ref-for-atomic-type①">atomic</a> type</p>
    <li data-md>
     <p>an array type</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#structure" id="ref-for-structure⑥">structure</a> type</p>
   </ul>
   <p class="note" role="note"><span>Note:</span> That is, the element type must be a <a data-link-type="dfn" href="#plain-type" id="ref-for-plain-type①">plain type</a>.</p>
   <p>WGSL defines the following attributes that can be applied to array types:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-stride" id="ref-for-attribute-stride">stride</a></p>
   </ul>
   <p>Restrictions on runtime-sized arrays:</p>
   <ul>
    <li data-md>
     <p>The last member of the structure type defining the <a data-link-type="dfn" href="#store-type" id="ref-for-store-type①">store type</a> for a variable in the <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage">storage</a> storage class may be a runtime-sized array.</p>
    <li data-md>
     <p>A runtime-sized array must not be used as the store type or contained within
a store type in any other cases.</p>
    <li data-md>
     <p>An expression must not evaluate to a runtime-sized array type.</p>
   </ul>
<pre class="def">array_type_decl
  | attribute_list* ARRAY LESS_THAN type_decl (COMMA element_count_expression)? GREATER_THAN

element_count_expression
  : INT_LITERAL
  | UINT_LITERAL
  | IDENT
</pre>
   <h4 class="heading settled" data-level="4.2.9" id="struct-types"><span class="secno">4.2.9. </span><span class="content">Structure Types</span><a class="self-link" href="#struct-types"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="structure">structure</dfn> is a grouping of named member values.</p>
   <table class="data">
    <thead>
     <tr>
      <th>Type
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="structure type">
      <td>struct&lt;<var>T</var><sub>1</sub>,...,<var>T</var><sub>N</sub>> 
      <td>An ordered tuple of <em>N</em> members of types <var>T</var><sub>1</sub> through <var>T</var><sub>N</sub>, with <var>N</var> being an integer greater than 0.
          A structure type declaration specifies an identifier name for each member.
          Two members of the same structure type must not have the same name. 
   </table>
   <p>A structure member type must be one of:</p>
   <ul>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#scalar" id="ref-for-scalar⑥">scalar</a> type</p>
    <li data-md>
     <p>a vector type</p>
    <li data-md>
     <p>a matrix type</p>
    <li data-md>
     <p>an <a data-link-type="dfn" href="#atomic-type" id="ref-for-atomic-type②">atomic</a> type</p>
    <li data-md>
     <p>an array type</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#structure" id="ref-for-structure⑦">structure</a> type</p>
   </ul>
   <p class="note" role="note"><span>Note:</span> That is, each member type must be a <a data-link-type="dfn" href="#plain-type" id="ref-for-plain-type②">plain type</a>.</p>
   <p class="note" role="note"><span>Note:</span> The structure member type restriction and the array element type restriction are
mutually reinforcing.
Combined, they imply that a pointer may not appear in any level
of nesting within either an array or structure.
Similarly, the same limitations apply to textures and samplers.</p>
   <div class="example wgsl global-scope no-marker" id="example-037fe5aa">
    <a class="self-link" href="#example-037fe5aa"></a>
    <div class="marker">EXAMPLE: Structure</div>
<pre class="highlight"><c- c1>// A structure with two members.</c->
<c- k>struct</c-> <c- nc>Data</c-> <c- p>{</c->
  <c- n>a</c->: <c- b>i32</c-><c- p>;</c->
  <c- n>b</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->
<c- p>};</c->
</pre>
   </div>
<pre class="def">struct_decl
  : attribute_list* STRUCT IDENT struct_body_decl
</pre>
<pre class="def">struct_body_decl
  : BRACE_LEFT struct_member* BRACE_RIGHT

struct_member
  : attribute_list* variable_ident_decl SEMICOLON
</pre>
   <p>WGSL defines the following attributes that can be applied to structure types:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-block" id="ref-for-attribute-block">block</a></p>
   </ul>
   <p>WGSL defines the following attributes that can be applied to structure members:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-builtin" id="ref-for-attribute-builtin">builtin</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-location" id="ref-for-attribute-location">location</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-stride" id="ref-for-attribute-stride①">stride</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-align" id="ref-for-attribute-align">align</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-size" id="ref-for-attribute-size">size</a></p>
   </ul>
   <p class="note" role="note"><span>Note:</span> Layout attributes may be required if the structure type is used
to define a <a data-link-type="dfn" href="#uniform-buffer" id="ref-for-uniform-buffer①">uniform buffer</a> or a <a data-link-type="dfn" href="#storage-buffer" id="ref-for-storage-buffer②">storage buffer</a>. See <a href="#memory-layouts">§ 4.3.7 Memory Layout</a>.</p>
   <div class="example wgsl global-scope no-marker" id="example-924dc544">
    <a class="self-link" href="#example-924dc544"></a>
    <div class="marker">EXAMPLE: Structure WGSL</div>
<pre>struct my_struct {
  a: f32;
  b: vec4&lt;f32>;
};
</pre>
   </div>
   <div class="example spirv no-marker" id="example-eda9ec88">
    <a class="self-link" href="#example-eda9ec88"></a>
    <div class="marker">EXAMPLE: Structure SPIR-V</div>
<pre>             OpName %my_struct "my_struct"
             OpMemberName %my_struct 0 "a"
             OpMemberDecorate %my_struct 0 Offset 0
             OpMemberName %my_struct 1 "b"
             OpMemberDecorate %my_struct 1 Offset 4
%my_struct = OpTypeStruct %float %v4float
</pre>
   </div>
   <div class="example wgsl global-scope no-marker" id="example-50f144a3">
    <a class="self-link" href="#example-50f144a3"></a>
    <div class="marker">EXAMPLE: Structure WGSL</div>
<pre>// Runtime Array
type RTArr = [[stride(16)]] array&lt;vec4&lt;f32>>;
[[block]] struct S {
  a: f32;
  b: f32;
  data: RTArr;
};
</pre>
   </div>
   <div class="example spirv no-marker" id="example-dc4f778c">
    <a class="self-link" href="#example-dc4f778c"></a>
    <div class="marker">EXAMPLE: Structure SPIR-V</div>
<pre>             OpName %my_struct "my_struct"
             OpMemberName %my_struct 0 "a"
             OpMemberDecorate %my_struct 0 Offset 0
             OpMemberName %my_struct 1 "b"
             OpMemberDecorate %my_struct 1 Offset 4
             OpMemberName %my_struct 2 "data"
             OpMemberDecorate %my_struct 2 Offset 16
             OpDecorate %rt_arr ArrayStride 16
   %rt_arr = OpTypeRuntimeArray %v4float
%my_struct = OpTypeStruct %float %v4float %rt_arr
</pre>
   </div>
   <h4 class="heading settled" data-level="4.2.10" id="composite-types"><span class="secno">4.2.10. </span><span class="content">Composite Types</span><a class="self-link" href="#composite-types"></a></h4>
   <p>A type is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="composite">composite</dfn> if it has internal structure
expressed as a composition of other types.
The internal parts do not overlap, and are called <dfn data-dfn-type="dfn" data-noexport id="components">components<a class="self-link" href="#components"></a></dfn>.</p>
   <p>The composite types are:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#vector" id="ref-for-vector">vector</a> type</p>
    <li data-md>
     <p><a data-link-type="dfn" href="#matrix" id="ref-for-matrix">matrix</a> type</p>
    <li data-md>
     <p><a data-link-type="dfn" href="#array" id="ref-for-array②">array</a> type</p>
    <li data-md>
     <p><a data-link-type="dfn" href="#structure" id="ref-for-structure⑧">structure</a> type</p>
   </ul>
   <h4 class="heading settled" data-level="4.2.11" id="constructible-types"><span class="secno">4.2.11. </span><span class="content">Constructible Types</span><a class="self-link" href="#constructible-types"></a></h4>
   <p>Many kinds of values can be created, loaded, stored, passed into functions,
and returned from functions.
We call these <a data-link-type="dfn" href="#constructible" id="ref-for-constructible">constructible</a>.</p>
   <p>A type is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="constructible">constructible</dfn> if it is one of:</p>
   <ul>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#scalar" id="ref-for-scalar⑦">scalar</a> type</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#vector" id="ref-for-vector①">vector</a> type</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#matrix" id="ref-for-matrix①">matrix</a> type</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#fixed-size-array" id="ref-for-fixed-size-array">fixed-size array</a> type, if its element type is constructible.</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#structure" id="ref-for-structure⑨">structure</a> type, if all its members are constructible.</p>
   </ul>
   <p class="note" role="note"><span>Note:</span> All constructible types are <a data-link-type="dfn" href="#plain-type" id="ref-for-plain-type③">plain</a>.</p>
   <p class="note" role="note"><span>Note:</span> Atomic types and runtime-sized array types are not constructible.
Composite types containing atomics and runtime-sized arrays are not constructible.</p>
   <h3 class="heading settled" data-level="4.3" id="memory"><span class="secno">4.3. </span><span class="content">Memory</span><a class="self-link" href="#memory"></a></h3>
   <p>In WGSL, a value of <a data-link-type="dfn" href="#storable" id="ref-for-storable">storable</a> type may be stored in memory, for later retrieval.
This section describes the structure of memory, and how WGSL types are used to
describe the contents of memory.</p>
   <p>In general WGSL follows the <a data-link-type="biblio" href="#biblio-vulkanmemorymodel">Vulkan Memory Model</a>.</p>
   <h4 class="heading settled" data-level="4.3.1" id="memory-locations-section"><span class="secno">4.3.1. </span><span class="content">Memory Locations</span><a class="self-link" href="#memory-locations-section"></a></h4>
   <p>Memory consists of a set of distinct <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="memory-locations">memory locations</dfn>.
Each memory location is 8-bits
in size. An operation affecting memory interacts with a set of one or more
memory locations.</p>
   <p>Two sets of memory locations <dfn data-dfn-type="dfn" data-noexport id="overlap">overlap<a class="self-link" href="#overlap"></a></dfn> if the intersection of
their sets of memory locations is non-empty. Each variable declaration has a
set of memory locations that does not overlap with the sets of memory locations of
any other variable declaration. Memory operations on structures and arrays may
access padding between elements, but must not access padding at the end of the
structure or array.</p>
   <h4 class="heading settled" data-level="4.3.2" id="memory-access-mode"><span class="secno">4.3.2. </span><span class="content">Memory Access Mode</span><a class="self-link" href="#memory-access-mode"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="memory-access">memory access</dfn> is an operation that acts on memory locations.</p>
   <ul>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="read-access">read access</dfn> observes the contents of memory locations.</p>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="write-access">write access</dfn> sets the contents of memory locations.</p>
   </ul>
   <p>A single operation can read, write, or both read and write.</p>
   <p>Particular memory locations may support only certain kinds of accesses, expressed
as the memory’s <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-mode">access mode</dfn>:</p>
   <dl>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="access" data-dfn-type="dfn" data-noexport id="access-read">read</dfn>
    <dd data-md>
     <p>Supports read accesses, but not writes.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="access" data-dfn-type="dfn" data-noexport id="access-write">write</dfn>
    <dd data-md>
     <p>Supports write accesses, but not reads.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="access" data-dfn-type="dfn" data-noexport id="access-read_write">read_write</dfn>
    <dd data-md>
     <p>Supports both read and write accesses.</p>
   </dl>
<pre class="def">access_mode
  : READ
  | WRITE
  | READ_WRITE
</pre>
   <h4 class="heading settled" data-level="4.3.3" id="storable-types"><span class="secno">4.3.3. </span><span class="content">Storable Types</span><a class="self-link" href="#storable-types"></a></h4>
   <p>The value contained in a <a data-link-type="dfn" href="#variable" id="ref-for-variable">variable</a> must be of a <a data-link-type="dfn" href="#storable" id="ref-for-storable①">storable</a> type.
A storable type may have an explicit representation defined by WGSL,
as described in <a href="#internal-value-layout">§ 4.3.7.4 Internal Layout of Values</a>,
or it may be opaque, such as for textures and samplers.</p>
   <p>A type is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="storable">storable</dfn> if it is one of:</p>
   <ul>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#scalar" id="ref-for-scalar⑧">scalar</a> type</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#vector" id="ref-for-vector②">vector</a> type</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#matrix" id="ref-for-matrix②">matrix</a> type</p>
    <li data-md>
     <p>an <a data-link-type="dfn" href="#atomic-type" id="ref-for-atomic-type③">atomic</a> type</p>
    <li data-md>
     <p>an <a data-link-type="dfn" href="#array" id="ref-for-array③">array</a> type</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#structure" id="ref-for-structure①⓪">structure</a> type</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#texture" id="ref-for-texture">texture</a> type</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#sampler" id="ref-for-sampler">sampler</a> type</p>
   </ul>
   <p class="note" role="note"><span>Note:</span> That is, the storable types are the <a data-link-type="dfn" href="#plain-type" id="ref-for-plain-type④">plain types</a>, texture types, and sampler types.</p>
   <h4 class="heading settled" data-level="4.3.4" id="io-shareable-types"><span class="secno">4.3.4. </span><span class="content">IO-shareable Types</span><a class="self-link" href="#io-shareable-types"></a></h4>
   <p>Pipeline input and output values must be of IO-shareable type.</p>
   <p>A type is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="io-shareable">IO-shareable</dfn> if it is one of:</p>
   <ul>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#scalar" id="ref-for-scalar⑨">scalar</a> type</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#numeric-vector" id="ref-for-numeric-vector①">numeric vector</a> type</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#structure" id="ref-for-structure①①">structure</a> type, if all its members are <a data-link-type="dfn" href="#scalar" id="ref-for-scalar①⓪">scalars</a> or <a data-link-type="dfn" href="#numeric-vector" id="ref-for-numeric-vector②">numeric vectors</a></p>
   </ul>
   <p>The following kinds of values must be of IO-shareable type:</p>
   <ul>
    <li data-md>
     <p>Values read from or written to built-in variables.</p>
    <li data-md>
     <p>Values accepted as inputs from an upstream pipeline stage.</p>
    <li data-md>
     <p>Values written as output for downstream processing in the pipeline, or to an output attachment.</p>
   </ul>
   <p class="note" role="note"><span>Note:</span> Only built-in pipeline inputs may have a boolean type.
A user input or output data attribute must not be of <a data-link-type="dfn" href="#bool" id="ref-for-bool②">bool</a> type or contain a <a data-link-type="dfn" href="#bool" id="ref-for-bool③">bool</a> type.
See <a href="#pipeline-inputs-outputs">§ 9.3.1 Pipeline Input and Output Interface</a>.</p>
   <h4 class="heading settled" data-level="4.3.5" id="host-shareable-types"><span class="secno">4.3.5. </span><span class="content">Host-shareable Types</span><a class="self-link" href="#host-shareable-types"></a></h4>
   <p>Host-shareable types are used to describe the contents of buffers which are shared between
the host and the GPU, or copied between host and GPU without format translation.
When used for this purpose, the type must be additionally decorated with layout attributes
as described in <a href="#memory-layouts">§ 4.3.7 Memory Layout</a>.
We will see in <a href="#module-scope-variables">§ 5.1 Module Scope Variables</a> that the <a data-link-type="dfn" href="#store-type" id="ref-for-store-type②">store type</a> of <a data-link-type="dfn" href="#uniform-buffer" id="ref-for-uniform-buffer②">uniform buffer</a> and <a data-link-type="dfn" href="#storage-buffer" id="ref-for-storage-buffer③">storage buffer</a> variables must be host-shareable.</p>
   <p>A type is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="host-shareable">host-shareable</dfn> if it is one of:</p>
   <ul>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#numeric-scalar" id="ref-for-numeric-scalar②">numeric scalar</a> type</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#numeric-vector" id="ref-for-numeric-vector③">numeric vector</a> type</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#matrix" id="ref-for-matrix③">matrix</a> type</p>
    <li data-md>
     <p>an <a data-link-type="dfn" href="#atomic-type" id="ref-for-atomic-type④">atomic</a> type</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#fixed-size-array" id="ref-for-fixed-size-array①">fixed-size array</a> type, if its element type is host-shareable</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#runtime-sized" id="ref-for-runtime-sized">runtime-sized</a> array type, if its element type is host-shareable</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#structure" id="ref-for-structure①②">structure</a> type, if all its members are host-shareable</p>
   </ul>
   <p>WGSL defines the following attributes that affect memory layouts:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-stride" id="ref-for-attribute-stride②">stride</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-align" id="ref-for-attribute-align①">align</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-size" id="ref-for-attribute-size①">size</a></p>
   </ul>
   <p class="note" role="note"><span>Note:</span> An <a data-link-type="dfn" href="#io-shareable" id="ref-for-io-shareable">IO-shareable</a> type <em>T</em> is host-shareable if <em>T</em> is not <a data-link-type="dfn" href="#bool" id="ref-for-bool④">bool</a> and does not contain <a data-link-type="dfn" href="#bool" id="ref-for-bool⑤">bool</a>.
Many types are host-shareable, but not IO-shareable, including <a data-link-type="dfn" href="#atomic-type" id="ref-for-atomic-type⑤">atomic types</a>, <a data-link-type="dfn" href="#runtime-sized" id="ref-for-runtime-sized①">runtime-sized</a> arrays, and any composite types containing them.</p>
   <p class="note" role="note"><span>Note:</span> Both IO-shareable and host-shareable types have concrete sizes, but counted differently.
IO-shareable types are sized by a location-count metric, see <a href="#input-output-locations">§ 9.3.1.4 Input-output Locations</a>.
Host-shareable types are sized by a byte-count metric, see <a href="#memory-layouts">§ 4.3.7 Memory Layout</a>.</p>
   <h4 class="heading settled" data-level="4.3.6" id="storage-class"><span class="secno">4.3.6. </span><span class="content">Storage Classes</span><a class="self-link" href="#storage-class"></a></h4>
   <p>Memory locations are partitioned into <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="storage-classes">storage classes</dfn>.
Each storage class has unique properties determining
mutability, visibility, the values it may contain,
and how to use variables with it.</p>
   <table class="data" id="storage-class-table">
    <caption>Storage Classes</caption>
    <thead>
     <tr>
      <th>Storage class 
      <th>Sharing among invocations 
      <th>Supported access modes 
      <th>Variable scope 
      <th>Restrictions on stored values 
      <th>Notes 
    <tbody>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="storage classes" data-dfn-type="dfn" data-noexport id="storage-classes-function">function</dfn> 
      <td>Same invocation only 
      <td><a data-link-type="dfn" href="#access-read_write" id="ref-for-access-read_write①">read_write</a> 
      <td><a data-link-type="dfn" href="#function-scope" id="ref-for-function-scope">Function scope</a> 
      <td><a data-link-type="dfn" href="#constructible" id="ref-for-constructible①">Constructible</a> type 
      <td>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="storage classes" data-dfn-type="dfn" data-noexport id="storage-classes-private">private</dfn> 
      <td>Same invocation only 
      <td><a data-link-type="dfn" href="#access-read_write" id="ref-for-access-read_write②">read_write</a> 
      <td><a data-link-type="dfn" href="#module-scope" id="ref-for-module-scope①">Module scope</a> 
      <td><a data-link-type="dfn" href="#constructible" id="ref-for-constructible②">Constructible</a> type 
      <td>
      <td>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="storage classes" data-dfn-type="dfn" data-noexport id="storage-classes-workgroup">workgroup</dfn> 
      <td>Invocations in the same <a data-link-type="dfn" href="#compute-shader-stage" id="ref-for-compute-shader-stage②">compute shader</a> <a data-link-type="dfn" href="#compute-shader-stage-workgroup" id="ref-for-compute-shader-stage-workgroup②">workgroup</a> 
      <td><a data-link-type="dfn" href="#access-read_write" id="ref-for-access-read_write③">read_write</a> 
      <td><a data-link-type="dfn" href="#module-scope" id="ref-for-module-scope②">Module scope</a> 
      <td><a data-link-type="dfn" href="#plain-type" id="ref-for-plain-type⑤">Plain type</a>,
          excluding <a data-link-type="dfn" href="#runtime-sized" id="ref-for-runtime-sized②">runtime-sized</a> arrays, or <a data-link-type="dfn" href="#composite" id="ref-for-composite①">composite</a> types containing runtime-sized arrays 
      <td>
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="storage classes" data-dfn-type="dfn" data-noexport id="storage-classes-uniform">uniform</dfn> 
      <td>Invocations in the same <a data-link-type="dfn" href="#shader-stages" id="ref-for-shader-stages②">shader stage</a> 
      <td><a data-link-type="dfn" href="#access-read" id="ref-for-access-read">read</a> 
      <td><a data-link-type="dfn" href="#module-scope" id="ref-for-module-scope③">Module scope</a> 
      <td><a data-link-type="dfn" href="#constructible" id="ref-for-constructible③">Constructible</a> <a data-link-type="dfn" href="#host-shareable" id="ref-for-host-shareable">host-shareable</a> types 
      <td>For <a data-link-type="dfn" href="#uniform-buffer" id="ref-for-uniform-buffer③">uniform buffer</a> variables 
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="storage classes" data-dfn-type="dfn" data-noexport id="storage-classes-storage">storage</dfn> 
      <td>Invocations in the same <a data-link-type="dfn" href="#shader-stages" id="ref-for-shader-stages③">shader stage</a> 
      <td> <a data-link-type="dfn" href="#access-read_write" id="ref-for-access-read_write④">read_write</a>, <a data-link-type="dfn" href="#access-read" id="ref-for-access-read①">read</a> (default) 
      <td><a data-link-type="dfn" href="#module-scope" id="ref-for-module-scope④">Module scope</a> 
      <td><a data-link-type="dfn" href="#host-shareable" id="ref-for-host-shareable①">Host-shareable</a> 
      <td>For <a data-link-type="dfn" href="#storage-buffer" id="ref-for-storage-buffer④">storage buffer</a> variables 
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-for="storage classes" data-dfn-type="dfn" data-noexport id="storage-classes-handle">handle</dfn> 
      <td>Invocations in the same shader stage 
      <td><a data-link-type="dfn" href="#access-read" id="ref-for-access-read②">read</a> 
      <td><a data-link-type="dfn" href="#module-scope" id="ref-for-module-scope⑤">Module scope</a> 
      <td><a data-link-type="dfn" href="#sampler" id="ref-for-sampler①">Sampler</a> types or <a data-link-type="dfn" href="#texture" id="ref-for-texture①">texture</a> types 
      <td>For <a data-link-type="dfn" href="#sampler" id="ref-for-sampler②">sampler</a> and texture variables.<br> 
   </table>
   <p class="note" role="note"><span>Note:</span> The token <code>handle</code> is reserved: it is never used in a WGSL program.</p>
   <p class="note" role="note"><span>Note:</span> A texture variable holds an opaque handle which is used to access the underlying
grid of texels.
The handle itself is always read-only.
In most cases the underlying texels are read-only.
For a write-only storage texture, the underlying texels are write-only.</p>
<pre class="def">storage_class
  | FUNCTION
  | PRIVATE
  | WORKGROUP
  | UNIFORM
  | STORAGE
</pre>
   <table class="data">
    <thead>
     <tr>
      <th>WGSL storage class
      <th>SPIR-V storage class 
    <tbody>
     <tr>
      <td>uniform
      <td>Uniform 
     <tr>
      <td>workgroup
      <td>Workgroup 
     <tr>
      <td>handle
      <td>UniformConstant 
     <tr>
      <td>storage
      <td>StorageBuffer 
     <tr>
      <td>private
      <td>Private 
     <tr>
      <td>function
      <td>Function 
   </table>
   <h4 class="heading settled" data-level="4.3.7" id="memory-layouts"><span class="secno">4.3.7. </span><span class="content">Memory Layout</span><a class="self-link" href="#memory-layouts"></a></h4>
   <p><a data-link-type="dfn" href="#uniform-buffer" id="ref-for-uniform-buffer④">Uniform buffer</a> and <a data-link-type="dfn" href="#storage-buffer" id="ref-for-storage-buffer⑤">storage buffer</a> variables are used to share
bulk data organized as a sequence of bytes in memory.
Buffers are shared between the CPU and the GPU, or between different shader stages
in a pipeline, or between different pipelines.</p>
   <p>Because buffer data are shared without reformatting or translation,
buffer producers and consumers must agree on the <dfn data-dfn-type="dfn" data-noexport id="memory-layout">memory layout<a class="self-link" href="#memory-layout"></a></dfn>,
which is the description of how the bytes in a buffer are organized into typed WGSL values.</p>
   <p>The <a data-link-type="dfn" href="#store-type" id="ref-for-store-type③">store type</a> of a buffer variable must be <a data-link-type="dfn" href="#host-shareable" id="ref-for-host-shareable②">host-shareable</a>, with fully elaborated memory layout, as described below.</p>
   <p>Each buffer variable must be declared in either the <a data-link-type="dfn" href="#storage-classes-uniform" id="ref-for-storage-classes-uniform">uniform</a> or <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage①">storage</a> storage classes.</p>
   <p>The memory layout of a type is significant only when evaluating an expression with:</p>
   <ul>
    <li data-md>
     <p>a variable in the <a data-link-type="dfn" href="#storage-classes-uniform" id="ref-for-storage-classes-uniform①">uniform</a> or <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage②">storage</a> storage class, or</p>
    <li data-md>
     <p>a pointer into the <a data-link-type="dfn" href="#storage-classes-uniform" id="ref-for-storage-classes-uniform②">uniform</a> or <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage③">storage</a> storage class.</p>
   </ul>
   <p>An 8-bit byte is the most basic unit of <a data-link-type="dfn" href="#host-shareable" id="ref-for-host-shareable③">host-shareable</a> memory.
The terms defined in this section express counts of 8-bit bytes.</p>
   <p>We will use the following notation:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="alignof">AlignOf</dfn>(<var>T</var>) is the alignment of host-shareable type <var>T</var>.</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="alignofmember">AlignOfMember</dfn>(<var>S</var>, <var>M</var>) is the alignment of member <var>M</var> of the host-shareable structure <var>S</var>.</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="sizeof">SizeOf</dfn>(<var>T</var>) is the size of host-shareable type <var>T</var>.</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="sizeofmember">SizeOfMember</dfn>(<var>S</var>, <var>M</var>) is the size of member <var>M</var> of the host-shareable structure <var>S</var>.</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="strideof">StrideOf</dfn>(<var>A</var>) is the <a data-link-type="dfn" href="#element-stride" id="ref-for-element-stride">element stride</a> of host-shareable array type <var>A</var>.</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="offsetofmember">OffsetOfMember</dfn>(<var>S</var>, <var>M</var>) is the offset of member <var>M</var> from the start of the host-shareable structure <var>S</var>.</p>
   </ul>
   <h5 class="heading settled" data-level="4.3.7.1" id="alignment-and-size"><span class="secno">4.3.7.1. </span><span class="content">Alignment and Size</span><a class="self-link" href="#alignment-and-size"></a></h5>
   <p>Each <a data-link-type="dfn" href="#host-shareable" id="ref-for-host-shareable④">host-shareable</a> data type <var>T</var> has an alignment and size value, denoted
by <a data-link-type="dfn" href="#alignof" id="ref-for-alignof">AlignOf</a>(<var>T</var>) and <a data-link-type="dfn" href="#sizeof" id="ref-for-sizeof">SizeOf</a>(<var>T</var>), respectively.</p>
   <p>Alignment guarantees that a value’s address in memory will be a multiple of the
specified value. This can enable more efficient hardware instructions to be used
to access the value or satisfy more restrictive hardware requirements on certain
storage classes. (see <a href="#storage-class-layout-constraints">storage class layout constraints</a>).</p>
   <p class="note" role="note"><span>Note:</span> Each alignment value is always a power of two, by construction.</p>
   <p>The size of a type or structure member is the number of contiguous bytes
reserved in host-shareable memory for the purpose of storing a value of the type
or structure member.
The size may include non-addressable padding at the end of the type.
Consequently, loads and stores of a value might access fewer memory locations
than the value’s size.</p>
   <p>Alignment and size for host-shareable types are defined recursively in the
following table:</p>
   <table class="data">
    <caption> Alignment and size for host-shareable types<br> </caption>
    <thead>
     <tr>
      <th>Host-shareable type <var>T</var> 
      <th><a data-link-type="dfn" href="#alignof" id="ref-for-alignof①">AlignOf</a>(<var>T</var>) 
      <th><a data-link-type="dfn" href="#sizeof" id="ref-for-sizeof①">SizeOf</a>(<var>T</var>) 
    <tbody>
     <tr>
      <td><a data-link-type="dfn" href="#i32" id="ref-for-i32④">i32</a>, <a data-link-type="dfn" href="#u32" id="ref-for-u32④">u32</a>, or <a data-link-type="dfn" href="#f32" id="ref-for-f32②">f32</a> 
      <td>4 
      <td>4 
     <tr>
      <td>atomic&lt;<var>T</var>> 
      <td>4 
      <td>4 
     <tr>
      <td>vec2&lt;<var>T</var>> 
      <td>8 
      <td>8 
     <tr>
      <td>vec3&lt;<var>T</var>> 
      <td>16 
      <td>12 
     <tr>
      <td>vec4&lt;<var>T</var>> 
      <td>16 
      <td>16 
     <tr>
      <td>
       mat<var>N</var>x<var>M</var> (col-major)<br> 
       <p class="small">(General form)</p>
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof②">AlignOf</a>(vec<var>M</var>) 
      <td><a data-link-type="dfn" href="#sizeof" id="ref-for-sizeof②">SizeOf</a>(array&lt;vec<var>M</var>, <var>N</var>>) 
     <tr>
      <td>mat2x2&lt;f32> 
      <td>8 
      <td>16 
     <tr>
      <td>mat3x2&lt;f32> 
      <td>8 
      <td>24 
     <tr>
      <td>mat4x2&lt;f32> 
      <td>8 
      <td>32 
     <tr>
      <td>mat2x3&lt;f32> 
      <td>16 
      <td>32 
     <tr>
      <td>mat3x3&lt;f32> 
      <td>16 
      <td>48 
     <tr>
      <td>mat4x3&lt;f32> 
      <td>16 
      <td>64 
     <tr>
      <td>mat2x4&lt;f32> 
      <td>16 
      <td>32 
     <tr>
      <td>mat3x4&lt;f32> 
      <td>16 
      <td>48 
     <tr>
      <td>mat4x4&lt;f32> 
      <td>16 
      <td>64 
     <tr>
      <td>struct <var>S</var> 
      <td>max(<a data-link-type="dfn" href="#alignofmember" id="ref-for-alignofmember">AlignOfMember</a>(S, M<sub>1</sub>), ... , <a data-link-type="dfn" href="#alignofmember" id="ref-for-alignofmember①">AlignOfMember</a>(S, M<sub>N</sub>))<br> 
      <td><a data-link-type="dfn" href="#roundup" id="ref-for-roundup">roundUp</a>(<a data-link-type="dfn" href="#alignof" id="ref-for-alignof③">AlignOf</a>(<var>S</var>), <a data-link-type="dfn" href="#offsetofmember" id="ref-for-offsetofmember">OffsetOfMember</a>(<var>S</var>, <var>L</var>) + <a data-link-type="dfn" href="#sizeofmember" id="ref-for-sizeofmember">SizeOfMember</a>(<var>S</var>, <var>L</var>))<br><br> Where <var>L</var> is the last member of the structure 
     <tr>
      <td>
       array&lt;<var>E</var>, <var>N</var>><br> 
       <p class="small">(Implicit stride)</p>
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof④">AlignOf</a>(<var>E</var>) 
      <td><var>N</var> * <a data-link-type="dfn" href="#roundup" id="ref-for-roundup①">roundUp</a>(<a data-link-type="dfn" href="#alignof" id="ref-for-alignof⑤">AlignOf</a>(<var>E</var>), <a data-link-type="dfn" href="#sizeof" id="ref-for-sizeof③">SizeOf</a>(<var>E</var>)) 
     <tr>
      <td>
       array&lt;<var>E</var>><br> 
       <p class="small">(Implicit stride)</p>
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof⑥">AlignOf</a>(<var>E</var>) 
      <td>N<sub>runtime</sub> * <a data-link-type="dfn" href="#roundup" id="ref-for-roundup②">roundUp</a>(<a data-link-type="dfn" href="#alignof" id="ref-for-alignof⑦">AlignOf</a>(<var>E</var>), <a data-link-type="dfn" href="#sizeof" id="ref-for-sizeof④">SizeOf</a>(<var>E</var>))<br><br> Where N<sub>runtime</sub> is the runtime-determined number of elements of <var>T</var> 
     <tr>
      <td>[[<a data-link-type="dfn" href="#attribute-stride" id="ref-for-attribute-stride③">stride</a>(<var>Q</var>)]]<br> array&lt;<var>E</var>, <var>N</var>> 
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof⑧">AlignOf</a>(<var>E</var>) 
      <td><var>N</var> * <var>Q</var> 
     <tr>
      <td>[[<a data-link-type="dfn" href="#attribute-stride" id="ref-for-attribute-stride④">stride</a>(<var>Q</var>)]]<br> array&lt;<var>E</var>> 
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof⑨">AlignOf</a>(<var>E</var>) 
      <td>N<sub>runtime</sub> * <var>Q</var> 
   </table>
   <h5 class="heading settled" data-level="4.3.7.2" id="structure-layout-rules"><span class="secno">4.3.7.2. </span><span class="content">Structure Layout Rules</span><a class="self-link" href="#structure-layout-rules"></a></h5>
   <p>Each structure <var>S</var> member M<sub>N</sub> has a size and alignment value, denoted
by <a data-link-type="dfn" href="#sizeofmember" id="ref-for-sizeofmember①">SizeOfMember</a>(<var>S</var>, M<sub>N</sub>) and <a data-link-type="dfn" href="#alignofmember" id="ref-for-alignofmember②">AlignOfMember</a>(<var>S</var>, M<sub>N</sub>), respectively.
The member sizes and alignments are used to calculate each member’s byte offset from the start of the structure.</p>
   <p>Structures member size and alignment values default to the member type <code>T</code>'s <a data-link-type="dfn" href="#sizeof" id="ref-for-sizeof⑤">SizeOf</a>(T) and <a data-link-type="dfn" href="#alignof" id="ref-for-alignof①⓪">AlignOf</a>(T) values.</p>
   <p>If a structure member is decorated with the <a data-link-type="dfn" href="#attribute-size" id="ref-for-attribute-size②">size</a> decoration, then the structure
member will use the value of the decoration for its size instead of its type’s size.</p>
   <p>If a structure member is decorated with the <a data-link-type="dfn" href="#attribute-align" id="ref-for-attribute-align②">align</a> decoration, then the structure
member will use the value of the decoration for its alignment instead of its type’s alignment.</p>
   <p>The first structure member always has a zero byte offset from the start of the
structure.</p>
   <p>Subsequent members have the following byte offset from the start of the structure:</p>
   <p class="algorithm" data-algorithm="structure member offset"> <a data-link-type="dfn" href="#offsetofmember" id="ref-for-offsetofmember①">OffsetOfMember</a>(<var>S</var>, M<sub>N</sub>) = <a data-link-type="dfn" href="#roundup" id="ref-for-roundup③">roundUp</a>(<a data-link-type="dfn" href="#alignofmember" id="ref-for-alignofmember③">AlignOfMember</a>(<var>S</var>, M<sub>N</sub>), <a data-link-type="dfn" href="#offsetofmember" id="ref-for-offsetofmember②">OffsetOfMember</a>(<var>S</var>, M<sub>N-1</sub>) + <a data-link-type="dfn" href="#sizeofmember" id="ref-for-sizeofmember②">SizeOfMember</a>(<var>S</var>, M<sub>N-1</sub>)<br> Where M<sub>N</sub> is the current member and M<sub>N-1</sub> is the previous member </p>
   <p>Structure members must not overlap. If a structure member is decorated with the <a data-link-type="dfn" href="#attribute-size" id="ref-for-attribute-size③">size</a> attribute, the value must be at least as large as the
size of the member’s type:</p>
   <p class="algorithm" data-algorithm="member size constraint"> <a data-link-type="dfn" href="#sizeofmember" id="ref-for-sizeofmember③">SizeOfMember</a>(<var>S</var>, M<sub>N</sub>) ≥ <a data-link-type="dfn" href="#sizeof" id="ref-for-sizeof⑥">SizeOf</a>(T)<br> Where <var>T</var> is the type of member M<sub>N</sub>. </p>
   <p>The alignment of a structure is equal to the largest alignment of all of its
members:</p>
   <p class="algorithm" data-algorithm="structure alignment"> <a data-link-type="dfn" href="#alignof" id="ref-for-alignof①①">AlignOf</a>(<var>S</var>) = max(<a data-link-type="dfn" href="#alignofmember" id="ref-for-alignofmember④">AlignOfMember</a>(<var>S</var>, M<sub>1</sub>), ... , <a data-link-type="dfn" href="#alignofmember" id="ref-for-alignofmember⑤">AlignOfMember</a>(<var>S</var>, M<sub>N</sub>)) </p>
   <p>The size of a structure is equal to the offset plus the size of its last member,
rounded to the next multiple of the structure’s alignment:</p>
   <p class="algorithm" data-algorithm="structure size"> <a data-link-type="dfn" href="#sizeof" id="ref-for-sizeof⑦">SizeOf</a>(<var>S</var>) = <a data-link-type="dfn" href="#roundup" id="ref-for-roundup④">roundUp</a>(<a data-link-type="dfn" href="#alignof" id="ref-for-alignof①②">AlignOf</a>(<var>S</var>), <a data-link-type="dfn" href="#offsetofmember" id="ref-for-offsetofmember③">OffsetOfMember</a>(<var>S</var>, <var>L</var>) + <a data-link-type="dfn" href="#sizeofmember" id="ref-for-sizeofmember④">SizeOfMember</a>(<var>S</var>, <var>L</var>))<br> Where <var>L</var> is the last member of the structure </p>
   <div class="example wgsl no-marker" id="example-8bb25199">
    <a class="self-link" href="#example-8bb25199"></a>
    <div class="marker">EXAMPLE: Layout of structures using implicit member sizes, alignments and strides</div>
<pre class="highlight"><c- k>struct</c-> <c- nc>A</c-> <c- p>{</c->                                     <c- c1>//             align(8)  size(24)</c->
    <c- n>u</c->: <c- b>f32</c-><c- p>;</c->                                    <c- c1>// offset(0)   align(4)  size(4)</c->
    <c- n>v</c->: <c- b>f32</c-><c- p>;</c->                                    <c- c1>// offset(4)   align(4)  size(4)</c->
    <c- n>w</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->                              <c- c1>// offset(8)   align(8)  size(8)</c->
    <c- n>x</c->: <c- b>f32</c-><c- p>;</c->                                    <c- c1>// offset(16)  align(4)  size(4)</c->
    <c- c1>// -- implicit struct size padding --      // offset(20)            size(4)</c->
<c- p>};</c->

<c- p>[[</c-><c- n>block</c-><c- p>]]</c-> <c- k>struct</c-> <c- nc>B</c-> <c- p>{</c->                           <c- c1>//             align(16) size(160)</c->
    <c- n>a</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->                              <c- c1>// offset(0)   align(8)  size(8)</c->
    <c- c1>// -- implicit member alignment padding -- // offset(8)             size(8)</c->
    <c- n>b</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->                              <c- c1>// offset(16)  align(16) size(12)</c->
    <c- n>c</c->: <c- b>f32</c-><c- p>;</c->                                    <c- c1>// offset(28)  align(4)  size(4)</c->
    <c- n>d</c->: <c- b>f32</c-><c- p>;</c->                                    <c- c1>// offset(32)  align(4)  size(4)</c->
    <c- c1>// -- implicit member alignment padding -- // offset(36)            size(12)</c->
    <c- n>e</c->: <c- nc>A</c-><c- p>;</c->                                      <c- c1>// offset(40)  align(8)  size(24)</c->
    <c- n>f</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->                              <c- c1>// offset(64)  align(16) size(12)</c->
    <c- c1>// -- implicit member alignment padding -- // offset(76)            size(4)</c->
    <c- n>g</c->: <c- nc>array</c-><c- o>&lt;</c-><c- n>A</c-><c- p>,</c-> <c- mi>3</c-><c- o>></c-><c- p>;</c->                            <c- c1>// offset(80)  align(8)  size(72) stride(24)</c->
    <c- n>h</c->: <c- b>i32</c-><c- p>;</c->                                    <c- c1>// offset(152) align(4)  size(4)</c->
    <c- c1>// -- implicit struct size padding --      // offset(156)           size(4)</c->
<c- p>};</c->

<c- p>[[</c-><c- n>group</c-><c- p>(</c-><c- mi>0</c-><c- p>),</c-> <c- n>binding</c-><c- p>(</c-><c- mi>0</c-><c- p>)]]</c->
<c- n>var</c-><c- o>&lt;</c-><c- n>storage</c-><c- p>,</c-><c- n>read_write</c-><c- o>></c-> <c- n>storage_buffer</c->: <c- nc>B</c-><c- p>;</c->
</pre>
   </div>
   <div class="example wgsl no-marker" id="example-242a6d20">
    <a class="self-link" href="#example-242a6d20"></a>
    <div class="marker">EXAMPLE: Layout of structures with explicit member sizes, alignments and strides</div>
<pre class="highlight"><c- k>struct</c-> <c- nc>A</c-> <c- p>{</c->                                     <c- c1>//             align(8)  size(32)</c->
    <c- n>u</c->: <c- b>f32</c-><c- p>;</c->                                    <c- c1>// offset(0)   align(4)  size(4)</c->
    <c- n>v</c->: <c- b>f32</c-><c- p>;</c->                                    <c- c1>// offset(4)   align(4)  size(4)</c->
    <c- n>w</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->                              <c- c1>// offset(8)   align(8)  size(8)</c->
    <c- p>[[</c-><c- n>size</c-><c- p>(</c-><c- mi>16</c-><c- p>)]]</c-> <c- n>x</c->: <c- b>f32</c-><c- p>;</c->                       <c- c1>// offset(16)  align(4)  size(16)</c->
<c- p>};</c->

<c- p>[[</c-><c- n>block</c-><c- p>]]</c-> <c- k>struct</c-> <c- nc>B</c-> <c- p>{</c->                           <c- c1>//             align(16) size(208)</c->
    <c- n>a</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->                              <c- c1>// offset(0)   align(8)  size(8)</c->
    <c- c1>// -- implicit member alignment padding -- // offset(8)             size(8)</c->
    <c- n>b</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->                              <c- c1>// offset(16)  align(16) size(12)</c->
    <c- n>c</c->: <c- b>f32</c-><c- p>;</c->                                    <c- c1>// offset(28)  align(4)  size(4)</c->
    <c- n>d</c->: <c- b>f32</c-><c- p>;</c->                                    <c- c1>// offset(32)  align(4)  size(4)</c->
    <c- c1>// -- implicit member alignment padding -- // offset(36)            size(12)</c->
    <c- p>[[</c-><c- n>align</c-><c- p>(</c-><c- mi>16</c-><c- p>)]]</c-> <c- n>e</c->: <c- nc>A</c-><c- p>;</c->                        <c- c1>// offset(48)  align(16) size(32)</c->
    <c- n>f</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->                              <c- c1>// offset(80)  align(16) size(12)</c->
    <c- c1>// -- implicit member alignment padding -- // offset(92)            size(4)</c->
    <c- n>g</c->: <c- p>[[</c-><c- n>stride</c-><c- p>(</c-><c- mi>32</c-><c- p>)]]</c-> <c- n>array</c-><c- o>&lt;</c-><c- n>A</c-><c- p>,</c-> <c- mi>3</c-><c- o>></c-><c- p>;</c->             <c- c1>// offset(96)  align(8)  size(96)</c->
    <c- n>h</c->: <c- b>i32</c-><c- p>;</c->                                    <c- c1>// offset(192) align(4)  size(4)</c->
    <c- c1>// -- implicit struct size padding --      // offset(196)           size(12)</c->
<c- p>};</c->

<c- p>[[</c-><c- n>group</c-><c- p>(</c-><c- mi>0</c-><c- p>),</c-> <c- n>binding</c-><c- p>(</c-><c- mi>0</c-><c- p>)]]</c->
<c- n>var</c-><c- o>&lt;</c-><c- n>uniform</c-><c- o>></c-> <c- n>uniform_buffer</c->: <c- nc>B</c-><c- p>;</c->
</pre>
   </div>
   <h5 class="heading settled" data-level="4.3.7.3" id="array-layout-rules"><span class="secno">4.3.7.3. </span><span class="content">Array Layout Rules</span><a class="self-link" href="#array-layout-rules"></a></h5>
   <p>The first array element always has a zero byte offset from the start of the
array.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="element-stride">element stride</dfn> of an array is the number of bytes from the
start of one array element to the start of the next element.
It is determined as follows:</p>
   <ul>
    <li data-md>
     <p>It is the value of an explicit <a data-link-type="dfn" href="#attribute-stride" id="ref-for-attribute-stride⑤">stride</a> attribute on the type, if specified.</p>
    <li data-md>
     <p>Otherwise, it is the <dfn data-dfn-type="dfn" data-noexport id="implicit-stride">implicit stride<a class="self-link" href="#implicit-stride"></a></dfn>,
equal to the size of the array’s element type, rounded up to the alignment of
the element type:</p>
   </ul>
   <p class="algorithm" data-algorithm="array implicit element stride"> <a data-link-type="dfn" href="#strideof" id="ref-for-strideof">StrideOf</a>(array&lt;<var>T</var>[, <var>N</var>]>) = <a data-link-type="dfn" href="#roundup" id="ref-for-roundup⑤">roundUp</a>(<a data-link-type="dfn" href="#alignof" id="ref-for-alignof①③">AlignOf</a>(T), <a data-link-type="dfn" href="#sizeof" id="ref-for-sizeof⑧">SizeOf</a>(T)) </p>
   <p>In all cases, the array element stride must be a multiple of the element alignment.</p>
   <div class="example wgsl no-marker" id="example-e23859cb">
    <a class="self-link" href="#example-e23859cb"></a>
    <div class="marker">EXAMPLE: Implicit / explicit array element strides</div>
<pre class="highlight"><c- c1>// Array with an implicit element stride of 16 bytes</c->
<c- n>var</c-> <c- n>implicit_stride</c->: <c- nc>array</c-><c- o>&lt;</c-><c- n>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- mi>8</c-><c- o>></c-><c- p>;</c->

<c- c1>// Array with an explicit element stride of 32 bytes</c->
<c- n>var</c-> <c- n>explicit_stride</c->: <c- p>[[</c-><c- n>stride</c-><c- p>(</c-><c- mi>32</c-><c- p>)]]</c-> <c- n>array</c-><c- o>&lt;</c-><c- n>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- mi>8</c-><c- o>></c-><c- p>;</c->
</pre>
   </div>
   <p>Arrays decorated with the <a data-link-type="dfn" href="#attribute-stride" id="ref-for-attribute-stride⑥">stride</a> attribute must have a stride that is at
least the size of the element type, and be a multiple of the element type’s
alignment value.</p>
   <p>The array size (in bytes) is equal to the array’s element stride multiplied by the number of
elements:</p>
   <p class="algorithm" data-algorithm="array element stride"> <a data-link-type="dfn" href="#sizeof" id="ref-for-sizeof⑨">SizeOf</a>(array&lt;<var>T</var>, <var>N</var>>) = <a data-link-type="dfn" href="#strideof" id="ref-for-strideof①">StrideOf</a>(array&lt;<var>T</var>, <var>N</var>>) × <var>N</var><br> <a data-link-type="dfn" href="#sizeof" id="ref-for-sizeof①⓪">SizeOf</a>(array&lt;<var>T</var>>) = <a data-link-type="dfn" href="#strideof" id="ref-for-strideof②">StrideOf</a>(array&lt;<var>T</var>>) × N<sub>runtime</sub> </p>
   <p>The array alignment is equal to the element alignment:</p>
   <p class="algorithm" data-algorithm="array alignment"> <a data-link-type="dfn" href="#alignof" id="ref-for-alignof①④">AlignOf</a>(array&lt;<var>T</var>[, N]>) = <a data-link-type="dfn" href="#alignof" id="ref-for-alignof①⑤">AlignOf</a>(<var>T</var>) </p>
   <p>For example, the layout for a <code>[[stride(S)]] array&lt;T, 3></code> type is equivalent to
the following structure:</p>
   <div class="example wgsl global-scope no-marker" id="example-69d66557">
    <a class="self-link" href="#example-69d66557"></a>
    <div class="marker">EXAMPLE: Structure equivalent of a three element array</div>
<pre class="highlight"><c- k>struct</c-> <c- nc>Array</c-> <c- p>{</c->
  <c- p>[[</c-><c- n>size</c-><c- p>(</c-><c- n>S</c-><c- p>)]]</c-> <c- n>element_0</c->: <c- nc>T</c-><c- p>;</c->
  <c- p>[[</c-><c- n>size</c-><c- p>(</c-><c- n>S</c-><c- p>)]]</c-> <c- n>element_1</c->: <c- nc>T</c-><c- p>;</c->
  <c- p>[[</c-><c- n>size</c-><c- p>(</c-><c- n>S</c-><c- p>)]]</c-> <c- n>element_2</c->: <c- nc>T</c-><c- p>;</c->
<c- p>};</c->
</pre>
   </div>
   <h5 class="heading settled" data-level="4.3.7.4" id="internal-value-layout"><span class="secno">4.3.7.4. </span><span class="content">Internal Layout of Values</span><a class="self-link" href="#internal-value-layout"></a></h5>
   <p>This section describes how the internals of a value are placed in the byte locations
of a buffer, given an assumed placement of the overall value.
These layouts depend on the value’s type, the <a data-link-type="dfn" href="#attribute-stride" id="ref-for-attribute-stride⑦">stride</a> attribute on
array types, and the <a data-link-type="dfn" href="#attribute-align" id="ref-for-attribute-align③">align</a> and <a data-link-type="dfn" href="#attribute-size" id="ref-for-attribute-size④">size</a> attributes on
structure type members.</p>
   <p>The data will appear identically regardless of storage class.</p>
   <p>When a value <var>V</var> of type <a data-link-type="dfn" href="#u32" id="ref-for-u32⑤">u32</a> or <a data-link-type="dfn" href="#i32" id="ref-for-i32⑤">i32</a> is placed at byte offset <var>k</var> of a
host-shared buffer, then:</p>
   <ul>
    <li data-md>
     <p>Byte <var>k</var> contains bits 0 through 7 of <var>V</var></p>
    <li data-md>
     <p>Byte <var>k</var>+1 contains bits 8 through 15 of <var>V</var></p>
    <li data-md>
     <p>Byte <var>k</var>+2 contains bits 16 through 23 of <var>V</var></p>
    <li data-md>
     <p>Byte <var>k</var>+3 contains bits 24 through 31 of <var>V</var></p>
   </ul>
   <p class="note" role="note"><span>Note:</span> Recall that <a data-link-type="dfn" href="#i32" id="ref-for-i32⑥">i32</a> uses twos-complement representation, so the sign bit
is in bit position 31.</p>
   <p>A value <var>V</var> of type <a data-link-type="dfn" href="#f32" id="ref-for-f32③">f32</a> is represented in <a data-link-type="biblio" href="#biblio-ieee-754">IEEE-754</a> binary32 format.
It has one sign bit, 8 exponent bits, and 23 fraction bits.
When <var>V</var> is placed at byte offset <var>k</var> of host-shared buffer, then:</p>
   <ul>
    <li data-md>
     <p>Byte <var>k</var> contains bits 0 through 7 of the fraction.</p>
    <li data-md>
     <p>Byte <var>k</var>+1 contains bits 8 through 15 of the fraction.</p>
    <li data-md>
     <p>Bits 0 through 6 of byte <var>k</var>+2 contain bits 16 through 23 of the fraction.</p>
    <li data-md>
     <p>Bit 7 of byte <var>k</var>+2 contains bit 0 bit of the exponent.</p>
    <li data-md>
     <p>Bits 0 through 6 of byte <var>k</var>+3 contain bits 1 through 7 of the exponent.</p>
    <li data-md>
     <p>Bit 7 of byte <var>k</var>+3 contains the sign bit.</p>
   </ul>
   <p class="note" role="note"><span>Note:</span> The above rules imply that numeric values in host-shared buffers
are stored in little-endian format.</p>
   <p>When a value <var>V</var> of <a data-link-type="dfn" href="#atomic-type" id="ref-for-atomic-type⑥">atomic type</a> <code>atomic</code>&lt;<var>T</var>> is placed in a host-shared buffer,
it has the same internal layout as a value of the underlying type <var>T</var>.</p>
   <p>When a value <var>V</var> of vector type vec<var>N</var>&lt;<var>T</var>> is placed at
byte offset <var>k</var> of a host-shared buffer, then:</p>
   <ul>
    <li data-md>
     <p><var>V</var>.x is placed at byte offset <var>k</var></p>
    <li data-md>
     <p><var>V</var>.y is placed at byte offset <var>k</var>+4</p>
    <li data-md>
     <p>If <var>N</var> ≥ 3, then <var>V</var>.z is placed at byte offset <var>k</var>+8</p>
    <li data-md>
     <p>If <var>N</var> ≥ 4, then <var>V</var>.w is placed at byte offset <var>k</var>+12</p>
   </ul>
   <p>When a matrix value <var>M</var> is placed at byte offset <var>k</var> of a host-shared memory buffer, then:</p>
   <ul>
    <li data-md>
     <p>If <var>M</var> has 2 rows, then:</p>
     <ul>
      <li data-md>
       <p>Column vector <var>i</var> of <var>M</var> is placed at byte offset <var>k</var> + 8 × <var>i</var></p>
     </ul>
    <li data-md>
     <p>If <var>M</var> has 3 or 4 rows, then:</p>
     <ul>
      <li data-md>
       <p>Column vector <var>i</var> of <var>M</var> is placed at byte offset <var>k</var> + 16 × <var>i</var></p>
     </ul>
   </ul>
   <p>When a value of array type <var>A</var> is placed at byte offset <var>k</var> of a host-shared memory buffer,
then:</p>
   <ul>
    <li data-md>
     <p>Element <var>i</var> of the array is placed at byte offset <var>k</var> + <var>i</var> × <a data-link-type="dfn" href="#strideof" id="ref-for-strideof③">StrideOf</a>(<var>A</var>)</p>
   </ul>
   <p>When a value of structure type <var>S</var> is placed at byte offset <var>k</var> of a host-shared memory buffer,
then:</p>
   <ul>
    <li data-md>
     <p>The <var>i</var>’<sup>th</sup> member of the structure value is placed at byte offset <var>k</var> + <a data-link-type="dfn" href="#offsetofmember" id="ref-for-offsetofmember④">OffsetOfMember</a>(<var>S</var>,<var>i</var>)</p>
   </ul>
   <h5 class="heading settled" data-level="4.3.7.5" id="storage-class-layout-constraints"><span class="secno">4.3.7.5. </span><span class="content">Storage Class Layout Constraints</span><a class="self-link" href="#storage-class-layout-constraints"></a></h5>
   <p>The <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage④">storage</a> and <a data-link-type="dfn" href="#storage-classes-uniform" id="ref-for-storage-classes-uniform③">uniform</a> storage classes
have different buffer layout constraints which are described in this section.</p>
   <p>All structure and array types directly or indirectly referenced by a variable
must obey the constraints of the variable’s storage class.
Violations of a storage class constraint result in a compile-time error.</p>
   <p>In this section we define <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="requiredalignof">RequiredAlignOf</dfn>(<var>S</var>, <var>C</var>) as the
required byte offset alignment of values of host-shareable type <var>S</var> when
used by storage class <var>C</var>.</p>
   <table class="data">
    <caption> Alignment requirements of a host-shareable type for <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage⑤">storage</a> and <a data-link-type="dfn" href="#storage-classes-uniform" id="ref-for-storage-classes-uniform④">uniform</a> storage classes </caption>
    <thead>
     <tr>
      <th>Host-shareable type <var>S</var> 
      <th><a data-link-type="dfn" href="#requiredalignof" id="ref-for-requiredalignof">RequiredAlignOf</a>(<var>S</var>, <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage⑥">storage</a>) 
      <th><a data-link-type="dfn" href="#requiredalignof" id="ref-for-requiredalignof①">RequiredAlignOf</a>(<var>S</var>, <a data-link-type="dfn" href="#storage-classes-uniform" id="ref-for-storage-classes-uniform⑤">uniform</a>) 
    <tbody>
     <tr>
      <td><a data-link-type="dfn" href="#i32" id="ref-for-i32⑦">i32</a>, <a data-link-type="dfn" href="#u32" id="ref-for-u32⑥">u32</a>, or <a data-link-type="dfn" href="#f32" id="ref-for-f32④">f32</a> 
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof①⑥">AlignOf</a>(<var>S</var>) 
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof①⑦">AlignOf</a>(<var>S</var>) 
     <tr>
      <td>atomic&lt;T> 
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof①⑧">AlignOf</a>(<var>S</var>) 
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof①⑨">AlignOf</a>(<var>S</var>) 
     <tr>
      <td>vecN&lt;T> 
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof②⓪">AlignOf</a>(<var>S</var>) 
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof②①">AlignOf</a>(<var>S</var>) 
     <tr class="algorithm" data-algorithm="alignment of a matrix with N columns and M rows">
      <td>matNxM&lt;f32> 
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof②②">AlignOf</a>(<var>S</var>) 
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof②③">AlignOf</a>(<var>S</var>) 
     <tr class="algorithm" data-algorithm="alignment of an array">
      <td>array&lt;T, N> 
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof②④">AlignOf</a>(<var>S</var>) 
      <td><a data-link-type="dfn" href="#roundup" id="ref-for-roundup⑥">roundUp</a>(16, <a data-link-type="dfn" href="#alignof" id="ref-for-alignof②⑤">AlignOf</a>(<var>S</var>)) 
     <tr class="algorithm" data-algorithm="alignment of an runtime-sized array">
      <td>array&lt;T> 
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof②⑥">AlignOf</a>(<var>S</var>) 
      <td><a data-link-type="dfn" href="#roundup" id="ref-for-roundup⑦">roundUp</a>(16, <a data-link-type="dfn" href="#alignof" id="ref-for-alignof②⑦">AlignOf</a>(<var>S</var>)) 
     <tr class="algorithm" data-algorithm="alignment of a structure">
      <td>struct <var>S</var> 
      <td><a data-link-type="dfn" href="#alignof" id="ref-for-alignof②⑧">AlignOf</a>(<var>S</var>) 
      <td><a data-link-type="dfn" href="#roundup" id="ref-for-roundup⑧">roundUp</a>(16, <a data-link-type="dfn" href="#alignof" id="ref-for-alignof②⑨">AlignOf</a>(<var>S</var>))<br> 
   </table>
   <p>Structure members of type <var>T</var> must have a byte offset
from the start of the structure that is a multiple of the <a data-link-type="dfn" href="#requiredalignof" id="ref-for-requiredalignof②">RequiredAlignOf</a>(<var>T</var>, <var>C</var>)
for the storage class <var>C</var>:</p>
   <p class="algorithm" data-algorithm="structure member minimum alignment"> <a data-link-type="dfn" href="#offsetofmember" id="ref-for-offsetofmember⑤">OffsetOfMember</a>(<var>S</var>, <var>M</var>) = <var>k</var> × <a data-link-type="dfn" href="#requiredalignof" id="ref-for-requiredalignof③">RequiredAlignOf</a>(<var>T</var>, C)<br> Where <var>k</var> is a positive integer and <var>M</var> is a member of structure <var>S</var> with type <var>T</var> </p>
   <p>Arrays of element type <var>T</var> must have an <a data-link-type="dfn" href="#element-stride" id="ref-for-element-stride①">element stride</a> that is a
multiple of the <a data-link-type="dfn" href="#requiredalignof" id="ref-for-requiredalignof④">RequiredAlignOf</a>(<var>T</var>, <var>C</var>) for the storage class <var>C</var>:</p>
   <p class="algorithm" data-algorithm="array element minimum alignment"> <a data-link-type="dfn" href="#strideof" id="ref-for-strideof④">StrideOf</a>(array&lt;<var>T</var>[, <var>N</var>]>) = <var>k</var> × <a data-link-type="dfn" href="#requiredalignof" id="ref-for-requiredalignof⑤">RequiredAlignOf</a>(<var>T</var>, C)<br> Where <var>k</var> is a positive integer </p>
   <p class="note" role="note"><span>Note:</span> <a data-link-type="dfn" href="#requiredalignof" id="ref-for-requiredalignof⑥">RequiredAlignOf</a>(<var>T</var>, <var>C</var>) does not impose any additional restrictions
on the values permitted for an <a data-link-type="dfn" href="#attribute-align" id="ref-for-attribute-align④">align</a> decoration, nor does it affect the rules
of <a data-link-type="dfn" href="#alignof" id="ref-for-alignof③⓪">AlignOf</a>(<var>T</var>). Data is laid out with the rules defined in previous
sections and then the resulting layout is validated against the <a data-link-type="dfn" href="#requiredalignof" id="ref-for-requiredalignof⑦">RequiredAlignOf</a>(<var>T</var>, <var>C</var>) rules.</p>
   <p>The <a data-link-type="dfn" href="#storage-classes-uniform" id="ref-for-storage-classes-uniform⑥">uniform</a> storage class also requires that:</p>
   <ul>
    <li data-md>
     <p>Array elements are aligned to 16 byte boundaries.
That is, <a data-link-type="dfn" href="#strideof" id="ref-for-strideof⑤">StrideOf</a>(array&lt;<var>T</var>,<var>N</var>>) = 16 × <var>k</var>’ for some positive integer <var>k</var>’.</p>
    <li data-md>
     <p>If a structure member itself has a structure type <code>S</code>, then the number of
bytes between the start of that member and the start of any following member
must be at least <a data-link-type="dfn" href="#roundup" id="ref-for-roundup⑨">roundUp</a>(16, <a data-link-type="dfn" href="#sizeof" id="ref-for-sizeof①①">SizeOf</a>(S)).</p>
   </ul>
   <div class="example wgsl global-scope no-marker" id="example-bca74f6e">
    <a class="self-link" href="#example-bca74f6e"></a>
    <div class="marker">EXAMPLE: invalid structure layout for uniform storage class</div>
<pre class="highlight"><c- k>struct</c-> <c- nc>S</c-> <c- p>{</c->
  <c- n>x</c->: <c- b>f32</c-><c- p>;</c->
<c- p>};</c->
<c- k>struct</c-> <c- nc>Invalid</c-> <c- p>{</c->
  <c- n>a</c->: <c- nc>S</c-><c- p>;</c->
  <c- n>b</c->: <c- b>f32</c-><c- p>;</c-> <c- c1>// invalid: offset between a and b is 4 bytes, but must be at least 16</c->
<c- p>};</c->
<c- k>struct</c-> <c- nc>Valid</c-> <c- p>{</c->
  <c- n>a</c->: <c- nc>S</c-><c- p>;</c->
  <c- p>[[</c-><c- n>align</c-><c- p>(</c-><c- mi>16</c-><c- p>)]]</c-> <c- n>b</c->: <c- b>f32</c-><c- p>;</c-> <c- c1>// valid: offset between a and b is 16 bytes</c->
<c- p>};</c->
<c- p>[[</c-><c- n>group</c-><c- p>(</c-><c- mi>0</c-><c- p>),</c-> <c- n>binding</c-><c- p>(</c-><c- mi>0</c-><c- p>)]]</c-> <c- n>var</c-><c- o>&lt;</c-><c- n>uniform</c-><c- o>></c-> <c- n>invalid</c->: <c- nc>Invalid</c-><c- p>;</c->
<c- p>[[</c-><c- n>group</c-><c- p>(</c-><c- mi>0</c-><c- p>),</c-> <c- n>binding</c-><c- p>(</c-><c- mi>1</c-><c- p>)]]</c-> <c- n>var</c-><c- o>&lt;</c-><c- n>uniform</c-><c- o>></c-> <c- n>valid</c->: <c- nc>Valid</c-><c- p>;</c->
</pre>
   </div>
   <h3 class="heading settled" data-level="4.4" id="memory-view-types"><span class="secno">4.4. </span><span class="content">Memory View Types</span><a class="self-link" href="#memory-view-types"></a></h3>
   <p>In addition to calculating with <a data-link-type="dfn" href="#plain-type" id="ref-for-plain-type⑥">plain</a> values, a WGSL program will
also often read values from memory or write values to memory, via <a data-link-type="dfn" href="#memory-access" id="ref-for-memory-access">memory access</a> operations.
Each memory access is performed via a <a data-link-type="dfn" href="#memory-view" id="ref-for-memory-view">memory view</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="memory-view">memory view</dfn> comprises:</p>
   <ul>
    <li data-md>
     <p>a set of <a data-link-type="dfn" href="#memory-locations" id="ref-for-memory-locations">memory locations</a> in a particular <a data-link-type="dfn" href="#storage-classes" id="ref-for-storage-classes①">storage class</a>,</p>
    <li data-md>
     <p>an interpretation of the contents of those locations as a WGSL <a data-link-type="dfn" href="#type" id="ref-for-type">type</a>, and</p>
    <li data-md>
     <p>an <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode">access mode</a>.</p>
   </ul>
   <p>The access mode of a memory view must be supported by the storage class. See <a href="#storage-class">§ 4.3.6 Storage Classes</a>.</p>
   <p>WGSL has two kinds of types for representing memory views: <a data-link-type="dfn" href="#reference-type" id="ref-for-reference-type①">reference types</a> and <a data-link-type="dfn" href="#pointer-type" id="ref-for-pointer-type">pointer types</a>.</p>
   <table class="data">
    <thead>
     <tr>
      <th>Constraint
      <th>Type
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="memory reference type">
      <td style="width:25%"><var>SC</var> is a <a data-link-type="dfn" href="#storage-classes" id="ref-for-storage-classes②">storage class</a>,<br><var>T</var> is a <a data-link-type="dfn" href="#storable" id="ref-for-storable②">storable</a> type,<br><var>A</var> is an <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode①">access mode</a> 
      <td>ref&lt;<var>SC</var>,<var>T</var>,<var>A</var>> 
      <td>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="reference-type">reference type</dfn> identified with the set of <a data-link-type="dfn" href="#memory-view" id="ref-for-memory-view①">memory views</a> for memory locations in <var>SC</var> holding values of type <var>T</var>,
        supporting memory accesses described by mode <var>A</var>.<br> In this context <var>T</var> is known as the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="store-type">store type</dfn>.<br> Reference types are not written in WGSL progam source;
        instead they are used to analyze a WGSL program. 
     <tr class="algorithm" data-algorithm="pointer type">
      <td><var>SC</var> is a <a data-link-type="dfn" href="#storage-classes" id="ref-for-storage-classes③">storage class</a>,<br><var>T</var> is a <a data-link-type="dfn" href="#storable" id="ref-for-storable③">storable</a> type,<br><var>A</var> is an <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode②">access mode</a> 
      <td>ptr&lt;<var>SC</var>,<var>T</var>,<var>A</var>> 
      <td>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pointer-type">pointer type</dfn> identified with the set of <a data-link-type="dfn" href="#memory-view" id="ref-for-memory-view②">memory views</a> for memory locations in <var>SC</var> holding values of type <var>T</var>,
        supporting memory accesses described by mode <var>A</var>.<br> In this context <var>T</var> is known as the <dfn data-dfn-type="dfn" data-noexport id="pointee-type">pointee type<a class="self-link" href="#pointee-type"></a></dfn>.<br> Pointer types may appear in WGSL progam source. 
   </table>
   <p>When <em>analyzing</em> a WGSL program, reference and pointer types are fully parameterized by a storage class,
a storable type, and an access mode.
In code examples in this specification, the comments show this fully parameterized form.</p>
   <p>However, in WGSL <em>source</em> text:</p>
   <ul>
    <li data-md>
     <p>Reference types must not appear.</p>
    <li data-md>
     <p>Pointer types may appear.  A pointer type is spelled with parameterization by:</p>
     <ul>
      <li data-md>
       <p>storage class,</p>
      <li data-md>
       <p>store type, and</p>
      <li data-md>
       <p>sometimes by access mode, as specified in <a href="#access-mode-defaults">§ 4.4.1 Access Mode Defaults</a>.</p>
     </ul>
   </ul>
   <div class="example wgsl no-marker" id="example-be3f9324">
    <a class="self-link" href="#example-be3f9324"></a>
    <div class="marker">EXAMPLE: Pointer type</div>
<pre class="highlight"><c- k>fn</c-> <c- nf>my_function</c-><c- p>(</c->
  <c- c1>// 'ptr&lt;function,i32,read_write>' is the type of a pointer value that references</c->
  <c- c1>// storage for keeping an 'i32' value, using memory locations in the 'function'</c->
  <c- c1>// storage class.  Here 'i32' is the pointee type.</c->
  <c- c1>// The implied access mode is 'read_write'. See below for access mode defaults.</c->
  <c- n>ptr_int</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>function</c-><c- p>,</c-><c- b>i32</c-><c- o>></c-><c- p>,</c->

  <c- c1>// 'ptr&lt;private,array&lt;f32,50>,read_write>' is the type of a pointer value that</c->
  <c- c1>// refers to storage for keeping an array of 50 elements of type 'f32', using</c->
  <c- c1>// memory locations in the 'private' storage class.</c->
  <c- c1>// Here the pointee type is 'array&lt;f32,50>'.</c->
  <c- c1>// The implied access mode is 'read_write'. See below for access mode defaults.</c->
  <c- n>ptr_array</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>private</c-><c- p>,</c-> <c- n>array</c-><c- o>&lt;</c-><c- b>f32</c-><c- p>,</c-> <c- mi>50</c-><c- o>>></c->
<c- p>)</c-> <c- p>{</c-> <c- p>}</c->
</pre>
   </div>
   <p>Reference types and pointer types are both sets of memory views:
a particular memory view is associated with a unique reference value and also a unique pointer value:</p>
   <blockquote class="algorithm" data-algorithm="pointer reference correspondence"> Each pointer value <var>p</var> of type ptr&lt;<var>SC</var>,<var>T</var>,<var>A</var>> corresponds to a unique reference value <var>r</var> of type ref&lt;<var>SC</var>,<var>T</var>,<var>A</var>>,
and vice versa,
where <var>p</var> and <var>r</var> describe the same memory view. </blockquote>
   <h4 class="heading settled" data-level="4.4.1" id="access-mode-defaults"><span class="secno">4.4.1. </span><span class="content">Access Mode Defaults</span><a class="self-link" href="#access-mode-defaults"></a></h4>
   <p>The access mode for a memory view is often determined by context:</p>
   <ul>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage⑦">storage</a> storage class supports both <a data-link-type="dfn" href="#access-read" id="ref-for-access-read③">read</a> and <a data-link-type="dfn" href="#access-read_write" id="ref-for-access-read_write⑤">read_write</a> access modes.</p>
    <li data-md>
     <p>Each other storage class supports only one access mode, as described in the <a href="#storage-class-table">storage class</a> table.</p>
   </ul>
   <p>When writing a <a data-link-type="dfn" href="#variable-declaration" id="ref-for-variable-declaration">variable declaration</a> or a <a data-link-type="dfn" href="#pointer-type" id="ref-for-pointer-type①">pointer type</a> in WGSL source:</p>
   <ul>
    <li data-md>
     <p>For the <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage⑧">storage</a> storage class, the access mode is optional, and defaults to <a data-link-type="dfn" href="#access-read" id="ref-for-access-read④">read</a>.</p>
    <li data-md>
     <p>For other storage classes, the access mode must not be written.</p>
   </ul>
   <h4 class="heading settled" data-level="4.4.2" id="originating-variable-section"><span class="secno">4.4.2. </span><span class="content">Originating variable</span><a class="self-link" href="#originating-variable-section"></a></h4>
   <p>In WGSL a reference value always corresponds to the memory view
for some or all of the memory locations for some variable.
This defines the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="originating-variable">originating variable</dfn> for the reference value.</p>
   <p>A pointer value always corresponds to a reference value, and so the originating variable
of a pointer is the same as the originating variable of the corresponding reference.</p>
   <p class="note" role="note"><span>Note:</span> The originating variable is a dynamic concept.
The originating variable for a formal parameter of a function depends on the <a data-link-type="dfn" href="#call-site" id="ref-for-call-site">call sites</a> for the function.
Different call sites may supply pointers into different originating variables.</p>
   <p>If a reference or pointer access is out of bounds, an <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="invalid memory reference" data-noexport id="invalid-memory-reference">invalid
memory reference</dfn> is produced. <a data-link-type="dfn" href="#load-rule" id="ref-for-load-rule">Loads</a> from an invalid reference return one of:</p>
   <ul>
    <li data-md>
     <p>a value from any <a data-link-type="dfn" href="#memory-locations" id="ref-for-memory-locations①">memory location(s)</a> of the <a href="https://gpuweb.github.io/gpuweb/#buffers">WebGPU buffer</a> bound to the <a data-link-type="dfn" href="#originating-variable" id="ref-for-originating-variable">originating variable</a></p>
    <li data-md>
     <p>the <a data-link-type="dfn" href="#zero-value" id="ref-for-zero-value">zero value</a> for store type of the reference</p>
    <li data-md>
     <p>if the loaded value is a vector, the value (0, 0, 0, x), where x is:</p>
     <ul>
      <li data-md>
       <p>0, 1, or the maximum positive value for integer components</p>
      <li data-md>
       <p>0.0 or 1.0 for floating-point components</p>
     </ul>
   </ul>
   <a data-link-type="dfn" href="#assignment-statement" id="ref-for-assignment-statement">Stores</a> to an invalid reference may either: 
   <ul>
    <li data-md>
     <p>store the value to any <a data-link-type="dfn" href="#memory-locations" id="ref-for-memory-locations②">memory location(s)</a> of the <a href="https://gpuweb.github.io/gpuweb/#buffers">WebGPU buffer</a> bound to the <a data-link-type="dfn" href="#originating-variable" id="ref-for-originating-variable①">originating variable</a></p>
    <li data-md>
     <p>not be executed</p>
   </ul>
   <a href="#atomic-rmw">Read-modify-write atomics</a> that operate on an invalid memory
reference must load and store from the same <a data-link-type="dfn" href="#memory-locations" id="ref-for-memory-locations③">memory
locations</a> if they access memory. 
   <h4 class="heading settled" data-level="4.4.3" id="ref-ptr-use-cases"><span class="secno">4.4.3. </span><span class="content">Use cases for references and pointers</span><a class="self-link" href="#ref-ptr-use-cases"></a></h4>
   <p>References and pointers are distinguished by how they are used:</p>
   <ul>
    <li data-md>
     <p>The type of a <a data-link-type="dfn" href="#variable" id="ref-for-variable①">variable</a> is a reference type.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#address-of" id="ref-for-address-of">address-of</a> operation (unary <code>&amp;</code>) converts a reference value to its corresponding pointer value.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#indirection" id="ref-for-indirection">indirection</a> operation (unary <code>*</code>) converts a pointer value to its corresponding reference value.</p>
    <li data-md>
     <p>A <a data-link-type="dfn" href="#let-declaration" id="ref-for-let-declaration">let declaration</a> can be of pointer type, but not of reference type.</p>
    <li data-md>
     <p>A <a data-link-type="dfn" href="#formal-parameter" id="ref-for-formal-parameter">formal parameter</a> can be of pointer type, but not of reference type.</p>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#assignment-statement" id="ref-for-assignment-statement①">assignment statement</a> performs a <a data-link-type="dfn" href="#write-access" id="ref-for-write-access">write access</a> to update the contents of memory via a reference, where:</p>
     <ul>
      <li data-md>
       <p>The left-hand side of the assignment statement must be of reference type, with access mode <a data-link-type="dfn" href="#access-write" id="ref-for-access-write">write</a> or <a data-link-type="dfn" href="#access-read_write" id="ref-for-access-read_write⑥">read_write</a>.</p>
      <li data-md>
       <p>The right-hand side of the assignment statement must evaluate to the store type of the left-hand side.</p>
     </ul>
    <li data-md>
     <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="load-rule">Load Rule</dfn>: Inside a function, a reference is automatically dereferenced (read from) to satisfy type rules:</p>
     <ul>
      <li data-md>
       <p>In a function, when a reference expression <var>r</var> with store type <var>T</var> is used in a statement or an expression, where</p>
      <li data-md>
       <p><var>r</var> has an access mode of <a data-link-type="dfn" href="#access-read" id="ref-for-access-read⑤">read</a> or <a data-link-type="dfn" href="#access-read_write" id="ref-for-access-read_write⑦">read_write</a>, and</p>
      <li data-md>
       <p>The only potentially matching type rules require <var>r</var> to have a value of type <var>T</var>, then</p>
      <li data-md>
       <p>That type rule requirement is considered to have been met, and</p>
      <li data-md>
       <p>The result of evaluating <var>r</var> in that context is the value (of type <var>T</var>) stored in the memory locations
referenced by <var>r</var> at the time of evaluation.
That is, a <a data-link-type="dfn" href="#read-access" id="ref-for-read-access">read access</a> is performed to produce the result value.</p>
     </ul>
   </ul>
   <p>Defining references in this way enables simple idiomatic use of variables:</p>
   <div class="example wgsl no-marker" id="example-1ce00f64">
    <a class="self-link" href="#example-1ce00f64"></a>
    <div class="marker">EXAMPLE: Reference types enable simple use of variables</div>
<pre class="highlight"><c- p>[[</c-><c- n>stage</c-><c- p>(</c-><c- n>compute</c-><c- p>)]]</c->
<c- k>fn</c-> <c- nf>main</c-><c- p>()</c-> <c- p>{</c->
  <c- c1>// 'i' has reference type ref&lt;function,i32,read_write></c->
  <c- c1>// The memory locations for 'i' store the i32 value 0.</c->
  <c- n>var</c-> <c- n>i</c->: <c- b>i32</c-> <c- o>=</c-> <c- mi>0</c-><c- p>;</c->

  <c- c1>// 'i + 1' can only match a type rule where the 'i' subexpression is of type i32.</c->
  <c- c1>// So the expression 'i + 1' has type i32, and at evaluation, the 'i' subexpression</c->
  <c- c1>// evaluates to the i32 value stored in the memory locations for 'i' at the time</c->
  <c- c1>// of evaluation.</c->
  <c- a>let</c-> <c- n>one</c->: <c- b>i32</c-> <c- o>=</c-> <c- n>i</c-> <c- o>+</c-> <c- mi>1</c-><c- p>;</c->

  <c- c1>// Update the value in the locations referenced by 'i' so they hold the value 2.</c->
  <c- n>i</c-> <c- o>=</c-> <c- n>one</c-> <c- o>+</c-> <c- mi>1</c-><c- p>;</c->

  <c- c1>// Update the value in the locations referenced by 'i' so they hold the value 5.</c->
  <c- c1>// The evaluation of the right-hand-side occurs before the assignment takes effect.</c->
  <c- n>i</c-> <c- o>=</c-> <c- n>i</c-> <c- o>+</c-> <c- mi>3</c-><c- p>;</c->
<c- p>}</c->
</pre>
   </div>
   <div class="example wgsl no-marker" id="example-78cb44c6">
    <a class="self-link" href="#example-78cb44c6"></a>
    <div class="marker">EXAMPLE: Returning a reference returns the value loaded via the reference</div>
<pre class="highlight"><c- n>var</c-><c- o>&lt;</c-><c- n>private</c-><c- o>></c-> <c- n>age</c->: <c- b>i32</c-><c- p>;</c->
<c- k>fn</c-> <c- nf>get_age</c-><c- p>()</c-> -> <c- b>i32</c-> <c- p>{</c->
  <c- c1>// The type of the expression in the return statement must be 'i32' since it</c->
  <c- c1>// must match the declared return type of the function.</c->
  <c- c1>// The 'age' expression is of type ref&lt;private,i32,read_write>.</c->
  <c- c1>// Apply the Load Rule, since the store type of the reference matches the</c->
  <c- c1>// required type of the expression, and no other type rule applies.</c->
  <c- c1>// The evaluation of 'age' in this context is the i32 value loaded from the</c->
  <c- c1>// memory locations referenced by 'age' at the time the return statement is</c->
  <c- c1>// executed.</c->
  <c- k>return</c-> <c- n>age</c-><c- p>;</c->
<c- p>}</c->

<c- k>fn</c-> <c- nf>caller</c-><c- p>()</c-> <c- p>{</c->
  <c- n>age</c-> <c- o>=</c-> <c- mi>21</c-><c- p>;</c->
  <c- c1>// The copy_age constant will get the i32 value 21.</c->
  <c- a>let</c-> <c- n>copy_age</c->: <c- b>i32</c-> <c- o>=</c-> <c- n>get_age</c-><c- p>();</c->
<c- p>}</c->
</pre>
   </div>
   <p>Defining pointers in this way enables two key use cases:</p>
   <ul>
    <li data-md>
     <p>Using a let declaration with pointer type, to form a short name for part of the contents of a variable.</p>
    <li data-md>
     <p>Using a formal parameter of a function to refer to the storage of a variable that is accessible to the calling function.</p>
     <ul>
      <li data-md>
       <p>The call to such a function must supply a pointer value for that operand.
This often requires using an <a data-link-type="dfn" href="#address-of" id="ref-for-address-of①">address-of</a> operation (unary <code>&amp;</code>) to get a pointer to the variable’s contents.</p>
     </ul>
   </ul>
   <p class="note" role="note"><span>Note:</span> The following examples use WGSL features explained later in this specification.</p>
   <div class="example wgsl no-marker" id="example-55a7cfff">
    <a class="self-link" href="#example-55a7cfff"></a>
    <div class="marker">EXAMPLE: Using a pointer as a short name for part of a variable</div>
<pre class="highlight"><c- k>struct</c-> <c- nc>Particle</c-> <c- p>{</c->
  <c- n>position</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->
  <c- n>velocity</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->
<c- p>};</c->
<c- p>[[</c-><c- n>block</c-><c- p>]]</c-> <c- k>struct</c-> <c- nc>System</c-> <c- p>{</c->
  <c- n>active_index</c->: <c- b>i32</c-><c- p>;</c->
  <c- n>timestep</c->: <c- b>f32</c-><c- p>;</c->
  <c- n>particles</c->: <c- nc>array</c-><c- o>&lt;</c-><c- n>Particle</c-><c- p>,</c-><c- mi>100</c-><c- o>></c-><c- p>;</c->
<c- p>};</c->
<c- p>[[</c-><c- n>group</c-><c- p>(</c-><c- mi>0</c-><c- p>),</c-> <c- n>binding</c-><c- p>(</c-><c- mi>0</c-><c- p>)]]</c-> <c- n>var</c-><c- o>&lt;</c-><c- n>storage</c-><c- p>,</c-><c- n>read_write</c-><c- o>></c-> <c- n>system</c->: <c- nc>System</c-><c- p>;</c->

<c- p>[[</c-><c- n>stage</c-><c- p>(</c-><c- n>compute</c-><c- p>)]]</c->
<c- k>fn</c-> <c- nf>main</c-><c- p>()</c-> <c- p>{</c->
  <c- c1>// Form a pointer to a specific Particle in storage memory.</c->
  <c- a>let</c-> <c- n>active_particle</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>storage</c-><c- p>,</c-><c- n>Particle</c-><c- o>></c-> <c- o>=</c->
      <c- o>&amp;</c-><c- n>system</c-><c- p>.</c-><c- n>particles</c-><c- p>[</c-><c- n>system</c-><c- p>.</c-><c- n>active_index</c-><c- p>];</c->

  <c- a>let</c-> <c- n>delta_position</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-> <c- o>=</c-> <c- p>(</c-><c- o>*</c-><c- n>active_particle</c-><c- p>).</c-><c- n>velocity</c-> <c- o>*</c-> <c- n>system</c-><c- p>.</c-><c- n>timestep</c-><c- p>;</c->
  <c- a>let</c-> <c- n>current_position</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->  <c- o>=</c-> <c- p>(</c-><c- o>*</c-><c- n>active_particle</c-><c- p>).</c-><c- n>position</c-><c- p>;</c->
  <c- p>(</c-><c- o>*</c-><c- n>active_particle</c-><c- p>).</c-><c- n>position</c-> <c- o>=</c-> <c- n>delta_position</c-> <c- o>+</c-> <c- n>current_position</c-><c- p>;</c->
<c- p>}</c->
</pre>
   </div>
   <div class="example wgsl no-marker" id="example-c459e3d6">
    <a class="self-link" href="#example-c459e3d6"></a>
    <div class="marker">EXAMPLE: Using a pointer as a formal parameter</div>
<pre class="highlight"><c- k>fn</c-> <c- nf>add_one</c-><c- p>(</c-><c- n>x</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>function</c-><c- p>,</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> <c- p>{</c->
  <c- c1>// Update the locations for 'x' to contain the next higher integer value,</c->
  <c- c1>// (or to wrap around to the largest negative i32 value).</c->
  <c- c1>// On the left-hand side, unary '*' converts the pointer to a reference that</c->
  <c- c1>// can then be assigned to. It has a read_write access mode, by default.</c->
  <c- c1>// On the right-hand side:</c->
  <c- c1>//    - Unary '*' converts the pointer to a reference, with a read_write</c->
  <c- c1>//      access mode.</c->
  <c- c1>//    - The only matching type rule is for addition (+) and requires '*x' to</c->
  <c- c1>//      have type i32, which is the store type for '*x'.  So the Load Rule</c->
  <c- c1>//      applies and '*x' evaluates to the value stored in the memory for '*x'</c->
  <c- c1>//      at the time of evaluation, which is the i32 value for 0.</c->
  <c- c1>//    - Add 1 to 0, to produce a final value of 1 for the right-hand side.</c->
  <c- c1>// Store 1 into the memory for '*x'.</c->
  <c- o>*</c-><c- n>x</c-> <c- o>=</c-> <c- o>*</c-><c- n>x</c-> <c- o>+</c-> <c- mi>1</c-><c- p>;</c->
<c- p>}</c->

<c- p>[[</c-><c- n>stage</c-><c- p>(</c-><c- n>compute</c-><c- p>)]]</c->
<c- k>fn</c-> <c- nf>main</c-><c- p>()</c-> <c- p>{</c->
  <c- n>var</c-> <c- n>i</c->: <c- b>i32</c-> <c- o>=</c-> <c- mi>0</c-><c- p>;</c->

  <c- c1>// Modify the contents of 'i' so it will contain 1.</c->
  <c- c1>// Use unary '&amp;' to get a pointer value for 'i'.</c->
  <c- c1>// This is a clear signal that the called function has access to the storage</c->
  <c- c1>// for 'i', and may modify it.</c->
  <c- n>add_one</c-><c- p>(</c-><c- o>&amp;</c-><c- n>i</c-><c- p>);</c->
  <c- a>let</c-> <c- n>one</c->: <c- b>i32</c-> <c- o>=</c-> <c- n>i</c-><c- p>;</c->  <c- c1>// 'one' has value 1.</c->
<c- p>}</c->
</pre>
   </div>
   <h4 class="heading settled" data-level="4.4.4" id="forming-references-and-pointers"><span class="secno">4.4.4. </span><span class="content">Forming reference and pointer values</span><a class="self-link" href="#forming-references-and-pointers"></a></h4>
   <p>A reference value is formed in one of the following ways:</p>
   <ul>
    <li data-md>
     <p>The identifer <a data-link-type="dfn" href="#resolves" id="ref-for-resolves">resolving</a> to an <a data-link-type="dfn" href="#in-scope" id="ref-for-in-scope">in-scope</a> variable <em>v</em> denotes the reference value for <em>v</em>'s storage.</p>
     <ul>
      <li data-md>
       <p>The resolved variable is the <a data-link-type="dfn" href="#originating-variable" id="ref-for-originating-variable②">originating variable</a> for the reference.</p>
     </ul>
    <li data-md>
     <p>Use the <a data-link-type="dfn" href="#indirection" id="ref-for-indirection①">indirection</a> (unary <code>*</code>) operation on a pointer.</p>
     <ul>
      <li data-md>
       <p>The originating variable of the result is defined as the originating variable of the pointer.</p>
     </ul>
    <li data-md>
     <p>Use a <dfn data-dfn-type="dfn" data-noexport id="composite-reference-component-expression">composite reference component expression<a class="self-link" href="#composite-reference-component-expression"></a></dfn>.
In each case the originating variable of the result is defined as the originating variable of the
original reference.</p>
     <ul>
      <li data-md>
       <p>Given a reference with a vector store type, appending a single-letter vector access phrase
results in a reference to the named component of the vector.
See <a href="#component-reference-from-vector-reference">§ 6.7.1.3 Component reference from vector reference</a>.</p>
      <li data-md>
       <p>Given a reference with a vector store type, appending an array index access phrase
results in a reference to the indexed component of the vector.
See <a href="#component-reference-from-vector-reference">§ 6.7.1.3 Component reference from vector reference</a>.</p>
      <li data-md>
       <p>Given a reference with a matrix store type, appending an array index access phrase
results in a reference to the indexed column vector of the matrix.
See <a href="#matrix-access-expr">§ 6.7.2 Matrix Access Expression</a>.</p>
      <li data-md>
       <p>Given a reference with an array store type, appending an array index access phrase
results in a reference to the indexed element of the array.
See <a href="#array-access-expr">§ 6.7.3 Array Access Expression</a>.</p>
      <li data-md>
       <p>Given a reference with a structure store type, appending a member access phrase
results in a reference to the named member of the structure.
See <a href="#struct-access-expr">§ 6.7.4 Structure Access Expression</a>.</p>
     </ul>
   </ul>
   <p>In all cases, the access mode of the result is the same as the access mode of the original reference.</p>
   <div class="example wgsl no-marker" id="example-30e908f5">
    <a class="self-link" href="#example-30e908f5"></a>
    <div class="marker">EXAMPLE: Component reference from a composite reference</div>
<pre class="highlight"><c- k>struct</c-> <c- nc>S</c-> <c- p>{</c->
    <c- n>age</c->: <c- b>i32</c-><c- p>;</c->
    <c- n>weight</c->: <c- b>f32</c-><c- p>;</c->
<c- p>};</c->
<c- n>var</c-><c- o>&lt;</c-><c- n>private</c-><c- o>></c-> <c- n>person</c->: <c- nc>S</c-><c- p>;</c->
<c- c1>// Uses of 'person' denote the reference to the storage underlying the variable,</c->
<c- c1>// and will have type ref&lt;private,S,read_write>.</c->

<c- k>fn</c-> <c- nf>f</c-><c- p>()</c-> <c- p>{</c->
    <c- n>var</c-> <c- n>uv</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->
    <c- c1>// Uses of 'uv' denote the reference to the storage underlying the variable,</c->
    <c- c1>// and will have type ref&lt;function,vec2&lt;f32>,read_write>.</c->

    <c- c1>// Evaluate the left-hand side of the assignment:</c->
    <c- c1>//   Evaluate 'uv.x' to yield a reference:</c->
    <c- c1>//   1. First evaluate 'uv', yielding a reference to the storage for</c->
    <c- c1>//      the 'uv' variable. The result has type ref&lt;function,vec2&lt;f32>,read_write>.</c->
    <c- c1>//   2. Then apply the '.x' vector access phrase, yielding a reference to</c->
    <c- c1>//      the storage for the first component of the vector pointed at by the</c->
    <c- c1>//      reference value from the previous step.</c->
    <c- c1>//      The result has type ref&lt;function,f32,read_write>.</c->
    <c- c1>// Evaluating the right-hand side of the assignment yields the f32 value 1.0.</c->
    <c- c1>// Store the f32 value 1.0 into the storage memory locations referenced by uv.x.</c->
    <c- n>uv</c-><c- p>.</c-><c- n>x</c-> <c- o>=</c-> <c- mf>1.0</c-><c- p>;</c->

    <c- c1>// Evaluate the left-hand side of the assignment:</c->
    <c- c1>//   Evaluate 'uv[1]' to yield a reference:</c->
    <c- c1>//   1. First evaluate 'uv', yielding a reference to the storage for</c->
    <c- c1>//      the 'uv' variable. The result has type ref&lt;function,vec2&lt;f32>,read_write>.</c->
    <c- c1>//   2. Then apply the '[1]' array index phrase, yielding a reference to</c->
    <c- c1>//      the storage for second component of the vector referenced from</c->
    <c- c1>//      the previous step.  The result has type ref&lt;function,f32,read_write>.</c->
    <c- c1>// Evaluating the right-hand side of the assignment yields the f32 value 2.0.</c->
    <c- c1>// Store the f32 value 2.0 into the storage memory locations referenced by uv[1].</c->
    <c- n>uv</c-><c- p>[</c-><c- mi>1</c-><c- p>]</c-> <c- o>=</c-> <c- mf>2.0</c-><c- p>;</c->

    <c- n>var</c-> <c- n>m</c->: <c- nc>mat3x2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->
    <c- c1>// When evaluating 'm[2]':</c->
    <c- c1>// 1. First evaluate 'm', yielding a reference to the storage for</c->
    <c- c1>//    the 'm' variable. The result has type ref&lt;function,mat3x2&lt;f32>,read_write>.</c->
    <c- c1>// 2. Then apply the '[2]' array index phrase, yielding a reference to</c->
    <c- c1>//    the storage for the third column vector pointed at by the reference</c->
    <c- c1>//    value from the previous step.</c->
    <c- c1>//    Therefore the 'm[2]' expression has type ref&lt;function,vec2&lt;f32>,read_write>.</c->
    <c- c1>// The 'let' declaration is for type vec2&lt;f32>, so the declaration</c->
    <c- c1>// statement requires the initializer to be of type vec2&lt;f32>.</c->
    <c- c1>// The Load Rule applies (because no other type rule can apply), and</c->
    <c- c1>// the evaluation of the initializer yields the vec2&lt;f32> value loaded</c->
    <c- c1>// from the memory locations referenced by 'm[2]' at the time the declaration</c->
    <c- c1>// is executed.</c->
    <c- a>let</c-> <c- n>p_m_col2</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-> <c- o>=</c-> <c- n>m</c-><c- p>[</c-><c- mi>2</c-><c- p>];</c->

    <c- n>var</c-> <c- n>A</c->: <c- nc>array</c-><c- o>&lt;</c-><c- b>i32</c-><c- p>,</c-><c- mi>5</c-><c- o>></c-><c- p>;</c->
    <c- c1>// When evaluating 'A[4]'</c->
    <c- c1>// 1. First evaluate 'A', yielding a reference to the storage for</c->
    <c- c1>//    the 'A' variable. The result has type ref&lt;function,array&lt;i32,5>,read_write>.</c->
    <c- c1>// 2. Then apply the '[4]' array index phrase, yielding a reference to</c->
    <c- c1>//    the storage for the fifth element of the array referenced by</c->
    <c- c1>//    the reference value from the previous step.</c->
    <c- c1>//    The result value has type ref&lt;function,i32,read_write>.</c->
    <c- c1>// The let declaration requires the right-hand-side to be of type i32.</c->
    <c- c1>// The Load Rule applies (because no other type rule can apply), and</c->
    <c- c1>// the evaluation of the initializer yields the i32 value loaded from</c->
    <c- c1>// the memory locations referenced by 'A[5]' at the time the declaration</c->
    <c- c1>// is executed.</c->
    <c- a>let</c-> <c- n>A_4_value</c->: <c- b>i32</c-> <c- o>=</c-> <c- n>A</c-><c- p>[</c-><c- mi>4</c-><c- p>];</c->

    <c- c1>// When evaluating 'person.weight'</c->
    <c- c1>// 1. First evaluate 'person', yielding a reference to the storage for</c->
    <c- c1>//    the 'person' variable declared at module scope.</c->
    <c- c1>//    The result has type ref&lt;private,S,read_write>.</c->
    <c- c1>// 2. Then apply the '.weight' member access phrase, yielding a reference to</c->
    <c- c1>//    the storage for the second member of the memory referenced by</c->
    <c- c1>//    the reference value from the previous step.</c->
    <c- c1>//    The result has type ref&lt;private,f32,read_write>.</c->
    <c- c1>// The let declaration requires the right-hand-side to be of type f32.</c->
    <c- c1>// The Load Rule applies (because no other type rule can apply), and</c->
    <c- c1>// the evaluation of the initializer yields the f32 value loaded from</c->
    <c- c1>// the memory locations referenced by 'person.weight' at the time the</c->
    <c- c1>// declaration is executed.</c->
    <c- a>let</c-> <c- n>person_weight</c->: <c- b>f32</c-> <c- o>=</c-> <c- n>person</c-><c- p>.</c-><c- n>weight</c-><c- p>;</c->
<c- p>}</c->
</pre>
   </div>
   <p>A pointer value is formed in one of the following ways:</p>
   <ul>
    <li data-md>
     <p>Use the <a data-link-type="dfn" href="#address-of" id="ref-for-address-of②">address-of</a> (unary '&amp;') operator on a reference.</p>
     <ul>
      <li data-md>
       <p>The originating variable of the result is defined as the originating variable of the reference.</p>
     </ul>
    <li data-md>
     <p>If a function <a data-link-type="dfn" href="#formal-parameter" id="ref-for-formal-parameter①">formal parameter</a> has pointer type, then when the function is invoked
at runtime the uses of the formal parameter denote the pointer value
provided to the corresponding operand at the <a data-link-type="dfn" href="#call-site" id="ref-for-call-site①">call site</a> in the calling function.</p>
     <ul>
      <li data-md>
       <p>The originating variable of the formal parameter (at runtime) is defined as
the originating variable of the pointer operand at the call site.</p>
     </ul>
   </ul>
   <p>In all cases, the access mode of the result is the same as the access mode of the original pointer.</p>
   <div class="example wgsl no-marker" id="example-68a8ce53">
    <a class="self-link" href="#example-68a8ce53"></a>
    <div class="marker">EXAMPLE: Pointer from a variable</div>
<pre class="highlight"><c- c1>// Declare a variable in the private storage class, for storing an f32 value.</c->
<c- n>var</c-><c- o>&lt;</c-><c- n>private</c-><c- o>></c-> <c- n>x</c->: <c- b>f32</c-><c- p>;</c->

<c- k>fn</c-> <c- nf>f</c-><c- p>()</c-> <c- p>{</c->
    <c- c1>// Declare a variable in the function storage class, for storing an i32 value.</c->
    <c- n>var</c-> <c- n>y</c->: <c- b>i32</c-><c- p>;</c->

    <c- c1>// The name 'x' resolves to the module-scope variable 'x',</c->
    <c- c1>// and has reference type ref&lt;private,f32,read_write>.</c->
    <c- c1>// Applying the unary '&amp;' operator converts the reference to a pointer.</c->
    <c- c1>// The access mode is the same as the access mode of the original variable, so</c->
    <c- c1>// the fully specified type is ptr&lt;private,f32,read_write>.  But read_write</c->
    <c- c1>// is the default access mode for function storage class, so read_write does not</c->
    <c- c1>// have to be spelled in this case</c->
    <c- a>let</c-> <c- n>x_ptr</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>private</c-><c- p>,</c-><c- b>f32</c-><c- o>></c-> <c- o>=</c-> <c- o>&amp;</c-><c- n>x</c-><c- p>;</c->

    <c- c1>// The name 'y' resolves to the function-scope variable 'y',</c->
    <c- c1>// and has reference type ref&lt;private,i32,read_write>.</c->
    <c- c1>// Applying the unary '&amp;' operator converts the reference to a pointer.</c->
    <c- c1>// The access mode defaults to 'read_write'.</c->
    <c- a>let</c-> <c- n>y_ptr</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>function</c-><c- p>,</c-><c- b>i32</c-><c- o>></c-> <c- o>=</c-> <c- o>&amp;</c-><c- n>y</c-><c- p>;</c->

    <c- c1>// A new variable, distinct from the variable declared at module scope.</c->
    <c- n>var</c-> <c- n>x</c->: <c- b>u32</c-><c- p>;</c->

    <c- c1>// Here, the name 'x' resolves to the function-scope variable 'x' declared in</c->
    <c- c1>// the previous statement, and has type ref&lt;function,u32,read_write>.</c->
    <c- c1>// Applying the unary '&amp;' operator converts the reference to a pointer.</c->
    <c- c1>// The acces mode defaults to 'read_write'.</c->
    <c- a>let</c-> <c- n>inner_x_ptr</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>function</c-><c- p>,</c-><c- b>u32</c-><c- o>></c-> <c- o>=</c-> <c- o>&amp;</c-><c- n>x</c-><c- p>;</c->
<c- p>}</c->
</pre>
   </div>
   <h4 class="heading settled" data-level="4.4.5" id="pointers-other-languages"><span class="secno">4.4.5. </span><span class="content">Comparison with references and pointers in other languages</span><a class="self-link" href="#pointers-other-languages"></a></h4>
   <p>This section is informative, not normative.</p>
   <p>References and pointers in WGSL are more restricted than in other languages.
In particular:</p>
   <ul>
    <li data-md>
     <p>In WGSL a reference can’t directly be declared as an alias to another reference or variable,
either as a variable or as a formal parameter.</p>
    <li data-md>
     <p>In WGSL pointers and references are not <a data-link-type="dfn" href="#storable" id="ref-for-storable④">storable</a>.
That is, the content of a WGSL variable may not contain a pointer or a reference.</p>
    <li data-md>
     <p>In WGSL a function must not return a pointer or reference.</p>
    <li data-md>
     <p>In WGSL there is no way to convert between integer values and pointer values.</p>
    <li data-md>
     <p>In WGSL there is no way to forcibly change the type of a pointer value into another pointer type.</p>
     <ul>
      <li data-md>
       <p>A composite component reference expression is different:
it takes a reference to a composite value and yields a reference to
one of the components or elements inside the composite value.
These are considered different references in WGSL, even though they may
have the same machine address at a lower level of implementation abstraction.</p>
     </ul>
    <li data-md>
     <p>In WGSL there is no way to forcibly change the type of a reference value into another reference type.</p>
    <li data-md>
     <p>In WGSL there is no way to change the access mode of a pointer or reference.</p>
     <ul>
      <li data-md>
       <p>By comparison, C++ automatically converts a non-const pointer to a const pointer,
and has a <code>const_cast</code> to convert a const value to a non-const value.</p>
     </ul>
    <li data-md>
     <p>In WGSL there is no way to allocate new storage from a "heap".</p>
    <li data-md>
     <p>In WGSL there is no way to explicitly destroy a variable.
The storage for a WGSL variable becomes inaccessible only when the variable goes out of scope.</p>
   </ul>
   <p class="note" role="note"><span>Note:</span> From the above rules, it is not possible to form a "dangling" pointer,
i.e. a pointer that does not reference the storage for a valid (or "live")
originating variable.</p>
   <h3 class="heading settled" data-level="4.5" id="texture-types"><span class="secno">4.5. </span><span class="content">Texture and Sampler Types</span><a class="self-link" href="#texture-types"></a></h3>
   <p>A <dfn data-dfn-type="dfn" data-noexport id="texel">texel<a class="self-link" href="#texel"></a></dfn> is a scalar or vector used as the smallest independently accessible element of a <a data-link-type="dfn" href="#texture" id="ref-for-texture②">texture</a>.
The word <em>texel</em> is short for <em>texture element</em>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="texture">texture</dfn> is a collection of texels supporting special operations useful for rendering.
In WGSL, those operations are invoked via texture builtin functions.
See <a href="#texture-builtin-functions">§ 16.8 Texture built-in functions</a> for a complete list.</p>
   <p>A WGSL texture corresponds to a <a href="https://gpuweb.github.io/gpuweb/#gputexture">WebGPU GPUTexture</a>.</p>
   <p>A texture is either arrayed, or non-arrayed:</p>
   <ul>
    <li data-md>
     <p>A <dfn data-dfn-type="dfn" data-noexport id="non-arrayed-texture">non-arrayed texture<a class="self-link" href="#non-arrayed-texture"></a></dfn> is a grid of texels. Each texel has a unique grid coordinate.</p>
    <li data-md>
     <p>An <dfn data-dfn-type="dfn" data-noexport id="arrayed-texture">arrayed texture<a class="self-link" href="#arrayed-texture"></a></dfn> is a homegeneous array of grids of texels.
In an arrayed texture, each texel is identified with its unique combination of array index and grid coordinate.</p>
   </ul>
   <p>A texture has the following features:</p>
   <dl>
    <dt data-md>texel format
    <dd data-md>
     <p>The data in each texel. See <a href="#texel-formats">§ 4.5.1 Texel formats</a></p>
    <dt data-md>dimensionality
    <dd data-md>
     <p>The number of dimensions in the grid coordinates, and how the coordinates are interpreted.
The number of dimensions is 1, 2, or 3.
Most textures use cartesian coordinates.
Cube textures have six square faces, and are sampled with
a three dimensional coordinate interpreted as a direction vector from the origin toward
the cube centered on the orgin.</p>
    <dt data-md>size
    <dd data-md>
     <p>The extent of grid coordinates along each dimension</p>
    <dt data-md>mip level count
    <dd data-md>
     <p>The mip level count is at least 1 for sampled textures, and equal to 1 for storage textures.<br> Mip level 0 contains a full size version of the texture.
Each successive mip level contains a filtered version of the previous mip level
at half the size (within rounding) of the previous mip level.<br> When sampling a texture, an explicit or implicitly-computed level-of-detail is used
to select the mip levels from which to read texel data.  These are then combined via
filtering to produce the sampled value.</p>
    <dt data-md>arrayed
    <dd data-md>
     <p>whether the texture is arrayed</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="array-size">array size<a class="self-link" href="#array-size"></a></dfn>
    <dd data-md>
     <p>the number of homogeneous grids, if the texture is arrayed</p>
   </dl>
   <p>A texture’s representation is typically optimized for rendering operations.
To achieve this, many details are hidden from the programmer, including data layouts, data types, and
internal operations that cannot be expressed directly in the shader language.</p>
   <p>As a consequence, a shader does not have direct access to the texel storage within a texture variable.
Instead, access is mediated through an opaque handle:</p>
   <ul>
    <li data-md>
     <p>Within the shader:</p>
     <ul>
      <li data-md>
       <p>Declare a module-scope variable
where the <a data-link-type="dfn" href="#store-type" id="ref-for-store-type④">store type</a> is one of the texture types described in later sections.
The variable stores an opaque handle to the underlying texture memory, and is
automatically placed in the <a data-link-type="dfn" href="#storage-classes-handle" id="ref-for-storage-classes-handle">handle</a> storage class.</p>
      <li data-md>
       <p>Inside a function, call one of the texture builtin functions, and provide
the texture variable as the first parameter.</p>
     </ul>
    <li data-md>
     <p>When constructing the WebGPU pipeline, the texture variable’s store type and binding
must be compatible with the corresponding bind group layout entry.</p>
   </ul>
   <p>TODO: update this wording to handle function parameters that are textures or samplers.</p>
   <p>In this way, the set of supported operations for a texture type
is determined by the availability of texture builtin functions accepting that texture type
as the first parameter.</p>
   <p class="note" role="note"><span>Note:</span> The handle stored by a texture variable cannot be changed by the shader.
That is, the variable is read-only, even if the underlying texture to which it provides
access may be mutable (e.g. a write-only storage texture).</p>
   <p>TODO: Describe the use of samplers, in the same broad framework.</p>
   <h4 class="heading settled" data-level="4.5.1" id="texel-formats"><span class="secno">4.5.1. </span><span class="content">Texel formats</span><a class="self-link" href="#texel-formats"></a></h4>
   <p>In WGSL, certain texture types are parameterized by texel format.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="texel-format">texel format</dfn> is characterized by:</p>
   <dl>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="channels">channels<a class="self-link" href="#channels"></a></dfn>
    <dd data-md>
     <p>Each channel contains a scalar.
A texel format has up to four channels: <code>r</code>, <code>g</code>, <code>b</code>, and <code>a</code>,
normally corresponding to the concepts of red, green, blue, and alpha channels.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="channel-format">channel format<a class="self-link" href="#channel-format"></a></dfn>
    <dd data-md>
     <p>The number of bits in the channel, and how those bits are interpreted.</p>
   </dl>
   <p>Each texel format in WGSL corresponds to a <a href="https://gpuweb.github.io/gpuweb/#enumdef-gputextureformat">WebGPU GPUTextureFormat</a> with the same name.</p>
   <p>Only certain texel formats are used in WGSL source code.
The channel formats used to define those texel formats are listed in the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="channel-formats">Channel Formats</dfn> table.
The last column specfies the conversion from the stored channel bits to the value used in the shader.
This is also known as the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="channel-transfer-function">channel transfer function</dfn>, or CTF.</p>
   <table class="data">
    <caption>Channel Formats</caption>
    <thead>
     <tr>
      <th>Channel format 
      <th>Number of stored bits 
      <th>Interpetation of stored bits 
      <th>Shader type
      <td style="width:25%">Shader value
(Channel Transfer Function) 
    <tbody>
     <tr>
      <td>8unorm
      <td>8
      <td>unsigned integer <var>v</var> ∈ {0,...,255}
      <td>f32
      <td> <var>v</var> ÷ 255 
     <tr>
      <td>8snorm
      <td>8
      <td>signed integer <var>v</var> ∈ {-128,...,127}
      <td>f32
      <td> max(-1, <var>v</var> ÷ 127) 
     <tr>
      <td>8uint
      <td>8
      <td>unsigned integer <var>v</var> ∈ {0,...,255}
      <td>u32
      <td> <var>v</var> 
     <tr>
      <td>8sint
      <td>8
      <td>signed integer <var>v</var> ∈ {-128,...,127}
      <td>i32
      <td> <var>v</var> 
     <tr>
      <td>16uint
      <td>16
      <td>unsigned integer <var>v</var> ∈ {0,...,65535}
      <td>u32
      <td> <var>v</var> 
     <tr>
      <td>16sint
      <td>16
      <td>signed integer <var>v</var> ∈ {-32768,...,32767}
      <td>i32
      <td> <var>v</var> 
     <tr>
      <td>16float
      <td>16
      <td><a data-link-type="biblio" href="#biblio-ieee-754">IEEE-754</a> binary16 16-bit floating point value <var>v</var>, with 1 sign bit, 5 exponent bits, 10 mantissa bits
      <td>f32
      <td><var>v</var> 
     <tr>
      <td>32uint
      <td>32
      <td>32-bit unsigned integer value <var>v</var>
      <td>u32
      <td><var>v</var> 
     <tr>
      <td>32sint
      <td>32
      <td>32-bit signed integer value <var>v</var>
      <td>i32
      <td><var>v</var> 
     <tr>
      <td>32float
      <td>32
      <td><a data-link-type="biblio" href="#biblio-ieee-754">IEEE-754</a> binary32 32-bit floating point value <var>v</var>
      <td>f32
      <td><var>v</var> 
   </table>
   <p>The texel formats listed in the <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="storage-texel-formats" data-noexport id="storage-texel-formats">Texel Formats for Storage Textures</dfn> table
correspond to the <a href="https://gpuweb.github.io/gpuweb/#plain-color-formats">WebGPU plain color formats</a> which support the <a href="https://gpuweb.github.io/gpuweb/#dom-gputextureusage-storage">WebGPU STORAGE</a> usage.
These texel formats are used to parameterize the storage texture types defined
in <a href="#texture-storage">§ 4.5.5 Storage Texture Types</a>.</p>
   <p>When the texel format does not have all four channels, then:</p>
   <ul>
    <li data-md>
     <p>When reading the texel:</p>
     <ul>
      <li data-md>
       <p>If the texel format has no green channel, then the second component of the shader value is 0.</p>
      <li data-md>
       <p>If the texel format has no blue channel, then the third component of the shader value is 0.</p>
      <li data-md>
       <p>If the texel format has no alpha channel, then the fourth component of the shader value is 1.</p>
     </ul>
    <li data-md>
     <p>When writing the texel, shader value components for missing channels are ignored.</p>
   </ul>
   <p>The last column in the table below uses the format-specific <a data-link-type="dfn" href="#channel-transfer-function" id="ref-for-channel-transfer-function">channel transfer function</a> from the <a data-link-type="dfn" href="#channel-formats" id="ref-for-channel-formats">channel formats</a> table.</p>
   <table class="data">
    <caption>Texel Formats for Storage Textures</caption>
    <thead>
     <tr>
      <th>Texel format 
      <th>Channel format 
      <th>Channels in memory order 
      <th style="width:50%">Corresponding shader value 
    <tbody>
     <tr>
      <td>rgba8unorm
      <td>8unorm
      <td>r, g, b, a
      <td>vec4&lt;f32>(CTF(r), CTF(g), CTF(b), CTF(a)) 
     <tr>
      <td>rgba8snorm
      <td>8snorm
      <td>r, g, b, a
      <td>vec4&lt;f32>(CTF(r), CTF(g), CTF(b), CTF(a)) 
     <tr>
      <td>rgba8uint
      <td>8uint
      <td>r, g, b, a
      <td>vec4&lt;u32>(CTF(r), CTF(g), CTF(b), CTF(a)) 
     <tr>
      <td>rgba8sint
      <td>8sint
      <td>r, g, b, a
      <td>vec4&lt;i32>(CTF(r), CTF(g), CTF(b), CTF(a)) 
     <tr>
      <td>rgba16uint
      <td>16uint
      <td>r, g, b, a
      <td>vec4&lt;u32>(CTF(r), CTF(g), CTF(b), CTF(a)) 
     <tr>
      <td>rgba16sint
      <td>16sint
      <td>r, g, b, a
      <td>vec4&lt;i32>(CTF(r), CTF(g), CTF(b), CTF(a)) 
     <tr>
      <td>rgba16float
      <td>16float
      <td>r, g, b, a
      <td>vec4&lt;f32>(CTF(r), CTF(g), CTF(b), CTF(a)) 
     <tr>
      <td>r32uint
      <td>32uint
      <td>r
      <td>vec4&lt;u32>(CTF(r), 0u, 0u, 1u) 
     <tr>
      <td>r32sint
      <td>32sint
      <td>r
      <td>vec4&lt;i32>(CTF(r), 0, 0, 1) 
     <tr>
      <td>r32float
      <td>32float
      <td>r
      <td>vec4&lt;f32>(CTF(r), 0.0, 0.0, 1.0) 
     <tr>
      <td>rg32uint
      <td>32uint
      <td>r, g
      <td>vec4&lt;u32>(CTF(r), CTF(g), 0.0, 1.0) 
     <tr>
      <td>rg32sint
      <td>32sint
      <td>r, g
      <td>vec4&lt;i32>(CTF(r), CTF(g), 0.0, 1.0) 
     <tr>
      <td>rg32float
      <td>32float
      <td>r, g
      <td>vec4&lt;f32>(CTF(r), CTF(g), 0.0, 1.0) 
     <tr>
      <td>rgba32uint
      <td>32uint
      <td>r, g, b, a
      <td>vec4&lt;u32>(CTF(r), CTF(g), CTF(b), CTF(a)) 
     <tr>
      <td>rgba32sint
      <td>32sint
      <td>r, g, b, a
      <td>vec4&lt;i32>(CTF(r), CTF(g), CTF(b), CTF(a)) 
     <tr>
      <td>rgba32float
      <td>32float
      <td>r, g, b, a
      <td>vec4&lt;f32>(CTF(r), CTF(g), CTF(b), CTF(a)) 
   </table>
   <p>The following table lists the correspondence between WGSL texel formats and
SPIR-V <a data-link-type="dfn" href="https://www.khronos.org/registry/spir-v/specs/unified1/SPIRV.html#_a_id_image_format_a_image_format" id="ref-for-_a_id_image_format_a_image_format">image formats</a>.</p>
   <table class="data">
    <caption>Mapping texel formats to SPIR-V</caption>
    <thead>
     <tr>
      <th>Texel format 
      <th>SPIR-V Image Format 
      <th>SPIR-V Enabling Capability 
    <tbody>
     <tr>
      <td>rgba8unorm
      <td>Rgba8
      <td>Shader 
     <tr>
      <td>rgba8snorm
      <td>Rgba8Snorm
      <td>Shader 
     <tr>
      <td>rgba8uint
      <td>Rgba8ui
      <td>Shader 
     <tr>
      <td>rgba8sint
      <td>Rgba8i
      <td>Shader 
     <tr>
      <td>rgba16uint
      <td>Rgba16ui
      <td>Shader 
     <tr>
      <td>rgba16sint
      <td>Rgba16i
      <td>Shader 
     <tr>
      <td>rgba16float
      <td>Rgba16f
      <td>Shader 
     <tr>
      <td>r32uint
      <td>R32ui
      <td>Shader 
     <tr>
      <td>r32sint
      <td>R32i
      <td>Shader 
     <tr>
      <td>r32float
      <td>R32f
      <td>Shader 
     <tr>
      <td>rg32uint
      <td>Rg32ui
      <td>StorageImageExtendedFormats 
     <tr>
      <td>rg32sint
      <td>Rg32i
      <td>StorageImageExtendedFormats 
     <tr>
      <td>rg32float
      <td>Rg32f
      <td>StorageImageExtendedFormats 
     <tr>
      <td>rgba32uint
      <td>Rgba32ui
      <td>Shader 
     <tr>
      <td>rgba32sint
      <td>Rgba32i
      <td>Shader 
     <tr>
      <td>rgba32float
      <td>Rgba32f
      <td>Shader 
   </table>
   <h4 class="heading settled" data-level="4.5.2" id="sampled-texture-type"><span class="secno">4.5.2. </span><span class="content">Sampled Texture Types</span><a class="self-link" href="#sampled-texture-type"></a></h4>
<pre class="def"><code>texture_1d&lt;type></code>
  %1 = OpTypeImage %type 1D 0 0 0 1 Unknown

<code>texture_2d&lt;type></code>
  %1 = OpTypeImage %type 2D 0 0 0 1 Unknown

<code>texture_2d_array&lt;type></code>
  %1 = OpTypeImage %type 2D 0 1 0 1 Unknown

<code>texture_3d&lt;type></code>
  %1 = OpTypeImage %type 3D 0 0 0 1 Unknown

<code>texture_cube&lt;type></code>
  %1 = OpTypeImage %type Cube 0 0 0 1 Unknown

<code>texture_cube_array&lt;type></code>
  %1 = OpTypeImage %type Cube 0 1 0 1 Unknown
</pre>
   <ul>
    <li data-md>
     <p>type must be <code>f32</code>, <code>i32</code> or <code>u32</code></p>
    <li data-md>
     <p>The parameterized type for the images is the type after conversion from sampling.
E.g. you can have an image with texels with 8bit unorm components, but when you sample
them you get a 32-bit float result (or vec-of-f32).</p>
   </ul>
   <h4 class="heading settled" data-level="4.5.3" id="multisampled-texture-type"><span class="secno">4.5.3. </span><span class="content">Multisampled Texture Types</span><a class="self-link" href="#multisampled-texture-type"></a></h4>
<pre class="def"><code>texture_multisampled_2d&lt;type></code>
  %1 = OpTypeImage %type 2D 0 0 1 1 Unknown
</pre>
   <ul>
    <li data-md>
     <p>type must be <code>f32</code>, <code>i32</code> or <code>u32</code></p>
   </ul>
   <h4 class="heading settled" data-level="4.5.4" id="external-texture-type"><span class="secno">4.5.4. </span><span class="content">External Sampled Texture Types</span><a class="self-link" href="#external-texture-type"></a></h4>
<pre class="def"><code>texture_external</code>
</pre>
   <p><code>texture_external</code> is an opaque 2d float-sampled texture type similar to <code>texture_2d&lt;f32></code> but potentially with a different representation.
It can be read using <code>textureLoad</code> or <code>textureSampleLevel</code>,
which handle these different representations opaquely.</p>
   <p>See [<code>GPUExternalTexture</code>](https://gpuweb.github.io/gpuweb/#gpu-external-texture) for details.</p>
   <h4 class="heading settled" data-level="4.5.5" id="texture-storage"><span class="secno">4.5.5. </span><span class="content">Storage Texture Types</span><a class="self-link" href="#texture-storage"></a></h4>
   <p>A <dfn data-dfn-type="dfn" data-noexport id="storage-texture">storage texture<a class="self-link" href="#storage-texture"></a></dfn> supports accessing a single texel without the use of a sampler.</p>
   <ul>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="write-only-storage-texture">write-only storage texture</dfn> supports writing a single texel, with automatic conversion of the shader value to a
 stored texel value.</p>
   </ul>
   <p>A storage texture type must be parameterized by one of the <a data-link-type="dfn" href="#storage-texel-formats" id="ref-for-storage-texel-formats">texel formats for storage textures</a>.
The texel format determines the conversion function as specified in <a href="#texel-formats">§ 4.5.1 Texel formats</a>.</p>
   <p>For a write-only storage texture the <em>inverse</em> of the conversion function is used to convert the shader value to
the stored texel.</p>
   <p>See <a href="#texture-builtin-functions">§ 16.8 Texture built-in functions</a>.</p>
   <p>TODO(dneto): Move description of the conversion to the builtin function that actually does the reading.</p>
<pre class="def"><code>texture_storage_1d&lt;texel_format,access></code>
  // %1 = OpTypeImage sampled_type 1D 0 0 0 2 image_format

<code>texture_storage_2d&lt;texel_format,access></code>
  // %1 = OpTypeImage sampled_type 2D 0 0 0 2 image_format

<code>texture_storage_2d_array&lt;texel_format,access></code>
  // %1 = OpTypeImage sampled_type 2D 0 1 0 2 image_format

<code>texture_storage_3d&lt;texel_format,access></code>
  // %1 = OpTypeImage sampled_type 3D 0 0 0 2 image_format
</pre>
   <ul>
    <li data-md>
     <p><code>texel_format</code> must be one of the texel types specified in <a data-link-type="dfn" href="#storage-texel-formats" id="ref-for-storage-texel-formats①">storage-texel-formats</a></p>
    <li data-md>
     <p><code>access</code> must be <a data-link-type="dfn" href="#access-write" id="ref-for-access-write①">write</a>.</p>
   </ul>
   <p>In the SPIR-V mapping:</p>
   <ul>
    <li data-md>
     <p>The <em>Image Format</em> parameter of the image type declaration is
as specified by the SPIR-V texel format correspondence table in <a href="#texel-formats">§ 4.5.1 Texel formats</a>.</p>
    <li data-md>
     <p>The <em>Sampled Type</em> parameter of the image type declaration is
the SPIR-V scalar type corresponding to the channel format for the texel format.</p>
   </ul>
   <p>When mapping to SPIR-V, a write-only storage texture variable must have a <code>NonReadable</code> decoration.</p>
   <p>For example:</p>
   <div class="example wgsl global-scope no-marker" id="example-db2d59a3">
    <a class="self-link" href="#example-db2d59a3"></a>
    <div class="marker">EXAMPLE: Mapping a writable texture_storage_1d variable to SPIR-V</div>
<pre>var tbuf: texture_storage_1d&lt;rgba8unorm,write>;

// Maps to the following SPIR-V:
//  OpDecorate %tbuf NonReadable
//  ...
//  %float = OpTypeFloat 32
//  %image_type = OpTypeImage %float 1D 0 0 0 2 Rgba8
//  %image_ptr_type = OpTypePointer UniformConstant %image_type
//  %tbuf = OpVariable %image_ptr_type UniformConstant
</pre>
   </div>
   <h4 class="heading settled" data-level="4.5.6" id="texture-depth"><span class="secno">4.5.6. </span><span class="content">Depth Texture Types</span><a class="self-link" href="#texture-depth"></a></h4>
<pre class="def"><code>texture_depth_2d</code>
  %1 = OpTypeImage %f32 2D 1 0 0 1 Unknown

<code>texture_depth_2d_array</code>
  %1 = OpTypeImage %f32 2D 1 1 0 1 Unknown

<code>texture_depth_cube</code>
  %1 = OpTypeImage %f32 Cube 1 0 0 1 Unknown

<code>texture_depth_cube_array</code>
  %1 = OpTypeImage %f32 Cube 1 1 0 1 Unknown

<code>texture_depth_multisampled_2d</code>
  %1 = OpTypeImage %f32 2D 1 0 1 1 Unknown
</pre>
   <h4 class="heading settled" data-level="4.5.7" id="sampler-type"><span class="secno">4.5.7. </span><span class="content">Sampler Type</span><a class="self-link" href="#sampler-type"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="sampler">sampler</dfn> mediates access to a sampled texture or a depth texture, by performing a combination of:</p>
   <ul>
    <li data-md>
     <p>coordinate transformation.</p>
    <li data-md>
     <p>optionally modifying mip-level selection.</p>
    <li data-md>
     <p>for a sampled texture, optionally filtering retrieved texel values.</p>
    <li data-md>
     <p>for a depth texture, determining the comparison function applied to the retrieved texel.</p>
   </ul>
   <table class="data">
    <thead>
     <tr>
      <th>Type
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="sampler type">
      <td>sampler 
      <td>Sampler. Mediates access to a sampled texture.
     <tr class="algorithm" data-algorithm="comparison sampler type">
      <td>sampler_comparison 
      <td>Comparison sampler.
        Mediates access to a depth texture.
   </table>
   <p>Samplers are parameterized when created in the WebGPU API.
They cannot be modified by a WGSL program.</p>
   <p>Samplers can only be used by the <a href="#texture-builtin-functions">texture builtin functions</a>.</p>
<pre class="def">sampler
  OpTypeSampler

sampler_comparison
  OpTypeSampler
</pre>
   <h4 class="heading settled" data-level="4.5.8" id="texture-types-grammar"><span class="secno">4.5.8. </span><span class="content">Texture Types Grammar</span><a class="self-link" href="#texture-types-grammar"></a></h4>
    TODO: Add texture usage validation rules. 
<pre class="def">texture_sampler_types
  : sampler_type
  | depth_texture_type
  | sampled_texture_type LESS_THAN type_decl GREATER_THAN
  | multisampled_texture_type LESS_THAN type_decl GREATER_THAN
  | storage_texture_type LESS_THAN texel_format COMMA access_mode GREATER_THAN

sampler_type
  : SAMPLER
  | SAMPLER_COMPARISON

sampled_texture_type
  : TEXTURE_1D
  | TEXTURE_2D
  | TEXTURE_2D_ARRAY
  | TEXTURE_3D
  | TEXTURE_CUBE
  | TEXTURE_CUBE_ARRAY

multisampled_texture_type
  : TEXTURE_MULTISAMPLED_2D

storage_texture_type
  : TEXTURE_STORAGE_1D
  | TEXTURE_STORAGE_2D
  | TEXTURE_STORAGE_2D_ARRAY
  | TEXTURE_STORAGE_3D

depth_texture_type
  : TEXTURE_DEPTH_2D
  | TEXTURE_DEPTH_2D_ARRAY
  | TEXTURE_DEPTH_CUBE
  | TEXTURE_DEPTH_CUBE_ARRAY
  | TEXTURE_DEPTH_MULTISAMPLED_2D

texel_format
  : R8UNORM
     R8  -- Capability: StorageImageExtendedFormats
  | R8SNORM
     R8Snorm  -- Capability: StorageImageExtendedFormats
  | R8UINT
     R8ui  -- Capability: StorageImageExtendedFormats
  | R8SINT
     R8i  -- Capability: StorageImageExtendedFormats
  | R16UINT
     R16ui  -- Capability: StorageImageExtendedFormats
  | R16SINT
     R16i  -- Capability: StorageImageExtendedFormats
  | R16FLOAT
     R16f  -- Capability: StorageImageExtendedFormats
  | RG8UNORM
     Rg8  -- Capability: StorageImageExtendedFormats
  | RG8SNORM
     Rg8Snorm  -- Capability: StorageImageExtendedFormats
  | RG8UINT
     Rg8ui  -- Capability: StorageImageExtendedFormats
  | RG8SINT
     Rg8i  -- Capability: StorageImageExtendedFormats
  | R32UINT
     R32ui
  | R32SINT
     R32i
  | R32FLOAT
     R32f
  | RG16UINT
     Rg16ui  -- Capability: StorageImageExtendedFormats
  | RG16SINT
     Rg16i  -- Capability: StorageImageExtendedFormats
  | RG16FLOAT
     Rg16f  -- Capability: StorageImageExtendedFormats
  | RGBA8UNORM
     Rgba8
  | RGBA8UNORM-SRGB
     ???
  | RGBA8SNORM
     Rgba8Snorm
  | RGBA8UINT
     Rgba8ui
  | RGBA8SINT
     Rgba8i
  | BGRA8UNORM
     Rgba8  ???
  | BGRA8UNORM-SRGB
     ???
  | RGB10A2UNORM
     Rgb10A2  -- Capability: StorageImageExtendedFormats
  | RG11B10FLOAT
     R11fG11fB10f  -- Capability: StorageImageExtendedFormats
  | RG32UINT
     Rg32ui  -- Capability: StorageImageExtendedFormats
  | RG32SINT
     Rg32i  -- Capability: StorageImageExtendedFormats
  | RG32FLOAT
     Rg32f  -- Capability: StorageImageExtendedFormats
  | RGBA16UINT
     Rgba16ui
  | RGBA16SINT
     Rgba16i
  | RGBA16FLOAT
     Rgba16f
  | RGBA32UINT
     Rgba32ui
  | RGBA32SINT
     Rgba32i
  | RGBA32FLOAT
     Rgba32f

</pre>
   <h3 class="heading settled" data-level="4.6" id="type-aliases"><span class="secno">4.6. </span><span class="content">Type Aliases TODO</span><a class="self-link" href="#type-aliases"></a></h3>
<pre class="def">type_alias
  : TYPE IDENT EQUAL type_decl
</pre>
   <div class="example wgsl global-scope no-marker" id="example-a0f9e590">
    <a class="self-link" href="#example-a0f9e590"></a>
    <div class="marker">EXAMPLE: Type Alias</div>
<pre>type Arr = array&lt;i32, 5>;

type RTArr = [[stride(16)]] array&lt;vec4&lt;f32>>;
</pre>
   </div>
   <h3 class="heading settled" data-level="4.7" id="type-declarations"><span class="secno">4.7. </span><span class="content">Type Declaration Grammar</span><a class="self-link" href="#type-declarations"></a></h3>
<pre class="def">type_decl
  : IDENT
  | BOOL
  | FLOAT32
  | INT32
  | UINT32
  | VEC2 LESS_THAN type_decl GREATER_THAN
  | VEC3 LESS_THAN type_decl GREATER_THAN
  | VEC4 LESS_THAN type_decl GREATER_THAN
  | POINTER LESS_THAN storage_class COMMA type_decl (COMMA access_mode)? GREATER_THAN
  | array_type_decl
  | MAT2x2 LESS_THAN type_decl GREATER_THAN
  | MAT2x3 LESS_THAN type_decl GREATER_THAN
  | MAT2x4 LESS_THAN type_decl GREATER_THAN
  | MAT3x2 LESS_THAN type_decl GREATER_THAN
  | MAT3x3 LESS_THAN type_decl GREATER_THAN
  | MAT3x4 LESS_THAN type_decl GREATER_THAN
  | MAT4x2 LESS_THAN type_decl GREATER_THAN
  | MAT4x3 LESS_THAN type_decl GREATER_THAN
  | MAT4x4 LESS_THAN type_decl GREATER_THAN
  | ATOMIC LESS_THAN type_decl GREATER_THAN
  | texture_sampler_types
</pre>
   <p>When the type declaration is an identifer, then the expression must be in scope of a
declaration of the identifier as a type alias or structure type.</p>
   <div class="example no-marker" id="example-0317f222">
    <a class="self-link" href="#example-0317f222"></a>
    <div class="marker">EXAMPLE: Type Declarations</div>
<pre>identifier
  Allows to specify types created by the type command

bool
   %1 = OpTypeBool

f32
   %2 = OpTypeFloat 32

i32
   %3 = OpTypeInt 32 1

u32
   %4 = OpTypeInt 32 0

vec2&lt;f32>
    %7 = OpTypeVector %float 2

array&lt;f32, 4>
   %uint_4 = OpConstant %uint 4
        %9 = OpTypeArray %float %uint_4

[[stride(32)]] array&lt;f32, 4>
             OpDecorate %9 ArrayStride 32
   %uint_4 = OpConstant %uint 4
        %9 = OpTypeArray %float %uint_4

array&lt;f32>
   %rtarr = OpTypeRuntimeArray %float

mat2x3&lt;f32>
   %vec = OpTypeVector %float 3
     %6 = OpTypeMatrix %vec 2
</pre>
   </div>
   <div class="example wgsl global-scope no-marker" id="example-cdac6cd7">
    <a class="self-link" href="#example-cdac6cd7"></a>
    <div class="marker">EXAMPLE: Access modes for buffers</div>
<pre>// Storage buffers
[[group(0), binding(0)]]
var&lt;storage,read> buf1: Buffer;       // Can read, cannot write.
[[group(0), binding(0)]]
var&lt;storage> buf2: Buffer;            // Can read, cannot write.
[[group(0), binding(1)]]
var&lt;storage,read_write> buf3: Buffer; // Can both read and write.

// Uniform buffer. Always read-only, and has more restrictive layout rules.
struct ParamsTable {};
[[group(0), binding(2)]]
var&lt;uniform> params: ParamsTable;     // Can read, cannot write.
</pre>
   </div>
   <h2 class="heading settled" data-level="5" id="var-and-let"><span class="secno">5. </span><span class="content"><code>var</code> and <code>let</code></span><a class="self-link" href="#var-and-let"></a></h2>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="let-declaration">let declaration</dfn> specifies a name for a value.
Once the value for a let-declaration is computed, it is immutable.
When an identifier use <a data-link-type="dfn" href="#resolves" id="ref-for-resolves①">resolves</a> to a let-declaration, the identifier denotes that value.</p>
   <p>When a <code>let</code> identifier is declared without an explicitly specified type,
e.g. <code>let foo = 4</code>, the type is automatically inferred from the expression to the right of the equals token (<code>=</code>).
When the type is specified, e.g <code>let foo: i32 = 4</code>, the initializer expression must evaluate to that type.</p>
   <p>Some rules about <code>let</code>-declarations depend on where the declaration appears.
See <a href="#module-constants">§ 5.2 Module Constants</a> and <a href="#function-scope-variables">§ 5.3 Function Scope Variables and Constants</a>.</p>
   <div class="example let declaration at module-scope no-marker" id="example-a7e0048e">
    <a class="self-link" href="#example-a7e0048e"></a>
    <div class="marker">EXAMPLE: let-declared constants at module scope</div>
<pre class="highlight"><c- c1>// 'blockSize' denotes the i32 value 1024.</c->
<c- a>let</c-> <c- n>blockSize</c->: <c- b>i32</c-> <c- o>=</c-> <c- mi>1024</c-><c- p>;</c->

<c- c1>// 'row_size' denotes the u32 value 16u.  The type is inferred.</c->
<c- a>let</c-> <c- n>row_size</c-> <c- o>=</c-> <c- mi>16</c-><c- n>u</c-><c- p>;</c->
</pre>
   </div>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="variable">variable</dfn> is a named reference to storage that can contain a value of a
particular <a data-link-type="dfn" href="#storable" id="ref-for-storable⑤">storable</a> type.</p>
   <p>Two types are associated with a variable: its <a data-link-type="dfn" href="#store-type" id="ref-for-store-type⑤">store type</a> (the type of value
that may be placed in the referenced storage) and its <a data-link-type="dfn" href="#reference-type" id="ref-for-reference-type②">reference type</a> (the type
of the variable itself).
If a variable has store type <em>T</em> and <a data-link-type="dfn" href="#storage-classes" id="ref-for-storage-classes④">storage class</a> <em>S</em>,
then its reference type is ref&lt;<em>S</em>,<em>T</em>>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="variable-declaration">variable declaration</dfn>:</p>
   <ul>
    <li data-md>
     <p>Specifies the variable’s name.</p>
    <li data-md>
     <p>Specifies the <a data-link-type="dfn" href="#storage-classes" id="ref-for-storage-classes⑤">storage class</a>, <a data-link-type="dfn" href="#store-type" id="ref-for-store-type⑥">store type</a>, and <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode③">access mode</a>.
Together these comprise the variable’s <a data-link-type="dfn" href="#reference-type" id="ref-for-reference-type③">reference type</a>.</p>
    <li data-md>
     <p>Ensures the execution environment allocates storage for a value of the store type,
supporting the given access mode, for the <a data-link-type="dfn" href="#lifetime" id="ref-for-lifetime">lifetime</a> of the variable.</p>
    <li data-md>
     <p>Optionally has an <em>initializer</em> expression, if the variable is in the <a data-link-type="dfn" href="#storage-classes-private" id="ref-for-storage-classes-private①">private</a> or <a data-link-type="dfn" href="#storage-classes-function" id="ref-for-storage-classes-function①">function</a> storage classes.
If present, the initializer expression must evaluate to the variable’s store type.</p>
   </ul>
   <p>When an identifier use <a data-link-type="dfn" href="#resolves" id="ref-for-resolves②">resolves</a> to a variable declaration,
the identifer is an expression denoting the reference <a data-link-type="dfn" href="#memory-view" id="ref-for-memory-view③">memory view</a> for the variable’s storage,
and its type is the variable’s reference type.
See <a href="#var-identifier-expr">§ 6.13 Variable Identifier Expression</a>.</p>
   <p>See <a href="#module-scope-variables">§ 5.1 Module Scope Variables</a> and <a href="#function-scope-variables">§ 5.3 Function Scope Variables and Constants</a> for rules about where
a variable in a particular storage class can be declared,
and when the storage class decoration is required, optional, or forbidden.</p>
   <p>The access mode always has a default, and except for variables in the <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage⑨">storage</a> storage class,
must not be written. See <a href="#access-mode-defaults">§ 4.4.1 Access Mode Defaults</a>.</p>
<pre class="def">variable_statement
  : variable_decl
  | variable_decl EQUAL short_circuit_or_expression
  | LET (IDENT | variable_ident_decl) EQUAL short_circuit_or_expression

variable_decl
  : VAR variable_qualifier? variable_ident_decl

variable_ident_decl
  : IDENT COLON attribute_list* type_decl

variable_qualifier
  : LESS_THAN storage_class ( COMMA access_mode )? GREATER_THAN
</pre>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="lifetime">lifetime</dfn> of a variable is the period during shader
execution for which the variable exists.
The lifetime of a <a data-link-type="dfn" href="#module-scope" id="ref-for-module-scope⑥">module scope</a> variable is the entire execution of the shader stage.</p>
   <p>For a <a data-link-type="dfn" href="#function-scope" id="ref-for-function-scope①">function scope</a> variable, each invocation has its own independent
version of the variable.
The lifetime of the variable is determined by its scope:</p>
   <ul>
    <li data-md>
     <p>It begins when control enters the variable’s decalaration.</p>
    <li data-md>
     <p>It includes the entire execution of any function called from within the variable’s scope.</p>
    <li data-md>
     <p>It ends when control leaves the variable’s scope, other than calling a function from
within the variable’s scope.</p>
   </ul>
   <p>Two variables with overlapping lifetimes will not have overlapping storage.
When a variable’s lifetime ends, its storage may be used for another variable.</p>
   <p>When a variable is created, its storage contains an initial value as follows:</p>
   <ul>
    <li data-md>
     <p>For variables in the <a data-link-type="dfn" href="#storage-classes-private" id="ref-for-storage-classes-private②">private</a> or <a data-link-type="dfn" href="#storage-classes-function" id="ref-for-storage-classes-function②">function</a> storage classes:</p>
     <ul>
      <li data-md>
       <p>The <a data-link-type="dfn" href="#zero-value" id="ref-for-zero-value①">zero value</a> for the store type, if the variable declaration has no initializer.</p>
      <li data-md>
       <p>Otherwise, it is the result of evaluating the initializer expression at that point in the program execution.</p>
     </ul>
    <li data-md>
     <p>For variables in other storage classes, the execution environment provides the initial value.</p>
   </ul>
   <p>Consider the following snippet of WGSL:</p>
   <div class="example wsgl function-scope no-marker" id="example-01ec627a">
    <a class="self-link" href="#example-01ec627a"></a>
    <div class="marker">EXAMPLE: Variable initial values</div>
<pre class="highlight"><c- n>var</c-> <c- n>i</c->: <c- b>i32</c-><c- p>;</c->         <c- c1>// Initial value is 0.  Not recommended style.</c->
<c- k>loop</c-> <c- p>{</c->
  <c- n>var</c-> <c- n>twice</c->: <c- b>i32</c-> <c- o>=</c-> <c- mi>2</c-> <c- o>*</c-> <c- n>i</c-><c- p>;</c->   <c- c1>// Re-evaluated each iteration.</c->
  <c- n>i</c-> <c- o>=</c-> <c- n>i</c-> <c- o>+</c-> <c- mi>1</c-><c- p>;</c->
  <c- k>if</c-> <c- p>(</c-><c- n>i</c-> <c- o>==</c-> <c- mi>5</c-><c- p>)</c-> <c- p>{</c-> <c- k>break</c-><c- p>;</c-> <c- p>}</c->
<c- p>}</c->
</pre>
   </div>
    The loop body will execute five times.
Variable <code>i</code> will take on values 0, 1, 2, 3, 4, 5, and variable <code>twice</code> will take on values 0, 2, 4, 6, 8. 
   <p>Consider the following snippet of WGSL:</p>
   <div class="example wsgl function-scope no-marker" id="example-15ea7648">
    <a class="self-link" href="#example-15ea7648"></a>
    <div class="marker">EXAMPLE: Reading a variable multiple times</div>
<pre class="highlight"><c- n>var</c-> <c- n>x</c->: <c- b>f32</c-> <c- o>=</c-> <c- mf>1.0</c-><c- p>;</c->
<c- a>let</c-> <c- n>y</c-> <c- o>=</c-> <c- n>x</c-> <c- o>*</c-> <c- n>x</c-> <c- o>+</c-> <c- n>x</c-> <c- o>+</c-> <c- mi>1</c-><c- p>;</c->
</pre>
   </div>
    Because <code>x</code> is a variable, all accesses to it turn into load and store operations.
If this snippet was compiled to SPIR-V, it would be represented as 
   <div class="example spirv no-marker" id="example-922af987">
    <a class="self-link" href="#example-922af987"></a>
    <div class="marker">EXAMPLE: Sample translation for reading a variable multiple times</div>
<pre class="highlight">%<c- nf>temp_1</c-> = <c- no>OpLoad</c-> <c- g>%float</c-> <c- g>%x</c->
%<c- nf>temp_2</c-> = <c- no>OpLoad</c-> <c- g>%float</c-> <c- g>%x</c->
%<c- nf>temp_3</c-> = <c- no>OpFMul</c-> <c- g>%float</c-> <c- g>%temp_1</c-> <c- g>%temp_2</c->
%<c- nf>temp_4</c-> = <c- no>OpLoad</c-> <c- g>%float</c-> <c- g>%x</c->
%<c- nf>temp_5</c-> = <c- no>OpFAdd</c-> <c- g>%float</c-> <c- g>%temp_3</c-> <c- g>%temp_4</c->
%<c- nf>y</c->      = <c- no>OpFAdd</c-> <c- g>%float</c-> <c- g>%temp_5</c-> <c- g>%one</c->
</pre>
   </div>
    However, it is expected that either the browser or the driver optimizes this intermediate representation
such that the redundant loads are eliminated. 
   <h3 class="heading settled" data-level="5.1" id="module-scope-variables"><span class="secno">5.1. </span><span class="content">Module Scope Variables</span><a class="self-link" href="#module-scope-variables"></a></h3>
   <p>A variable declared outside all functions is at <a data-link-type="dfn" href="#module-scope" id="ref-for-module-scope⑦">module scope</a>.
The variable name is available for use immediately after its declaration statement, until the end
of the program.</p>
   <p>Variables at <a data-link-type="dfn" href="#module-scope" id="ref-for-module-scope⑧">module scope</a> are restricted as follows:</p>
   <ul>
    <li data-md>
     <p>The variable must not be in the <a data-link-type="dfn" href="#storage-classes-function" id="ref-for-storage-classes-function③">function</a> storage class.</p>
    <li data-md>
     <p>A variable in the <a data-link-type="dfn" href="#storage-classes-private" id="ref-for-storage-classes-private③">private</a>, <a data-link-type="dfn" href="#storage-classes-workgroup" id="ref-for-storage-classes-workgroup③">workgroup</a>, <a data-link-type="dfn" href="#storage-classes-uniform" id="ref-for-storage-classes-uniform⑦">uniform</a>, or <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage①⓪">storage</a> storage classes:</p>
     <ul>
      <li data-md>
       <p>Must be declared with an explicit storage class decoration.</p>
      <li data-md>
       <p>Must use a <a data-link-type="dfn" href="#store-type" id="ref-for-store-type⑦">store type</a> as described in <a href="#storage-class">§ 4.3.6 Storage Classes</a>.</p>
     </ul>
    <li data-md>
     <p>If the <a data-link-type="dfn" href="#store-type" id="ref-for-store-type⑧">store type</a> is a texture type or a sampler type, then the variable declaration must not
have a storage class decoration.  The storage class will always be <a data-link-type="dfn" href="#storage-classes-handle" id="ref-for-storage-classes-handle①">handle</a>.</p>
   </ul>
   <p>A variable in the <a data-link-type="dfn" href="#storage-classes-uniform" id="ref-for-storage-classes-uniform⑧">uniform</a> storage class is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="uniform-buffer">uniform buffer</dfn> variable.
Its <a data-link-type="dfn" href="#store-type" id="ref-for-store-type⑨">store type</a> must be a <a data-link-type="dfn" href="#host-shareable" id="ref-for-host-shareable⑤">host-shareable</a> structure type with <a data-link-type="dfn" href="#attribute-block" id="ref-for-attribute-block①">block</a> attribute,
satisfying the <a href="#storage-class-layout-constraints">storage class layout constraints</a>.</p>
   <p>A variable in the <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage①①">storage</a> storage class is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="storage-buffer">storage buffer</dfn> variable.
Its <a data-link-type="dfn" href="#store-type" id="ref-for-store-type①⓪">store type</a> must be a <a data-link-type="dfn" href="#host-shareable" id="ref-for-host-shareable⑥">host-shareable</a> structure type with <a data-link-type="dfn" href="#attribute-block" id="ref-for-attribute-block②">block</a> attribute,
satisfying the <a href="#storage-class-layout-constraints">storage class layout constraints</a>.
It may be declared with a <a data-link-type="dfn" href="#access-read" id="ref-for-access-read⑥">read</a> or <a data-link-type="dfn" href="#access-read_write" id="ref-for-access-read_write⑧">read_write</a> access mode; the default is <a data-link-type="dfn" href="#access-read" id="ref-for-access-read⑦">read</a>.</p>
   <p>As described in <a href="#resource-interface">§ 9.3.2 Resource interface</a>,
uniform buffers, storage buffers, textures, and samplers form the <a data-link-type="dfn" href="#resource-interface-of-a-shader" id="ref-for-resource-interface-of-a-shader②">resource interface of a shader</a>.
Such variables are declared with <a data-link-type="dfn" href="#attribute-group" id="ref-for-attribute-group①">group</a> and <a data-link-type="dfn" href="#attribute-binding" id="ref-for-attribute-binding">binding</a> decorations.</p>
   <div class="example wgsl global-scope no-marker" id="example-2fb4bd16">
    <a class="self-link" href="#example-2fb4bd16"></a>
    <div class="marker">EXAMPLE: Module scope variable declarations</div>
<pre>var&lt;private> decibels: f32;
var&lt;workgroup> worklist: array&lt;i32,10>;

[[block]] struct Params {
  specular: f32;
  count: i32;
};
[[group(0), binding(2)]]
var&lt;uniform> param: Params;    // A uniform buffer

[[block]] struct PositionsBuffer {
  pos: array&lt;vec2&lt;f32>>;
};
// A storage buffer, for reading and writing
[[group(0), binding(0)]]
var&lt;storage,read_write> pbuf: PositionsBuffer;

// Textures and samplers are always in "handle" storage.
[[group(0), binding(1)]]
var filter_params: sampler;
</pre>
   </div>
<pre class="def">global_variable_decl
  : attribute_list* variable_decl (EQUAL const_expression)?
</pre>
   <div class="example no-marker" id="example-981ded21">
    <a class="self-link" href="#example-981ded21"></a>
    <div class="marker">EXAMPLE: Variable Decorations</div>
<pre>[[group(4), binding(3)]]
   OpDecorate %variable DescriptorSet 4
   OpDecorate %variable Binding 3
</pre>
   </div>
   <p>WGSL defines the following attributes that can be applied to global variables:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-binding" id="ref-for-attribute-binding①">binding</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-group" id="ref-for-attribute-group②">group</a></p>
   </ul>
   <h3 class="heading settled" data-level="5.2" id="module-constants"><span class="secno">5.2. </span><span class="content">Module Constants</span><a class="self-link" href="#module-constants"></a></h3>
   <p>A <code>let</code>-declaration appearing outside all functions declares a <a data-link-type="dfn" href="#module-scope" id="ref-for-module-scope⑨">module-scope</a> constant.
The name is available for use after the end of the declaration,
until the end of the WGSL program.</p>
   <p>A module-scope let-declared constant must be of <a data-link-type="dfn" href="#constructible" id="ref-for-constructible④">constructible</a> type.</p>
   <p>When the declaration has no attributes, an initializer expression must be present,
and the name denotes the value of that expression.</p>
   <div class="example wgsl global-scope no-marker" id="example-9203d3c8">
    <a class="self-link" href="#example-9203d3c8"></a>
    <div class="marker">EXAMPLE: Module constants</div>
<pre>// The golden ratio.
let golden: f32 = 1.61803398875;

// The second unit vector for three dimensions, with inferred type.
let e2 = vec3&lt;i32>(0,1,0);
</pre>
   </div>
   <p>When the declaration uses the <a data-link-type="dfn" href="#attribute-override" id="ref-for-attribute-override">override</a> attribute,
the constant is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pipeline-overridable">pipeline-overridable</dfn>. In this case:</p>
   <ul>
    <li data-md>
     <p>The type must be one of the <a data-link-type="dfn" href="#scalar" id="ref-for-scalar①①">scalar</a> types.</p>
    <li data-md>
     <p>The initializer expression is optional.</p>
    <li data-md>
     <p>The attribute’s literal operand, if present, is known as the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pipeline-constant-id">pipeline constant ID</dfn>,
and must be an integer value between 0 and 65535.</p>
    <li data-md>
     <p>Pipeline constant IDs must be unique within the WGSL program: Two module constants
must not use the same pipeline constant ID.</p>
    <li data-md>
     <p>The application can specify its own value for the constant at pipeline-creation time.
The pipeline creation API accepts a mapping from overridable constant to a
value of the constant’s type.
The constant is identified by a <dfn data-dfn-type="dfn" data-export id="pipeline-overridable-constant-identifier-string">pipeline-overridable constant identifier string<a class="self-link" href="#pipeline-overridable-constant-identifier-string"></a></dfn>,
which is the base-10 representation of the <a data-link-type="dfn" href="#pipeline-constant-id" id="ref-for-pipeline-constant-id">pipeline constant ID</a> if specified, and otherwise
the declared <a data-link-type="dfn" href="#name" id="ref-for-name">name</a> of the constant.</p>
    <li data-md>
     <p>The <dfn data-dfn-type="dfn" data-export id="pipeline-overridable-constant-has-a-default-value">pipeline-overridable constant has a default value<a class="self-link" href="#pipeline-overridable-constant-has-a-default-value"></a></dfn> if
its declaration has an initializer expression.
If it doesn’t, a value must be provided at pipeline-creation time.</p>
   </ul>
   <div class="example wgsl global-scope no-marker" id="example-e257b474">
    <a class="self-link" href="#example-e257b474"></a>
    <div class="marker">EXAMPLE: Module constants, pipeline-overrideable</div>
<pre>[[override(0)]]    let has_point_light: bool = true;  // Algorithmic control
[[override(1200)]] let specular_param: f32 = 2.3;     // Numeric control
[[override(1300)]] let gain: f32;                     // Must be overridden
[[override]]       let width: f32 = 0.0;              // Specifed at the API level using
                                                      // the name "width".
[[override]]       let depth: f32;                    // Specifed at the API level using
                                                      // the name "depth".
                                                      // Must be overridden.
</pre>
   </div>
   <p>When a variable or feature is used within control flow that depends on the
value of a constant, then that variable or feature is considered to be used by the
program.
This is true regardless of the value of the constant, whether that value
is the one from the constant’s declaration or from a pipeline override.</p>
<pre class="def">global_constant_decl
  : attribute_list* LET variable_ident_decl global_const_initializer?

global_const_initializer
  : EQUAL const_expression

const_expression
  : type_decl PAREN_LEFT ((const_expression COMMA)* const_expression COMMA?)? PAREN_RIGHT
  | const_literal
</pre>
   <div class="example no-marker" id="example-82bd4ead">
    <a class="self-link" href="#example-82bd4ead"></a>
    <div class="marker">EXAMPLE: Constants</div>
<pre>-1
   %a = OpConstant %int -1

2
   %b = OpConstant %uint 2

3.2
   %c = OpConstant %float 3.2

true
    %d = OpConstantTrue

false
    %e = OpConstant False

vec4&lt;f32>(1.2, 2.3, 3.4, 2.3)
    %f0 = OpConstant %float 1.2
    %f1 = OpConstant %float 2.3
    %f2 = OpConstant %float 3.4
     %f = OpConstantComposite %v4float %f0 %f1 %f2 %f1
</pre>
   </div>
   <p class="issue" id="issue-d99564c7"><a class="self-link" href="#issue-d99564c7"></a> The WebGPU pipeline creation API must specify how API-supplied values are mapped to
shader scalar values.  For booleans, I suggest using a 32-bit integer, where only 0 maps to <code>false</code>.
If WGSL gains non-32-bit numeric scalars, I recommend overridable constants continue being 32-bit
numeric types.</p>
   <h3 class="heading settled" data-level="5.3" id="function-scope-variables"><span class="secno">5.3. </span><span class="content">Function Scope Variables and Constants</span><a class="self-link" href="#function-scope-variables"></a></h3>
   <p>A variable or constant declared in a declaration statement in a function body is in <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="function-scope">function scope</dfn>.
The name is available for use immediately after its declaration statement,
and until the end of the brace-delimited list of statements immediately enclosing the declaration.</p>
   <p>A function-scope let-declared constant must be of <a data-link-type="dfn" href="#constructible" id="ref-for-constructible⑤">constructible</a> type, or of <a data-link-type="dfn" href="#pointer-type" id="ref-for-pointer-type②">pointer type</a>.</p>
   <p>For a variable declared in function scope:</p>
   <ul>
    <li data-md>
     <p>The variable is always in the <a data-link-type="dfn" href="#storage-classes-function" id="ref-for-storage-classes-function④">function</a> storage class.</p>
    <li data-md>
     <p>The storage decoration is optional.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#store-type" id="ref-for-store-type①①">store type</a> must be a <a data-link-type="dfn" href="#constructible" id="ref-for-constructible⑥">constructible</a> type.</p>
    <li data-md>
     <p>When an initializer is specified, the store type may be omitted from the declaration.
In this case the store type is the type of the result of evaluating the initializer.</p>
   </ul>
   <div class="example wgsl global-scope no-marker" id="example-ee27ccf6">
    <a class="self-link" href="#example-ee27ccf6"></a>
    <div class="marker">EXAMPLE: Function scope variables and constants</div>
<pre class="highlight"><c- k>fn</c-> <c- nf>f</c-><c- p>()</c-> <c- p>{</c->
   <c- n>var</c-><c- o>&lt;</c-><c- n>function</c-><c- o>></c-> <c- n>count</c->: <c- b>u32</c-><c- p>;</c->  <c- c1>// A variable in function storage class.</c->
   <c- n>var</c-> <c- n>delta</c->: <c- b>i32</c-><c- p>;</c->            <c- c1>// Another variable in the function storage class.</c->
   <c- n>var</c-> <c- n>sum</c->: <c- b>f32</c-> <c- o>=</c-> <c- mf>0.0</c-><c- p>;</c->        <c- c1>// A function storage class variable with initializer.</c->
   <c- n>var</c-> <c- n>pi</c-> <c- o>=</c-> <c- mf>3.14159</c-><c- p>;</c->          <c- c1>// Infer the f32 store type from the initializer.</c->
   <c- a>let</c-> <c- n>unit</c->: <c- b>i32</c-> <c- o>=</c-> <c- mi>1</c-><c- p>;</c->         <c- c1>// Let-declared constants don’t use a storage class.</c->
<c- p>}</c->
</pre>
   </div>
   <p>A variable or constant declared in the first clause of a <code>for</code> statement is available for use in the second
and third clauses and in the body of the <code>for</code> statement.</p>
   <p>An instance of a function scope variable is a <a data-link-type="dfn" href="#dynamic-context" id="ref-for-dynamic-context">dynamic context</a>.
Each variable that is <a data-link-type="dfn" href="#in-scope" id="ref-for-in-scope①">in scope</a> for some invocation has an overlapping <a data-link-type="dfn" href="#lifetime" id="ref-for-lifetime①">lifetime</a> and, therefore, has non-overlapping storage.
Variables with non-overlapping lifetimes may reuse the storage of previous
variables; however, new instances of the same variable are not guaranteed to
use the same storage.</p>
   <h3 class="heading settled" data-level="5.4" id="never-alias-assumption"><span class="secno">5.4. </span><span class="content">Never-alias assumption TODO</span><a class="self-link" href="#never-alias-assumption"></a></h3>
   <h2 class="heading settled" data-level="6" id="expressions"><span class="secno">6. </span><span class="content">Expressions TODO</span><a class="self-link" href="#expressions"></a></h2>
   <h3 class="heading settled" data-level="6.1" id="literal-expressions"><span class="secno">6.1. </span><span class="content">Literal Expressions TODO</span><a class="self-link" href="#literal-expressions"></a></h3>
   <table class="data">
    <caption>Scalar literal type rules</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr>
      <td>
      <td><code>true</code>: bool
      <td>OpConstantTrue %bool 
     <tr>
      <td>
      <td><code>false</code>: bool
      <td>OpConstantFalse %bool 
     <tr>
      <td>
      <td><em>INT_LITERAL</em>: i32
      <td>OpConstant %int <em>literal</em> 
     <tr>
      <td>
      <td><em>UINT_LITERAL</em>: u32
      <td>OpConstant %uint <em>literal</em> 
     <tr>
      <td>
      <td><em>FLOAT_LITERAL</em>: f32
      <td>OpConstant %float <em>literal</em> 
   </table>
   <h3 class="heading settled" data-level="6.2" id="parenthesized-expressions"><span class="secno">6.2. </span><span class="content">Parenthesized Expressions</span><a class="self-link" href="#parenthesized-expressions"></a></h3>
   <table class="data">
    <caption>Parenthesized expression type rules</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="parenthesized expression">
      <td><var>e</var> : <var>T</var> 
      <td><code>(</code> <var>e</var> <code>)</code> : <var>T</var> 
      <td>Evaluates to <var>e</var>.<br> Use parentheses to isolate an expression from the surrounding text. 
   </table>
   <h3 class="heading settled" data-level="6.3" id="type-constructor-expr"><span class="secno">6.3. </span><span class="content">Type Constructor Expressions</span><a class="self-link" href="#type-constructor-expr"></a></h3>
   <p>Type constructor expressions explicitly create a value of a given type.</p>
   <p>The scalar forms are redundant, but provide symmetry with scalar <a href="#conversion-expr">conversion expressions</a>,
and can be used to enhance readability.</p>
   <p>The vector forms construct vector values from various combinations of components and subvectors
with matching component types.</p>
   <p>See also <a href="#zero-value-expr">§ 6.4 Zero Value Expressions</a> and <a href="#conversion-expr">§ 6.5 Conversion Expressions</a>.</p>
   <table class="data">
    <caption>Scalar constructor type rules</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr>
      <td><em>e</em>: bool
      <td><code>bool(e)</code>: bool
      <td>Identity.<br>In the SPIR-V translation, the ID of this expression reuses the ID of the operand. 
     <tr>
      <td><em>e</em>: i32
      <td><code>i32(e)</code>: i32
      <td>Identity.<br>In the SPIR-V translation, the ID of this expression reuses the ID of the operand. 
     <tr>
      <td><em>e</em>: u32
      <td><code>u32(e)</code>: u32
      <td>Identity.<br>In the SPIR-V translation, the ID of this expression reuses the ID of the operand. 
     <tr>
      <td><em>e</em>: f32
      <td><code>f32(e)</code>: f32
      <td>Identity.<br>In the SPIR-V translation, the ID of this expression reuses the ID of the operand. 
   </table>
   <table class="data">
    <caption>Vector constructor type rules, where <em>T</em> is a scalar type</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="construct a vector from copies of a single scalar">
      <td><var>e</var>: <var>T</var> 
      <td><code>vec</code><var>N</var><code>&lt;</code><var>T</var><code>>(</code><var>e</var><code>)</code>: vec<var>N</var>&lt;<var>T</var>> 
      <td>Evaluates <var>e</var> once. Results in the <var>N</var>-element vector where each component has the value of <var>e</var>. 
     <tr>
      <td><em>e1</em>: <em>T</em><br> <em>e2</em>: <em>T</em> 
      <td><code>vec2&lt;T>(e1,e2)</code>: vec2&lt;<em>T</em>> 
      <td>OpCompositeConstruct 
     <tr>
      <td><em>e</em>: vec2&lt;T> 
      <td><code>vec2&lt;T>(e)</code>: vec2&lt;<em>T</em>> 
      <td>Identity. The result is <var>e</var>. 
     <tr>
      <td><em>e1</em>: <em>T</em><br> <em>e2</em>: <em>T</em><br> <em>e3</em>: <em>T</em> 
      <td><code>vec3&lt;T>(e1,e2,e3)</code>: vec3&lt;<em>T</em>> 
      <td>OpCompositeConstruct 
     <tr>
      <td><em>e1</em>: <em>T</em><br> <em>e2</em>: vec2&lt;<em>T</em>> 
      <td><code>vec3&lt;T>(e1,e2)</code>: vec3&lt;<em>T</em>><br> <code>vec3&lt;T>(e2,e1)</code>: vec3&lt;<em>T</em>> 
      <td>OpCompositeConstruct 
     <tr>
      <td><em>e</em>: vec3&lt;T> 
      <td><code>vec3&lt;T>(e)</code>: vec3&lt;<em>T</em>> 
      <td>Identity. The result is <var>e</var>. 
     <tr>
      <td><em>e1</em>: <em>T</em><br> <em>e2</em>: <em>T</em><br> <em>e3</em>: <em>T</em><br> <em>e4</em>: <em>T</em> 
      <td><code>vec4&lt;T>(e1,e2,e3,e4)</code>: vec4&lt;<em>T</em>> 
      <td>OpCompositeConstruct 
     <tr>
      <td><em>e1</em>: <em>T</em><br> <em>e2</em>: <em>T</em><br> <em>e3</em>: vec2&lt;<em>T</em>> 
      <td><code>vec4&lt;T>(e1,e2,e3)</code>: vec4&lt;<em>T</em>><br> <code>vec4&lt;T>(e1,e3,e2)</code>: vec4&lt;<em>T</em>><br> <code>vec4&lt;T>(e3,e1,e2)</code>: vec4&lt;<em>T</em>> 
      <td>OpCompositeConstruct 
     <tr>
      <td><em>e1</em>: vec2&lt;<em>T</em>><br> <em>e2</em>: vec2&lt;<em>T</em>> 
      <td><code>vec4&lt;T>(e1,e2)</code>: vec4&lt;<em>T</em>> 
      <td>OpCompositeConstruct 
     <tr>
      <td><em>e1</em>: <em>T</em><br> <em>e2</em>: vec3&lt;<em>T</em>> 
      <td><code>vec4&lt;T>(e1,e2)</code>: vec4&lt;<em>T</em>><br> <code>vec4&lt;T>(e2,e1)</code>: vec4&lt;<em>T</em>> 
      <td>OpCompositeConstruct 
     <tr>
      <td><em>e</em>: vec4&lt;T> 
      <td><code>vec4&lt;T>(e)</code>: vec4&lt;<em>T</em>> 
      <td>Identity. The result is <var>e</var>. 
   </table>
   <table class="data">
    <caption>Matrix constructor type rules</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr>
      <td><var>e1</var>: <var>f32</var><br> ...<br> <var>eN</var>: <var>f32</var> 
      <td><code>mat2x2&lt;f32>(e1,e2,e3,e4)</code>: mat2x2&lt;f32><br> <code>mat3x2&lt;f32>(e1,...,e6)</code>: mat3x2&lt;f32><br> <code>mat2x3&lt;f32>(e1,...,e6)</code>: mat2x3&lt;f32><br> <code>mat4x2&lt;f32>(e1,...,e8)</code>: mat4x2&lt;f32><br> <code>mat2x4&lt;f32>(e1,...,e8)</code>: mat2x4&lt;f32><br> <code>mat3x3&lt;f32>(e1,...,e9)</code>: mat3x3&lt;f32><br> <code>mat4x3&lt;f32>(e1,...,e12)</code>: mat4x3&lt;f32><br> <code>mat3x4&lt;f32>(e1,...,e12)</code>: mat3x4&lt;f32><br> <code>mat4x4&lt;f32>(e1,...,e16)</code>: mat4x4&lt;f32> 
      <td>Column-major construction by elements.<br> OpCompositeConstruct 
     <tr>
      <td><em>e1</em>: vec2&lt;f32><br> <em>e2</em>: vec2&lt;f32><br> <em>e3</em>: vec2&lt;f32><br> <em>e4</em>: vec2&lt;f32> 
      <td><code>mat2x2&lt;f32>(e1,e2)</code>: mat2x2&lt;f32><br> <code>mat3x2&lt;f32>(e1,e2,e3)</code>: mat3x2&lt;f32><br> <code>mat4x2&lt;f32>(e1,e2,e3,e4)</code>: mat4x2&lt;f32> 
      <td>Column by column construction.<br> OpCompositeConstruct 
     <tr>
      <td><em>e1</em>: vec3&lt;f32><br> <em>e2</em>: vec3&lt;f32><br> <em>e3</em>: vec3&lt;f32><br> <em>e4</em>: vec3&lt;f32> 
      <td><code>mat2x3&lt;f32>(e1,e2)</code>: mat2x3&lt;f32><br> <code>mat3x3&lt;f32>(e1,e2,e3)</code>: mat3x3&lt;f32><br> <code>mat4x3&lt;f32>(e1,e2,e3,e4)</code>: mat4x3&lt;f32> 
      <td>Column by column construction.<br> OpCompositeConstruct 
     <tr>
      <td><em>e1</em>: vec4&lt;f32><br> <em>e2</em>: vec4&lt;f32><br> <em>e3</em>: vec4&lt;f32><br> <em>e4</em>: vec4&lt;f32> 
      <td><code>mat2x4&lt;f32>(e1,e2)</code>: mat2x4&lt;f32><br> <code>mat3x4&lt;f32>(e1,e2,e3)</code>: mat3x4&lt;f32><br> <code>mat4x4&lt;f32>(e1,e2,e3,e4)</code>: mat4x4&lt;f32> 
      <td>Column by column construction.<br> OpCompositeConstruct 
   </table>
   <table class="data">
    <caption>Array constructor type rules</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="array value construction">
      <td><var>e1</var>: <var>T</var><br> ...<br> <var>eN</var>: <var>T</var>,<br> <var>T</var> is a <a data-link-type="dfn" href="#constructible" id="ref-for-constructible⑦">constructible</a> type. 
      <td><code>array&lt;</code><var>T</var>,<var>N</var><code>>(</code><var>e1</var>,...,<var>eN</var><code>)</code> : array&lt;<var>T</var>,<var>N</var>> 
      <td>Construction of an array from elements. 
   </table>
   <table class="data">
    <caption>Structure constructor type rules</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="structure value construction">
      <td><var>e1</var>: <var>T1</var><br> ...<br> <var>eN</var>: <var>TN</var>,<br> <var>S</var> is a <a data-link-type="dfn" href="#constructible" id="ref-for-constructible⑧">constructible</a> structure type with members having types <var>T1</var> ... <var>TN</var>.<br> The expression is in the scope of declaration of <var>S</var>. 
      <td><var>S</var><code>(</code><var>e1</var>,...,<var>eN</var><code>)</code>: <var>S</var> 
      <td>Construction of a structure from members. 
   </table>
   <h3 class="heading settled" data-level="6.4" id="zero-value-expr"><span class="secno">6.4. </span><span class="content">Zero Value Expressions</span><a class="self-link" href="#zero-value-expr"></a></h3>
   <p>Each <a data-link-type="dfn" href="#constructible" id="ref-for-constructible⑨">constructible</a> <em>T</em> has a unique <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="zero-value">zero value</dfn> written in WGSL as the type followed by an empty pair of parentheses: <em>T</em> <code>()</code>.</p>
   <p>The zero values are as follows:</p>
   <ul>
    <li data-md>
     <p><code>bool()</code> is <code>false</code></p>
    <li data-md>
     <p><code>i32()</code> is 0</p>
    <li data-md>
     <p><code>u32()</code> is 0</p>
    <li data-md>
     <p><code>f32()</code> is 0.0</p>
    <li data-md>
     <p>The zero value for an <em>N</em>-element vector of type <em>T</em> is the <em>N</em>-element vector of the zero value for <em>T</em>.</p>
    <li data-md>
     <p>The zero value for an <em>N</em>-column <em>M</em>-row matrix of <code>f32</code> is the matrix of those dimensions filled with 0.0 entries.</p>
    <li data-md>
     <p>The zero value for an <em>N</em>-element array with <a data-link-type="dfn" href="#constructible" id="ref-for-constructible①⓪">constructible</a> element type <em>E</em> is an array of <em>N</em> elements of the zero value for <em>E</em>.</p>
    <li data-md>
     <p>The zero value for a <a data-link-type="dfn" href="#constructible" id="ref-for-constructible①①">constructible</a> structure type <em>S</em> is the structure value <em>S</em> with zero-valued members.</p>
   </ul>
   <p class="note" role="note"><span>Note:</span> WGSL does not have zero expression for <a data-link-type="dfn" href="#atomic-type" id="ref-for-atomic-type⑦">atomic types</a>, <a data-link-type="dfn" href="#runtime-sized" id="ref-for-runtime-sized③">runtime-sized</a> arrays, or other types that are not <a data-link-type="dfn" href="#constructible" id="ref-for-constructible①②">constructible</a>.</p>
   <table class="data">
    <caption>Scalar zero value type rules</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr>
      <td>
      <td><code>bool()</code>: bool
      <td>false<br>Zero value (OpConstantNull for bool) 
     <tr>
      <td>
      <td><code>i32()</code>: i32
      <td>0<br>Zero value (OpConstantNull for i32) 
     <tr>
      <td>
      <td><code>u32()</code>: u32
      <td>0u<br>Zero value (OpConstantNull for u32) 
     <tr>
      <td>
      <td><code>f32()</code>: f32
      <td>0.0<br>Zero value (OpConstantNull for f32) 
   </table>
   <table class="data">
    <caption>Vector zero type rules, where <em>T</em> is a scalar type</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr>
      <td>
      <td><code>vec2&lt;T>()</code>: vec2&lt;<em>T</em>> 
      <td>Zero value (OpConstantNull) 
     <tr>
      <td>
      <td><code>vec3&lt;T>()</code>: vec3&lt;<em>T</em>> 
      <td>Zero value (OpConstantNull) 
     <tr>
      <td>
      <td><code>vec4&lt;T>()</code>: vec4&lt;<em>T</em>> 
      <td>Zero value (OpConstantNull) 
   </table>
   <div class="example no-marker" id="example-650246c5">
    <a class="self-link" href="#example-650246c5"></a>
    <div class="marker">EXAMPLE: Zero-valued vectors</div>
<pre class="highlight"><c- n>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>()</c->                 <c- c1>// The zero-valued vector of two f32 elements.</c->
<c- n>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>(</c-><c- mf>0.0</c-><c- p>,</c-> <c- mf>0.0</c-><c- p>)</c->         <c- c1>// The same value, written explicitly.</c->

<c- n>vec3</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>()</c->                 <c- c1>// The zero-valued vector of three i32 elements.</c->
<c- n>vec3</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>(</c-><c- mi>0</c-><c- p>,</c-> <c- mi>0</c-><c- p>,</c-> <c- mi>0</c-><c- p>)</c->          <c- c1>// The same value, written explicitly.</c->
</pre>
   </div>
   <table class="data">
    <caption>Matrix zero type rules</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr>
      <td>
      <td><code>mat2x2&lt;f32>()</code>: mat2x2&lt;f32><br> <code>mat3x2&lt;f32>()</code>: mat3x2&lt;f32><br> <code>mat4x2&lt;f32>()</code>: mat4x2&lt;f32> 
      <td>Zero value (OpConstantNull) 
     <tr>
      <td>
      <td><code>mat2x3&lt;f32>()</code>: mat2x3&lt;f32><br> <code>mat3x3&lt;f32>()</code>: mat3x3&lt;f32><br> <code>mat4x3&lt;f32>()</code>: mat4x3&lt;f32> 
      <td>Zero value (OpConstantNull) 
     <tr>
      <td>
      <td><code>mat2x4&lt;f32>()</code>: mat2x4&lt;f32><br> <code>mat3x4&lt;f32>()</code>: mat3x4&lt;f32><br> <code>mat4x4&lt;f32>()</code>: mat4x4&lt;f32> 
      <td>Zero value (OpConstantNull) 
   </table>
   <table class="data">
    <caption>Array zero type rules</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="array zero value">
      <td><var>T</var> is a <a data-link-type="dfn" href="#constructible" id="ref-for-constructible①③">constructible</a> 
      <td><code>array&lt;</code><var>T</var>,<var>N</var><code>>()</code>: array&lt;<var>T</var>,<var>N</var>> 
      <td>Zero-valued array (OpConstantNull) 
   </table>
   <div class="example no-marker" id="example-26d4c1f8">
    <a class="self-link" href="#example-26d4c1f8"></a>
    <div class="marker">EXAMPLE: Zero-valued arrays</div>
<pre class="highlight"><c- n>array</c-><c- o>&lt;</c-><c- b>bool</c-><c- p>,</c-> <c- mi>2</c-><c- o>></c-><c- p>()</c->               <c- c1>// The zero-valued array of two booleans.</c->
<c- n>array</c-><c- o>&lt;</c-><c- b>bool</c-><c- p>,</c-> <c- mi>2</c-><c- o>></c-><c- p>(</c-><c- kc>false</c-><c- p>,</c-> <c- kc>false</c-><c- p>)</c->   <c- c1>// The same value, written explicitly.</c->
</pre>
   </div>
   <table class="data">
    <caption>Structure zero type rules</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="structure zero value">
      <td><var>S</var> is a <a data-link-type="dfn" href="#constructible" id="ref-for-constructible①④">constructible</a> structure type.<br> The expression is in the scope of declaration of <var>S</var>. 
      <td><var>S</var><code>()</code>: <var>S</var> 
      <td>Zero-valued structure: a structure of type <var>S</var> where each member is the zero value for its member type. <br> (OpConstantNull) 
   </table>
   <div class="example wgsl global-scope no-marker" id="example-088020de">
    <a class="self-link" href="#example-088020de"></a>
    <div class="marker">EXAMPLE: Zero-valued structures</div>
<pre class="highlight"><c- k>struct</c-> <c- nc>Student</c-> <c- p>{</c->
  <c- n>grade</c->: <c- b>i32</c-><c- p>;</c->
  <c- n>GPA</c->: <c- b>f32</c-><c- p>;</c->
  <c- n>attendance</c->: <c- nc>array</c-><c- o>&lt;</c-><c- b>bool</c-><c- p>,</c-><c- mi>4</c-><c- o>></c-><c- p>;</c->
<c- p>};</c->

<c- k>fn</c-> <c- nf>func</c-><c- p>()</c-> <c- p>{</c->
  <c- n>var</c-> <c- n>s</c->: <c- nc>Student</c-><c- p>;</c->

  <c- c1>// The zero value for Student</c->
  <c- n>s</c-> <c- o>=</c-> <c- n>Student</c-><c- p>();</c->

  <c- c1>// The same value, written explicitly.</c->
  <c- n>s</c-> <c- o>=</c-> <c- n>Student</c-><c- p>(</c-><c- mi>0</c-><c- p>,</c-> <c- mf>0.0</c-><c- p>,</c-> <c- n>array</c-><c- o>&lt;</c-><c- b>bool</c-><c- p>,</c-><c- mi>4</c-><c- o>></c-><c- p>(</c-><c- kc>false</c-><c- p>,</c-> <c- kc>false</c-><c- p>,</c-> <c- kc>false</c-><c- p>,</c-> <c- kc>false</c-><c- p>));</c->

  <c- c1>// The same value, written with zero-valued members.</c->
  <c- n>s</c-> <c- o>=</c-> <c- n>Student</c-><c- p>(</c-><c- b>i32</c-><c- p>(),</c-> <c- b>f32</c-><c- p>(),</c-> <c- n>array</c-><c- o>&lt;</c-><c- b>bool</c-><c- p>,</c-><c- mi>4</c-><c- o>></c-><c- p>());</c->
<c- p>}</c->
</pre>
   </div>
   <h3 class="heading settled" data-level="6.5" id="conversion-expr"><span class="secno">6.5. </span><span class="content">Conversion Expressions</span><a class="self-link" href="#conversion-expr"></a></h3>
   <p>WGSL does not implicitly convert or promote a numeric or boolean value to another type.
Instead use conversion expressions as defined in the tables below.</p>
   <p>See also <a href="#type-constructor-expr">§ 6.3 Type Constructor Expressions</a>.</p>
   <table class="data">
    <caption>Scalar conversion type rules</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="coercion to boolean from unsigned">
      <td><var>e</var>: u32
      <td><code>bool(</code><var>e</var><code>)</code>: bool 
      <td>Coercion to boolean.<br> The result is false if <var>e</var> is 0, and true otherwise.<br> (Use OpINotEqual to compare <var>e</var> against 0.) 
     <tr class="algorithm" data-algorithm="coercion to boolean from signed">
      <td><var>e</var>: i32
      <td><code>bool(</code><var>e</var><code>)</code>: bool 
      <td>Coercion to boolean.<br> The result is false if <var>e</var> is 0, and true otherwise.<br> (Use OpINotEqual to compare <var>e</var> against 0.) 
     <tr class="algorithm" data-algorithm="coercion to boolean from floating point">
      <td><var>e</var>: f32
      <td><code>bool(</code><var>e</var><code>)</code>: bool 
      <td>Coercion to boolean.<br> The result is false if <var>e</var> is 0.0 or -0.0, and true otherwise.
          In particular NaN and infinity values map to true.<br> (Use OpFUnordNotEqual to compare <var>e</var> against <code>0.0</code>.) 
     <tr class="algorithm" data-algorithm="conversion from boolean to signed">
      <td><var>e</var>: bool
      <td><code>i32(</code><var>e</var><code>)</code>: i32 
      <td>Conversion of a boolean value to a signed integer<br> The result is 1 if <var>e</var> is true and 0 otherwise.<br> (Use OpSelect with <var>e</var> as the condition, selecting between 1 and 0.) 
     <tr class="algorithm" data-algorithm="scalar reinterpretation from unsigned to signed">
      <td><var>e</var>: u32
      <td><code>i32(</code><var>e</var><code>)</code>: i32 
      <td>Reinterpretation of bits.<br> The result is the unique value in <a data-link-type="dfn" href="#i32" id="ref-for-i32⑧">i32</a> that is equal to (<var>e</var> mod 2<sup>32</sup>).<br> (OpBitcast) 
     <tr class="algorithm" data-algorithm="scalar conversion from floating point to signed integer">
      <td><var>e</var>: f32
      <td><code>i32(</code><var>e</var><code>)</code>: i32
      <td>Value conversion, including invalid cases. (OpConvertFToS) 
     <tr class="algorithm" data-algorithm="conversion from boolean to unsigned">
      <td><var>e</var>: bool
      <td><code>u32(</code><var>e</var><code>)</code>: u32 
      <td>Conversion of a boolean value to an unsigned integer<br> The result is 1u if <var>e</var> is true and 0u otherwise.<br> (Use OpSelect with <var>e</var> as the condition, selecting between 1u and 0u.) 
     <tr class="algorithm" data-algorithm="scalar conversion from signed integer to unsigned integer">
      <td><var>e</var>: i32
      <td><code>u32(</code><var>e</var><code>)</code>: u32 
      <td>Reinterpretation of bits.<br> The result is the unique value in <a data-link-type="dfn" href="#u32" id="ref-for-u32⑦">u32</a> that is equal to (<var>e</var> mod 2<sup>32</sup>).<br> (OpBitcast) 
     <tr class="algorithm" data-algorithm="scalar conversion from floating point to unsigned integer">
      <td><var>e</var>: f32
      <td><code>u32(</code><var>e</var><code>)</code>: u32 
      <td>Value conversion, including invalid cases. (OpConvertFToU) 
     <tr class="algorithm" data-algorithm="conversion from boolean to floating point">
      <td><var>e</var>: bool
      <td><code>f32(</code><var>e</var><code>)</code>: f32 
      <td>Conversion of a boolean value to floating point<br> The result is 1.0 if <var>e</var> is true and 0.0 otherwise.<br> (Use OpSelect with <var>e</var> as the condition, selecting between 1.0 and 0.0.) 
     <tr class="algorithm" data-algorithm="scalar conversion from signed integer to floating point">
      <td><var>e</var>: i32
      <td><code>f32(</code><var>e</var><code>)</code>: f32
      <td>Value conversion, including invalid cases. (OpConvertSToF) 
     <tr class="algorithm" data-algorithm="scalar conversion from unsigned integer to floating point">
      <td><var>e</var>: u32
      <td><code>f32(</code><var>e</var><code>)</code>: f32
      <td>Value conversion, including invalid cases. (OpConvertUToF) 
   </table>
   <p>Details of conversion to and from floating point are explained in <a href="#floating-point-conversion">§ 12.5.2 Floating point conversion</a>.</p>
   <table class="data">
    <caption>Vector conversion type rules</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="vector coercion of unsigned integer to boolean">
      <td><var>e</var>: vec<var>N</var>&lt;u32> 
      <td><code>vec</code><var>N</var>&lt;<code>bool</code>><code>(</code><var>e</var><code>)</code>: vec<var>N</var>&lt;bool> 
      <td><a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise">Component-wise</a> coercion of a unsigned integer vector to a boolean vector.<br> (OpINotEqual to compare <var>e</var> against a zero vector.) 
     <tr class="algorithm" data-algorithm="vector coercion of signed integer to boolean">
      <td><var>e</var>: vec<var>N</var>&lt;i32> 
      <td><code>vec</code><var>N</var>&lt;<code>bool</code>><code>(</code><var>e</var><code>)</code>: vec<var>N</var>&lt;bool> 
      <td><a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise①">Component-wise</a> coercion of a signed integer vector to a boolean vector.<br> (OpINotEqual to compare <var>e</var> against a zero vector.) 
     <tr class="algorithm" data-algorithm="vector coercion of floating point to boolean">
      <td><var>e</var>: vec<var>N</var>&lt;f32> 
      <td><code>vec</code><var>N</var>&lt;<code>bool</code>><code>(</code><var>e</var><code>)</code>: vec<var>N</var>&lt;bool> 
      <td><a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise②">Component-wise</a> coercion of a floating point vector to a boolean vector.<br> (OpFUnordNotEqual to compare <var>e</var> against a zero vector.) 
     <tr class="algorithm" data-algorithm="vector conversion from bool to signed">
      <td><var>e</var>: vec<var>N</var>&lt;bool> 
      <td><code>vec</code><var>N</var>&lt;<code>i32</code>><code>(</code><var>e</var><code>)</code>: vec<var>N</var>&lt;i32> 
      <td><a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise③">Component-wise</a> conversion of a boolean vector to signed.<br> Component <var>i</var> of the result is <code>i32(</code><var>e</var><code>[</code><var>i</var><code>])</code><br> (OpSelect, with <var>e</var> as the condition, selecting between <code>vec</code><var>N</var>(1) and <code>vec</code><var>N</var>(0).) 
     <tr class="algorithm" data-algorithm="vector reinterpretation from unsigned to signed">
      <td><var>e</var>: vec<var>N</var>&lt;u32> 
      <td><code>vec</code><var>N</var>&lt;<code>i32</code>><code>(</code><var>e</var><code>)</code>: vec<var>N</var>&lt;i32> 
      <td><a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise④">Component-wise</a> reinterpretation of bits.<br> Component <var>i</var> of the result is <code>i32(</code><var>e</var><code>[</code><var>i</var><code>])</code><br> (OpBitcast) 
     <tr class="algorithm" data-algorithm="vector conversion from floating point to signed integer">
      <td><var>e</var>: vec<var>N</var>&lt;f32> 
      <td><code>vec</code><var>N</var>&lt;<code>i32</code>><code>(</code><var>e</var><code>)</code>: vec<var>N</var>&lt;i32> 
      <td><a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑤">Component-wise</a> value conversion to signed integer, including invalid cases.<br> (OpConvertFToS) 
     <tr class="algorithm" data-algorithm="vector conversion from bool to unsigned">
      <td><var>e</var>: vec<var>N</var>&lt;bool> 
      <td><code>vec</code><var>N</var>&lt;<code>u32</code>><code>(</code><var>e</var><code>)</code>: vec<var>N</var>&lt;u32> 
      <td><a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑥">Component-wise</a> conversion of a boolean vector to unsigned.<br> Component <var>i</var> of the result is <code>u32(</code><var>e</var><code>[</code><var>i</var><code>])</code><br> (OpSelect, with <var>e</var> as the condition, selecting between <code>vec</code><var>N</var>(1u) and <code>vec</code><var>N</var>(0u).) 
     <tr class="algorithm" data-algorithm="vector reinterpretation from signed to unsigned">
      <td><var>e</var>: vec<var>N</var>&lt;i32> 
      <td><code>vec</code><var>N</var>&lt;<code>u32</code>><code>(</code><var>e</var><code>)</code>: vec<var>N</var>&lt;u32> 
      <td><a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑦">Component-wise</a> reinterpretation of bits.<br> (OpBitcast) 
     <tr class="algorithm" data-algorithm="vector conversion from floating point to unsigned integer">
      <td><var>e</var>: vec<var>N</var>&lt;f32> 
      <td><code>vec</code><var>N</var>&lt;<code>u32</code>><code>(</code><var>e</var><code>)</code>: vec<var>N</var>&lt;u32> 
      <td><a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑧">Component-wise</a> value conversion to unsigned integer, including invalid cases.<br> (OpConvertFToU) 
     <tr class="algorithm" data-algorithm="vector conversion from bool to floating point">
      <td><var>e</var>: vec<var>N</var>&lt;bool> 
      <td><code>vec</code><var>N</var>&lt;<code>u32</code>><code>(</code><var>e</var><code>)</code>: vec<var>N</var>&lt;u32> 
      <td><a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑨">Component-wise</a> conversion of a boolean vector to floating point.<br> Component <var>i</var> of the result is <code>f32(</code><var>e</var><code>[</code><var>i</var><code>])</code><br> (OpSelect, with <var>e</var> as the condition, selecting between <code>vec</code><var>N</var>(1.0) and <code>vec</code><var>N</var>(0.0).) 
     <tr class="algorithm" data-algorithm="vector conversion from signed integer to floating point">
      <td><var>e</var>: vec<var>N</var>&lt;i32> 
      <td><code>vec</code><var>N</var>&lt;<code>f32</code>><code>(</code><var>e</var><code>)</code>: vec<var>N</var>&lt;f32> 
      <td><a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise①⓪">Component-wise</a> value conversion to floating point, including invalid cases.<br> (OpConvertSToF) 
     <tr class="algorithm" data-algorithm="vector conversion from unsigned integer to floating point">
      <td><var>e</var>: vec<var>N</var>&lt;u32> 
      <td><code>vec</code><var>N</var>&lt;<code>f32</code>><code>(</code><var>e</var><code>)</code>: vec<var>N</var>&lt;f32> 
      <td><a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise①①">Component-wise</a> value conversion to floating point, including invalid cases.<br> (ConvertUToF) 
   </table>
   <h3 class="heading settled" data-level="6.6" id="bitcast-expr"><span class="secno">6.6. </span><span class="content">Reinterpretation of Representation Expressions</span><a class="self-link" href="#bitcast-expr"></a></h3>
   <p>A <code>bitcast</code> expression is used to reinterpet the bit representation of a
value in one type as a value in another type.</p>
   <table class="data">
    <caption>Bitcast type rules</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="identity reinterpretation">
      <td><var>e</var>: <var>T</var><br> <var>T</var> is a <a data-link-type="dfn" href="#numeric-scalar" id="ref-for-numeric-scalar③">numeric scalar</a> or <a data-link-type="dfn" href="#numeric-vector" id="ref-for-numeric-vector④">numeric vector</a> type 
      <td class="nowrap">bitcast&lt;<var>T</var>>(<var>e</var>): <var>T</var> 
      <td>Identity transform. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise①②">Component-wise</a> when <var>T</var> is a vector.<br> The result is <var>e</var>.<br> In the SPIR-V translation, the ID of this expression reuses the ID of the operand. 
     <tr class="algorithm" data-algorithm="general reinterpretation">
      <td><var>e</var>: <var>T1</var><br> <var>T1</var> is a <a data-link-type="dfn" href="#numeric-scalar" id="ref-for-numeric-scalar④">numeric scalar</a> or <a data-link-type="dfn" href="#numeric-vector" id="ref-for-numeric-vector⑤">numeric vector</a> type<br> <var>T2</var> is not <var>T1</var> and is a numeric scalar type if <var>T1</var> is a scalar, or<br> a numeric vector type if <var>T1</var> is a vector 
      <td class="nowrap">bitcast&lt;<var>T2</var>>(<var>e</var>): <var>T2</var> 
      <td>Reinterpretation of bits as <var>T2</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise①③">Component-wise</a> when <var>T1</var> is a vector.<br> The result is the reinterpretation of the bits in <var>e</var> as a <var>T2</var> value.<br> (OpBitcast) 
   </table>
   <h3 class="heading settled" data-level="6.7" id="composite-value-decomposition-expr"><span class="secno">6.7. </span><span class="content">Composite Value Decomposition Expressions</span><a class="self-link" href="#composite-value-decomposition-expr"></a></h3>
   <h4 class="heading settled" data-level="6.7.1" id="vector-access-expr"><span class="secno">6.7.1. </span><span class="content">Vector Access Expression</span><a class="self-link" href="#vector-access-expr"></a></h4>
   <p>Accessing members of a vector can be done either using array subscripting (e.g. <code>a[2]</code>) or using a sequence of convenience names, each mapping to an element of the source vector.</p>
   <ul>
    <li>The colour set of convenience names: <code>r</code>, <code>g</code>, <code>b</code>, <code>a</code> for vector elements 0, 1, 2, and 3 respectively. 
    <li>The dimensional set of convenience names: <code>x</code>, <code>y</code>, <code>z</code>, <code>w</code> for vector elements 0, 1, 2, and 3, respectively. 
   </ul>
   <p>The convenience names are accessed using the <code>.</code> notation. (e.g. <code>color.bgra</code>).</p>
   <p class="note" role="note"><span>NOTE:</span> the convenience letterings can not be mixed. (i.e. you can not use <code>rybw</code>).</p>
   <p>Using a convenience letter, or array subscript, which accesses an element past the end of the vector is an error.</p>
   <p>The convenience letterings can be applied in any order, including duplicating letters as needed. You can provide 1 to 4 letters when extracting components from a vector. Providing more then 4 letters is an error.</p>
   <p>The result type depends on the number of letters provided. Assuming a <code>vec4&lt;f32></code></p>
   <table>
    <thead>
     <tr>
      <th>Accessor
      <th>Result type 
    <tbody>
     <tr>
      <td>r
      <td><code>f32</code> 
     <tr>
      <td>rg
      <td><code>vec2&lt;f32></code> 
     <tr>
      <td>rgb
      <td><code>vec3&lt;f32></code> 
     <tr>
      <td>rgba
      <td><code>vec4&lt;f32></code> 
   </table>
   <div class="example wgsl function-scope" id="example-78b3a51f">
    <a class="self-link" href="#example-78b3a51f"></a> 
<pre class="highlight"><c- n>var</c-> <c- n>a</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-> <c- o>=</c-> <c- n>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>(</c-><c- mf>1.</c-><c- p>,</c-> <c- mf>2.</c-><c- p>,</c-> <c- mf>3.</c-><c- p>);</c->
<c- n>var</c-> <c- n>b</c->: <c- b>f32</c-> <c- o>=</c-> <c- n>a</c-><c- p>.</c-><c- n>y</c-><c- p>;</c->          <c- c1>// b = 2.0</c->
<c- n>var</c-> <c- n>c</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-> <c- o>=</c-> <c- n>a</c-><c- p>.</c-><c- n>bb</c-><c- p>;</c->   <c- c1>// c = (3.0, 3.0)</c->
<c- n>var</c-> <c- n>d</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-> <c- o>=</c-> <c- n>a</c-><c- p>.</c-><c- n>zyx</c-><c- p>;</c->  <c- c1>// d = (3.0, 2.0, 1.0)</c->
<c- n>var</c-> <c- n>e</c->: <c- b>f32</c-> <c- o>=</c-> <c- n>a</c-><c- p>[</c-><c- mi>1</c-><c- p>];</c->         <c- c1>// e = 2.0</c->
</pre>
   </div>
   <h5 class="heading settled" data-level="6.7.1.1" id="vector-single-component"><span class="secno">6.7.1.1. </span><span class="content">Vector single component selection</span><a class="self-link" href="#vector-single-component"></a></h5>
   <table class="data">
    <caption>Vector decomposition: single component selection</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="first vector component selection">
      <td><var>e</var>: vec<var>N</var>&lt;<var>T</var>><br> 
      <td class="nowrap"> <var>e</var><code>.x</code>: <var>T</var><br> <var>e</var><code>.r</code>: <var>T</var> 
      <td>Select the first component of <var>e</var><br> (OpCompositeExtract with selection index 0) 
     <tr class="algorithm" data-algorithm="second vector component selection">
      <td><var>e</var>: vec<var>N</var>&lt;<var>T</var>><br> 
      <td class="nowrap"> <var>e</var><code>.y</code>: <var>T</var><br> <var>e</var><code>.g</code>: <var>T</var> 
      <td>Select the second component of <var>e</var><br> (OpCompositeExtract with selection index 1) 
     <tr class="algorithm" data-algorithm="third vector component selection">
      <td><var>e</var>: vec<var>N</var>&lt;<var>T</var>><br> <var>N</var> is 3 or 4 
      <td class="nowrap"> <var>e</var><code>.z</code>: <var>T</var><br> <var>e</var><code>.b</code>: <var>T</var> 
      <td>Select the third component of <var>e</var><br> (OpCompositeExtract with selection index 2) 
     <tr class="algorithm" data-algorithm="fourth vector component selection">
      <td><var>e</var>: vec4&lt;<var>T</var>> 
      <td class="nowrap"> <var>e</var><code>.w</code>: <var>T</var><br> <var>e</var><code>.a</code>: <var>T</var> 
      <td>Select the fourth component of <var>e</var><br> (OpCompositeExtract with selection index 3) 
     <tr class="algorithm" data-algorithm="vector indexed component selection">
      <td><var>e</var>: vec<var>N</var>&lt;<var>T</var>><br> <var>i</var>: i32 or u32 
      <td class="nowrap"> <var>e</var>[<var>i</var>]: <var>T</var> 
      <td>Select the <var>i</var>’<sup>th</sup> component of vector<br> The first component is at index <var>i</var>=0.<br> If <var>i</var> is outside the range [0,<var>N</var>-1], then any valid value for <var>T</var> may be returned.
           (OpVectorExtractDynamic) 
   </table>
   <h5 class="heading settled" data-level="6.7.1.2" id="vector-multi-component"><span class="secno">6.7.1.2. </span><span class="content">Vector multiple component selection</span><a class="self-link" href="#vector-multi-component"></a></h5>
   <table class="data">
    <caption>Vector decomposition: multiple component selection </caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="two component vector selection using .x .y">
      <td class="nowrap"> <var>e</var>: vec<var>N</var>&lt;<var>T</var>><br> <var>I</var> is the letter <code>x</code>, <code>y</code>, <code>z</code>, or <code>w</code><br> <var>J</var> is the letter <code>x</code>, <code>y</code>, <code>z</code>, or <code>w</code><br> 
      <td class="nowrap"> <var>e</var><code>.</code><var>I</var><var>J</var>: vec2&lt;<var>T</var>><br> 
      <td>Computes the two-element vector with first component <var>e</var>.<var>I</var>, and second component <var>e</var>.<var>J</var>.<br> Letter <code>z</code> is valid only when <var>N</var> is 3 or 4.<br> Letter <code>w</code> is valid only when <var>N</var> is 4.<br> (OpVectorShuffle) 
     <tr class="algorithm" data-algorithm="two component vector selection using .r .g">
      <td class="nowrap"> <var>e</var>: vec<var>N</var>&lt;<var>T</var>><br> <var>I</var> is the letter <code>r</code>, <code>g</code>, <code>b</code>, or <code>a</code><br> <var>J</var> is the letter <code>r</code>, <code>g</code>, <code>b</code>, or <code>a</code><br> 
      <td class="nowrap"> <var>e</var><code>.</code><var>I</var><var>J</var>: vec2&lt;<var>T</var>><br> 
      <td>Computes the two-element vector with first component <var>e</var>.<var>I</var>, and second component <var>e</var>.<var>J</var>.<br> Letter <code>b</code> is valid only when <var>N</var> is 3 or 4.<br> Letter <code>a</code> is valid only when <var>N</var> is 4.<br> (OpVectorShuffle) 
     <tr class="algorithm" data-algorithm="three component vector selection using .x .y">
      <td class="nowrap"> <var>e</var>: vec<var>N</var>&lt;<var>T</var>><br> <var>I</var> is the letter <code>x</code>, <code>y</code>, <code>z</code>, or <code>w</code><br> <var>J</var> is the letter <code>x</code>, <code>y</code>, <code>z</code>, or <code>w</code><br> <var>K</var> is the letter <code>x</code>, <code>y</code>, <code>z</code>, or <code>w</code><br> 
      <td class="nowrap"> <var>e</var><code>.</code><var>I</var><var>J</var><var>K</var>: vec3&lt;<var>T</var>><br> 
      <td>Computes the three-element vector with first component <var>e</var>.<var>I</var>, second component <var>e</var>.<var>J</var>, and third component <var>e</var>.<var>K</var>.<br> Letter <code>z</code> is valid only when <var>N</var> is 3 or 4.<br> Letter <code>w</code> is valid only when <var>N</var> is 4.<br> (OpVectorShuffle) 
     <tr class="algorithm" data-algorithm="three component vector selection using .r .g">
      <td class="nowrap"> <var>e</var>: vec<var>N</var>&lt;<var>T</var>><br> <var>I</var> is the letter <code>r</code>, <code>g</code>, <code>b</code>, or <code>a</code><br> <var>J</var> is the letter <code>r</code>, <code>g</code>, <code>b</code>, or <code>a</code><br> <var>K</var> is the letter <code>r</code>, <code>g</code>, <code>b</code>, or <code>a</code><br> 
      <td class="nowrap"> <var>e</var><code>.</code><var>I</var><var>J</var><var>K</var>: vec3&lt;<var>T</var>><br> 
      <td>Computes the three-element vector with first component <var>e</var>.<var>I</var>, second component <var>e</var>.<var>J</var>, and third component <var>e</var>.<var>K</var>.<br> Letter <code>b</code> is only valid when <var>N</var> is 3 or 4.<br> Letter <code>a</code> is only valid when <var>N</var> is 4.<br> (OpVectorShuffle) 
     <tr class="algorithm" data-algorithm="four component vector selection using .x .y">
      <td class="nowrap"> <var>e</var>: vec<var>N</var>&lt;<var>T</var>><br> <var>I</var> is the letter <code>x</code>, <code>y</code>, <code>z</code>, or <code>w</code><br> <var>J</var> is the letter <code>x</code>, <code>y</code>, <code>z</code>, or <code>w</code><br> <var>K</var> is the letter <code>x</code>, <code>y</code>, <code>z</code>, or <code>w</code><br> <var>L</var> is the letter <code>x</code>, <code>y</code>, <code>z</code>, or <code>w</code><br> 
      <td class="nowrap"> <var>e</var><code>.</code><var>I</var><var>J</var><var>K</var><var>L</var>: vec4&lt;<var>T</var>><br> 
      <td>Computes the four-element vector with first component <var>e</var>.<var>I</var>, second component <var>e</var>.<var>J</var>, third component <var>e</var>.<var>K</var>, and fourth component <var>e</var>.<var>L</var>.<br> Letter <code>z</code> is valid only when <var>N</var> is 3 or 4.<br> Letter <code>w</code> is valid only when <var>N</var> is 4.<br> (OpVectorShuffle) 
     <tr class="algorithm" data-algorithm="four component vector selection using .r .g">
      <td class="nowrap"> <var>e</var>: vec<var>N</var>&lt;<var>T</var>><br> <var>I</var> is the letter <code>r</code>, <code>g</code>, <code>b</code>, or <code>a</code><br> <var>J</var> is the letter <code>r</code>, <code>g</code>, <code>b</code>, or <code>a</code><br> <var>K</var> is the letter <code>r</code>, <code>g</code>, <code>b</code>, or <code>a</code><br> <var>L</var> is the letter <code>r</code>, <code>g</code>, <code>b</code>, or <code>a</code><br> 
      <td class="nowrap"> <var>e</var><code>.</code><var>I</var><var>J</var><var>K</var><var>L</var>: vec4&lt;<var>T</var>><br> 
      <td>Computes the four-element vector with first component <var>e</var>.<var>I</var>, second component <var>e</var>.<var>J</var>, third component <var>e</var>.<var>K</var>, and fourth component <var>e</var>.<var>L</var>.<br> Letter <code>b</code> is only valid when <var>N</var> is 3 or 4.<br> Letter <code>a</code> is only valid when <var>N</var> is 4.<br> (OpVectorShuffle) 
   </table>
   <h5 class="heading settled" data-level="6.7.1.3" id="component-reference-from-vector-reference"><span class="secno">6.7.1.3. </span><span class="content">Component reference from vector reference</span><a class="self-link" href="#component-reference-from-vector-reference"></a></h5>
   <table class="data">
    <caption>Getting a reference to a component from a reference to a vector</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="first vector component reference selection">
      <td><var>r</var>: ref&lt;<var>SC</var>,vec<var>N</var>&lt;<var>T</var>>><br> 
      <td class="nowrap"> <var>r</var><code>.x</code>: ref&lt;<var>SC</var>,<var>T</var>><br> <var>r</var><code>.r</code>: ref&lt;<var>SC</var>,<var>T</var>><br> 
      <td>Compute a reference to the first component of the vector referenced by the reference <var>r</var>.<br> The <a data-link-type="dfn" href="#originating-variable" id="ref-for-originating-variable③">originating variable</a> of the resulting reference is
           the same as the originating variable of <var>r</var>.<br> (OpAccessChain with index value 0) 
     <tr class="algorithm" data-algorithm="second vector component reference selection">
      <td><var>r</var>: ref&lt;<var>SC</var>,vec<var>N</var>&lt;<var>T</var>>><br> 
      <td class="nowrap"> <var>r</var><code>.y</code>: ref&lt;<var>SC</var>,<var>T</var>><br> <var>r</var><code>.g</code>: ref&lt;<var>SC</var>,<var>T</var>><br> 
      <td>Compute a reference to the second component of the vector referenced by the reference <var>r</var>.<br> The <a data-link-type="dfn" href="#originating-variable" id="ref-for-originating-variable④">originating variable</a> of the resulting reference is
           the same as the originating variable of <var>r</var>.<br> (OpAccessChain with index value 1) 
     <tr class="algorithm" data-algorithm="third vector component reference selection">
      <td><var>r</var>: ref&lt;<var>SC</var>,vec<var>N</var>&lt;<var>T</var>>><br> <var>N</var> is 3 or 4 
      <td class="nowrap"> <var>r</var><code>.z</code>: ref&lt;<var>SC</var>,<var>T</var>><br> <var>r</var><code>.b</code>: ref&lt;<var>SC</var>,<var>T</var>><br> 
      <td>Compute a reference to the third component of the vector referenced by the reference <var>r</var>.<br> The <a data-link-type="dfn" href="#originating-variable" id="ref-for-originating-variable⑤">originating variable</a> of the resulting reference is
           the same as the originating variable of <var>r</var>.<br> (OpAccessChain with index value 2) 
     <tr class="algorithm" data-algorithm="fourth vector component reference selection">
      <td><var>r</var>: ref&lt;<var>SC</var>,vec4&lt;<var>T</var>>><br> 
      <td class="nowrap"> <var>r</var><code>.w</code>: ref&lt;<var>SC</var>,<var>T</var>><br> <var>r</var><code>.a</code>: ref&lt;<var>SC</var>,<var>T</var>><br> 
      <td>Compute a reference to the fourth component of the vector referenced by the reference <var>r</var>.<br> The <a data-link-type="dfn" href="#originating-variable" id="ref-for-originating-variable⑥">originating variable</a> of the resulting reference is
           the same as the originating variable of <var>r</var>.<br> (OpAccessChain with index value 3) 
     <tr class="algorithm" data-algorithm="vector indexed component reference selection">
      <td><var>r</var>: ref&lt;<var>SC</var>,vec<var>N</var>&lt;<var>T</var>>><br> <var>i</var>: i32 or u32 
      <td class="nowrap"> <var>r</var>[<var>i</var>] : ref&lt;<var>SC</var>,<var>T</var>> 
      <td>
       Compute a reference to the <var>i</var>’<sup>th</sup> component of the vector
           referenced by the reference <var>r</var>. 
       <p>If <var>i</var> is outside the range [0,<var>N</var>-1], then the expression evaluates
           to <a data-link-type="dfn" href="#invalid-memory-reference" id="ref-for-invalid-memory-reference">invalid memory reference</a>.</p>
       <p>The <a data-link-type="dfn" href="#originating-variable" id="ref-for-originating-variable⑦">originating variable</a> of the resulting reference is
           the same as the originating variable of <var>r</var>.<br> (OpAccessChain)</p>
   </table>
   <h4 class="heading settled" data-level="6.7.2" id="matrix-access-expr"><span class="secno">6.7.2. </span><span class="content">Matrix Access Expression</span><a class="self-link" href="#matrix-access-expr"></a></h4>
   <table class="data">
    <caption>Column vector extraction</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="matrix indexed column vector selection">
      <td class="nowrap"> <var>e</var>: mat<var>N</var>x<var>M</var>&lt;<var>T</var>><br> <var>i</var>: i32 or u32<br> <var>i</var> is a <code>const_expression</code> expression 
      <td class="nowrap"> <var>e</var>[<var>i</var>]: vec<var>M</var>&lt;<var>T</var>> 
      <td>The result is the <var>i</var>’<sup>th</sup> column vector of <var>e</var>.<br> If <var>i</var> is outside the range [0,<var>N</var>-1], then any valid value for
           vec<var>M</var>&lt;<var>T</var>> may be returned.
           (OpCompositeExtract) 
   </table>
   <table class="data">
    <caption>Getting a reference to a column vector from a reference to a matrix</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="matrix indexed column vector reference selection">
      <td class="nowrap"> <var>r</var>: ref&lt;<var>SC</var>,mat<var>N</var>x<var>M</var>&lt;<var>T</var>>><br> <var>i</var>: i32 or u32 
      <td class="nowrap"> <var>r</var>[<var>i</var>] : ref&lt;vec<var>M</var>&lt;<var>SC</var>,<var>T</var>>> 
      <td>
       Compute a reference to the <var>i</var>’<sup>th</sup> column vector of the
           matrix referenced by the reference <var>r</var>. 
       <p>If <var>i</var> is outside the range [0,<var>N</var>-1], then the expression evaluates to <a data-link-type="dfn" href="#invalid-memory-reference" id="ref-for-invalid-memory-reference①">invalid memory reference</a>.</p>
       <p>The <a data-link-type="dfn" href="#originating-variable" id="ref-for-originating-variable⑧">originating variable</a> of the resulting reference is
           the same as the originating variable of <var>r</var>.<br> (OpAccessChain)</p>
   </table>
   <p class="note" role="note"><span>Note:</span> Reflecting the limitations of the languages WGSL is meant to be translated
into, it is only possible to use dynamically computed indices to subscript
references to matrices. A matrix not behind a reference may only be indexed by a <code>const_expression</code>. To work around this restriction, consider storing the matrix in a
temporary variable, and then subscripting the variable: a <a href="#var-identifier-expr">variable identifier expression</a> produces a reference to
the variable’s value, as required.</p>
   <h4 class="heading settled" data-level="6.7.3" id="array-access-expr"><span class="secno">6.7.3. </span><span class="content">Array Access Expression</span><a class="self-link" href="#array-access-expr"></a></h4>
   <table class="data">
    <caption>Array element extraction</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="fixed-size array indexed element selection">
      <td class="nowrap"> <var>e</var>: array&lt;<var>T</var>,<var>N</var>><br> <var>i</var>: i32 or u32<br> <var>i</var> is a <code>const_expression</code> expression 
      <td class="nowrap"> <var>e</var>[<var>i</var>] : <var>T</var> 
      <td>
       The result is the value of the <var>i</var>’<sup>th</sup> element of the array value <var>e</var>. 
       <p>If <var>i</var> is outside the range [0,<var>N</var>-1], then any valid value for <var>T</var> may be returned.
           (OpCompositeExtract)</p>
   </table>
   <table class="data">
    <caption>Getting a reference to an array element from a reference to an array</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="fixed-size array indexed reference selection">
      <td class="nowrap"> <var>r</var>: ref&lt;<var>SC</var>,array&lt;<var>T</var>,<var>N</var>>><br> <var>i</var>: i32 or u32 
      <td class="nowrap"> <var>r</var>[<var>i</var>] : ref&lt;<var>SC</var>,<var>T</var>> 
      <td>
       Compute a reference to the <var>i</var>’<sup>th</sup> element of the array
           referenced by the reference <var>r</var>. 
       <p>If <var>i</var> is outside the range [0,<var>N</var>-1], then the expression evaluates
           to an <a data-link-type="dfn" href="#invalid-memory-reference" id="ref-for-invalid-memory-reference②">invalid memory reference</a>.</p>
       <p>The <a data-link-type="dfn" href="#originating-variable" id="ref-for-originating-variable⑨">originating variable</a> of the resulting reference is
           the same as the originating variable of <var>r</var>.<br> (OpAccessChain)</p>
     <tr class="algorithm" data-algorithm="array indexed reference selection">
      <td><var>r</var>: ref&lt;<var>SC</var>,array&lt;<var>T</var>>><br> <var>i</var>: i32 or u32 
      <td class="nowrap"> <var>r</var>[<var>i</var>] : ref&lt;<var>SC</var>,<var>T</var>> 
      <td>
       Compute a reference to the <var>i</var>’<sup>th</sup> element of the
           runtime-sized array referenced by the reference <var>r</var>. 
       <p>If at runtime the array has <var>N</var> elements, and <var>i</var> is outside the range
           [0,<var>N</var>-1], then the expression evaluates to an <a data-link-type="dfn" href="#invalid-memory-reference" id="ref-for-invalid-memory-reference③">invalid memory
           reference</a>.</p>
       <p>The <a data-link-type="dfn" href="#originating-variable" id="ref-for-originating-variable①⓪">originating variable</a> of the resulting reference is
           the same as the originating variable of <var>r</var>.<br> (OpAccessChain)</p>
   </table>
   <p class="note" role="note"><span>Note:</span> Reflecting the limitations of the languages WGSL is meant to be translated
into, it is only possible to use dynamically computed indices to subscript
references to arrays. An array not behind a reference may only be indexed by a <code>const_expression</code>.</p>
   <h4 class="heading settled" data-level="6.7.4" id="struct-access-expr"><span class="secno">6.7.4. </span><span class="content">Structure Access Expression</span><a class="self-link" href="#struct-access-expr"></a></h4>
   <table class="data">
    <caption>Structure member extraction</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="structure member extraction">
      <td class="nowrap"> <var>S</var> is a structure type<br> <var>M</var> is the identifier name of a member of <var>S</var>, having type <var>T</var><br> <var>e</var>: <var>S</var><br> 
      <td class="nowrap"> <var>e</var>.<var>M</var>: <var>T</var> 
      <td>The result is the value of the member with name <var>M</var> from the structure value <var>e</var>.<br> (OpCompositeExtract, using the member index) 
   </table>
   <table class="data">
    <caption>Getting a reference to a structure member from a reference to a structure</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="structure member reference selection">
      <td class="nowrap"> <var>S</var> is a structure type<br> <var>M</var> is the name of a member of <var>S</var>, having type <var>T</var><br> <var>r</var>: ref&lt;<var>SC</var>,<var>S</var>><br> 
      <td class="nowrap"> <var>r</var>.<var>M</var>: ref&lt;<var>SC</var>,<var>T</var>> 
      <td>Given a reference to a structure, the result is a reference to the structure member with identifier name <var>M</var>.<br> The <a data-link-type="dfn" href="#originating-variable" id="ref-for-originating-variable①①">originating variable</a> of the resulting reference is
           the same as the originating variable of <var>r</var>.<br> (OpAccessChain, using the index of the structure member) 
   </table>
   <h3 class="heading settled" data-level="6.8" id="logical-expr"><span class="secno">6.8. </span><span class="content">Logical Expressions</span><a class="self-link" href="#logical-expr"></a></h3>
   <table class="data">
    <caption>Unary logical operations</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="boolean negation">
      <td><var>e</var>: bool<br><var>T</var> is bool or vec<var>N</var>&lt;bool> 
      <td><code>!</code><var>e</var>: <var>T</var> 
      <td>Logical negation.
  The result is <code>true</code> when <var>e</var> is <code>false</code> and <code>false</code> when <var>e</var> is <code>true</code>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise①④">Component-wise</a> when <var>T</var> is a vector.
  (OpLogicalNot) 
   </table>
   <table class="data">
    <caption>Binary logical expressions</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="short-circuiting or">
      <td><var>e1</var>: bool<br><var>e2</var>: bool
      <td><var>e1</var> <code>||</code> <var>e2</var><code>: bool</code> 
      <td>Short-circuiting "or". Yields <code>true</code> if either <var>e1</var> or <var>e2</var> are true;
  evaluates <var>e2</var> only if <var>e1</var> is false. 
     <tr class="algorithm" data-algorithm="short-circuiting and">
      <td><var>e1</var>: bool<br><var>e2</var>: bool 
      <td><var>e1</var> <code>&amp;&amp;</code> <var>e2</var><code>: bool</code> 
      <td>Short-circuiting "and". Yields <code>true</code> if both <var>e1</var> and <var>e2</var> are true;
  evaluates <var>e2</var> only if <var>e1</var> is true. 
     <tr class="algorithm" data-algorithm="logical or">
      <td><var>e1</var>: <var>T</var><br><var>e2</var>: <var>T</var><br><var>T</var> is bool or vec<var>N</var>&lt;bool> 
      <td><var>e1</var> <code>|</code> <var>e2</var><code>:</code> <var>T</var> 
      <td>Logical "or". <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise①⑤">Component-wise</a> when <var>T</var> is a vector. Evaluates both <var>e1</var> and <var>e2</var>. 
     <tr class="algorithm" data-algorithm="logical and">
      <td><var>e1</var>: <var>T</var><br><var>e2</var>: <var>T</var><br><var>T</var> is bool or vec<var>N</var>&lt;bool> 
      <td><var>e1</var> <code>&amp;</code> <var>e2</var><code>:</code> <var>T</var> 
      <td>Logical "and". <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise①⑥">Component-wise</a> when <var>T</var> is a vector. Evaluates both <var>e1</var> and <var>e2</var>. 
   </table>
   <h3 class="heading settled" data-level="6.9" id="arithmetic-expr"><span class="secno">6.9. </span><span class="content">Arithmetic Expressions</span><a class="self-link" href="#arithmetic-expr"></a></h3>
   <table class="data">
    <caption>Unary arithmetic expressions</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="integer negation">
      <td><var>e</var>: <var>T</var><br> <var>T</var> is i32 or vec<var>N</var>&lt;i32> 
      <td><code>-</code><var>e</var><code>:</code> <var>T</var> 
      <td>Signed integer negation. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise①⑦">Component-wise</a> when <var>T</var> is a vector.
  If <var>e</var> evaluates to the largest negative value, then the result is <var>e</var>.
  (OpSNegate) 
     <tr class="algorithm" data-algorithm="floating point negation">
      <td><var>e</var>: <var>T</var><br><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td><code>-</code><var>e</var><code>:</code> <var>T</var> 
      <td>Floating point negation. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise①⑧">Component-wise</a> when <var>T</var> is a vector. (OpFNegate) 
   </table>
   <table class="data">
    <caption>Binary arithmetic expressions</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="integer addition">
      <td><var>e1</var> : <var>T</var><br><var>e2</var> : <var>T</var><br><var>T</var> is i32, u32, vec<var>N</var>&lt;i32>, or vec<var>N</var>&lt;u32> 
      <td><var>e1</var> <code>+</code> <var>e2</var> : <var>T</var> 
      <td>Integer addition, modulo 2<sup>32</sup>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise①⑨">Component-wise</a> when <var>T</var> is a vector. (OpIAdd) 
     <tr class="algorithm" data-algorithm="floating point addition">
      <td><var>e1</var> : <var>T</var><br><var>e2</var> : <var>T</var><br><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td><var>e1</var> <code>+</code> <var>e2</var> : <var>T</var> 
      <td>Floating point addition. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise②⓪">Component-wise</a> when <var>T</var> is a vector. (OpFAdd) 
     <tr class="algorithm" data-algorithm="integer subtraction">
      <td><var>e1</var> : <var>T</var><br><var>e2</var> : <var>T</var><br><var>T</var> is i32, u32, vec<var>N</var>&lt;i32>, or vec<var>N</var>&lt;u32> 
      <td><var>e1</var> <code>-</code> <var>e2</var> : <var>T</var> 
      <td>Integer subtraction, modulo 2<sup>32</sup>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise②①">Component-wise</a> when <var>T</var> is a vector. (OpISub) 
     <tr class="algorithm" data-algorithm="floating point subtraction">
      <td><var>e1</var> : <var>T</var><br><var>e2</var> : <var>T</var><br><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td><var>e1</var> <code>-</code> <var>e2</var> : <var>T</var> 
      <td>Floating point subtraction. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise②②">Component-wise</a> when <var>T</var> is a vector. (OpFSub) 
     <tr class="algorithm" data-algorithm="integer multiplication">
      <td><var>e1</var> : <var>T</var><br><var>e2</var> : <var>T</var><br><var>T</var> is i32, u32, vec<var>N</var>&lt;i32>, or vec<var>N</var>&lt;u32> 
      <td><var>e1</var> <code>*</code> <var>e2</var> : <var>T</var> 
      <td>Integer multiplication, modulo 2<sup>32</sup>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise②③">Component-wise</a> when <var>T</var> is a vector. (OpIMul) 
     <tr class="algorithm" data-algorithm="floating point multiplication">
      <td><var>e1</var> : <var>T</var><br><var>e2</var> : <var>T</var><br><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td><var>e1</var> <code>*</code> <var>e2</var> : <var>T</var> 
      <td>Floating point multiplication. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise②④">Component-wise</a> when <var>T</var> is a vector. (OpFMul) 
     <tr class="algorithm" data-algorithm="signed integer division">
      <td><var>e1</var> : <var>T</var><br><var>e2</var> : <var>T</var><br><var>T</var> is i32 or vec<var>N</var>&lt;i32> 
      <td><var>e1</var> <code>/</code> <var>e2</var> : <var>T</var> 
      <td>Signed integer division. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise②⑤">Component-wise</a> when <var>T</var> is a vector. (OpSDiv) 
     <tr class="algorithm" data-algorithm="unsigned integer division">
      <td><var>e1</var> : <var>T</var><br><var>e2</var> : <var>T</var><br><var>T</var> is u32 or vec<var>N</var>&lt;u32> 
      <td><var>e1</var> <code>/</code> <var>e2</var> : <var>T</var> 
      <td>Unsigned integer division. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise②⑥">Component-wise</a> when <var>T</var> is a vector. (OpUDiv) 
     <tr class="algorithm" data-algorithm="floating point division">
      <td><var>e1</var> : <var>T</var><br><var>e2</var> : <var>T</var><br><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td><var>e1</var> <code>/</code> <var>e2</var> : <var>T</var> 
      <td>Floating point division. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise②⑦">Component-wise</a> when <var>T</var> is a vector. (OpFDiv) 
     <tr class="algorithm" data-algorithm="signed integer remainder">
      <td><var>e1</var> : <var>T</var><br><var>e2</var> : <var>T</var><br><var>T</var> is i32 or vec<var>N</var>&lt;i32> 
      <td><var>e1</var> <code>%</code> <var>e2</var> : <var>T</var> 
      <td>Signed integer remainder. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise②⑧">Component-wise</a> when <var>T</var> is a vector. (OpSMod) 
     <tr class="algorithm" data-algorithm="unsigned integer modulus">
      <td><var>e1</var> : <var>T</var><br><var>e2</var> : <var>T</var><br><var>T</var> is u32 or vec<var>N</var>&lt;u32> 
      <td><var>e1</var> <code>%</code> <var>e2</var> : <var>T</var> 
      <td>Unsigned integer remainder. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise②⑨">Component-wise</a> when <var>T</var> is a vector. (OpUMod) 
     <tr class="algorithm" data-algorithm="floating point remainder">
      <td><var>e1</var> : <var>T</var><br><var>e2</var> : <var>T</var><br><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td><var>e1</var> <code>%</code> <var>e2</var> : <var>T</var> 
      <td>Floating point remainder, where sign of non-zero result matches sign of <var>e1</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise③⓪">Component-wise</a> when <var>T</var> is a vector.<br> Result equal to: <var>e1</var> - <var>e2</var> * trunc(<var>e1</var> / <var>e2</var>)<br> (OpFRem) 
   </table>
   <table class="data">
    <caption>Binary arithmetic expressions with mixed scalar and vector operands</caption>
    <thead>
     <tr>
      <th>Preconditions
      <th>Conclusions
      <th>Semantics 
    <tbody>
     <tr class="algorithm" data-algorithm="vector-scalar arithmetic, any scalar type">
      <td rowspan="8"><var>S</var> is one of f32, i32, u32<br> <var>V</var> is vec<var>N</var>&lt;<var>S</var>><br> <var>es</var>: <var>S</var><br> <var>ev</var>: <var>V</var> 
      <td><var>ev</var> <code>+</code> <var>es</var>: <var>V</var> 
      <td><var>ev</var> <code>+</code> <var>V</var>(<var>es</var>) 
     <tr>
      <td><var>es</var> <code>+</code> <var>ev</var>: <var>V</var> 
      <td><var>V</var>(<var>es</var>) <code>+</code> <var>ev</var> 
     <tr>
      <td><var>ev</var> <code>-</code> <var>es</var>: <var>V</var> 
      <td><var>ev</var> <code>-</code> <var>V</var>(<var>es</var>) 
     <tr>
      <td><var>es</var> <code>-</code> <var>ev</var>: <var>V</var> 
      <td><var>V</var>(<var>es</var>) <code>-</code> <var>ev</var> 
     <tr>
      <td><var>ev</var> <code>*</code> <var>es</var>: <var>V</var> 
      <td><var>ev</var> <code>*</code> <var>V</var>(<var>es</var>) 
     <tr>
      <td><var>es</var> <code>*</code> <var>ev</var>: <var>V</var> 
      <td><var>V</var>(<var>es</var>) <code>*</code> <var>ev</var> 
     <tr>
      <td><var>ev</var> <code>/</code> <var>es</var>: <var>V</var> 
      <td><var>ev</var> <code>/</code> <var>V</var>(<var>es</var>) 
     <tr>
      <td><var>es</var> <code>/</code> <var>ev</var>: <var>V</var> 
      <td><var>V</var>(<var>es</var>) <code>/</code> <var>ev</var> 
     <tr class="algorithm" data-algorithm="vector-scalar integer arithmetic">
      <td rowspan="2"><var>S</var> is one of i32, u32<br> <var>V</var> is vec<var>N</var>&lt;<var>S</var>><br> <var>es</var>: <var>S</var><br> <var>ev</var>: <var>V</var> 
      <td><var>ev</var> <code>%</code> <var>es</var>: <var>V</var> 
      <td><var>ev</var> <code>%</code> <var>V</var>(<var>es</var>) 
     <tr>
      <td><var>es</var> <code>%</code> <var>ev</var>: <var>V</var> 
      <td><var>V</var>(<var>es</var>) <code>%</code> <var>ev</var> 
   </table>
   <table class="data">
    <caption>Matrix arithmetic</caption>
    <thead>
     <tr>
      <th>Preconditions
      <th>Conclusions
      <th>Semantics 
    <tbody>
     <tr class="algorithm" data-algorithm="matrix addition">
      <td rowspan="2"><var>e1</var>, <var>e2</var>: mat<var>M</var>x<var>N</var>&lt;f32> 
      <td><var>e1</var> <code>+</code> <var>e2</var>: mat<var>M</var>x<var>N</var>&lt;f32><br> 
      <td>Matrix addition: column <var>i</var> of the result is <var>e1</var>[i] + <var>e2</var>[i] 
     <tr class="algorithm" data-algorithm="matrix subtraction">
      <td><var>e1</var> <code>-</code> <var>e2</var>: mat<var>M</var>x<var>N</var>&lt;f32> 
      <td>Matrix subtraction: column <var>i</var> of the result is <var>e1</var>[<var>i</var>] - <var>e2</var>[<var>i</var>] 
     <tr class="algorithm" data-algorithm="matrix-scalar multiply">
      <td rowspan="2"><var>m</var>: mat<var>M</var>x<var>N</var>&lt;f32><br> <var>s</var>: f32 
      <td><var>m</var> <code>*</code> <var>s</var>:  mat<var>M</var>x<var>N</var>&lt;f32><br> 
      <td>Component-wise scaling: (<var>m</var> <code>*</code> <var>s</var>)[i][j] is <var>m</var>[i][j] <code>*</code> <var>s</var> 
     <tr class="algorithm" data-algorithm="scalar-matrix multiply">
      <td><var>s</var> <code>*</code> <var>m</var>:  mat<var>M</var>x<var>N</var>&lt;f32><br> 
      <td>Component-wise scaling: (<var>s</var> <code>*</code> <var>m</var>)[i][j] is <var>m</var>[i][j] <code>*</code> <var>s</var> 
     <tr class="algorithm" data-algorithm="matrix-column-vector multiply">
      <td><var>m</var>: mat<var>M</var>x<var>N</var>&lt;f32><br> <var>v</var>: vec<var>M</var>&lt;f32> 
      <td><var>m</var> <code>*</code> <var>v</var>:  vec<var>N</var>&lt;f32><br> 
      <td>Linear algebra matrix-column-vector product:
        Component <var>i</var> of the result is <code>dot</code>(<var>m</var>[<var>i</var>],<var>v</var>) <br>OpMatrixTimesVector 
     <tr class="algorithm" data-algorithm="matrix-row-vector multiply">
      <td> <var>m</var>: mat<var>M</var>x<var>N</var>&lt;f32><br> <var>v</var>: vec<var>N</var>&lt;f32> 
      <td><var>v</var> <code>*</code> <var>m</var>:  vec<var>M</var>&lt;f32><br> 
      <td>Linear algebra row-vector-matrix product:<br> <a data-link-type="dfn" href="#transpose" id="ref-for-transpose">transpose</a>(transpose(<var>m</var>) <code>*</code> transpose(<var>v</var>)) <br>OpVectorTimesMatrix 
     <tr class="algorithm" data-algorithm="matrix-matrix multiply">
      <td><var>e1</var>: mat<var>K</var>x<var>N</var>&lt;f32><br> <var>e2</var>: mat<var>M</var>x<var>K</var>&lt;f32> 
      <td><var>e1</var> <code>*</code> <var>e2</var>:  mat<var>M</var>x<var>N</var>&lt;f32><br> 
      <td>Linear algebra matrix product.<br>OpMatrixTimesMatrix 
   </table>
   <h3 class="heading settled" data-level="6.10" id="comparison-expr"><span class="secno">6.10. </span><span class="content">Comparison Expressions TODO</span><a class="self-link" href="#comparison-expr"></a></h3>
   <table class="data">
    <caption>Comparisons</caption>
    <thead>
     <tr>
      <th>Precondtion
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="bool equality">
      <td><var>e1</var>: <var>T</var><br><var>e2</var>: <var>T</var><br><var>T</var> is bool or vec<var>N</var>&lt;bool> 
      <td class="nowrap"><var>e1</var> <code>==</code> <var>e2</var><code>:</code> <var>T</var> 
      <td>Equality. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise③①">Component-wise</a> when <var>T</var> is a vector. (OpLogicalEqual) 
     <tr class="algorithm" data-algorithm="bool inequality">
      <td><var>e1</var>: <var>T</var><br><var>e2</var>: <var>T</var><br><var>T</var> is bool or vec<var>N</var>&lt;bool> 
      <td class="nowrap"><var>e1</var> <code>!=</code> <var>e2</var><code>:</code> <var>T</var> 
      <td>Inequality. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise③②">Component-wise</a> when <var>T</var> is a vector. (OpLogicalNotEqual) 
     <tr class="algorithm" data-algorithm="integer equality">
      <td><var>e1</var>: <var>TI</var><br><var>e2</var>: <var>TI</var><br> <var>TI</var> is i32, u32, vec<var>N</var>&lt;i32>, or vec<var>N</var>&lt;u32><br> <var>TB</var> is bool if <var>TI</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TI</var> is a vector 
      <td class="nowrap"><var>e1</var> <code>==</code> <var>e2</var><code>:</code> <var>TB</var> 
      <td>Equality. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise③③">Component-wise</a> when <var>TI</var> is a vector. (OpIEqual) 
     <tr class="algorithm" data-algorithm="integer inequality">
      <td><var>e1</var>: <var>TI</var><br><var>e2</var>: <var>TI</var><br> <var>TI</var> is i32, u32, vec<var>N</var>&lt;i32>, or vec<var>N</var>&lt;u32><br> <var>TB</var> is bool if <var>TI</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TI</var> is a vector 
      <td class="nowrap"><var>e1</var> <code>!=</code> <var>e2</var><code>:</code> <var>TB</var> 
      <td>Inequality. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise③④">Component-wise</a> when <var>TI</var> is a vector. (OpINotEqual) 
     <tr class="algorithm" data-algorithm="signed integer less than">
      <td><var>e1</var>: <var>TI</var><br><var>e2</var>: <var>TI</var><br><var>TI</var> is i32 or vec<var>N</var>&lt;i32><br> <var>TB</var> is bool if <var>TI</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TI</var> is a vector 
      <td class="nowrap"><var>e1</var> <code>&lt;</code> <var>e2</var><code>:</code> <var>TB</var> 
      <td>Less than. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise③⑤">Component-wise</a> when <var>TI</var> is a vector. (OpSLessThan) 
     <tr class="algorithm" data-algorithm="signed integer less than equal">
      <td><var>e1</var>: <var>TI</var><br><var>e2</var>: <var>TI</var><br><var>TI</var> is i32 or vec<var>N</var>&lt;i32><br> <var>TB</var> is bool if <var>TI</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TI</var> is a vector 
      <td class="nowrap"><var>e1</var> <code>&lt;=</code> <var>e2</var><code>:</code> <var>TB</var> 
      <td>Less than or equal. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise③⑥">Component-wise</a> when <var>TI</var> is a vector. (OpSLessThanEqual) 
     <tr class="algorithm" data-algorithm="signed integer greater than">
      <td><var>e1</var>: <var>TI</var><br><var>e2</var>: <var>TI</var><br><var>TI</var> is i32 or vec<var>N</var>&lt;i32><br> <var>TB</var> is bool if <var>TI</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TI</var> is a vector 
      <td class="nowrap"><var>e1</var> <code>></code> <var>e2</var><code>:</code> <var>TB</var> 
      <td>Greater than. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise③⑦">Component-wise</a> when <var>TI</var> is a vector. (OpSGreaterThan) 
     <tr class="algorithm" data-algorithm="signed integer greater than equal">
      <td><var>e1</var>: <var>TI</var><br><var>e2</var>: <var>TI</var><br><var>TI</var> is i32 or vec<var>N</var>&lt;i32><br> <var>TB</var> is bool if <var>TI</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TI</var> is a vector 
      <td class="nowrap"><var>e1</var> <code>>=</code> <var>e2</var><code>:</code> <var>TB</var> 
      <td>Greater than or equal. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise③⑧">Component-wise</a> when <var>TI</var> is a vector. (OpSGreaterThanEqual) 
     <tr class="algorithm" data-algorithm="unsigned integer less than">
      <td><var>e1</var>: <var>TI</var><br><var>e2</var>: <var>TI</var><br><var>TI</var> is u32 or vec<var>N</var>&lt;u32><br> <var>TB</var> is bool if <var>TI</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TI</var> is a vector 
      <td class="nowrap"><var>e1</var> <code>&lt;</code> <var>e2</var><code>:</code> <var>TB</var> 
      <td>Less than. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise③⑨">Component-wise</a> when <var>TI</var> is a vector. (OpULessThan) 
     <tr class="algorithm" data-algorithm="unsigned integer less than equal">
      <td><var>e1</var>: <var>TI</var><br><var>e2</var>: <var>TI</var><br><var>TI</var> is u32 or vec<var>N</var>&lt;u32><br> <var>TB</var> is bool if <var>TI</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TI</var> is a vector 
      <td class="nowrap"><var>e1</var> <code>&lt;=</code> <var>e2</var><code>:</code> <var>TB</var> 
      <td>Less than or equal. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise④⓪">Component-wise</a> when <var>TI</var> is a vector. (OpULessThanEqual) 
     <tr class="algorithm" data-algorithm="unsigned integer greater than">
      <td><var>e1</var>: <var>TI</var><br><var>e2</var>: <var>TI</var><br><var>TI</var> is u32 or vec<var>N</var>&lt;u32><br> <var>TB</var> is bool if <var>TI</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TI</var> is a vector 
      <td class="nowrap"><var>e1</var> <code>></code> <var>e2</var><code>:</code> <var>TB</var> 
      <td>Greater than. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise④①">Component-wise</a> when <var>TI</var> is a vector. (OpUGreaterThan) 
     <tr class="algorithm" data-algorithm="unsigned integer greater than equal">
      <td><var>e1</var>: <var>TI</var><br><var>e2</var>: <var>TI</var><br><var>TI</var> is u32 or vec<var>N</var>&lt;u32><br> <var>TB</var> is bool if <var>TI</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TI</var> is a vector 
      <td class="nowrap"><var>e1</var> <code>>=</code> <var>e2</var><code>:</code> <var>TB</var> 
      <td>Greater than or equal. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise④②">Component-wise</a> when <var>TI</var> is vector. (OpUGreaterThanEqual) 
     <tr class="algorithm" data-algorithm="floating point equality">
      <td><var>e1</var>: <var>TF</var><br><var>e2</var>: <var>TF</var><br><var>TF</var> is f32 or vec<var>N</var>&lt;f32><br> <var>TB</var> is bool if <var>TF</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TF</var> is a vector. 
      <td class="nowrap"><var>e1</var> == <var>e2</var>: <var>TB</var> 
      <td>Equality. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise④③">Component-wise</a> when <var>TF</var> is a vector. (OpFOrdEqual) 
     <tr class="algorithm" data-algorithm="floating point inequality">
      <td><var>e1</var>: <var>TF</var><br><var>e2</var>: <var>TF</var><br><var>TF</var> is f32 or vec<var>N</var>&lt;f32><br> <var>TB</var> is bool if <var>TF</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TF</var> is a vector. 
      <td class="nowrap"><var>e1</var> != <var>e2</var>: <var>TB</var> 
      <td>Inequality. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise④④">Component-wise</a> when <var>TF</var> is a vector. (OpFOrdEqual) 
     <tr class="algorithm" data-algorithm="floating point less than">
      <td><var>e1</var>: <var>TF</var><br><var>e2</var>: <var>TF</var><br><var>TF</var> is f32 or vec<var>N</var>&lt;f32><br> <var>TB</var> is bool if <var>TF</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TF</var> is a vector. 
      <td class="nowrap"><var>e1</var> &lt; <var>e2</var>: <var>TB</var> 
      <td>Less than. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise④⑤">Component-wise</a> when <var>TF</var> is a vector. (OpFOrdLessThan) 
     <tr class="algorithm" data-algorithm="floating point less than equal">
      <td><var>e1</var>: <var>TF</var><br><var>e2</var>: <var>TF</var><br><var>TF</var> is f32 or vec<var>N</var>&lt;f32><br> <var>TB</var> is bool if <var>TF</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TF</var> is a vector. 
      <td class="nowrap"><var>e1</var> &lt;= <var>e2</var>: <var>TB</var> 
      <td>Less than or equal. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise④⑥">Component-wise</a> when <var>TF</var> is a vector. (OpFOrdLessThanEqual) 
     <tr class="algorithm" data-algorithm="floating point greater than">
      <td><var>e1</var>: <var>TF</var><br><var>e2</var>: <var>TF</var><br><var>TF</var> is f32 or vec<var>N</var>&lt;f32><br> <var>TB</var> is bool if <var>TF</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TF</var> is a vector. 
      <td class="nowrap"><var>e1</var> > <var>e2</var>: <var>TB</var> 
      <td>Greater than. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise④⑦">Component-wise</a> when <var>TF</var> is a vector. (OpFOrdGreaterThan) 
     <tr class="algorithm" data-algorithm="floating point greater than equal">
      <td><var>e1</var>: <var>TF</var><br><var>e2</var>: <var>TF</var><br><var>TF</var> is f32 or vec<var>N</var>&lt;f32><br> <var>TB</var> is bool if <var>TF</var> is scalar, or<br> vec<var>N</var>&lt;bool> if <var>TF</var> is a vector. 
      <td class="nowrap"><var>e1</var> >= <var>e2</var>: <var>TB</var> 
      <td>Greater than or equal. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise④⑧">Component-wise</a> when <var>TF</var> is a vector. (OpFOrdGreaterThanEqual) 
   </table>
   <h3 class="heading settled" data-level="6.11" id="bit-expr"><span class="secno">6.11. </span><span class="content">Bit Expressions TODO</span><a class="self-link" href="#bit-expr"></a></h3>
   <table class="data">
    <caption>Unary bitwise operations</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="complement">
      <td><var>e</var>: <var>T</var><br> <var>T</var> is i32, u32, vec<var>N</var>&lt;i32>, or vec<var>N</var>&lt;u32> 
      <td class="nowrap"><code>~</code><var>e</var> : <var>T</var> 
      <td>Bitwise complement on <var>e</var>.
    Each bit in the result is the opposite of the corresponding bit in <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise④⑨">Component-wise</a> when <var>T</var> is a vector. (OpNot) 
   </table>
   <table class="data">
    <caption>Binary bitwise operations</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="bitwise or">
      <td><em>e1</em>: <em>T</em><br> <em>e2</em>: <em>T</em><br> <em>T</em> is i32, u32, vec<var>N</var>&lt;i32>, or vec<var>N</var>&lt;u32> 
      <td class="nowrap"><code>e1 | e2</code>: <em>T</em> 
      <td>Bitwise-or. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑤⓪">Component-wise</a> when <var>T</var> is a vector. 
     <tr class="algorithm" data-algorithm="bitwise and">
      <td><em>e1</em>: <em>T</em><br> <em>e2</em>: <em>T</em><br> <em>T</em> is i32, u32, vec<var>N</var>&lt;i32>, or vec<var>N</var>&lt;u32> 
      <td class="nowrap"><code>e1 &amp; e2</code>: <em>T</em> 
      <td>Bitwise-and. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑤①">Component-wise</a> when <var>T</var> is a vector. 
     <tr class="algorithm" data-algorithm="bitwise exclusive or">
      <td><em>e1</em>: <em>T</em><br> <em>e2</em>: <em>T</em><br> <em>T</em> is i32, u32, vec<var>N</var>&lt;i32>, or vec<var>N</var>&lt;u32> 
      <td class="nowrap"><code>e1 ^ e2</code>: <em>T</em> 
      <td>Bitwise-exclusive-or. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑤②">Component-wise</a> when <var>T</var> is a vector. 
   </table>
   <table class="data">
    <caption>Bit shift expressions</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="shift left">
      <td><var>e1</var>: <var>T</var><br> <var>e2</var>: <var>TS</var><br> <var>T</var> is i32, u32, vec<var>N</var>&lt;i32>, or vec<var>N</var>&lt;u32><br> <var>TS</var> is u32 if <var>e1</var> is a scalar, or<br> vec<var>N</var>&lt;u32>. 
      <td class="nowrap"><var>e1</var> <code>&lt;&lt;</code> <var>e2</var>: <var>T</var> 
      <td>Shift left:<br> Shift <var>e1</var> left, inserting zero bits at the least significant positions,
        and discarding the most significant bits.
        The number of bits to shift is the value of <var>e2</var> modulo the bit width of <var>e1</var>.<br> <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑤③">Component-wise</a> when <var>T</var> is a vector.
        (OpShiftLeftLogical) 
     <tr class="algorithm" data-algorithm="logical shift right">
      <td><var>e1</var>: <var>T</var><br> <var>e2</var>: <var>T</var><br> <var>T</var> is u32 or vec<var>N</var>&lt;u32> 
      <td class="nowrap"><var>e1</var> >> <var>e2</var>: <var>T</var> 
      <td>Logical shift right:<br> Shift <var>e1</var> right, inserting zero bits at the most significant positions,
        and discarding the least significant bits.
        The number of bits to shift is the value of <var>e2</var> modulo the bit width of <var>e1</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑤④">Component-wise</a> when <var>T</var> is a vector.
        (OpShiftRightLogical) 
     <tr class="algorithm" data-algorithm="arithmetic shift right">
      <td><var>e1</var>: <var>T</var><br> <var>e2</var>: <var>TS</var><br> <var>T</var> is i32 or vec<var>N</var>&lt;i32><br> <var>TS</var> is u32 if <var>e1</var> is a scalar, or<br> vec<var>N</var>&lt;u32>. 
      <td class="nowrap"><var>e1</var> >> <var>e2</var>: <var>T</var> 
      <td>Arithmetic shift right:<br> Shift <var>e1</var> right, copying the sign bit of <var>e1</var> into the most significant positions,
        and discarding the least significant bits.
        The number of bits to shift is the value of <var>e2</var> modulo the bit width of <var>e1</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑤⑤">Component-wise</a> when <var>T</var> is a vector.
        (OpShiftRightArithmetic) 
   </table>
   <h3 class="heading settled" data-level="6.12" id="function-call-expr"><span class="secno">6.12. </span><span class="content">Function Call Expression</span><a class="self-link" href="#function-call-expr"></a></h3>
   <p>A function call expression executes a <a data-link-type="dfn" href="#function-call" id="ref-for-function-call">function call</a> where the called
function has a <a data-link-type="dfn" href="#return-type" id="ref-for-return-type">return type</a>.
If the called function does not return a value, a function call statement
should be used instead.
See <a href="#function-call-statement">§ 7.4 Function Call Statement</a>.</p>
   <h3 class="heading settled" data-level="6.13" id="var-identifier-expr"><span class="secno">6.13. </span><span class="content">Variable Identifier Expression</span><a class="self-link" href="#var-identifier-expr"></a></h3>
   <table class="data">
    <caption>Getting a reference from a variable name</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="variable reference">
      <td> <var>v</var> is an identifier <a data-link-type="dfn" href="#resolves" id="ref-for-resolves③">resolving</a> to
          an <a data-link-type="dfn" href="#in-scope" id="ref-for-in-scope②">in-scope</a> variable declared in <a data-link-type="dfn" href="#storage-classes" id="ref-for-storage-classes⑥">storage class</a> <var>SC</var> with <a data-link-type="dfn" href="#store-type" id="ref-for-store-type①②">store type</a> <var>T</var> 
      <td class="nowrap"> <var>v</var>: ref&lt;<var>SC</var>,<var>T</var>> 
      <td>Result is a reference to the storage for the named variable <var>v</var>. 
   </table>
   <h3 class="heading settled" data-level="6.14" id="formal-parameter-expr"><span class="secno">6.14. </span><span class="content">Formal Parameter Expression</span><a class="self-link" href="#formal-parameter-expr"></a></h3>
   <table class="data">
    <caption>Getting the value of an identifier declared as a formal parameter to a function</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="formal parameter value">
      <td> <var>a</var> is an identifier <a data-link-type="dfn" href="#resolves" id="ref-for-resolves④">resolving</a> to
          an <a data-link-type="dfn" href="#in-scope" id="ref-for-in-scope③">in-scope</a> formal paramter declaration with type <var>T</var> 
      <td class="nowrap"> <var>a</var>: <var>T</var> 
      <td>Result is the value supplied for the corresponding function call operand at the <a data-link-type="dfn" href="#call-site" id="ref-for-call-site②">call site</a> invoking this instance of the function. 
   </table>
   <h3 class="heading settled" data-level="6.15" id="address-of-expr"><span class="secno">6.15. </span><span class="content">Address-Of Expression</span><a class="self-link" href="#address-of-expr"></a></h3>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="address-of">address-of</dfn> operator converts a reference to its corresponding pointer.</p>
   <table class="data">
    <caption>Getting a pointer from a reference</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="address-of expression">
      <td> <var>r</var>: ref&lt;<var>SC</var>,<var>T</var>,<var>A</var>> 
      <td class="nowrap"> <code>&amp;</code><var>r</var>: ptr&lt;<var>SC</var>,<var>T</var>,<var>A</var>> 
      <td>
       Result is the pointer value corresponding to the
           same <a data-link-type="dfn" href="#memory-view" id="ref-for-memory-view④">memory view</a> as the reference value <var>r</var>. 
       <p>If <var>r</var> is an <a data-link-type="dfn" href="#invalid-memory-reference" id="ref-for-invalid-memory-reference④">invalid memory reference</a>, then the resulting
           pointer is also an invalid memory reference.</p>
       <p>It is a <a data-link-type="dfn" href="#shader-creation-error" id="ref-for-shader-creation-error">shader-creation error</a> if <var>SC</var> is  the <a data-link-type="dfn" href="#storage-classes-handle" id="ref-for-storage-classes-handle②">handle</a> storage class.</p>
   </table>
   <h3 class="heading settled" data-level="6.16" id="indirection-expr"><span class="secno">6.16. </span><span class="content">Indirection Expression</span><a class="self-link" href="#indirection-expr"></a></h3>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="indirection">indirection</dfn> operator converts a pointer to its corresponding reference.</p>
   <table class="data">
    <caption>Getting a reference from a pointer</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="indirection expression">
      <td> <var>p</var>: ptr&lt;<var>SC</var>,<var>T</var>,<var>A</var>> 
      <td class="nowrap"> <code>*</code><var>p</var>: ref&lt;<var>SC</var>,<var>T</var>,<var>A</var>> 
      <td>
       Result is the reference value corresponding to the
           same <a data-link-type="dfn" href="#memory-view" id="ref-for-memory-view⑤">memory view</a> as the pointer value <var>p</var>. 
       <p>If <var>p</var> is an <a data-link-type="dfn" href="#invalid-memory-reference" id="ref-for-invalid-memory-reference⑤">invalid memory reference</a>, then the resulting
           reference is also an invalid memory reference.</p>
   </table>
   <h3 class="heading settled" data-level="6.17" id="constant-identifier-expr"><span class="secno">6.17. </span><span class="content">Constant Identifier Expression</span><a class="self-link" href="#constant-identifier-expr"></a></h3>
   <table class="data">
    <caption>Getting the value of a <code>let</code>-declared identifier</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="pipeline-overridable constant value">
      <td> <var>c</var> is an identifier <a data-link-type="dfn" href="#resolves" id="ref-for-resolves⑤">resolving</a> to
          an <a data-link-type="dfn" href="#in-scope" id="ref-for-in-scope④">in-scope</a> <a data-link-type="dfn" href="#pipeline-overridable" id="ref-for-pipeline-overridable②">pipeline-overridable</a> <code>let</code> declaration with type <var>T</var> 
      <td class="nowrap"> <var>c</var>: <var>T</var> 
      <td>If pipeline creation specified a value for the <a data-link-type="dfn" href="#pipeline-constant-id" id="ref-for-pipeline-constant-id①">constant ID</a>,
           then the result is that value.
           This value may be different for different pipeline instances.<br> Otherwise, the result is the value computed for the initializer expression.
           Pipeline-overridable constants appear at module-scope, so evaluation occurs
           before the shader begins execution.<br> Note: Pipeline creation fails if no initial value was specified in the API call
           and the <code>let</code>-declaration has no intializer expression. 
     <tr class="algorithm" data-algorithm="constant value">
      <td> <var>c</var> is an identifier <a data-link-type="dfn" href="#resolves" id="ref-for-resolves⑥">resolving</a> to
          an <a data-link-type="dfn" href="#in-scope" id="ref-for-in-scope⑤">in-scope</a> <code>let</code> declaration with type <var>T</var>,
          and is not pipeline-overridable 
      <td class="nowrap"> <var>c</var>: <var>T</var> 
      <td>Result is the value computed for the initializer expression.<br> For a <code>let</code> declaration at module scope, evaluation occurs before the shader begins execution.<br> For a <code>let</code> declaration inside a function, evaluation occurs each time control reaches
           the declaration.<br> 
   </table>
   <h3 class="heading settled" data-level="6.18" id="expression-grammar"><span class="secno">6.18. </span><span class="content">Expression Grammar Summary</span><a class="self-link" href="#expression-grammar"></a></h3>
<pre class="def">primary_expression
  : IDENT argument_expression_list?
  | type_decl argument_expression_list
  | const_literal
  | paren_expression
  | BITCAST LESS_THAN type_decl GREATER_THAN paren_expression
      OpBitcast

paren_expression
  : PAREN_LEFT short_circuit_or_expression PAREN_RIGHT

argument_expression_list
  : PAREN_LEFT ((short_circuit_or_expression COMMA)* short_circuit_or_expression COMMA?)? PAREN_RIGHT

postfix_expression
  :
  | BRACKET_LEFT short_circuit_or_expression BRACKET_RIGHT postfix_expression
  | PERIOD IDENT postfix_expression

unary_expression
  : singular_expression
  | MINUS unary_expression
      OpSNegate
      OpFNegate
  | BANG unary_expression
      OpLogicalNot
  | TILDE unary_expression
      OpNot
  | STAR unary_expression
  | AND unary_expression

singular_expression
  : primary_expression postfix_expression

multiplicative_expression
  : unary_expression
  | multiplicative_expression STAR unary_expression
      OpVectorTimesScalar
      OpMatrixTimesScalar
      OpVectorTimesMatrix
      OpMatrixTimesVector
      OpMatrixTimesMatrix
      OpIMul
      OpFMul
  | multiplicative_expression FORWARD_SLASH unary_expression
      OpUDiv
      OpSDiv
      OpFDiv
  | multiplicative_expression MODULO unary_expression
      OpUMOd
      OpSMod
      OpFRem

additive_expression
  : multiplicative_expression
  | additive_expression PLUS multiplicative_expression
      OpIAdd
      OpFAdd
  | additive_expression MINUS multiplicative_expression
      OpFSub
      OpISub

shift_expression
  : additive_expression
  | shift_expression SHIFT_LEFT additive_expression
        OpShiftLeftLogical
  | shift_expression SHIFT_RIGHT additive_expression
        OpShiftRightLogical or OpShiftRightArithmetic

relational_expression
  : shift_expression
  | relational_expression LESS_THAN shift_expression
        OpULessThan
        OpFOrdLessThan
  | relational_expression GREATER_THAN shift_expression
        OpUGreaterThan
        OpFOrdGreaterThan
  | relational_expression LESS_THAN_EQUAL shift_expression
        OpULessThanEqual
        OpFOrdLessThanEqual
  | relational_expression GREATER_THAN_EQUAL shift_expression
        OpUGreaterThanEqual
        OpFOrdGreaterThanEqual

equality_expression
  : relational_expression
  | relational_expression EQUAL_EQUAL relational_expression
        OpIEqual
        OpFOrdEqual
  | relational_expression NOT_EQUAL relational_expression
        OpINotEqual
        OpFOrdNotEqual

and_expression
  : equality_expression
  | and_expression AND equality_expression

exclusive_or_expression
  : and_expression
  | exclusive_or_expression XOR and_expression

inclusive_or_expression
  : exclusive_or_expression
  | inclusive_or_expression OR exclusive_or_expression

short_circuit_and_expression
  : inclusive_or_expression
  | short_circuit_and_expression AND_AND inclusive_or_expression

short_circuit_or_expression
  : short_circuit_and_expression
  | short_circuit_or_expression OR_OR short_circuit_and_expression
</pre>
   <h2 class="heading settled" data-level="7" id="statements"><span class="secno">7. </span><span class="content">Statements TODO</span><a class="self-link" href="#statements"></a></h2>
   <h3 class="heading settled" data-level="7.1" id="compound-statement"><span class="secno">7.1. </span><span class="content">Compound Statement</span><a class="self-link" href="#compound-statement"></a></h3>
   <p>A compound statement is a brace-enclosed group of zero or more statements.
When a declaration is one of those statements, its identifier is <a data-link-type="dfn" href="#in-scope" id="ref-for-in-scope⑥">in scope</a> from the start of the next statement until the end of the compound statement.</p>
<pre class="def">compound_statement
  : BRACE_LEFT statements? BRACE_RIGHT
</pre>
   <h3 class="heading settled" data-level="7.2" id="assignment"><span class="secno">7.2. </span><span class="content">Assignment Statement</span><a class="self-link" href="#assignment"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="assignment-statement">assignment statement</dfn> replaces the contents of a variable,
or a portion of a variable, with a new value.</p>
   <p>The
expression to the left of the equals token is the <dfn data-dfn-type="dfn" data-noexport id="left-hand-side">left-hand side<a class="self-link" href="#left-hand-side"></a></dfn>,
and the
expression to the right of the equals token is the <dfn data-dfn-type="dfn" data-noexport id="right-hand-side">right-hand side<a class="self-link" href="#right-hand-side"></a></dfn>.</p>
   <table class="data">
    <thead>
     <tr>
      <th style="width:40%">Precondition
      <th>Statement
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="assignment">
      <td><var>r</var>: ref&lt;<var>SC</var>,<var>T</var>,<var>A</var>>,<br> <var>A</var> is <a data-link-type="dfn" href="#access-write" id="ref-for-access-write②">write</a> or <a data-link-type="dfn" href="#access-read_write" id="ref-for-access-read_write⑨">read_write</a><br> <var>e</var>: <var>T</var>,<br> <var>T</var> is a <a data-link-type="dfn" href="#constructible" id="ref-for-constructible①⑤">constructible</a> type,<br> <var>SC</var> is a writable <a data-link-type="dfn" href="#storage-classes" id="ref-for-storage-classes⑦">storage class</a> 
      <td class="nowrap"><var>r</var> = <var>e</var>; 
      <td>
       Evaluates <var>e</var>, evaluates <var>r</var>, then writes the value computed for <var>e</var> into
        the <a data-link-type="dfn" href="#memory-locations" id="ref-for-memory-locations④">memory locations</a> referenced by <var>r</var>. 
       <p class="note" role="note"><span>Note:</span> if the reference is an <a data-link-type="dfn" href="#invalid-memory-reference" id="ref-for-invalid-memory-reference⑥">invalid memory reference</a>, the write
        may not execute, or may write to a different memory location than
        expected.</p>
       <p>(OpStore)</p>
   </table>
   <p>In the simplest case, the left hand side of the assignment statement is the
name of a variable.  See <a href="#forming-references-and-pointers">§ 4.4.4 Forming reference and pointer values</a> for other cases.</p>
   <div class="example wgsl no-marker" id="example-7c7b373c">
    <a class="self-link" href="#example-7c7b373c"></a>
    <div class="marker">EXAMPLE: Assignments</div>
<pre class="highlight"><c- k>struct</c-> <c- nc>S</c-> <c- p>{</c->
    <c- n>age</c->: <c- b>i32</c-><c- p>;</c->
    <c- n>weight</c->: <c- b>f32</c-><c- p>;</c->
<c- p>};</c->
<c- n>var</c-><c- o>&lt;</c-><c- n>private</c-><c- o>></c-> <c- n>person</c->: <c- nc>S</c-><c- p>;</c->

<c- k>fn</c-> <c- nf>f</c-><c- p>()</c-> <c- p>{</c->
    <c- n>var</c-> <c- n>a</c->: <c- b>i32</c-> <c- o>=</c-> <c- mi>20</c-><c- p>;</c->
    <c- n>a</c-> <c- o>=</c-> <c- mi>30</c-><c- p>;</c->           <c- c1>// Replace the contents of 'a' with 30.</c->

    <c- n>person</c-><c- p>.</c-><c- n>age</c-> <c- o>=</c-> <c- mi>31</c-><c- p>;</c->  <c- c1>// Write 31 into the age field of the person variable.</c->

    <c- n>var</c-> <c- n>uv</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c->
    <c- n>uv</c-><c- p>.</c-><c- n>y</c-> <c- o>=</c-> <c- mf>1.25</c-><c- p>;</c->      <c- c1>// Place 1.25 into the second component of uv.</c->

    <c- a>let</c-> <c- n>uv_x_ptr</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>function</c-><c- p>,</c-><c- b>f32</c-><c- o>></c-> <c- o>=</c-> <c- o>&amp;</c-><c- n>uv</c-><c- p>.</c-><c- n>x</c-><c- p>;</c->
    <c- o>*</c-><c- n>uv_x_ptr</c-> <c- o>=</c-> <c- mf>2.5</c-><c- p>;</c->   <c- c1>// Place 2.5 into the first component of uv.</c->

    <c- n>var</c-> <c- n>friend</c->: <c- nc>S</c-><c- p>;</c->
    <c- c1>// Copy the contents of the 'person' variable into the 'friend' variable.</c->
    <c- n>friend</c-> <c- o>=</c-> <c- n>person</c-><c- p>;</c->
<c- p>}</c->
</pre>
   </div>
<pre class="def">assignment_statement
  : singular_expression EQUAL short_circuit_or_expression
      If singular_expression is a variable, this maps to OpStore to the variable.
      Otherwise, singular expression is a pointer expression in an Assigning (L-value) context
      which maps to OpAccessChain followed by OpStore
</pre>
   <h3 class="heading settled" data-level="7.3" id="control-flow"><span class="secno">7.3. </span><span class="content">Control flow TODO</span><a class="self-link" href="#control-flow"></a></h3>
   <h4 class="heading settled" data-level="7.3.1" id="sequence-statement"><span class="secno">7.3.1. </span><span class="content">Sequence TODO</span><a class="self-link" href="#sequence-statement"></a></h4>
   <h4 class="heading settled" data-level="7.3.2" id="if-statement"><span class="secno">7.3.2. </span><span class="content">If Statement</span><a class="self-link" href="#if-statement"></a></h4>
<pre class="def">if_statement
  : IF paren_expression compound_statement elseif_statement? else_statement?

elseif_statement
  : ELSE_IF paren_expression compound_statement elseif_statement?

else_statement
  : ELSE compound_statement
</pre>
   <p>An if statement provides provides predicated execution of a compound statement based on
the evaluation of an expression.</p>
   <p>If statements in WGSL use an if/elseif/else structure, that contains a single required <code>if</code> clause, zero or more <code>elseif</code> clauses and a single optional <code>else</code> clause.
Each of the expressions for the <code>if</code> and <code>elseif</code> clause conditions must be a scalar boolean expression.</p>
   <p>An if statement is executed as follows:</p>
   <ul>
    <li data-md>
     <p>The condition associated with the <code>if</code> clause is evaluated and, if the result is <code>true</code>,
control transfers to the associated compound statement.</p>
    <li data-md>
     <p>Otherwise, the condition of the next <code>elseif</code> clause in textual order (if one exists) is evaluated
 and, if the result is <code>true</code>, control transfers to the associated compound statement.</p>
     <ul>
      <li data-md>
       <p>This behavior is repeated for all <code>elseif</code> clauses until one of the conditions evaluates to <code>true</code>.</p>
     </ul>
    <li data-md>
     <p>If no condition evaluates to <code>true</code>, then control transfers to the compound statement
associated with the <code>else</code> clause (if it exists).</p>
   </ul>
   <h4 class="heading settled" data-level="7.3.3" id="switch-statement"><span class="secno">7.3.3. </span><span class="content">Switch Statement</span><a class="self-link" href="#switch-statement"></a></h4>
<pre class="def">switch_statement
  : SWITCH paren_expression BRACE_LEFT switch_body+ BRACE_RIGHT

switch_body
  : CASE case_selectors COLON BRACE_LEFT case_body BRACE_RIGHT
  | DEFAULT COLON BRACE_LEFT case_body BRACE_RIGHT

case_selectors
  : const_literal (COMMA const_literal)* COMMA?

case_body
  :
  | statement case_body
  | FALLTHROUGH SEMICOLON
</pre>
   <p>A switch statement transfers control to one of a set of case clauses, or to the <code>default</code> clause,
depending on the evaluation of a selector expression.</p>
   <p>The selector expression must be of a scalar integer type.
If the selector value equals a value in a case selector list, then control is transferred to
the body of that case clause.
If the selector value does not equal any of the case selector values, then control is
transferred to the <code>default</code> clause.</p>
   <p>Each switch statement must have exactly one default clause.</p>
   <p>The case selector values must have the same type as the result of evaluating the selector expression.</p>
   <p>A literal value must not appear more than once in the case selectors for a switch statement.</p>
   <p class="note" role="note"><span>Note:</span> The value of the literal is what matters, not the spelling.
For example <code>0</code>, <code>00</code>, and <code>0x0000</code> all denote the zero value.</p>
   <p>When control reaches the end of a case body, control normally transfers to the first statement
after the switch statement.
Alternately, executing a <code>fallthrough</code> statement transfers control to the body of the next case clause or
default clause, whichever appears next in the switch body.
A <code>fallthrough</code> statement must not appear as the last statement in the last clause of a switch.
When a declaration appears in a case body, its identifier is <a data-link-type="dfn" href="#in-scope" id="ref-for-in-scope⑦">in scope</a> from
the start of the next statement until the end of the case body.</p>
   <p class="note" role="note"><span>Note:</span> Identifiers declared in a case body are not <a data-link-type="dfn" href="#in-scope" id="ref-for-in-scope⑧">in scope</a> of case bodies
which are reachable via a <code>fallthrough</code> statement.</p>
   <h4 class="heading settled" data-level="7.3.4" id="loop-statement"><span class="secno">7.3.4. </span><span class="content">Loop Statement</span><a class="self-link" href="#loop-statement"></a></h4>
<pre class="def">loop_statement
  : LOOP BRACE_LEFT statements? continuing_statement? BRACE_RIGHT
</pre>
   <p>The <dfn data-dfn-type="dfn" data-noexport id="loop-body">loop body<a class="self-link" href="#loop-body"></a></dfn> is special form <a href="#compound-statement">compound
statement</a> that executes repeatedly.
Each execution of the loop body is called an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="iteration">iteration</dfn>.</p>
   <p>The identifier of a declaration in a loop is <a data-link-type="dfn" href="#in-scope" id="ref-for-in-scope⑨">in scope</a> from the start of the
next statement until the end of the loop body.
The declaration is executed each time it is reached, so each new iteration
creates a new instance of the variable or constant, and re-initializes it.</p>
   <p>This repetition can be interrupted by a <a href="#break-statement">§ 7.3.6 Break</a>, <code>return</code>, or <code>discard</code>.</p>
   <p>Optionally, the last statement in the loop body may be a <a href="#continuing-statement">§ 7.3.8 Continuing Statement</a>.</p>
   <p class="note" role="note"><span>Note:</span> The loop statement is one of the biggest differences from other shader
languages.</p>
   <p>This design directly expresses loop idioms commonly found in compiled code.
In particular, placing the loop update statements at the end of the loop body
allows them to naturally use values defined in the loop body.</p>
   <div class="example glsl no-marker" id="example-3440ef35">
    <a class="self-link" href="#example-3440ef35"></a>
    <div class="marker">EXAMPLE: GLSL Loop</div>
<pre>int a = 2;
for (int i = 0; i &lt; 4; i++) {
  a *= 2;
}
</pre>
   </div>
   <div class="example wgsl function-scope no-marker" id="example-1e7f9a96">
    <a class="self-link" href="#example-1e7f9a96"></a>
    <div class="marker">EXAMPLE: WGSL Loop</div>
<pre>let a: i32 = 2;
var i: i32 = 0;      // &lt;1>
loop {
  if (i >= 4) { break; }

  a = a * 2;

  i = i + 1;
}
</pre>
   </div>
   <ul>
    <li data-md>&lt;1> The initialization is listed before the loop. 
   </ul>
   <div class="example glsl no-marker" id="example-909126d6">
    <a class="self-link" href="#example-909126d6"></a>
    <div class="marker">EXAMPLE: GLSL Loop with continue</div>
<pre>int a = 2;
let int step = 1;
for (int i = 0; i &lt; 4; i += step) {
  if (i % 2 == 0) continue;
  a *= 2;
}
</pre>
   </div>
   <div class="example wgsl no-marker" id="example-0a2026dd">
    <a class="self-link" href="#example-0a2026dd"></a>
    <div class="marker">EXAMPLE: WGSL Loop with continue</div>
<pre>var a: i32 = 2;
var i: i32 = 0;
loop {
  if (i >= 4) { break; }

  let step: i32 = 1;

  i = i + step;
  if (i % 2 == 0) { continue; }

  a = a * 2;
}
</pre>
   </div>
   <div class="example wgsl no-marker" id="example-5952cece">
    <a class="self-link" href="#example-5952cece"></a>
    <div class="marker">EXAMPLE: WGSL Loop with continue and continuing</div>
<pre>var a: i32 = 2;
var i: i32 = 0;
loop {
  if (i >= 4) { break; }

  let step: i32 = 1;

  if (i % 2 == 0) { continue; }

  a = a * 2;

  continuing {   // &lt;2>
    i = i + step;
  }
}
</pre>
   </div>
   <ul>
    <li data-md>&lt;2> The continue construct is placed at the end of the <code>loop</code> 
   </ul>
   <h4 class="heading settled" data-level="7.3.5" id="for-statement"><span class="secno">7.3.5. </span><span class="content">For Statement</span><a class="self-link" href="#for-statement"></a></h4>
<pre class="def">for_statement
  : FOR PAREN_LEFT for_header PAREN_RIGHT compound_statement

for_header
  : (variable_statement | assignment_statement | func_call_statement)? SEMICOLON
     short_circuit_or_expression? SEMICOLON
     (assignment_statement | func_call_statement)?
</pre>
   <p>The <code>for(initializer; condition; continuing) { body }</code> statement is syntactic sugar on top of a <a href="#loop-statement">§ 7.3.4 Loop Statement</a> with the same <code>body</code>. Additionally:</p>
   <ul>
    <li data-md>
     <p>If <code>initializer</code> is non-empty, it is executed inside an additional scope before the first iteration.</p>
    <li data-md>
     <p>If <code>condition</code> is non-empty, it is checked at the beginning of the loop body and if unsatisfied then a <a href="#break-statement">§ 7.3.6 Break</a> is executed.</p>
    <li data-md>
     <p>If <code>continuing</code> is non-empty, it becomes a <a href="#continuing-statement">§ 7.3.8 Continuing Statement</a> at the end of the loop body.</p>
   </ul>
   <p>The <code>initializer</code> of a for loop is executed once prior to executing the loop.
When a declaration appears in the initializer, its identifier is <a data-link-type="dfn" href="#in-scope" id="ref-for-in-scope①⓪">in scope</a> until the end of the <code>body</code>.
Unlike declarations in the <code>body</code>, the declaration is not re-initialized each iteration.</p>
   <p>The <code>condition</code>, <code>body</code> and <code>continuing</code> execute in that order to form a loop <a data-link-type="dfn" href="#iteration" id="ref-for-iteration">iteration</a>.
The <code>body</code> is a special form of <a href="#compound-statement">compound statement</a>.
The identifier of a declaration in the <code>body</code> is <a data-link-type="dfn" href="#in-scope" id="ref-for-in-scope①①">in scope</a> from the start of
the next statement until the end of the <code>body</code>.
The declaration is executed each time it is reached, so each new iteration
creates a new instance of the variable or constant, and re-intializes it.</p>
   <div class="example glsl no-marker" id="example-ffd227b8">
    <a class="self-link" href="#example-ffd227b8"></a>
    <div class="marker">EXAMPLE: For to Loop transformation</div>
<pre>for(var i: i32 = 0; i &lt; 4; i = i + 1) {
  if (a == 0) {
    continue;
  }
  a = a + 2;
}
</pre>
   </div>
   <p>Converts to:</p>
   <div class="example wgsl function-scope no-marker" id="example-e6015ee7">
    <a class="self-link" href="#example-e6015ee7"></a>
    <div class="marker">EXAMPLE: For to Loop transformation</div>
<pre>{ // Introduce new scope for loop variable i
  var i: i32 = 0;
  var a: i32 = 0;
  loop {
    if (!(i &lt; 4)) {
      break;
    }

    if (a == 0) {
      continue;
    }
    a = a + 2;

    continuing {
      i = i + 1;
    }
  }
}
</pre>
   </div>
   <h4 class="heading settled" data-level="7.3.6" id="break-statement"><span class="secno">7.3.6. </span><span class="content">Break</span><a class="self-link" href="#break-statement"></a></h4>
<pre class="def">break_statement
  : BREAK
</pre>
   <p>Use a <code>break</code> statement to transfer control to the first statement
after the body of the nearest-enclosing <a href="#loop-statement">§ 7.3.4 Loop Statement</a> or <a href="#switch-statement">§ 7.3.3 Switch Statement</a>.
A <code>break</code> statement must only be used in loop, for, and switch statements.</p>
   <p>When a <code>break</code> statement is placed such that it would exit from a loop’s <a href="#continuing-statement">§ 7.3.8 Continuing Statement</a>,
then:</p>
   <ul>
    <li data-md>
     <p>The <code>break</code> statement must appear as either:</p>
     <ul>
      <li data-md>
       <p>The only statement in the <code>if</code> clause of an <code>if</code> statement that has:</p>
       <ul>
        <li data-md>
         <p>no <code>else</code> clause or an empty <code>else</code> clause</p>
        <li data-md>
         <p>no <code>elseif</code> clauses</p>
       </ul>
      <li data-md>
       <p>The only statement in the <code>else</code> clause of an <code>if</code> statement that has an empty <code>if</code> clause and no <code>elseif</code> clauses.</p>
     </ul>
    <li data-md>
     <p>That <code>if</code> statement must appear last in the <code>continuing</code> clause.</p>
   </ul>
   <div class="example wgsl function-scope no-marker" id="example-31f1d61d">
    <a class="self-link" href="#example-31f1d61d"></a>
    <div class="marker">EXAMPLE: WGSL Valid loop if-break from a continuing clause</div>
<pre>var a: i32 = 2;
var i: i32 = 0;
loop {
  let step: i32 = 1;

  if (i % 2 == 0) { continue; }

  a = a * 2;

  continuing {
    i = i + step;
    if (i >= 4) { break; }
  }
}
</pre>
   </div>
   <div class="example wgsl function-scope no-marker" id="example-7fe562b1">
    <a class="self-link" href="#example-7fe562b1"></a>
    <div class="marker">EXAMPLE: WGSL Valid loop if-else-break from a continuing clause</div>
<pre>var a: i32 = 2;
var i: i32 = 0;
loop {
  let step: i32 = 1;

  if (i % 2 == 0) { continue; }

  a = a * 2;

  continuing {
    i = i + step;
    if (i &lt; 4) {} else { break; }
  }
}
</pre>
   </div>
   <div class="example wgsl function-scope expect-error no-marker" id="example-6c5863c1">
    <a class="self-link" href="#example-6c5863c1"></a>
    <div class="marker">EXAMPLE: WGSL Invalid breaks from a continuing clause</div>
<pre>var a: i32 = 2;
var i: i32 = 0;

loop {
  let step: i32 = 1;

  if (i % 2 == 0) { continue; }

  a = a * 2;

  continuing {
    i = i + step;
    break;                                     // Invalid: too early
    if (i &lt; 4) { i = i + 1; } else { break; }  // Invalid: if is too complex, and too early
    if (i >= 4) { break; } else { i = i + 1; } // Invalid: if is too complex
  }
}
</pre>
   </div>
   <h4 class="heading settled" data-level="7.3.7" id="continue-statement"><span class="secno">7.3.7. </span><span class="content">Continue</span><a class="self-link" href="#continue-statement"></a></h4>
<pre class="def">continue_statement
  : CONTINUE
</pre>
   <p>Use a <code>continue</code> statement to transfer control in the nearest-enclosing <a href="#loop-statement">§ 7.3.4 Loop Statement</a>:</p>
   <ul>
    <li data-md>
     <p>forward to the <a href="#continuing-statement">§ 7.3.8 Continuing Statement</a> at the end of the body of that loop, if it exists.</p>
    <li data-md>
     <p>otherwise backward to the first statement in the loop body, starting the next iteration</p>
   </ul>
   <p>A <code>continue</code> statement must only be used in a loop or for statement.
A <code>continue</code> statement must not be placed such that it would transfer
control to an enclosing <a href="#continuing-statement">§ 7.3.8 Continuing Statement</a>.
(It is a <em>forward</em> branch when branching to a <code>continuing</code> statement.)</p>
   <p>A <code>continue</code> statement must not be placed such that it would transfer
control past a declaration used in the targeted continuing construct.</p>
   <div class="example wgsl function-scope expect-error no-marker" id="example-6ba5db7d">
    <a class="self-link" href="#example-6ba5db7d"></a>
    <div class="marker">EXAMPLE: Invalid continue bypasses declaration</div>
<pre>var i: i32 = 0;
loop {
  if (i >= 4) { break; }
  if (i % 2 == 0) { continue; } // &lt;3>

  let step: i32 = 2;

  continuing {
    i = i + step;
  }
}
</pre>
   </div>
   <ul>
    <li data-md>&lt;3> The <code>continue</code> is invalid because it bypasses the declaration of <code>step</code> used in the <code>continuing</code> construct 
   </ul>
   <h4 class="heading settled" data-level="7.3.8" id="continuing-statement"><span class="secno">7.3.8. </span><span class="content">Continuing Statement</span><a class="self-link" href="#continuing-statement"></a></h4>
<pre class="def">continuing_statement
  : CONTINUING compound_statement
</pre>
   <p>A <em>continuing</em> construct is a block of statements to be executed at the end of a loop iteration.
The construct is optional.</p>
   <p>The block of statements must not contain a return or discard statement.</p>
   <h4 class="heading settled" data-level="7.3.9" id="return-statement"><span class="secno">7.3.9. </span><span class="content">Return Statement</span><a class="self-link" href="#return-statement"></a></h4>
<pre class="def">return_statement
  : RETURN short_circuit_or_expression?
</pre>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="return">return</dfn> statement ends execution of the current function.
If the function is an <a data-link-type="dfn" href="#entry-point" id="ref-for-entry-point②">entry point</a>, then the current shader invocation
is terminated.
Otherwise, evaluation continues with the next expression or statement after
the evaluation of the <a data-link-type="dfn" href="#call-site" id="ref-for-call-site③">call site</a> of the current function invocation.</p>
   <p>If the function doesn’t have a <a data-link-type="dfn" href="#return-type" id="ref-for-return-type①">return type</a>, then the <a data-link-type="dfn" href="#return" id="ref-for-return">return</a> statement is
optional. If the return statement is provided for such a function, it must not
supply a value.
Otherwise the expression must be present, and is called the <em>return value</em>.
In this case the call site of this function invocation evaluates to the return value.
The type of the return value must match the return type of the function.
If a return statement is present, it must be the last statement in the
enclosing compound statement.</p>
   <h4 class="heading settled" data-level="7.3.10" id="discard-statement"><span class="secno">7.3.10. </span><span class="content">Discard Statement</span><a class="self-link" href="#discard-statement"></a></h4>
   <p>The <code>discard</code> statement must only be used in a <a data-link-type="dfn" href="#fragment" id="ref-for-fragment①">fragment</a> shader stage.
Executing a <code>discard</code> statement will:</p>
   <ul>
    <li data-md>
     <p>immediately terminate the current invocation, and</p>
    <li data-md>
     <p>prevent evaluation and generation of a return value for the <a data-link-type="dfn" href="#entry-point" id="ref-for-entry-point③">entry point</a>, and</p>
    <li data-md>
     <p>prevent the current fragment from being processed downstream in the <a data-link-type="dfn" href="#gpurenderpipeline" id="ref-for-gpurenderpipeline①">GPURenderPipeline</a>.</p>
   </ul>
   <p>Only statements
executed prior to the <code>discard</code> statement will have observable effects.</p>
   <p class="note" role="note"><span>Note:</span> A <code>discard</code> statement may be executed by any <a data-link-type="dfn" href="#functions-in-a-shader-stage" id="ref-for-functions-in-a-shader-stage①">function in a fragment stage</a> and the effect is the same:
immediate termination of the invocation.</p>
   <p>After a <code>discard</code> statement is executed, control flow is non-uniform for the
duration of the entry point.</p>
   <p class="issue" id="issue-f6ed1173"><a class="self-link" href="#issue-f6ed1173"></a> <a href="#uniform-control-flow">§ 12.2.1 Uniform control flow TODO</a> needs to state whether all invocations being discarded maintains uniform control flow.</p>
   <div class="example no-marker" id="example-f10b9ec7">
    <a class="self-link" href="#example-f10b9ec7"></a>
    <div class="marker">EXAMPLE: Using the discard statement to throw away a fragment</div>
<pre>var&lt;private> will_emit_color: bool = false;

fn discard_if_shallow(pos: vec4&lt;f32>) {
  if (pos.z &lt; 0.001) {
    // If this is executed, then the will_emit_color flag will
    // never be set to true.
    discard;
  }
  will_emit_color = true;
}

[[stage(fragment)]]
fn main([[builtin(position)]] coord_in: vec4&lt;f32>)
  -> [[location(0)]] vec4&lt;f32>
{
  discard_if_shallow(coord_in);

  // Set the flag and emit red, but only if the helper function
  // did not execute the discard statement.
  will_emit_color = true;
  return vec4&lt;f32>(1.0, 0.0, 0.0, 1.0);
}
</pre>
   </div>
   <h3 class="heading settled" data-level="7.4" id="function-call-statement"><span class="secno">7.4. </span><span class="content">Function Call Statement</span><a class="self-link" href="#function-call-statement"></a></h3>
<pre class="def">func_call_statement
  : IDENT argument_expression_list
</pre>
   <p>A function call statement executes a <a data-link-type="dfn" href="#function-call" id="ref-for-function-call①">function call</a> where the called
function does not return a value.
If the called function returns a value, that value must be consumed either
through assignment, evaluation in another expression or through use of the <code>ignore</code> built-in function (see <a href="#value-steering-functions">§ 16.13 Value-steering functions</a>).</p>
   <h3 class="heading settled" data-level="7.5" id="statements-summary"><span class="secno">7.5. </span><span class="content">Statements Grammar Summary</span><a class="self-link" href="#statements-summary"></a></h3>
<pre class="def">statements
  : statement+

statement
  : SEMICOLON
  | return_statement SEMICOLON
  | if_statement
  | switch_statement
  | loop_statement
  | for_statement
  | func_call_statement SEMICOLON
  | variable_statement SEMICOLON
  | break_statement SEMICOLON
  | continue_statement SEMICOLON
  | DISCARD SEMICOLON
  | assignment_statement SEMICOLON
  | compound_statement
</pre>
   <h2 class="heading settled" data-level="8" id="functions"><span class="secno">8. </span><span class="content">Functions</span><a class="self-link" href="#functions"></a></h2>
   <p>A <dfn class="dfn-paneled" data-dfn-for="function" data-dfn-type="dfn" data-noexport id="function-function">function</dfn> performs computational work when invoked.</p>
   <p>A function is invoked in one of the following ways:</p>
   <ul>
    <li data-md>
     <p>By evaluating a function call expression. See <a href="#function-call-expr">§ 6.12 Function Call Expression</a>.</p>
    <li data-md>
     <p>By executing a function call statement. See <a href="#function-call-statement">§ 7.4 Function Call Statement</a>.</p>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#entry-point" id="ref-for-entry-point④">entry point</a> function is invoked by the WebGPU implementation to perform
the work of a <a data-link-type="dfn" href="#shader-stages" id="ref-for-shader-stages④">shader stage</a> in a <a data-link-type="dfn" href="#pipeline" id="ref-for-pipeline">pipeline</a>. See <a href="#entry-points">§ 9 Entry Points TODO</a></p>
   </ul>
   <p>There are two kinds of functions:</p>
   <ul>
    <li data-md>
     <p>A <a data-link-type="dfn" href="#built-in-functions" id="ref-for-built-in-functions②">built-in function</a> is provided by the WGSL implementation,
and is always available to a WGSL program.
See <a href="#builtin-functions">§ 16 Built-in functions</a>.</p>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="user-defined-function">user-defined function</dfn> is declared in a WGSL program.</p>
   </ul>
   <h3 class="heading settled" data-level="8.1" id="function-declaration-sec"><span class="secno">8.1. </span><span class="content">Declaring a user-defined function</span><a class="self-link" href="#function-declaration-sec"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="function-declaration">function declaration</dfn> creates a user-defined function, by specifying:</p>
   <ul>
    <li data-md>
     <p>An optional set of attributes.</p>
    <li data-md>
     <p>The name of the function.</p>
    <li data-md>
     <p>The formal parameter list: an ordered sequence of zero
or more <a data-link-type="dfn" href="#formal-parameter" id="ref-for-formal-parameter②">formal parameter</a> declarations,
separated by commas, and
surrounded by parentheses.</p>
    <li data-md>
     <p>An optional, possibly decorated, <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="return-type">return type</dfn>.</p>
    <li data-md>
     <p>The <dfn data-dfn-type="dfn" data-noexport id="function-body">function body<a class="self-link" href="#function-body"></a></dfn>.</p>
   </ul>
   <p>A function declaration must only occur at <a data-link-type="dfn" href="#module-scope" id="ref-for-module-scope①⓪">module scope</a>.
The function name is <a data-link-type="dfn" href="#in-scope" id="ref-for-in-scope①②">in scope</a> from the start of the formal parameter list
until the end of the program.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="formal-parameter">formal parameter</dfn> declaration specifies an identifier name and a type for a value that must be
provided when invoking the function.
A formal parameter may have attributes.
See <a href="#function-calls">§ 8.2 Function calls</a>.
The identifier is <a data-link-type="dfn" href="#in-scope" id="ref-for-in-scope①③">in scope</a> until the end of the function.
Two formal parameters for a given function must not have the same name.</p>
   <p>If the return type is specified, then:</p>
   <ul>
    <li data-md>
     <p>The return type must be <a data-link-type="dfn" href="#constructible" id="ref-for-constructible①⑥">constructible</a>.</p>
    <li data-md>
     <p>The last statement in the function body must be a <a data-link-type="dfn" href="#return" id="ref-for-return①">return</a> statement.</p>
   </ul>
<pre class="def">function_decl
  : attribute_list* function_header compound_statement

function_header
  : FN IDENT PAREN_LEFT param_list PAREN_RIGHT function_return_type_decl_optional

function_return_type_decl_optional
  :
  | ARROW attribute_list* type_decl

param_list
  :
  | (param COMMA)* param COMMA?

param
  : attribute_list* variable_ident_decl
</pre>
   <p>WGSL defines the following attributes that can be applied to function declarations:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-stage" id="ref-for-attribute-stage">stage</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-workgroup_size" id="ref-for-attribute-workgroup_size">workgroup_size</a></p>
   </ul>
   <p>WGSL defines the following attributes that can be applied to function
parameters and return types:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-builtin" id="ref-for-attribute-builtin①">builtin</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-location" id="ref-for-attribute-location①">location</a></p>
   </ul>
   <div class="example no-marker" id="example-df937cf0">
    <a class="self-link" href="#example-df937cf0"></a>
    <div class="marker">EXAMPLE: Simple functions</div>
<pre>// Declare the add_two function.
// It has two formal paramters, i and b.
// It has a return type of i32.
// It has a body with a return statement.
fn add_two(i: i32, b: f32) -> i32 {
  return i + 2;  // A formal parameter is available for use in the body.
}

// A compute shader entry point function, 'main'.
// It has no specified return type.
// It invokes the ordinary_two function, and captures
// the resulting value in the named value 'two'.
[[stage(compute)]] fn main() {
   let six: i32 = add_two(4, 5.0);
}
</pre>
   </div>
   <h3 class="heading settled" data-level="8.2" id="function-calls"><span class="secno">8.2. </span><span class="content">Function calls</span><a class="self-link" href="#function-calls"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="function-call">function call</dfn> is a statement or expression which invokes a function.</p>
   <p>The function call must supply the same number of argument values as there are <a data-link-type="dfn" href="#formal-parameter" id="ref-for-formal-parameter③">formal parameters</a> in the called function.
Each argument value must evaluate to the same type as the corresponding formal
parameter, by position.</p>
   <p>When a function call is executed the following steps occur:</p>
   <ul>
    <li data-md>
     <p>Function call argument values are evaluated.
The relative order of evaluation is not specified.</p>
    <li data-md>
     <p>Execution of the current function is suspended.
All <a data-link-type="dfn" href="#function-scope" id="ref-for-function-scope②">function scope</a> variables and constants maintain their current values.</p>
    <li data-md>
     <p>Storage is allocated for each function scope variable in the called function.</p>
     <ul>
      <li data-md>
       <p>Initialization occurs as described in <a href="#var-and-let">§ 5 var and let</a>.</p>
     </ul>
    <li data-md>
     <p>Values for the formal parameters of the called function are determined
by matching the function call argument values by position.
For example, in the body of the called function the first formal parameter will denote
the value of the first argument at the <a data-link-type="dfn" href="#call-site" id="ref-for-call-site④">call site</a>.</p>
    <li data-md>
     <p>Control is transferred to the first statement in the called function.</p>
    <li data-md>
     <p>The called function is executed.</p>
    <li data-md>
     <p>When the called function returns, by either executing a <a data-link-type="dfn" href="#return" id="ref-for-return②">return</a> statement or reaching
the end of the called function (if the function does not return a value),
control is transferred back the calling function, and the called function’s execution is
unsuspended.
If the called function returns a value, that value is supplied for the
value of the function call expression.</p>
   </ul>
   <p>The location of a function call is referred to as a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="call-site">call site</dfn>.
Call sites are a <a data-link-type="dfn" href="#dynamic-context" id="ref-for-dynamic-context①">dynamic context</a>.
As such, the same textual location may represent multiple call sites.</p>
   <p class="note" role="note"><span>Note:</span> There are no default parameter values in WGSL.
Built-in functions described this way are really overloaded functions.</p>
   <p class="note" role="note"><span>Note:</span> The current function will not resume execution if the called function or
any descendent called function executes a <code>discard</code> statement.
See <a href="#discard-statement">§ 7.3.10 Discard Statement</a>.</p>
   <h3 class="heading settled" data-level="8.3" id="function-restriction"><span class="secno">8.3. </span><span class="content">Restrictions on functions</span><a class="self-link" href="#function-restriction"></a></h3>
   <ul>
    <li data-md>
     <p>Recursion is not permitted.
That is, there must be no cycles in the call graph.</p>
    <li data-md>
     <p>A <a data-link-type="dfn" href="#vertex" id="ref-for-vertex①">vertex</a> shader must return the <code>position</code> <a data-link-type="dfn" href="#built-in-output-variable" id="ref-for-built-in-output-variable①">built-in variable</a>.
See <a href="#builtin-variables">§ 15 Built-in variables</a>.</p>
    <li data-md>
     <p>An entry point must never be the target of a <a data-link-type="dfn" href="#function-call" id="ref-for-function-call②">function call</a>.</p>
    <li data-md>
     <p>If a function has a return type, it must be a <a data-link-type="dfn" href="#constructible" id="ref-for-constructible①⑦">constructible</a> type.</p>
    <li data-md>
     <p>A <a data-link-type="dfn" href="#formal-parameter" id="ref-for-formal-parameter④">function parameter</a> must one the following types:</p>
     <ul>
      <li data-md>
       <p>a constructible type</p>
      <li data-md>
       <p>a pointer type</p>
      <li data-md>
       <p>a texture type</p>
      <li data-md>
       <p>a sampler type</p>
     </ul>
    <li data-md>
     <p>Each function call argument must evaluate to the type of the corresponding
function parameter.</p>
     <ul>
      <li data-md>
       <p>In particular, an argument that is a pointer must agree with the formal parameter
on storage class, pointee type, and access mode.</p>
     </ul>
    <li data-md>
     <p>For <a data-link-type="dfn" href="#user-defined-function" id="ref-for-user-defined-function①">user-defined functions</a>, a parameter of pointer type must be in one of
the following storage classes:</p>
     <ul>
      <li data-md>
       <p><a data-link-type="dfn" href="#storage-classes-function" id="ref-for-storage-classes-function⑤">function</a></p>
      <li data-md>
       <p><a data-link-type="dfn" href="#storage-classes-private" id="ref-for-storage-classes-private④">private</a></p>
      <li data-md>
       <p><a data-link-type="dfn" href="#storage-classes-workgroup" id="ref-for-storage-classes-workgroup④">workgroup</a></p>
     </ul>
    <li data-md>
     <p>For <a data-link-type="dfn" href="#built-in-functions" id="ref-for-built-in-functions③">built-in functions</a>, a parameter of pointer type must be in one of
the following storage classes:</p>
     <ul>
      <li data-md>
       <p><a data-link-type="dfn" href="#storage-classes-function" id="ref-for-storage-classes-function⑥">function</a></p>
      <li data-md>
       <p><a data-link-type="dfn" href="#storage-classes-private" id="ref-for-storage-classes-private⑤">private</a></p>
      <li data-md>
       <p><a data-link-type="dfn" href="#storage-classes-workgroup" id="ref-for-storage-classes-workgroup⑤">workgroup</a></p>
      <li data-md>
       <p><a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage①②">storage</a></p>
     </ul>
    <li data-md>
     <p>Each argument of pointer type to a <a data-link-type="dfn" href="#user-defined-function" id="ref-for-user-defined-function②">user-defined function</a> must be one of:</p>
     <ul>
      <li data-md>
       <p>An <a href="#address-of-expr">address-of expression</a> of a <a href="#var-identifier-expr">variable identifier expression</a></p>
      <li data-md>
       <p>A function parameter</p>
     </ul>
    <li data-md>
     <p>WGSL assumes no aliasing is present between any combination of
function parameters and variables.
As such, a function parameter of pointer type must not be used to read or
write to any <a data-link-type="dfn" href="#memory-locations" id="ref-for-memory-locations⑤">memory locations</a> of its <a data-link-type="dfn" href="#originating-variable" id="ref-for-originating-variable①②">originating variable</a> that are
also written via:</p>
     <ul>
      <li data-md>
       <p>Another function parameter in the same function</p>
      <li data-md>
       <p>A statement or expression in the function using the originating variable directly</p>
     </ul>
   </ul>
   <p class="note" role="note"><span>Note:</span> The aliasing restriction applies to memory location written by function
calls in the function.</p>
   <p class="issue" id="issue-3f300e66"><a class="self-link" href="#issue-3f300e66"></a> Revisit aliasing rules for clarity.</p>
   <h2 class="heading settled" data-level="9" id="entry-points"><span class="secno">9. </span><span class="content">Entry Points TODO</span><a class="self-link" href="#entry-points"></a></h2>
   <h3 class="heading settled" data-level="9.1" id="shader-stages-sec"><span class="secno">9.1. </span><span class="content">Shader Stages</span><a class="self-link" href="#shader-stages-sec"></a></h3>
   <p>WebGPU issues work to the GPU in the form of <a data-link-type="dfn" href="#draw-command" id="ref-for-draw-command①">draw</a> or <a data-link-type="dfn" href="#dispatch-command" id="ref-for-dispatch-command①">dispatch commands</a>.
These commands execute a pipeline in the context of a set of <a data-link-type="dfn" href="#pipeline-input" id="ref-for-pipeline-input②">inputs</a>, <a data-link-type="dfn" href="#pipeline-output" id="ref-for-pipeline-output①">outputs</a>, and attached <a data-link-type="dfn" href="#resource" id="ref-for-resource⑥">resources</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pipeline">pipeline</dfn> describes the behaviour to be performed on the GPU, as a sequence
of stages, some of which are programmable.
In WebGPU, a pipeline is created before scheduling a draw or dispatch command for execution.
There are two kinds of pipelines: GPUComputePipeline, and GPURenderPipeline.</p>
   <p>A <a data-link-type="dfn" href="#dispatch-command" id="ref-for-dispatch-command②">dispatch command</a> uses a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="gpucomputepipeline">GPUComputePipeline</dfn> to run a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compute-shader-stage">compute shader stage</dfn> over a logical
grid of points with a controllable amount of parallelism,
while reading and possibly updating buffer and image resources.</p>
   <p>A <a data-link-type="dfn" href="#draw-command" id="ref-for-draw-command②">draw command</a> uses a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="gpurenderpipeline">GPURenderPipeline</dfn> to run a multi-stage process with
two programmable stages among other fixed-function stages:</p>
   <ul>
    <li data-md>
     <p>A <dfn data-dfn-type="dfn" data-noexport id="vertex-shader-stage">vertex shader stage<a class="self-link" href="#vertex-shader-stage"></a></dfn> maps input attributes for a single vertex into
output attributes for the vertex.</p>
    <li data-md>
     <p>Fixed-function stages map vertices into graphic primitives (such as triangles)
which are then rasterized to produce fragments.</p>
    <li data-md>
     <p>A <dfn data-dfn-type="dfn" data-noexport id="fragment-shader-stage">fragment shader stage<a class="self-link" href="#fragment-shader-stage"></a></dfn> processes each fragment,
possibly producing a fragment output.</p>
    <li data-md>
     <p>Fixed-function stages consume a fragment output, possibly updating external state
such as color attachments and depth and stencil buffers.</p>
   </ul>
   <p>The WebGPU specification describes pipelines in greater detail.</p>
   <p>WGSL defines three <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="shader-stages">shader stages</dfn>, corresponding to the
programmable parts of pipelines:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compute">compute</dfn></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="vertex">vertex</dfn></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fragment">fragment</dfn></p>
   </ul>
   <p>Each shader stage has its own set of features and constraints, described elsewhere.</p>
   <h3 class="heading settled" data-level="9.2" id="entry-point-decl"><span class="secno">9.2. </span><span class="content">Entry point declaration</span><a class="self-link" href="#entry-point-decl"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="entry-point">entry point</dfn> is a <a data-link-type="dfn" href="#user-defined-function" id="ref-for-user-defined-function③">user-defined function</a> that is invoked to perform
the work for a particular <a data-link-type="dfn" href="#shader-stages" id="ref-for-shader-stages⑤">shader stage</a>.</p>
   <p>Specify a <code>stage</code> attribute on a <a data-link-type="dfn" href="#function-declaration" id="ref-for-function-declaration①">function declaration</a> to declare that function
as an entry point.</p>
   <p>When configuring the stage in the pipeline, the entry point is specified by providing
the WGSL module and the entry point’s function name.</p>
   <p>The parameters of an entry point have to be within <a data-link-type="dfn" href="#entry-point-io-type" id="ref-for-entry-point-io-type">Entry point IO type</a>s.
The return type of an entry point has to be of an <a data-link-type="dfn" href="#entry-point-io-type" id="ref-for-entry-point-io-type①">Entry point IO type</a>, if specified.</p>
   <p class="note" role="note"><span>Note:</span> compute entry points never have a return type.</p>
   <div class="example wgsl global-scope no-marker" id="example-8a6ff419">
    <a class="self-link" href="#example-8a6ff419"></a>
    <div class="marker">EXAMPLE: Entry Point</div>
<pre>[[stage(vertex)]]
fn vert_main() -> [[builtin(position)]] vec4&lt;f32> {
  return vec4&lt;f32>(0.0, 0.0, 0.0, 1.0);
}
   // OpEntryPoint Vertex %vert_main "vert_main" %return_value
   // OpDecorate %return_value BuiltIn Position
   // %float = OpTypeFloat 32
   // %v4float = OpTypeVector %float 4
   // %ptr = OpTypePointer Output %v4float
   // %return_value = OpVariable %ptr Output

[[stage(fragment)]]
fn frag_main([[builtin(position)]] coord_in: vec4&lt;f32>) -> [[location(0)]] vec4&lt;f32> {
  return vec4&lt;f32>(coord_in.x, coord_in.y, 0.0, 1.0);
}
   // OpEntryPoint Fragment %frag_main "frag_main" %return_value %coord_in
   // OpDecorate %return_value Location 0
   // %float = OpTypeFloat 32
   // %v4float = OpTypeVector %float 4
   // %ptr = OpTypePointer Output %v4float
   // %return_value = OpVariable %ptr Output

[[stage(compute)]]
fn comp_main() { }
   // OpEntryPoint GLCompute %comp_main "comp_main"
</pre>
   </div>
   <p>The set of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="functions-in-a-shader-stage">functions in a shader stage</dfn> is the union of:</p>
   <ul>
    <li data-md>
     <p>The entry point function for the stage.</p>
    <li data-md>
     <p>The targets of function calls from within the body of a function
in the shader stage, whether or not that call is executed.</p>
   </ul>
   <p>The union is applied repeatedly until it stabilizes.
It will stabilize in a finite number of steps.</p>
   <h4 class="heading settled" data-level="9.2.1" id="entry-point-attributes"><span class="secno">9.2.1. </span><span class="content">Function attributes for entry points</span><a class="self-link" href="#entry-point-attributes"></a></h4>
   <p>WGSL defines the following attributes that can be applied to entry point declarations:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-stage" id="ref-for-attribute-stage①">stage</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#attribute-workgroup_size" id="ref-for-attribute-workgroup_size①">workgroup_size</a></p>
   </ul>
   <p class="issue" id="issue-1bad4e2b"><a class="self-link" href="#issue-1bad4e2b"></a> Can we query upper bounds on workgroup size dimensions?  Is it independent of the shader, or
  a property to be queried after creating the shader module?</p>
   <div class="example wgsl global-scope no-marker" id="example-68e8393e">
    <a class="self-link" href="#example-68e8393e"></a>
    <div class="marker">EXAMPLE: workgroup_size Attribute</div>
<pre>[[ stage(compute), workgroup_size(8,4,1) ]]
fn sorter() { }
   // OpEntryPoint GLCompute %sorter "sorter"
   // OpExecutionMode %sorter LocalSize 8 4 1

[[ stage(compute), workgroup_size(8u) ]]
fn reverser() { }
   // OpEntryPoint GLCompute %reverser "reverser"
   // OpExecutionMode %reverser LocalSize 8 1 1

// Using an pipeline-overridable constant.
[[override(42)]] let block_width = 12u;
[[ stage(compute), workgroup_size(block_width) ]]
fn shuffler() { }
   // The SPIR-V translation uses a WorkgroupSize-decorated constant,
   // where the first component is an OpSpecConstant decorated with
   // SpecID 42, and with default value 12, and second and third components
   // use defaulted values of 1.

// Error: workgroup_size must be specified on compute shader
[[ stage(compute) ]]
fn bad_shader() { }
</pre>
   </div>
   <h3 class="heading settled" data-level="9.3" id="shader-interface"><span class="secno">9.3. </span><span class="content">Shader Interface</span><a class="self-link" href="#shader-interface"></a></h3>
   <p>The shader interface is the set of objects
through which the shader accesses data external to the <a data-link-type="dfn" href="#shader-stages" id="ref-for-shader-stages⑥">shader stage</a>,
either for reading or writing.
The interface includes:</p>
   <ul>
    <li data-md>
     <p>Pipeline inputs and outputs</p>
    <li data-md>
     <p>Buffer resources</p>
    <li data-md>
     <p>Texture resources</p>
    <li data-md>
     <p>Sampler resources</p>
   </ul>
   <p>These objects are represented by module-scope variables in certain <a data-link-type="dfn" href="#storage-classes" id="ref-for-storage-classes⑧">storage classes</a>.</p>
   <p>We say a variable is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="statically-accessed">statically accessed</dfn> by a function if any subexpression
in the body of the function uses the variable’s identifier,
and that subexpression is <a data-link-type="dfn" href="#in-scope" id="ref-for-in-scope①④">in scope</a> of the variable’s declaration.
Static access of a <code>let</code>-declared constant is defined similarly.
Note that being statically accessed is independent of whether an execution of the shader
will actually evaluate the subexpression, or even execute the enclosing statement.</p>
   <p>More precisely, the <dfn data-dfn-type="dfn" data-noexport id="interface-of-a-shader-stage">interface of a shader stage<a class="self-link" href="#interface-of-a-shader-stage"></a></dfn> consists of:</p>
   <ul>
    <li data-md>
     <p>all parameters of the entry point</p>
    <li data-md>
     <p>the result value of the entry point</p>
    <li data-md>
     <p>all <a data-link-type="dfn" href="#module-scope" id="ref-for-module-scope①①">module scope</a> variables that are <a data-link-type="dfn" href="#statically-accessed" id="ref-for-statically-accessed①">statically accessed</a> by <a data-link-type="dfn" href="#functions-in-a-shader-stage" id="ref-for-functions-in-a-shader-stage②">functions in the shader stage</a>,
and which are in storage classes <a data-link-type="dfn" href="#storage-classes-uniform" id="ref-for-storage-classes-uniform⑨">uniform</a>, <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage①③">storage</a>, or <a data-link-type="dfn" href="#storage-classes-handle" id="ref-for-storage-classes-handle③">handle</a>.</p>
   </ul>
   <h4 class="heading settled" data-level="9.3.1" id="pipeline-inputs-outputs"><span class="secno">9.3.1. </span><span class="content">Pipeline Input and Output Interface</span><a class="self-link" href="#pipeline-inputs-outputs"></a></h4>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="entry-point-io-type">Entry point IO type</dfn>s include the following:</p>
   <ul>
    <li data-md>
     <p>Built-in variables. See <a href="#builtin-inputs-outputs">§ 9.3.1.1 Built-in Inputs and Outputs</a>.</p>
    <li data-md>
     <p>User-defined IO. See <a href="#user-defined-inputs-outputs">§ 9.3.1.2 User-defined Inputs and Outputs</a></p>
    <li data-md>
     <p>Structures containing only built-in variables and user-defined IO.
The structure must not contain a nested structure.</p>
   </ul>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pipeline-input">pipeline input</dfn> is data provided to the shader stage from upstream in the pipeline.
A pipeline input is denoted by the arguments of the entry point.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pipeline-output">pipeline output</dfn> is data the shader provides for further processing downstream in the pipeline.
A pipeline output is denoted by the return type of the entry point.</p>
   <p>Each pipeline input or output is one of:</p>
   <ul>
    <li data-md>
     <p>A built-in variable. See <a href="#builtin-inputs-outputs">§ 9.3.1.1 Built-in Inputs and Outputs</a>.</p>
    <li data-md>
     <p>A user-defined value. See <a href="#user-defined-inputs-outputs">§ 9.3.1.2 User-defined Inputs and Outputs</a>.</p>
   </ul>
   <h5 class="heading settled" data-level="9.3.1.1" id="builtin-inputs-outputs"><span class="secno">9.3.1.1. </span><span class="content">Built-in Inputs and Outputs</span><a class="self-link" href="#builtin-inputs-outputs"></a></h5>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="built-in-input-variable">built-in input variable</dfn> provides access to system-generated control information.
The set of built-in inputs are listed in <a href="#builtin-variables">§ 15 Built-in variables</a>.</p>
   <p>To declare a variable for accessing a particular input built-in <em>X</em> from an entry point:</p>
   <ul>
    <li data-md>
     <p>Declare a parameter of the entry point function,
where the <a data-link-type="dfn" href="#store-type" id="ref-for-store-type①③">store type</a> is the listed store type for <em>X</em>.</p>
    <li data-md>
     <p>Apply a <code>builtin(</code><em>X</em><code>)</code> attribute to the parameter.</p>
   </ul>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="built-in-output-variable">built-in output variable</dfn> is used by the shader to convey
control information to later processing steps in the pipeline.
The set of built-in outputs are listed in <a href="#builtin-variables">§ 15 Built-in variables</a>.</p>
   <p>To declare a variable for accessing a particular output built-in <em>Y</em> from an entry point:</p>
   <ul>
    <li data-md>
     <p>Add a variable to the result of the entry point, where <a data-link-type="dfn" href="#store-type" id="ref-for-store-type①④">store type</a> is the listed store type for <em>Y</em>:</p>
    <li data-md>
     <p>If there is no result type for the entry point, change it to the variable type.</p>
    <li data-md>
     <p>Otherwise, make the result type to be a structure, where one of the fields is the new variable.</p>
    <li data-md>
     <p>Apply a <code>builtin(</code><em>Y</em><code>)</code> attribute to the result variable.</p>
   </ul>
   <p>Both input and output built-in variables may also be declared as members of
structures that are either entry point function parameters (for inputs) or the
return type of an entry point (for outputs).
The type of the structure member must match the type specified for the built-in variable.</p>
   <p>The <code>builtin</code> attribute must not be applied to a variables in <a data-link-type="dfn" href="#module-scope" id="ref-for-module-scope①②">module scope</a>,
or the local variables in the function scope.</p>
   <p>A variable must not have more than one <code>builtin</code> attribute.</p>
   <p>Each built-in variable has an associated shader stage, as described in <a href="#builtin-variables">§ 15 Built-in variables</a>.
If a built-in variable has stage <em>S</em> and is used by a function <em>F</em>, as either an argument or the
result type, then <em>F</em> must be a <a data-link-type="dfn" href="#functions-in-a-shader-stage" id="ref-for-functions-in-a-shader-stage③">function in a shader</a> for stage <em>S</em>.</p>
   <p class="issue" id="issue-d1420752"><a class="self-link" href="#issue-d1420752"></a> in Vulkan, builtin variables occoupy I/O location slots counting toward limits.</p>
   <h5 class="heading settled" data-level="9.3.1.2" id="user-defined-inputs-outputs"><span class="secno">9.3.1.2. </span><span class="content">User-defined Inputs and Outputs</span><a class="self-link" href="#user-defined-inputs-outputs"></a></h5>
   <p>User-defined data can be passed as input to the start of a pipeline, passed
between stages of a pipeline or output from the end of a pipeline.
User-defined IO must not be passed to <a data-link-type="dfn" href="#compute" id="ref-for-compute②">compute</a> shader entry points.
User-defined IO must be of <a data-link-type="dfn" href="#numeric-scalar" id="ref-for-numeric-scalar⑤">numeric scalar</a> or <a data-link-type="dfn" href="#numeric-vector" id="ref-for-numeric-vector⑥">numeric vector</a> type,
or of a structure type whose members are numeric scalars or vectors.
All user-defined IO must be assigned locations (See <a href="#input-output-locations">§ 9.3.1.4 Input-output Locations</a>).</p>
   <h5 class="heading settled" data-level="9.3.1.3" id="interpolation"><span class="secno">9.3.1.3. </span><span class="content">Interpolation</span><a class="self-link" href="#interpolation"></a></h5>
   <p>Authors can control how user-defined IO data is interpolated through the use of
the <a data-link-type="dfn" href="#attribute-interpolate" id="ref-for-attribute-interpolate">interpolate</a> attribute.
WGSL offers two aspects of interpolation to control: the type of
interpolation, and the sampling of the interpolation.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="interpolation-type">interpolation type</dfn> must be one of:</p>
   <ul>
    <li data-md>
     <p><code>perspective</code> - Values are interpolated in a perspective correct manner.</p>
    <li data-md>
     <p><code>linear</code> - Values are interpolated in a linear, non-perspective correct manner.</p>
    <li data-md>
     <p><code>flat</code> - Values are not interpolated.
Interpolation sampling is not used with <code>flat</code> interpolation.</p>
   </ul>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="interpolation-sampling">interpolation sampling</dfn> must be one of:</p>
   <ul>
    <li data-md>
     <p><code>center</code> - Interpolation is performed at the center of the pixel.</p>
    <li data-md>
     <p><code>centroid</code> - Interpolation is performed at a point that lies within all the
samples covered by the fragment within the current primitive.
This value is the same for all samples in the primitive.</p>
    <li data-md>
     <p><code>sample</code> - Interpolation is performed per sample.
The <a data-link-type="dfn" href="#fragment" id="ref-for-fragment②">fragment</a> shader is invoked once per sample when this attribute is
applied.</p>
   </ul>
   <p>For user-defined IO of scalar or vector floating-point type:</p>
   <ul>
    <li data-md>
     <p>If the interpolation attribute is not specified, then <code>[[interpolate(perspective, center)]]</code> is assumed.</p>
    <li data-md>
     <p>If the interpolation attribute is specified with an interpolation type:</p>
     <ul>
      <li data-md>
       <p>If the interpolation type is <code>flat</code>, then interpolation sampling must not be specified.</p>
      <li data-md>
       <p>If the interpolation type is <code>perspective</code> or <code>linear</code>, then:</p>
       <ul>
        <li data-md>
         <p>Any interpolation sampling is valid.</p>
        <li data-md>
         <p>If interpolation sampling is not specified, <code>center</code> is assumed.</p>
       </ul>
     </ul>
   </ul>
   <p>User-defined IO of scalar or vector integer type is always <code>[[interpolate(flat)]]</code> and, therefore, must not be specified in a WGSL program.</p>
   <p>Interpolation attributes must match between <a data-link-type="dfn" href="#vertex" id="ref-for-vertex②">vertex</a> outputs and <a data-link-type="dfn" href="#fragment" id="ref-for-fragment③">fragment</a> inputs with the same <a data-link-type="dfn" href="#attribute-location" id="ref-for-attribute-location②">location</a> assignment within the same <a data-link-type="dfn" href="#pipeline" id="ref-for-pipeline①">pipeline</a>.</p>
   <h5 class="heading settled" data-level="9.3.1.4" id="input-output-locations"><span class="secno">9.3.1.4. </span><span class="content">Input-output Locations</span><a class="self-link" href="#input-output-locations"></a></h5>
   <p>Each location can store a value up to 16 bytes in size.
The byte size of a type is defined using the <em>SizeOf</em> column in <a href="#alignment-and-size">§ 4.3.7.1 Alignment and Size</a>.
For example, a four-element vector of floating-point values occupies a single location.</p>
   <p>Locations are specified via the <a data-link-type="dfn" href="#attribute-location" id="ref-for-attribute-location③">location</a> attribute.</p>
   <p>Every user-defined input and output must have a fully specified set of
locations.
Each structure member in the entry point IO must be one of either a builtin variable
(see <a href="#builtin-inputs-outputs">§ 9.3.1.1 Built-in Inputs and Outputs</a>), or assigned a location.</p>
   <p>Locations must not overlap within each of the following sets:</p>
   <ul>
    <li data-md>
     <p>Members within a structure type.
This applies to any structure, not just those used in pipeline inputs or outputs.</p>
    <li data-md>
     <p>An entry point’s pipeline inputs,
i.e. locations for its formal parameters, or for the members of its formal parameters of structure type.</p>
   </ul>
   <p class="note" role="note"><span>Note:</span> Location numbering is distinct between inputs and outputs:
Location numbers for an entry point’s pipeline inputs do not conflict with location numbers for the entry point’s pipeline outputs.</p>
   <p class="note" role="note"><span>Note:</span> No additional rule is required to prevent location overlap within an entry point’s outputs.
When the outptut is a structure, the first rule above prevents overlap.
Otherwise, the output is a scalar or a vector, and can have only a single location assigned to it.</p>
   <p class="note" role="note"><span>Note:</span> The number of available locations for an entry point is defined by the WebGPU API.</p>
   <div class="example applying location attribute no-marker" id="example-e01f7aca">
    <a class="self-link" href="#example-e01f7aca"></a>
    <div class="marker">EXAMPLE: Applying location attributes</div>
<pre>struct A {
  [[location(0)]] x: f32;
  // Despite locations being 16-bytes, x and y cannot share a location
  [[location(1)]] y: f32;
};

// in1 occupies locations 0 and 1.
// in2 occupies location 2.
// The return value occupies location 0.
[[stage(fragment)]]
fn fragShader(in1: A, [[location(2)]] in2: f32) -> [[location(0)]] vec4&lt;f32> {
 // ...
}
</pre>
   </div>
   <p>User-defined IO can be mixed with builtin variables in the same structure. For example,</p>
   <div class="example mixing builtins and user-defined IO no-marker" id="example-4ccdf983">
    <a class="self-link" href="#example-4ccdf983"></a>
    <div class="marker">EXAMPLE: Mixing builtins and user-defined IO</div>
<pre>// Mixed builtins and user-defined inputs.
struct MyInputs {
  [[location(0)]] x: vec4&lt;f32>;
  [[builtin(front_facing)]] y: bool;
  [[location(1)]] z: u32;
};

struct MyOutputs {
  [[builtin(frag_depth)]] x: f32;
  [[location(0)]] y: vec4&lt;f32>;
};

[[stage(fragment)]]
fn fragShader(in1: MyInputs) -> MyOutputs {
  // ...
}
</pre>
   </div>
   <div class="example invalid locations no-marker" id="example-d5a89f0a">
    <a class="self-link" href="#example-d5a89f0a"></a>
    <div class="marker">EXAMPLE: Invalid location assignments</div>
<pre>struct A {
  [[location(0)]] x: u32;
  // Invalid, x and y cannot share a location.
  [[location(0)]] y: u32;
};

struct B {
  [location(0)]] x: f32;
};

struct C {
  // Invalid, structures with user-defined IO cannot be nested.
  b: B;
};

struct D {
  x: vec4&lt;f32>;
};

[[stage(fragment)]]
// Invalid, location cannot be applied to a structure type.
fn fragShader1([[location(0)]] in1: D) {
  // ...
}

[[stage(fragment)]]
// Invalid, in1 and in2 cannot share a location.
fn fragShader2([location(0)]] in1: f32, [[location(0)]] in2: f32) {
  // ...
}

[[stage(fragment)]]
// Invalid, location cannot be applied to a structure.
fn fragShader3([[location(0)]] in1: vec4&lt;f32>) -> [[location(0)]] D {
  // ...
}
</pre>
   </div>
   <h4 class="heading settled" data-level="9.3.2" id="resource-interface"><span class="secno">9.3.2. </span><span class="content">Resource interface</span><a class="self-link" href="#resource-interface"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="resource">resource</dfn> is an object,
other than a <a href="#pipeline-inputs-outputs">pipeline input or output</a>,
which provides access to data external to a <a data-link-type="dfn" href="#shader-stages" id="ref-for-shader-stages⑦">shader stage</a>.
Resources are shared by all invocations of the shader.</p>
   <p>There are four kinds of resources:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#uniform-buffer" id="ref-for-uniform-buffer⑤">uniform buffers</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#storage-buffer" id="ref-for-storage-buffer⑥">storage buffers</a></p>
    <li data-md>
     <p>textures</p>
    <li data-md>
     <p>samplers</p>
   </ul>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="resource-interface-of-a-shader">resource interface of a shader</dfn> is the set of module-scope
resource variables <a data-link-type="dfn" href="#statically-accessed" id="ref-for-statically-accessed②">statically accessed</a> by <a data-link-type="dfn" href="#functions-in-a-shader-stage" id="ref-for-functions-in-a-shader-stage④">functions in the shader stage</a>.</p>
   <p>Each resource variable must be declared with both <a data-link-type="dfn" href="#attribute-group" id="ref-for-attribute-group③">group</a> and <a data-link-type="dfn" href="#attribute-binding" id="ref-for-attribute-binding②">binding</a> attributes.
Together with the shader’s stage, these identify the binding address
of the resource on the shader’s pipeline.
See <a href="https://gpuweb.github.io/gpuweb/#pipeline-layout">WebGPU § GPUPipelineLayout</a>.</p>
   <p>Bindings must not alias within a shader stage:
two different variables in the resource interface of a given
shader must not have the same group and binding values, when considered as a pair of values.</p>
   <h4 class="heading settled" data-level="9.3.3" id="resource-layout-compatibility"><span class="secno">9.3.3. </span><span class="content">Resource layout compatibility</span><a class="self-link" href="#resource-layout-compatibility"></a></h4>
   <p>WebGPU requires that a shader’s resource interface match the <a href="https://gpuweb.github.io/gpuweb/#pipeline-layout">layout of the pipeline</a> using the shader.</p>
   <p>Each WGSL variable in a resource interface must be bound to a WebGPU resource with
a compatible <a href="https://gpuweb.github.io/gpuweb/#binding-resource-type">resource type</a> and <a href="https://gpuweb.github.io/gpuweb/#binding-type">binding type</a>,
where compatibility is defined by the following table.</p>
   <table class="data">
    <caption>WebGPU binding type compatibility</caption>
    <thead>
     <tr>
      <th>WGSL resource 
      <th>WebGPU<br><a href="https://gpuweb.github.io/gpuweb/#binding-resource-type">Resource type</a> 
      <th colspan="2">WebGPU <a href="https://gpuweb.github.io/gpuweb/#binding-type">Binding type</a> 
    <tbody>
     <tr>
      <td><a data-link-type="dfn" href="#uniform-buffer" id="ref-for-uniform-buffer⑥">uniform buffer</a> 
      <td rowspan="3"><a href="https://gpuweb.github.io/gpuweb/#dictdef-gpubufferbinding">GPUBufferBinding</a> 
      <td rowspan="3">GPUBufferBindingType 
      <td><a href="https://gpuweb.github.io/gpuweb/#dom-gpubufferbindingtype-uniform">uniform</a> 
     <tr>
      <td><a data-link-type="dfn" href="#storage-buffer" id="ref-for-storage-buffer⑦">storage buffer</a> with <a data-link-type="dfn" href="#access-read_write" id="ref-for-access-read_write①⓪">read_write</a> access 
      <td><a href="https://gpuweb.github.io/gpuweb/#dom-gpubufferbindingtype-storage">storage</a> 
     <tr>
      <td><a data-link-type="dfn" href="#storage-buffer" id="ref-for-storage-buffer⑧">storage buffer</a> with <a data-link-type="dfn" href="#access-read" id="ref-for-access-read⑧">read</a> access 
      <td><a href="https://gpuweb.github.io/gpuweb/#dom-gpubufferbindingtype-read-only-storage">read-only-storage</a> 
     <tr>
      <td rowspan="2">sampler 
      <td rowspan="3"><a href="https://gpuweb.github.io/gpuweb/#gpusampler">GPUSampler</a> 
      <td rowspan="3">GPUSamplerBindingType 
      <td><a href="https://gpuweb.github.io/gpuweb/#dom-gpusamplerbindingtype-filtering">filtering</a> 
     <tr>
      <td><a href="https://gpuweb.github.io/gpuweb/#dom-gpusamplerbindingtype-non-filtering">non-filtering</a> 
     <tr>
      <td>sampler_comparison 
      <td><a href="https://gpuweb.github.io/gpuweb/#dom-gpusamplerbindingtype-comparison">comparison</a> 
     <tr>
      <td rowspan="5">sampled texture 
      <td rowspan="5"><a href="https://gpuweb.github.io/gpuweb/#gputextureview">GPUTextureView</a> 
      <td rowspan="5">GPUTextureSampleType 
      <td><a href="https://gpuweb.github.io/gpuweb/#dom-gputexturesampletype-float">float</a> 
     <tr>
      <td><a href="https://gpuweb.github.io/gpuweb/#dom-gputexturesampletype-unfilterable-float">unfilterable-float</a> 
     <tr>
      <td><a href="https://gpuweb.github.io/gpuweb/#dom-gputexturesampletype-sint">sint</a> 
     <tr>
      <td><a href="https://gpuweb.github.io/gpuweb/#dom-gputexturesampletype-uint">uint</a> 
     <tr>
      <td><a href="https://gpuweb.github.io/gpuweb/#dom-gputexturesampletype-depth">depth</a> 
     <tr>
      <td><a data-link-type="dfn" href="#write-only-storage-texture" id="ref-for-write-only-storage-texture">write-only storage texture</a> 
      <td><a href="https://gpuweb.github.io/gpuweb/#gputextureview">GPUTextureView</a> 
      <td>GPUStorageTextureAccess 
      <td><a href="https://gpuweb.github.io/gpuweb/#dom-gpustoragetextureaccess-write-only">write-only</a> 
   </table>
   <p>TODO: Describe when filtering or non-filtering samplers are valid.</p>
   <p>TODO: Describe when float vs. unfilterable float sampled textures are valid.</p>
   <p>If <var>B</var> is a <a data-link-type="dfn" href="#uniform-buffer" id="ref-for-uniform-buffer⑦">uniform buffer</a> variable in a resource interface,
and <var>WB</var> is the <a href="https://gpuweb.github.io/gpuweb/#buffer-interface">WebGPU GPUBuffer</a> bound to <var>B</var>, then:</p>
   <ul>
    <li data-md>
     <p>The size of <var>WB</var> must be at least as large as the size of the <a data-link-type="dfn" href="#store-type" id="ref-for-store-type①⑤">store type</a> of <var>B</var> in the <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage①④">storage</a> storage class.</p>
   </ul>
   <p>If <var>B</var> is a <a data-link-type="dfn" href="#storage-buffer" id="ref-for-storage-buffer⑨">storage buffer</a> variable in a resource interface,
and <var>WB</var> is the <a href="https://gpuweb.github.io/gpuweb/#buffer-interface">WebGPU GPUBuffer</a> bound to <var>B</var>, then:</p>
   <ul>
    <li data-md>
     <p>If the <a data-link-type="dfn" href="#store-type" id="ref-for-store-type①⑥">store type</a> <var>S</var> of <var>B</var> does not contain a <a data-link-type="dfn" href="#runtime-sized" id="ref-for-runtime-sized④">runtime-sized</a> array, then
the size of <var>WB</var> must be at least as large as the size
of <var>S</var> in the <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage①⑤">storage</a> storage class.</p>
    <li data-md>
     <p>If the <a data-link-type="dfn" href="#store-type" id="ref-for-store-type①⑦">store type</a> <var>S</var> of <var>B</var> contains a <a data-link-type="dfn" href="#runtime-sized" id="ref-for-runtime-sized⑤">runtime-sized</a> array as its last member,
then:</p>
     <ul>
      <li data-md>
       <p>The runtime-determined array length of that member must be at least 1.</p>
      <li data-md>
       <p>The size of <var>WB</var> must be at least as large as the size in
storage class <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage①⑥">storage</a> of the value stored in <var>B</var>.</p>
     </ul>
   </ul>
   <p class="note" role="note"><span>Note:</span> Recall that a <a data-link-type="dfn" href="#runtime-sized" id="ref-for-runtime-sized⑥">runtime-sized</a> array may only appear as the last element in the structure
type that is the store type of a storage buffer variable.</p>
   <p>TODO: Describe other interface matching requirements, e.g. for images?</p>
   <h3 class="heading settled" data-level="9.4" id="pipeline-compatibility"><span class="secno">9.4. </span><span class="content">Pipeline compatibility TODO</span><a class="self-link" href="#pipeline-compatibility"></a></h3>
   <p>TODO: match flat attribute</p>
   <p>TODO: user data inputs of fragment stage must be subset of user data outputs of vertex stage</p>
   <h4 class="heading settled" data-level="9.4.1" id="input-output-matching"><span class="secno">9.4.1. </span><span class="content">Input-output matching rules TODO</span><a class="self-link" href="#input-output-matching"></a></h4>
   <h2 class="heading settled" data-level="10" id="language-extensions"><span class="secno">10. </span><span class="content">Language extensions</span><a class="self-link" href="#language-extensions"></a></h2>
   <p>The WGSL language is expected to evolve over time.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="extension">extension</dfn> is a named grouping for a coherent
set of modifications to a particular version of the WGSL specification, consisting of any combination of:</p>
   <ul>
    <li data-md>
     <p>Addition of new concepts and behaviours via new syntax, including:</p>
     <ul>
      <li data-md>
       <p>declarations, statements, attributes, and built-in functions.</p>
     </ul>
    <li data-md>
     <p>Removal of restrictions in the current specification or in previously published extensions.</p>
    <li data-md>
     <p>Syntax for reducing the set of permissible behaviours.</p>
    <li data-md>
     <p>Syntax for limiting the features available to a part of the program.</p>
    <li data-md>
     <p>A description of how the extension interacts with the existing specification, and optionally with other extensions.</p>
   </ul>
   <p>Hypothetically, extensions could be used to:</p>
   <ul>
    <li data-md>
     <p>Add numeric scalar types, such as 16-bit integers.</p>
    <li data-md>
     <p>Add syntax to constrain floating point rounding mode.</p>
    <li data-md>
     <p>Add syntax to signal that a shader does not use atomic types.</p>
    <li data-md>
     <p>Add new kinds of statements.</p>
    <li data-md>
     <p>Add new built-in functions.</p>
    <li data-md>
     <p>Add constraints on how shader invocations execute.</p>
    <li data-md>
     <p>Add new shader stages.</p>
   </ul>
   <h3 class="heading settled" data-level="10.1" id="enable-directive-section"><span class="secno">10.1. </span><span class="content">Enable Directive</span><a class="self-link" href="#enable-directive-section"></a></h3>
   <p>An <dfn data-dfn-type="dfn" data-noexport id="enable-directive">enable directive<a class="self-link" href="#enable-directive"></a></dfn> indicates that the functionality
described by a particular named <a data-link-type="dfn" href="#extension" id="ref-for-extension">extension</a> may be used in the source text after the directive itself.
That is, language functionality described by the extension may be used in any
source text after the <code>enable</code> directive.</p>
   <p>The directive must not appear inside the text of any <a data-link-type="dfn" href="#declaration" id="ref-for-declaration①">declaration</a>.
(If it were a declaration, it would be at <a data-link-type="dfn" href="#module-scope" id="ref-for-module-scope①③">module scope</a>.)</p>
   <p>The directive uses an identifier to name the extension, but does not
create a <a data-link-type="dfn" href="#scope" id="ref-for-scope">scope</a> for the identifier.
Use of the identifier by the directive does not conflict with the
use of that identifier as the name in any <a data-link-type="dfn" href="#declaration" id="ref-for-declaration②">declaration</a>.</p>
<pre class="def">enable_directive
  : ENABLE IDENT SEMICOLON
</pre>
   <p class="note" role="note"><span>Note:</span> The grammar rule includes the terminating semicolon token,
ensuring the additional functionality is usable only after that semicolon.
Therefore any WGSL implementation can parse the entire <code>enable</code> directive.
When an implementation encounters an enable directive for an unsupported extension,
the implementation can issue a clear diagnostic.</p>
   <div class="example using extensions no-marker" id="example-495fdf2d">
    <a class="self-link" href="#example-495fdf2d"></a>
    <div class="marker">EXAMPLE: Using hypothetical extensions</div>
<pre>// Enable a hypothetical IEEE-754 binary16 floating point extension.
enable f16;

// Assuming the f16 extension enables use of the f16 type:
//    - as function return value
//    - as the type for let declaration
//    - as a type constructor, with an i32 argument
//    - as operands to the division operator: /
fn halve_it(x: f16) -> f16 {
   let two: f16 = f16(2);
   return x / two;
};

enable f16; // A redundant enable directive is ok.
// Enable a hypothetical extension adding syntax for controlling
// the rounding mode on f16 arithmetic.
enable rounding_mode_f16;

[[round_to_even_f16]] // Attribute enabled by the rounding_mode_f16 extension
fn triple_it(x: f16) -> f16 {
   return x * f16(3); // Uses round-to-even.
};
</pre>
   </div>
   <h2 class="heading settled" data-level="11" id="wgsl-module"><span class="secno">11. </span><span class="content">WGSL program TODO</span><a class="self-link" href="#wgsl-module"></a></h2>
   <p>TODO: <em>Stub</em> A WGSL program is a sequence of <a data-link-type="dfn" href="#directive" id="ref-for-directive">directives</a> and <a data-link-type="dfn" href="#module-scope" id="ref-for-module-scope①④">module scope</a> <a data-link-type="dfn" href="#declaration" id="ref-for-declaration③">declarations</a>.</p>
<pre class="def">translation_unit
  : global_decl_or_directive* EOF
</pre>
<pre class="def">global_decl_or_directive
  : SEMICOLON
  | global_variable_decl SEMICOLON
  | global_constant_decl SEMICOLON
  | type_alias SEMICOLON
  | struct_decl SEMICOLON
  | function_decl
  | enable_directive
</pre>
   <h2 class="heading settled" data-level="12" id="execution"><span class="secno">12. </span><span class="content">Execution TODO</span><a class="self-link" href="#execution"></a></h2>
   <h3 class="heading settled" data-level="12.1" id="invocation-of-an-entry-point"><span class="secno">12.1. </span><span class="content">Invocation of an entry point TODO</span><a class="self-link" href="#invocation-of-an-entry-point"></a></h3>
   <h4 class="heading settled" data-level="12.1.1" id="before-entry-point-begins"><span class="secno">12.1.1. </span><span class="content">Before an entry point begins TODO</span><a class="self-link" href="#before-entry-point-begins"></a></h4>
   <p>TODO: <em>Stub</em></p>
   <ul>
    <li data-md>
     <p>Setting values of builtin variables</p>
    <li data-md>
     <p>External-interface variables have initialized backing storage</p>
    <li data-md>
     <p>Internal module-scope variables have backing storage</p>
    <li data-md>
     <p>Initializers evaluated in textual order</p>
    <li data-md>
     <p>No two variables have overlapping storage (might already be covered earlier?)</p>
   </ul>
   <h4 class="heading settled" data-level="12.1.2" id="program-order"><span class="secno">12.1.2. </span><span class="content">Program order (within an invocation) TODO</span><a class="self-link" href="#program-order"></a></h4>
   <h5 class="heading settled" data-level="12.1.2.1" id="function-scope-variable-lifetime"><span class="secno">12.1.2.1. </span><span class="content">Function-scope variable lifetime and initialization TODO</span><a class="self-link" href="#function-scope-variable-lifetime"></a></h5>
   <h5 class="heading settled" data-level="12.1.2.2" id="statement-order"><span class="secno">12.1.2.2. </span><span class="content">Statement order TODO</span><a class="self-link" href="#statement-order"></a></h5>
   <h5 class="heading settled" data-level="12.1.2.3" id="intra-statement-order"><span class="secno">12.1.2.3. </span><span class="content">Intra-statement order (or lack) TODO</span><a class="self-link" href="#intra-statement-order"></a></h5>
   <p>TODO: <em>Stub</em>: Expression evaluation</p>
   <h3 class="heading settled" data-level="12.2" id="uniformity"><span class="secno">12.2. </span><span class="content">Uniformity TODO</span><a class="self-link" href="#uniformity"></a></h3>
   <h4 class="heading settled" data-level="12.2.1" id="uniform-control-flow"><span class="secno">12.2.1. </span><span class="content">Uniform control flow TODO</span><a class="self-link" href="#uniform-control-flow"></a></h4>
   <h4 class="heading settled" data-level="12.2.2" id="divergence-reconvergence"><span class="secno">12.2.2. </span><span class="content">Divergence and reconvergence TODO</span><a class="self-link" href="#divergence-reconvergence"></a></h4>
   <h4 class="heading settled" data-level="12.2.3" id="uniformity-restrictions"><span class="secno">12.2.3. </span><span class="content">Uniformity restrictions TODO</span><a class="self-link" href="#uniformity-restrictions"></a></h4>
   <h3 class="heading settled" data-level="12.3" id="compute-shader-workgroups"><span class="secno">12.3. </span><span class="content">Compute Shaders and Workgroups</span><a class="self-link" href="#compute-shader-workgroups"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-for="compute shader stage" data-dfn-type="dfn" data-noexport id="compute-shader-stage-workgroup">workgroup</dfn> is a set of invocations which
concurrently execute a <a data-link-type="dfn" href="#compute-shader-stage" id="ref-for-compute-shader-stage③">compute shader stage</a> <a data-link-type="dfn" href="#entry-point" id="ref-for-entry-point⑤">entry point</a>,
and share access to shader variables in the <a data-link-type="dfn" href="#storage-classes-workgroup" id="ref-for-storage-classes-workgroup⑥">workgroup</a> storage class.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="workgroup-grid">workgroup grid</dfn> for a compute shader is the set of points
with integer coordinates <em>(i,j,k)</em> with:</p>
   <ul>
    <li data-md>
     <p>0 ≤ i &lt; workgroup_size_x</p>
    <li data-md>
     <p>0 ≤ j &lt; workgroup_size_y</p>
    <li data-md>
     <p>0 ≤ k &lt; workgroup_size_z</p>
   </ul>
   <p>where <em>(workgroup_size_x, workgroup_size_y, workgroup_size_z)</em> is
the value specified for the <a data-link-type="dfn" href="#attribute-workgroup_size" id="ref-for-attribute-workgroup_size②">workgroup_size</a> attribute of the
entry point.</p>
   <p>There is exactly one invocation in a workgroup for each point in the workgroup grid.</p>
   <p>An invocation’s <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="local-invocation-id">local invocation ID</dfn> is the coordinate
triple for the invocation’s corresponding workgroup grid point.</p>
   <p>When an invocation has <a data-link-type="dfn" href="#local-invocation-id" id="ref-for-local-invocation-id">local invocation ID</a> (i,j,k), then its <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="local-invocation-index">local invocation index</dfn> is</p>
   <p>i +
  (j * workgroup_size_x) +
  (k * workgroup_size_x * workgroup_size_y)</p>
   <p class="algorithm" data-algorithm="local index range">Note that if a workgroup has <var>W</var> invocations,
then each invocation <var>I</var> the workgroup has a unique local invocation index <var>L</var>(<var>I</var>)
such that 0 ≤ <var>L</var>(<var>I</var>) &lt; <var>W</var>,
and that entire range is covered.</p>
   <p>A compute shader begins execution when a WebGPU implementation
removes a dispatch command from a queue and begins the specified work on the GPU.
The dispatch command specifies a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="dispatch-size">dispatch size</dfn>,
which is an integer triple <em>(group_count_x, group_count_y, group_count_z)</em> indicating the number of workgroups to be executed, as described in the following.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compute-shader-grid">compute shader grid</dfn> for a particular dispatch
is the set of points with integer coordinates <em>(CSi,CSj,CSk)</em> with:</p>
   <ul>
    <li data-md>
     <p>0 ≤ CSi ≤ workgroup_size_x × group_count_x</p>
    <li data-md>
     <p>0 ≤ CSj ≤ workgroup_size_y × group_count_y</p>
    <li data-md>
     <p>0 ≤ CSk ≤ workgroup_size_z × group_count_z</p>
   </ul>
   <p>where <em>workgroup_size_x</em>, <em>workgroup_size_y</em>, and <em>workgroup_size_z</em> are as above for the compute shader entry point.</p>
   <p>The work to be performed by a compute shader dispatch is to execute exactly one
invocation of the entry point for each point in the compute shader grid.</p>
   <p>An invocation’s <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="global-invocation-id">global invocation ID</dfn> is the coordinate
triple for the invocation’s corresponding compute shader grid point.</p>
   <p>The invocations are organized into workgroups, so that each invocation <em>(CSi, CSj, CSk)</em> is identified with the workgroup grid point</p>
   <p>( <em>CSi</em> mod workgroup_size_x , <em>CSj</em> mod workgroup_size_y , <em>CSk</em> mod workgroup_size_z )</p>
   <p>in <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="workgroup-id">workgroup ID</dfn></p>
   <p>( ⌊ <em>CSi</em> ÷ workgroup_size_x ⌋,
     ⌊ <em>CSj</em> ÷ workgroup_size_y ⌋,
     ⌊ <em>CSk</em> ÷ workgroup_size_z ⌋).</p>
   <p>WebGPU provides no guarantees about:</p>
   <ul>
    <li data-md>
     <p>Whether invocations from different workgroups execute concurrently.
That is, you cannot assume more than one workgroup executes at a time.</p>
    <li data-md>
     <p>Whether, once invocations from a workgroup begin executing, that other workgroups
are blocked from execution.
That is, you cannot assume that only one workgroup executes at a time.
While a workgroup is executing, the implementation may choose to
concurrently execute other workgroups as well, or other queued but unblocked work.</p>
    <li data-md>
     <p>Whether invocations from one particular workgroup begin executing before
the invocations of another workgroup.
That is, you cannot assume that workgroups are launched in a particular order.</p>
   </ul>
   <p class="issue" id="issue-04b819b3"><a class="self-link" href="#issue-04b819b3"></a> <a href="https://github.com/gpuweb/gpuweb/issues/1045">WebGPU issue 1045</a>:
Dispatch group counts must be positive.
However, how do we handle an indirect dispatch that specifies a group count of zero.</p>
   <h3 class="heading settled" data-level="12.4" id="collective-operations"><span class="secno">12.4. </span><span class="content">Collective operations TODO</span><a class="self-link" href="#collective-operations"></a></h3>
   <h4 class="heading settled" data-level="12.4.1" id="barrier"><span class="secno">12.4.1. </span><span class="content">Barrier TODO</span><a class="self-link" href="#barrier"></a></h4>
   <h4 class="heading settled" data-level="12.4.2" id="derivatives"><span class="secno">12.4.2. </span><span class="content">Derivatives</span><a class="self-link" href="#derivatives"></a></h4>
   <p>A <dfn data-dfn-type="dfn" data-noexport id="partial-derivative">partial derivative<a class="self-link" href="#partial-derivative"></a></dfn> is the rate of change of a value along an axis.</p>
   <p>Fragment shader invocations operating on neighbouring fragments (in screen-space coordinates)
collaborate to compute approximate partial derivatives.</p>
   <p>Partial derivatives of the <em>fragment coordinate</em> are computed implicitly as part
of operation of the following built-in functions:</p>
   <ul>
    <li data-md>
     <p><a href="#texturesample">textureSample</a>,</p>
    <li data-md>
     <p><a href="#texturesamplebias">textureSampleBias</a>, and</p>
    <li data-md>
     <p><a href="#texturesamplecompare">textureSampleCompare</a>.</p>
   </ul>
   <p>For these, the derivatives help determine the mip levels of texels to be sampled, or in the case of <code>textureSampleCompare</code>, sampled and compared against a reference value.</p>
   <p>Partial derivatives of <em>invocation-specified</em> values are computed by the
built-in functions described in <a href="#derivative-builtin-functions">§ 16.7 Derivative built-in functions</a>:</p>
   <ul>
    <li data-md>
     <p>dpdx, dpdxCoarse, and dpdxFine compute partial derivatives along the x axis.</p>
    <li data-md>
     <p>dpdy, dpdyCoarse, and dpdyFine compute partial derivatives along the y axis.</p>
    <li data-md>
     <p>fwidth, fwidthCoarse, and fwidthFine compute the Manhattan metric over the associated x and y partial derivatives.</p>
   </ul>
   <p>Because neighbouring invocations must collaborate to compute derivatives,
these functions must only be invoked in uniform control flow in a fragment shader.</p>
   <h4 class="heading settled" data-level="12.4.3" id="arrayed-resource-access"><span class="secno">12.4.3. </span><span class="content">Arrayed resource access TODO</span><a class="self-link" href="#arrayed-resource-access"></a></h4>
   <h3 class="heading settled" data-level="12.5" id="floating-point-evaluation"><span class="secno">12.5. </span><span class="content">Floating Point Evaluation</span><a class="self-link" href="#floating-point-evaluation"></a></h3>
   <p>WGSL follows the <a data-link-type="biblio" href="#biblio-ieee-754">IEEE-754</a> standard for floating point computation with
the following exceptions:</p>
   <ul>
    <li data-md>
     <p>No floating point exceptions are generated.</p>
    <li data-md>
     <p>Signaling NaNs may not be generated.
Any signaling NaN may be converted to a quiet NaN.</p>
    <li data-md>
     <p>Implementations may assume that NaNs, inifinities are not present</p>
     <ul>
      <li data-md>
       <p class="note" role="note"><span>Note:</span> This means some functions (e.g. <code>isInf</code>, <code>isNan</code>, <code>min</code> and <code>max</code>)
may not return the expected result due to optimizations about the presence
of NaNs and infinities.</p>
     </ul>
    <li data-md>
     <p>Implementations may ignore the sign of a zero.
That is, a zero with a positive sign may behave like a zero a with a negative sign, and vice versa.</p>
    <li data-md>
     <p>No rounding mode is specified.</p>
    <li data-md>
     <p>Implementations may flush denormalized value on the input and/or output of
any operation listed in <a href="#floating-point-accuracy">§ 12.5.1 Floating Point Accuracy</a>.</p>
     <ul>
      <li data-md>
       <p>Other operations are required to preserve denormalized numbers.</p>
     </ul>
    <li data-md>
     <p>The accuracy of operations is given in <a href="#floating-point-accuracy">§ 12.5.1 Floating Point Accuracy</a>.</p>
   </ul>
   <h4 class="heading settled" data-level="12.5.1" id="floating-point-accuracy"><span class="secno">12.5.1. </span><span class="content">Floating Point Accuracy</span><a class="self-link" href="#floating-point-accuracy"></a></h4>
   <div class="algorithm" data-algorithm="correctly rounded">
     Let <var>x</var> be the exact real-valued or infinite result of an operation when computed with unbounded precision.
The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="correctly-rounded">correctly rounded</dfn> result of the operation for floating point type <var>T</var> is: 
    <ul>
     <li data-md>
      <p><var>x</var>, when <var>x</var> is in <var>T</var>,</p>
     <li data-md>
      <p>Otherwise:</p>
      <ul>
       <li data-md>
        <p>the smallest value in <var>T</var> greater than <var>x</var>, or</p>
       <li data-md>
        <p>the largest value in <var>T</var> less than <var>x</var>.</p>
      </ul>
    </ul>
   </div>
   <p>That is, the result may be rounded up or down:
WGSL does not specify a rounding mode.</p>
   <p class="note" role="note"><span>Note:</span> Floating point types include positive and negative infinity, so
the correctly rounded result may be finite or infinite.</p>
   <p>The units in the last place, <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ulp">ULP</dfn>, for a floating point
number <code>x</code> is the minimum distance between two non-equal floating point numbers <code>a</code> and <code>b</code> such that <code>a</code> ≤ <code>x</code> ≤ <code>b</code> (i.e. <code>ulp(x) =
min</code><sub><code>a,b</code></sub><code>|b - a|</code>).</p>
   <p>In the following tables, the accuracy of an operation is provided among five
possibilities:</p>
   <ul>
    <li data-md>
     <p>Correct result (for non-floating point return values)</p>
    <li data-md>
     <p><a data-link-type="dfn" href="#correctly-rounded" id="ref-for-correctly-rounded">Correctly rounded</a></p>
    <li data-md>
     <p>A relative error expressed as <a data-link-type="dfn" href="#ulp" id="ref-for-ulp">ULP</a></p>
    <li data-md>
     <p>A function that the accuracy is <dfn data-dfn-type="dfn" data-noexport id="inherited-from">inherited from<a class="self-link" href="#inherited-from"></a></dfn>.
That is, the accuracy is equal to implementing the operation in terms of the derived function.</p>
    <li data-md>
     <p>An absolute error</p>
   </ul>
   <p>For any accuracy values specified over a range, the accuracy is undefined for
results outside that range.</p>
   <p>If an allowable return value for any operation is greater in magnitude than the
largest representable finite floating-point value, then that operation may additionally
return either the infinity with the same sign or the largest finite
value with the same sign.</p>
   <table class="data">
    <caption>Accuracy of expressions</caption>
    <thead>
     <tr>
      <th>Expression
      <th>Accuracy
      <th>
    <tbody>
     <tr>
      <td><code>x + y</code>
      <td>Correctly rounded 
     <tr>
      <td><code>x - y</code>
      <td>Correctly rounded 
     <tr>
      <td><code>x * y</code>
      <td>Correctly rounded 
     <tr>
      <td><code>x / y</code>
      <td>2.5 ULP for <code>|y|</code> in the range [2<sup>-126</sup>, 2<sup>126</sup>] 
     <tr>
      <td><code>x % y</code>
      <td>Derived from <code>x - y * trunc(x/y)</code> 
     <tr>
      <td><code>-x</code>
      <td>Correctly rounded 
     <tr>
      <td><code>x == y</code>
      <td>Correct result 
     <tr>
      <td><code>x != y</code>
      <td>Correct result 
     <tr>
      <td><code>x &lt; y</code>
      <td>Correct result 
     <tr>
      <td><code>x &lt;= y</code>
      <td>Correct result 
     <tr>
      <td><code>x > y</code>
      <td>Correct result 
     <tr>
      <td><code>x >= y</code>
      <td>Correct result 
   </table>
   <table class="data">
    <caption>Accuracy of built-in functions</caption>
    <thead>
     <tr>
      <th>Built-in Function
      <th>Accuracy 
    <tbody>
     <tr>
      <td><code>abs(x)</code>
      <td>Correctly rounded 
     <tr>
      <td><code>acos(x)</code>
      <td>Inherited from <code>atan2(sqrt(1.0 - x * x), x)</code> 
     <tr>
      <td><code>asin(x)</code>
      <td>Inherited from <code>atan2(x, sqrt(1.0 - x * x))</code> 
     <tr>
      <td><code>atan(x)</code>
      <td>4096 ULP 
     <tr>
      <td><code>atan2(x)</code>
      <td>4096 ULP 
     <tr>
      <td><code>ceil(x)</code>
      <td>Correctly rounded 
     <tr>
      <td><code>clamp(x)</code>
      <td>Correctly rounded 
     <tr>
      <td><code>cos(x)</code>
      <td>Absolute error ≤ 2<sup>-11</sup> inside the range of [-π, π] 
     <tr>
      <td><code>cosh(x)</code>
      <td>Inherited from <code>(exp(x) - exp(-x)) * 0.5</code> 
     <tr>
      <td><code>cross(x, y)</code>
      <td>Inherited from <code>(x[i] * y[j] - x[j] * y[j])</code> 
     <tr>
      <td><code>distance(x, y)</code>
      <td>Inherited from <code>length(x - y)</code> 
     <tr>
      <td><code>exp(x)</code>
      <td>3 + 2 * <var>x</var> ULP 
     <tr>
      <td><code>exp2(x)</code>
      <td>3 + 2 * <var>x</var> ULP 
     <tr>
      <td class="nowrap"><code>faceForward(x, y, z)</code>
      <td>Inherited from <code>select(-x, x, dot(z, y) &lt; 0.0)</code> 
     <tr>
      <td><code>floor(x)</code>
      <td>Correctly rounded 
     <tr>
      <td><code>fma(x, y, z)</code>
      <td>Inherited from <code>x * y + z</code> 
     <tr>
      <td><code>fract(x)</code>
      <td>Correctly rounded 
     <tr>
      <td><code>frexp(x)</code>
      <td>Correctly rounded 
     <tr>
      <td><code>inverseSqrt(x)</code>
      <td>2 ULP 
     <tr>
      <td><code>ldexp(x, y)</code>
      <td>Correctly rounded 
     <tr>
      <td><code>length(x)</code>
      <td>Inherited from <code>sqrt(dot(x, x))</code> 
     <tr>
      <td><code>log(x)</code>
      <td>3 ULP outside the range [0.5, 2.0].<br>Absolute error &lt; 2<sup>-21</sup> inside the range [0.5, 2.0] 
     <tr>
      <td><code>log2(x)</code>
      <td>3 ULP outside the range [0.5, 2.0].<br>Absolute error &lt; 2<sup>-21</sup> inside the range [0.5, 2.0] 
     <tr>
      <td><code>max(x, y)</code>
      <td>Correctly rounded 
     <tr>
      <td><code>min(x, y)</code>
      <td>Correctly rounded 
     <tr>
      <td><code>mix(x, y, z)</code>
      <td>Inherited from <code>x - (1.0 - z) + y * z</code> 
     <tr>
      <td><code>modf(x)</code>
      <td>Correctly rounded 
     <tr>
      <td><code>normalize(x)</code>
      <td>Inherited from <code>x - length(x)</code> 
     <tr>
      <td><code>pow(x, y)</code>
      <td>Inherited from <code>exp2(y * log2(x))</code> 
     <tr>
      <td><code>reflect(x, y)</code>
      <td>Inherited from <code>x - 2.0 * dot(x, y) * y</code> 
     <tr>
      <td><code>refract(x, y, z)</code>
      <td>Inherited from <code>z * x - (z * dot(y, x) + sqrt(k)) * y</code>,<br>where <code>k = 1.0 - z * z * (1.0 - dot(y, x) * dot(y, x))</code><br>If <code>k &lt; 0.0</code> the result is precisely 0.0 
     <tr>
      <td><code>round(x)</code>
      <td>Correctly rounded 
     <tr>
      <td><code>sign(x)</code>
      <td>Correctly rounded 
     <tr>
      <td><code>sin(x)</code>
      <td>Absolute error ≤ 2<sup>-11</sup> inside the range [-π, π] 
     <tr>
      <td><code>sinh(x)</code>
      <td>Inherited from <code>(exp(x) - exp(-x)) * 0.5</code> 
     <tr>
      <td><code>smoothStep(x, y, z)</code>
      <td>Inherited from <code>t * t * (3.0 - 2.0 * t)</code>,<br>where <code>t = clamp((z - x) / (y - x), 0.0, 1.0)</code> 
     <tr>
      <td><code>sqrt(x)</code>
      <td>Inherited from <code>1.0 / inverseSqrt(x)</code> 
     <tr>
      <td><code>step(x, y)</code>
      <td>Correctly rounded 
     <tr>
      <td><code>tan(x)</code>
      <td>Inherited from <code>sin(x) / cos(x)</code> 
     <tr>
      <td><code>tanh(x)</code>
      <td>Inherited from <code>sinh(x) / cosh(x)</code> 
     <tr>
      <td><code>trunc(x)</code>
      <td>Correctly rounded 
   </table>
   <p><dfn data-dfn-type="dfn" data-noexport id="reassociation">Reassociation<a class="self-link" href="#reassociation"></a></dfn> is the reordering of operations in an
expression such that the answer is the same if computed exactly. For example:</p>
   <ul>
    <li data-md>
     <p><code>(a + b) + c</code> reassociates to <code>a + (b + c)</code></p>
    <li data-md>
     <p><code>(a - b) + c</code> reassociates to <code>(a + c) - b</code></p>
    <li data-md>
     <p><code>(a * b) / c</code> reassociates to <code>(a / c) * b</code></p>
   </ul>
   <p>However, the result may not be the same when computed in floating point.
The reassociated result may be inaccurate due to approximation, or may trigger
an overflow or NaN when computing intermediate results.</p>
   <p>An implementation may reassociate and/or fuse operations if the optimization is
at least as accurate as the original formulation.</p>
   <h4 class="heading settled" data-level="12.5.2" id="floating-point-conversion"><span class="secno">12.5.2. </span><span class="content">Floating point conversion</span><a class="self-link" href="#floating-point-conversion"></a></h4>
   <p>In this section, a floating point type may be any of:</p>
   <ul>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#f32" id="ref-for-f32⑤">f32</a> type in WGSL.</p>
    <li data-md>
     <p>A hypothetical type corresponding to a binary format defined by the <a data-link-type="biblio" href="#biblio-ieee-754">IEEE-754</a> floating point standard.</p>
     <p class="note" role="note"><span>Note:</span> The binary16 format is referenced in this way.</p>
   </ul>
   <p class="note" role="note"><span>Note:</span> Recall that the <a data-link-type="dfn" href="#f32" id="ref-for-f32⑥">f32</a> WGSL type corresponds to the IEEE-754 binary32 format.</p>
   <p>When converting a floating point scalar value to an integral type:</p>
   <ul>
    <li data-md>
     <p>If the original value is exactly representable in the destination type, then the result is that value.</p>
    <li data-md>
     <p>If the original value has a fractional component, then it cannot be represented exactly in the destination type, and the result is TODO</p>
    <li data-md>
     <p>If the original value is out of range of the destination type, then TODO.</p>
   </ul>
   <p>When converting a value to a floating point type:</p>
   <ul>
    <li data-md>
     <p>If the original value is exactly representable in the destination type, then the result is that value.</p>
     <ul>
      <li data-md>
       <p>If the original value is zero and of integral type, then the resulting value has a zero sign bit.</p>
     </ul>
    <li data-md>
     <p>Otherwise, the original value is not exactly representable.</p>
     <ul>
      <li data-md>
       <p>If the original value is different from but lies between two adjacent values representable in the destination type,
 then the result is one of those two values.
 WGSL does not specify whether the larger or smaller representable
 value is chosen, and different instances of such a conversion may choose differently.</p>
      <li data-md>
       <p>Otherwise, if the original value lies outside the range of the destination type.</p>
       <ul>
        <li data-md>
         <p>This does not occur when the original types is one of <a data-link-type="dfn" href="#i32" id="ref-for-i32⑨">i32</a> or <a data-link-type="dfn" href="#u32" id="ref-for-u32⑧">u32</a> and the destination type is <a data-link-type="dfn" href="#f32" id="ref-for-f32⑦">f32</a>.</p>
        <li data-md>
         <p>This does not occur when the source type is a floating point type with fewer exponent and mantissa bits.</p>
        <li data-md>
         <p>If the source type is a floating point type with more mantissa bits than the destination type, then:</p>
         <ul>
          <li data-md>
           <p>The extra mantissa bits of the source value may be discarded (treated as if they are 0).</p>
           <ul>
            <li data-md>
             <p>If the resulting value is the maximum normal value of the destination type, then that is the result.</p>
           </ul>
          <li data-md>
           <p>Otherwise the result is the infinity value with the same sign as the source value.</p>
         </ul>
       </ul>
      <li data-md>
       <p>Otherwise, if the original value is a NaN for the source type, then the result is a NaN in the destination type.</p>
     </ul>
   </ul>
   <p class="note" role="note"><span>NOTE:</span> An integer value may lie between two adjacent representable floating point values.
In particular, the <a data-link-type="dfn" href="#f32" id="ref-for-f32⑧">f32</a> type uses 23 explicit fractional bits.
Additionally, when the floating point value is in the normal range (the exponent is neither extreme value), then the mantissa is
the set of fractional bits together with an extra 1-bit at the most significant position at bit position 23.
Then, for example, integers 2<sup>28</sup> and 1+2<sup>28</sup> both map to the same floating point value: the difference in the
least significant 1 bit is not representable by the floating point format.
This kind of collision occurs for pairs of adjacent integers with a magnitude of at least 2<sup>25</sup>.</p>
   <p class="issue" id="issue-5abef8be"><a class="self-link" href="#issue-5abef8be"></a> (dneto) Default rounding mode is an implementation choice.  Is that what we want?</p>
   <p class="issue" id="issue-d2d1e989"><a class="self-link" href="#issue-d2d1e989"></a> Check behaviour of the f32 to f16 conversion for numbers just beyond the max normal f16 values.
I’ve written what an NVIDIA GPU does.  See https://github.com/google/amber/pull/918 for an executable test case.</p>
   <h2 class="heading settled" data-level="13" id="memory-model"><span class="secno">13. </span><span class="content">Memory Model TODO</span><a class="self-link" href="#memory-model"></a></h2>
   <h2 class="heading settled" data-level="14" id="grammar"><span class="secno">14. </span><span class="content">Keyword and Token Summary</span><a class="self-link" href="#grammar"></a></h2>
   <h3 class="heading settled" data-level="14.1" id="keyword-summary"><span class="secno">14.1. </span><span class="content">Keyword Summary</span><a class="self-link" href="#keyword-summary"></a></h3>
   <table class="data">
    <caption>Type-defining keywords</caption>
    <thead>
     <tr>
      <th>Token
      <th>Definition 
    <tbody>
     <tr>
      <td><code>ARRAY</code>
      <td>array 
     <tr>
      <td><code>ATOMIC</code>
      <td>atomic 
     <tr>
      <td><code>BOOL</code>
      <td>bool 
     <tr>
      <td><code>FLOAT32</code>
      <td>f32 
     <tr>
      <td><code>INT32</code>
      <td>i32 
     <tr>
      <td><code>MAT2x2</code>
      <td>mat2x2  // 2 column x 2 row 
     <tr>
      <td><code>MAT2x3</code>
      <td>mat2x3  // 2 column x 3 row 
     <tr>
      <td><code>MAT2x4</code>
      <td>mat2x4  // 2 column x 4 row 
     <tr>
      <td><code>MAT3x2</code>
      <td>mat3x2  // 3 column x 2 row 
     <tr>
      <td><code>MAT3x3</code>
      <td>mat3x3  // 3 column x 3 row 
     <tr>
      <td><code>MAT3x4</code>
      <td>mat3x4  // 3 column x 4 row 
     <tr>
      <td><code>MAT4x2</code>
      <td>mat4x2  // 4 column x 2 row 
     <tr>
      <td><code>MAT4x3</code>
      <td>mat4x3  // 4 column x 3 row 
     <tr>
      <td><code>MAT4x4</code>
      <td>mat4x4  // 4 column x 4 row 
     <tr>
      <td><code>POINTER</code>
      <td>ptr 
     <tr>
      <td><code>SAMPLER</code>
      <td>sampler 
     <tr>
      <td><code>SAMPLER_COMPARISON</code>
      <td>sampler_comparison 
     <tr>
      <td><code>STRUCT</code>
      <td>struct 
     <tr>
      <td><code>TEXTURE_1D</code>
      <td>texture_1d 
     <tr>
      <td><code>TEXTURE_2D</code>
      <td>texture_2d 
     <tr>
      <td><code>TEXTURE_2D_ARRAY</code>
      <td>texture_2d_array 
     <tr>
      <td><code>TEXTURE_3D</code>
      <td>texture_3d 
     <tr>
      <td><code>TEXTURE_CUBE</code>
      <td>texture_cube 
     <tr>
      <td><code>TEXTURE_CUBE_ARRAY</code>
      <td>texture_cube_array 
     <tr>
      <td><code>TEXTURE_MULTISAMPLED_2D</code>
      <td>texture_multisampled_2d 
     <tr>
      <td><code>TEXTURE_STORAGE_1D</code>
      <td>texture_storage_1d 
     <tr>
      <td><code>TEXTURE_STORAGE_2D</code>
      <td>texture_storage_2d 
     <tr>
      <td><code>TEXTURE_STORAGE_2D_ARRAY</code>
      <td>texture_storage_2d_array 
     <tr>
      <td><code>TEXTURE_STORAGE_3D</code>
      <td>texture_storage_3d 
     <tr>
      <td><code>TEXTURE_DEPTH_2D</code>
      <td>texture_depth_2d 
     <tr>
      <td><code>TEXTURE_DEPTH_2D_ARRAY</code>
      <td>texture_depth_2d_array 
     <tr>
      <td><code>TEXTURE_DEPTH_CUBE</code>
      <td>texture_depth_cube 
     <tr>
      <td><code>TEXTURE_DEPTH_CUBE_ARRAY</code>
      <td>texture_depth_cube_array 
     <tr>
      <td><code>TEXTURE_DEPTH_MULTISAMPLED_2D</code>
      <td>texture_depth_multisampled_2d 
     <tr>
      <td><code>UINT32</code>
      <td>u32 
     <tr>
      <td><code>VEC2</code>
      <td>vec2 
     <tr>
      <td><code>VEC3</code>
      <td>vec3 
     <tr>
      <td><code>VEC4</code>
      <td>vec4 
   </table>
   <table class="data">
    <caption>Other keywords</caption>
    <thead>
     <tr>
      <td>Token
      <td>Definition 
    <tbody>
     <tr>
      <td><code>BITCAST</code>
      <td>bitcast 
     <tr>
      <td><code>BLOCK</code>
      <td>block 
     <tr>
      <td><code>BREAK</code>
      <td>break 
     <tr>
      <td><code>CASE</code>
      <td>case 
     <tr>
      <td><code>CONTINUE</code>
      <td>continue 
     <tr>
      <td><code>CONTINUING</code>
      <td>continuing 
     <tr>
      <td><code>DEFAULT</code>
      <td>default 
     <tr>
      <td><code>DISCARD</code>
      <td>discard 
     <tr>
      <td><code>ELSE</code>
      <td>else 
     <tr>
      <td><code>ELSE_IF</code>
      <td>elseif 
     <tr>
      <td><code>ENABLE</code>
      <td>enable 
     <tr>
      <td><code>FALLTHROUGH</code>
      <td>fallthrough 
     <tr>
      <td><code>FALSE</code>
      <td>false 
     <tr>
      <td><code>FN</code>
      <td>fn 
     <tr>
      <td><code>FOR</code>
      <td>for 
     <tr>
      <td><code>FUNCTION</code>
      <td>function 
     <tr>
      <td><code>IF</code>
      <td>if 
     <tr>
      <td><code>LET</code>
      <td>let 
     <tr>
      <td><code>LOOP</code>
      <td>loop 
     <tr>
      <td><code>PRIVATE</code>
      <td>private 
     <tr>
      <td><code>READ</code>
      <td>read 
     <tr>
      <td><code>READ_WRITE</code>
      <td>read_write 
     <tr>
      <td><code>RETURN</code>
      <td>return 
     <tr>
      <td><code>STORAGE</code>
      <td>storage 
     <tr>
      <td><code>SWITCH</code>
      <td>switch 
     <tr>
      <td><code>TRUE</code>
      <td>true 
     <tr>
      <td><code>TYPE</code>
      <td>type 
     <tr>
      <td><code>UNIFORM</code>
      <td>uniform 
     <tr>
      <td><code>VAR</code>
      <td>var 
     <tr>
      <td><code>WORKGROUP</code>
      <td>workgroup 
     <tr>
      <td><code>WRITE</code>
      <td>write 
   </table>
    Issue: Should read, write, and read_write be not completely reserved?  They are only used in specific contexts. 
   <table class="data">
    <caption>Image format keywords</caption>
    <thead>
     <tr>
      <td>Token
      <td>Definition 
    <tbody>
     <tr>
      <td><code>R8UNORM</code>
      <td>r8unorm 
     <tr>
      <td><code>R8SNORM</code>
      <td>r8snorm 
     <tr>
      <td><code>R8UINT</code>
      <td>r8uint 
     <tr>
      <td><code>R8SINT</code>
      <td>r8sint 
     <tr>
      <td><code>R16UINT</code>
      <td>r16uint 
     <tr>
      <td><code>R16SINT</code>
      <td>r16sint 
     <tr>
      <td><code>R16FLOAT</code>
      <td>r16float 
     <tr>
      <td><code>RG8UNORM</code>
      <td>rg8unorm 
     <tr>
      <td><code>RG8SNORM</code>
      <td>rg8snorm 
     <tr>
      <td><code>RG8UINT</code>
      <td>rg8uint 
     <tr>
      <td><code>RG8SINT</code>
      <td>rg8sint 
     <tr>
      <td><code>R32UINT</code>
      <td>r32uint 
     <tr>
      <td><code>R32SINT</code>
      <td>r32sint 
     <tr>
      <td><code>R32FLOAT</code>
      <td>r32float 
     <tr>
      <td><code>RG16UINT</code>
      <td>rg16uint 
     <tr>
      <td><code>RG16SINT</code>
      <td>rg16sint 
     <tr>
      <td><code>RG16FLOAT</code>
      <td>rg16float 
     <tr>
      <td><code>RGBA8UNORM</code>
      <td>rgba8unorm 
     <tr>
      <td><code>RGBA8UNORM-SRGB</code>
      <td>rgba8unorm_srgb 
     <tr>
      <td><code>RGBA8SNORM</code>
      <td>rgba8snorm 
     <tr>
      <td><code>RGBA8UINT</code>
      <td>rgba8uint 
     <tr>
      <td><code>RGBA8SINT</code>
      <td>rgba8sint 
     <tr>
      <td><code>BGRA8UNORM</code>
      <td>bgra8unorm 
     <tr>
      <td><code>BGRA8UNORM-SRGB</code>
      <td>bgra8unorm_srgb 
     <tr>
      <td><code>RGB10A2UNORM</code>
      <td>rgb10a2unorm 
     <tr>
      <td><code>RG11B10FLOAT</code>
      <td>rg11b10float 
     <tr>
      <td><code>RG32UINT</code>
      <td>rg32uint 
     <tr>
      <td><code>RG32SINT</code>
      <td>rg32sint 
     <tr>
      <td><code>RG32FLOAT</code>
      <td>rg32float 
     <tr>
      <td><code>RGBA16UINT</code>
      <td>rgba16uint 
     <tr>
      <td><code>RGBA16SINT</code>
      <td>rgba16sint 
     <tr>
      <td><code>RGBA16FLOAT</code>
      <td>rgba16float 
     <tr>
      <td><code>RGBA32UINT</code>
      <td>rgba32uint 
     <tr>
      <td><code>RGBA32SINT</code>
      <td>rgba32sint 
     <tr>
      <td><code>RGBA32FLOAT</code>
      <td>rgba32float 
   </table>
   <p>TODO(dneto): Eliminate the image formats that are not used in storage images.
For example SRGB formats (bgra8unorm_srgb), mixed channel widths (rg11b10float), out-of-order channels (bgra8unorm)</p>
   <h3 class="heading settled" data-level="14.2" id="reserved-keywords"><span class="secno">14.2. </span><span class="content">Reserved Keywords</span><a class="self-link" href="#reserved-keywords"></a></h3>
    The following is a list of keywords which are reserved for future expansion. 
   <table class="data">
    <tbody>
     <tr>
      <td>asm 
      <td>bf16 
      <td>const 
      <td>do 
      <td>enum 
     <tr>
      <td>f16 
      <td>f64 
      <td>handle 
      <td>i8 
      <td>i16 
     <tr>
      <td>i64 
      <td>mat 
      <td>premerge 
      <td>regardless 
      <td>typedef 
     <tr>
      <td>u8 
      <td>u16 
      <td>u64 
      <td>unless 
      <td>using 
     <tr>
      <td>vec 
      <td>void 
      <td>while 
   </table>
   <h3 class="heading settled" data-level="14.3" id="syntactic-tokens"><span class="secno">14.3. </span><span class="content">Syntactic Tokens</span><a class="self-link" href="#syntactic-tokens"></a></h3>
   <table class="data">
    <tbody>
     <tr>
      <td><code>AND</code>
      <td><code>&amp;</code> 
     <tr>
      <td><code>AND_AND</code>
      <td><code>&amp;&amp;</code> 
     <tr>
      <td><code>ARROW</code>
      <td><code>-></code> 
     <tr>
      <td><code>ATTR_LEFT</code>
      <td><code>[[</code> 
     <tr>
      <td><code>ATTR_RIGHT</code>
      <td><code>]]</code> 
     <tr>
      <td><code>FORWARD_SLASH</code>
      <td><code>/</code> 
     <tr>
      <td><code>BANG</code>
      <td><code>!</code> 
     <tr>
      <td><code>BRACKET_LEFT</code>
      <td><code>[</code> 
     <tr>
      <td><code>BRACKET_RIGHT</code>
      <td><code>]</code> 
     <tr>
      <td><code>BRACE_LEFT</code>
      <td><code>{</code> 
     <tr>
      <td><code>BRACE_RIGHT</code>
      <td><code>}</code> 
     <tr>
      <td><code>COLON</code>
      <td><code>:</code> 
     <tr>
      <td><code>COMMA</code>
      <td><code>,</code> 
     <tr>
      <td><code>EQUAL</code>
      <td><code>=</code> 
     <tr>
      <td><code>EQUAL_EQUAL</code>
      <td><code>==</code> 
     <tr>
      <td><code>NOT_EQUAL</code>
      <td><code>!=</code> 
     <tr>
      <td><code>GREATER_THAN</code>
      <td><code>></code> 
     <tr>
      <td><code>GREATER_THAN_EQUAL</code>
      <td><code>>=</code> 
     <tr>
      <td><code>SHIFT_RIGHT</code>
      <td><code>>></code> 
     <tr>
      <td><code>LESS_THAN</code>
      <td><code>&lt;</code> 
     <tr>
      <td><code>LESS_THAN_EQUAL</code>
      <td><code>&lt;=</code> 
     <tr>
      <td><code>SHIFT_LEFT</code>
      <td><code>&lt;&lt;</code> 
     <tr>
      <td><code>MODULO</code>
      <td><code>%</code> 
     <tr>
      <td><code>MINUS</code>
      <td><code>-</code> 
     <tr>
      <td><code>MINUS_MINUS</code>
      <td><code>--</code> 
     <tr>
      <td><code>PERIOD</code>
      <td><code>.</code> 
     <tr>
      <td><code>PLUS</code>
      <td><code>+</code> 
     <tr>
      <td><code>PLUS_PLUS</code>
      <td><code>++</code> 
     <tr>
      <td><code>OR</code>
      <td><code>|</code> 
     <tr>
      <td><code>OR_OR</code>
      <td><code>||</code> 
     <tr>
      <td><code>PAREN_LEFT</code>
      <td><code>(</code> 
     <tr>
      <td><code>PAREN_RIGHT</code>
      <td><code>)</code> 
     <tr>
      <td><code>SEMICOLON</code>
      <td><code>;</code> 
     <tr>
      <td><code>STAR</code>
      <td><code>*</code> 
     <tr>
      <td><code>TILDE</code>
      <td><code>~</code> 
     <tr>
      <td><code>XOR</code>
      <td><code>^</code> 
   </table>
   <p class="note" role="note"><span>Note:</span> The <code>MINUS_MINUS</code> and <code>PLUS_PLUS</code> tokens are reserved, i.e. they are not used in any grammar productions.
For example <code>x--</code> and <code>++i</code> are not syntactically valid expressions in WGSL.</p>
   <h2 class="heading settled" data-level="15" id="builtin-variables"><span class="secno">15. </span><span class="content">Built-in variables</span><a class="self-link" href="#builtin-variables"></a></h2>
   <p>See <a href="#builtin-inputs-outputs">§ 9.3.1.1 Built-in Inputs and Outputs</a> for how to declare a built-in variable.</p>
   <table class="data">
    <thead>
     <tr>
      <th>Built-in
      <th>Stage
      <th>Input or Output
      <th>Store type
      <th>Description 
    <tbody>
     <tr>
      <td><code>vertex_index</code> 
      <td>vertex 
      <td>in 
      <td>u32 
      <td style="width:50%">
       Index of the current vertex within the current API-level draw command,
         independent of draw instancing. 
       <p>For a non-indexed draw, the first vertex has an index equal to the <code>firstVertex</code> argument
         of the draw, whether provided directly or indirectly.
         The index is incremented by one for each additional vertex in the draw instance.</p>
       <p>For an indexed draw, the index is equal to the index buffer entry for
         vertex, plus the <code>baseVertex</code> argument of the draw, whether provided directly or indirectly.</p>
     <tr>
      <td><code>instance_index</code> 
      <td>vertex 
      <td>in 
      <td>u32 
      <td style="width:50%">
       Instance index of the current vertex within the current API-level draw command. 
       <p>The first instance has an index equal to the <code>firstInstance</code> argument of the draw,
         whether provided directly or indirectly.
         The index is incremented by one for each additional instance in the draw.</p>
     <tr>
      <td><code>position</code> 
      <td>vertex 
      <td>out 
      <td>vec4&lt;f32> 
      <td style="width:50%">Output position of the current vertex, using homogeneous coordinates.
      After homogeneous normalization (where each of the <em>x</em>, <em>y</em>, and <em>z</em> components
      are divided by the <em>w</em> component), the position is in the WebGPU normalized device
      coordinate space.
      See <a href="https://gpuweb.github.io/gpuweb/#coordinate-systems">WebGPU § Coordinate Systems</a>. 
     <tr>
      <td><code>position</code> 
      <td>fragment 
      <td>in 
      <td>vec4&lt;f32> 
      <td style="width:50%">Framebuffer position of the current fragment, using normalized homogeneous
      coordinates.
      (The <em>x</em>, <em>y</em>, and <em>z</em> components have already been scaled such that <em>w</em> is now 1.)
      See <a href="https://gpuweb.github.io/gpuweb/#coordinate-systems">WebGPU § Coordinate Systems</a>. 
     <tr>
      <td><code>front_facing</code> 
      <td>fragment 
      <td>in 
      <td>bool 
      <td style="width:50%">True when the current fragment is on a front-facing primitive.
         False otherwise.
         See <a href="https://gpuweb.github.io/gpuweb/#front-facing">WebGPU § Front-facing</a>. 
     <tr>
      <td><code>frag_depth</code> 
      <td>fragment 
      <td>out 
      <td>f32 
      <td style="width:50%">Updated depth of the fragment, in the viewport depth range.
      See <a href="https://gpuweb.github.io/gpuweb/#coordinate-systems">WebGPU § Coordinate Systems</a>. 
     <tr>
      <td><code>local_invocation_id</code> 
      <td>compute 
      <td>in 
      <td>vec3&lt;u32> 
      <td style="width:50%">The current invocation’s <a data-link-type="dfn" href="#local-invocation-id" id="ref-for-local-invocation-id①">local invocation ID</a>,
            i.e. its position in the <a data-link-type="dfn" href="#workgroup-grid" id="ref-for-workgroup-grid①">workgroup grid</a>. 
     <tr>
      <td><code>local_invocation_index</code> 
      <td>compute 
      <td>in 
      <td>u32 
      <td style="width:50%">The current invocation’s <a data-link-type="dfn" href="#local-invocation-index" id="ref-for-local-invocation-index">local invocation index</a>, a linearized index of
          the invocation’s position within the <a data-link-type="dfn" href="#workgroup-grid" id="ref-for-workgroup-grid②">workgroup grid</a>. 
     <tr>
      <td><code>global_invocation_id</code> 
      <td>compute 
      <td>in 
      <td>vec3&lt;u32> 
      <td style="width:50%">The current invocation’s <a data-link-type="dfn" href="#global-invocation-id" id="ref-for-global-invocation-id">global invocation ID</a>,
          i.e. its position in the <a data-link-type="dfn" href="#compute-shader-grid" id="ref-for-compute-shader-grid">compute shader grid</a>. 
     <tr>
      <td><code>workgroup_id</code> 
      <td>compute 
      <td>in 
      <td>vec3&lt;u32> 
      <td style="width:50%">The current invocation’s <a data-link-type="dfn" href="#workgroup-id" id="ref-for-workgroup-id">workgroup ID</a>,
          i.e. the position of the workgroup in the <a data-link-type="dfn" href="#workgroup-grid" id="ref-for-workgroup-grid③">workgroup grid</a>. 
     <tr>
      <td><code>num_workgroups</code> 
      <td>compute 
      <td>in 
      <td>vec3&lt;u32> 
      <td style="width:50%">The <a data-link-type="dfn" href="#dispatch-size" id="ref-for-dispatch-size">dispatch size</a>, <code>vec&lt;u32>(group_count_x, group_count_y, group_count_z)</code>, of the compute shader <a href="https://gpuweb.github.io/gpuweb/#dom-gpucomputepassencoder-dispatch">dispatched</a> by the API. 
     <tr>
      <td><code>sample_index</code> 
      <td>fragment 
      <td>in 
      <td>u32 
      <td style="width:50%">Sample index for the current fragment.
         The value is least 0 and at most <code>sampleCount</code>-1, where <a href="https://gpuweb.github.io/gpuweb/#dom-gpurenderpipelinedescriptor-samplecount">sampleCount</a> is the number of MSAA samples specified for the GPU render pipeline. <br>See <a href="https://gpuweb.github.io/gpuweb/#render-pipeline">WebGPU § GPURenderPipeline</a>. 
     <tr>
      <td><code>sample_mask</code> 
      <td>fragment 
      <td>in 
      <td>u32 
      <td style="width:50%">Sample coverage mask for the current fragment.
         It contains a bitmask indicating which samples in this fragment are covered
         by the primitive being rendered. <br>See <a href="https://gpuweb.github.io/gpuweb/#sample-masking">WebGPU § Sample Masking</a>. 
     <tr>
      <td><code>sample_mask</code> 
      <td>fragment 
      <td>out 
      <td>u32 
      <td style="width:50%">Sample coverage mask control for the current fragment.
         The last value written to this variable becomes the <a href="https://gpuweb.github.io/gpuweb/#shader-output-mask">shader-output mask</a>.
         Zero bits in the written value will cause corresponding samples in
         the color attachments to be discarded. <br>See <a href="https://gpuweb.github.io/gpuweb/#sample-masking">WebGPU § Sample Masking</a>. 
   </table>
   <div class="example wgsl global-scope no-marker" id="example-cba5eac2">
    <a class="self-link" href="#example-cba5eac2"></a>
    <div class="marker">EXAMPLE: Declaring built-in variables</div>
<pre> struct VertexOutput {
   [[builtin(position)]] my_pos: vec4&lt;f32>;
   //   OpDecorate %my_pos BuiltIn Position
   //   %float = OpTypeFloat 32
   //   %v4float = OpTypeVector %float 4
   //   %ptr = OpTypePointer Output %v4float
   //   %my_pos = OpVariable %ptr Output
 };

 [[stage(vertex)]]
 fn vs_main(
   [[builtin(vertex_index)]] my_index: u32,
   //   OpDecorate %my_index BuiltIn VertexIndex
   //   %uint = OpTypeInt 32 0
   //   %ptr = OpTypePointer Input %uint
   //   %my_index = OpVariable %ptr Input
   [[builtin(instance_index)]] my_inst_index: u32,
   //    OpDecorate %my_inst_index BuiltIn InstanceIndex
 ) -> VertexOutput;

 struct FragmentOutput {
   [[builtin(frag_depth)]] depth: f32;
   //     OpDecorate %depth BuiltIn FragDepth
   [[builtin(sample_mask)]] mask_out: u32;
   //      OpDecorate %mask_out BuiltIn SampleMask ; an output variable
 };

 [[stage(fragment)]]
 fn fs_main(
   [[builtin(front_facing)]] is_front: bool,
   //     OpDecorate %is_front BuiltIn FrontFacing
   [[builtin(position)]] coord: vec4&lt;f32>,
   //     OpDecorate %coord BuiltIn FragCoord
   [[builtin(sample_index)]] my_sample_index: u32,
   //      OpDecorate %my_sample_index BuiltIn SampleId
   [[builtin(sample_mask_in)]] mask_in: u32,
   //      OpDecorate %mask_in BuiltIn SampleMask ; an input variable
   //      OpDecorate %mask_in Flat
 ) -> FragmentOutput;

 [[stage(compute)]]
 fn cs_main(
   [[builtin(local_invocation_id)]] local_id: vec3&lt;u32>,
   //     OpDecorate %local_id BuiltIn LocalInvocationId
   [[builtin(local_invocation_index)]] local_index: u32,
   //     OpDecorate %local_index BuiltIn LocalInvocationIndex
   [[builtin(global_invocation_id)]] global_id: vec3&lt;u32>,
   //      OpDecorate %global_id BuiltIn GlobalInvocationId
);
</pre>
   </div>
   <h2 class="heading settled" data-level="16" id="builtin-functions"><span class="secno">16. </span><span class="content">Built-in functions</span><a class="self-link" href="#builtin-functions"></a></h2>
   <p>Certain functions are always available in a WGSL program,
and are provided by the implementation.
These are called <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="built-in-functions">built-in functions</dfn>.</p>
   <p>Since a built-in function is always in scope, it is an error to attempt to redefine
one or to use the name of a built-in function as an identifier for any other
kind of declaration.</p>
   <p>Unlike ordinary functions defined in a WGSL program,
a built-in function may use the same function name with different
sets of parameters.
In other words, a built-in function may have more than one <em>overload</em>,
but ordinary function definitions in WGSL may not.</p>
   <p>When calling a built-in function, all arguments to the function are evaluated
before function evaulation begins.</p>
   <p>TODO(dneto): Elaborate the descriptions of the built-in functions.  So far I’ve only reorganized
the contents of the existing table.</p>
   <p>TODO: Explain the use of a function prototype in the table: provides name, formal parameter list, and return type.
That’s not a full user-defined function declaration.</p>
   <h3 class="heading settled" data-level="16.1" id="logical-builtin-functions"><span class="secno">16.1. </span><span class="content">Logical built-in functions</span><a class="self-link" href="#logical-builtin-functions"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <th>Precondition
      <td>Conclusion
      <td>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="vector all">
      <td><var>e</var>: vecN&lt;bool> 
      <td><code>all(</code><var>e</var><code>)</code>: bool 
      <td>Returns true if each component of <var>e</var> is true.
    (OpAll) 
     <tr class="algorithm" data-algorithm="vector any">
      <td><var>e</var>: vecN&lt;bool> 
      <td><code>any(</code><var>e</var><code>)</code>: bool 
      <td>Returns true if any component of <var>e</var> is true.
    (OpAny) 
     <tr class="algorithm" data-algorithm="scalar select">
      <td><var>T</var> is a scalar 
      <td><code>select(</code><var>f</var><code>:</code><var>T</var><code>,</code><var>t</var><code>:</code><var>T</var><code>,</code><var>cond</var><code>: bool)</code>: <var>T</var> 
      <td>Returns <var>t</var> when <var>cond</var> is true, and <var>f</var> otherwise.
    (OpSelect) 
     <tr class="algorithm" data-algorithm="vector select">
      <td><var>T</var> is a scalar 
      <td><code>select(</code><var>f</var><code>: vecN&lt;</code><var>T</var><code>>,</code><var>t</var><code>: vecN&lt;</code><var>T</var><code>,</code><var>cond</var><code>: vecN&lt;bool>>)</code> 
      <td><a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑤⑥">Component-wise</a> selection. Result component <var>i</var> is evaluated as <code>select(</code><var>f</var><code>[</code><var>i</var><code>],</code><var>t</var><code>[</code><var>i</var><code>],</code><var>cond</var><code>[</code><var>i</var><code>])</code>.
    (OpSelect) 
   </table>
   <h3 class="heading settled" data-level="16.2" id="value-testing-builtin-functions"><span class="secno">16.2. </span><span class="content">Value-testing built-in functions</span><a class="self-link" href="#value-testing-builtin-functions"></a></h3>
   <table class="data">
    <caption>Unary operators</caption>
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr>
      <td rowspan="4"> <var>e</var>: <var>T</var><br> <var>T</var> is f32 or vec<var>N</var>&lt;f32><br> <var>TR</var> is bool if <var>T</var> is a scalar, or<br> vec<var>N</var>&lt;bool> if <var>T</var> is a vector 
      <td class="nowrap"><code>isNan(</code><var>e</var><code>) -></code><var>TR</var> 
      <td>Test for NaN according to <a data-link-type="biblio" href="#biblio-ieee-754">IEEE-754</a>.<br> <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑤⑦">Component-wise</a> when <var>T</var> is a vector. (OpIsNan) 
     <tr>
      <td class="nowrap"><code>isInf(</code><var>e</var><code>) -></code><var>TR</var> 
      <td>Test for infinity according to <a data-link-type="biblio" href="#biblio-ieee-754">IEEE-754</a>.<br> <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑤⑧">Component-wise</a> when <var>T</var> is a vector. (OpIsInf) 
     <tr>
      <td class="nowrap"><code>isFinite(</code><var>e</var><code>) -></code><var>TR</var> 
      <td>Test a finite value according to <a data-link-type="biblio" href="#biblio-ieee-754">IEEE-754</a>.<br> <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑤⑨">Component-wise</a> when <var>T</var> is a vector. 
     <tr>
      <td class="nowrap"><code>isNormal(</code><var>e</var><code>) -></code><var>TR</var> 
      <td>Test a normal value according to <a data-link-type="biblio" href="#biblio-ieee-754">IEEE-754</a>.<br> <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑥⓪">Component-wise</a> when <var>T</var> is a vector. 
     <tr class="algorithm" data-algorithm="runtime-sized array length">
      <td><var>e</var>: ptr&lt;storage,array&lt;<var>T</var>>> 
      <td><code>arrayLength(</code><var>e</var><code>)</code>: u32
      <td>Returns the number of elements in the <a data-link-type="dfn" href="#runtime-sized" id="ref-for-runtime-sized⑦">runtime-sized</a> array.<br> (OpArrayLength, but the implementation has to trace back to get the pointer to the enclosing struct.) 
   </table>
   <h3 class="heading settled" data-level="16.3" id="float-builtin-functions"><span class="secno">16.3. </span><span class="content">Float built-in functions</span><a class="self-link" href="#float-builtin-functions"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="float abs">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>abs(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the absolute value of <var>e</var> (e.g. <var>e</var> with a positive sign bit). <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑥①">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Fabs) 
     <tr class="algorithm" data-algorithm="acos">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>acos(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the arc cosine of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑥②">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Acos) 
     <tr class="algorithm" data-algorithm="asin">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>asin(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the arc sine of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑥③">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Asin) 
     <tr class="algorithm" data-algorithm="atan">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>atan(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the arc tangent of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑥④">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Atan) 
     <tr class="algorithm" data-algorithm="atan2">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>atan2(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the arc tangent of <var>e1</var> over <var>e2</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑥⑤">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Atan2) 
     <tr class="algorithm" data-algorithm="ceil">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>ceil(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the <a data-link-type="dfn" href="#ceiling-expression" id="ref-for-ceiling-expression">ceiling</a> of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑥⑥">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Ceil) 
     <tr class="algorithm" data-algorithm="clamp">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>clamp(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var> <code>,</code><var>e3</var><code>:</code> <var>T</var><code>) -></code> <var>T</var> 
      <td>Returns <code>min(max(</code><var>e1</var><code>,</code><var>e2</var><code>),</code><var>e3</var><code>)</code>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑥⑦">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450NClamp) 
     <tr class="algorithm" data-algorithm="cos">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>cos(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the cosine of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑥⑧">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Cos) 
     <tr class="algorithm" data-algorithm="cosh">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>cosh(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the hyperbolic cosine of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑥⑨">Component-wise</a> when <var>T</var> is a vector
    (GLSLstd450Cosh) 
     <tr class="algorithm" data-algorithm="vector case, cross">
      <td><var>T</var> is f32 
      <td class="nowrap"><code>cross(</code><var>e1</var><code>:</code> vec3&lt;<var>T</var>> <code>,</code><var>e2</var><code>:</code> vec3&lt;<var>T</var>><code>) -></code> vec3&lt;<var>T</var>> 
      <td>Returns the cross product of <var>e1</var> and <var>e2</var>. (GLSLstd450Cross) 
     <tr class="algorithm" data-algorithm="distance">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>distance(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var> <code>) -></code> f32 
      <td>Returns the distance between <var>e1</var> and <var>e2</var> (e.g. <code>length(</code><var>e1</var><code>-</code><var>e2</var><code>)</code>).
    (GLSLstd450Distance) 
     <tr class="algorithm" data-algorithm="exp">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>exp(</code><var>e1</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the natural exponentiation of <var>e1</var> (e.g. <code>e</code><sup><var>e1</var></sup>). <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑦⓪">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Exp) 
     <tr class="algorithm" data-algorithm="exp2">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>exp2(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns 2 raised to the power <var>e</var> (e.g. <code>2</code><sup><var>e</var></sup>). <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑦①">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Exp2) 
     <tr class="algorithm" data-algorithm="faceForward">
      <td><var>T</var> is vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>faceForward(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var> <code>,</code><var>e3</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns <var>e1</var> if <code>dot(</code><var>e2</var><code>,</code><var>e3</var><code>)</code> is negative, and <code>-</code><var>e1</var> otherwise.
    (GLSLstd450FaceForward) 
     <tr class="algorithm" data-algorithm="floor">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>floor(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the <a data-link-type="dfn" href="#floor-expression" id="ref-for-floor-expression">floor</a> of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑦②">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Floor) 
     <tr class="algorithm" data-algorithm="fma">
      <td><var>T</var> is f32 
      <td class="nowrap"><code>fma(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var> <code>,</code><var>e3</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns <var>e1</var> <code>*</code> <var>e2</var> <code>+</code> <var>e3</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑦③">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Fma) 
     <tr class="algorithm" data-algorithm="fract">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>fract(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the fractional bits of <var>e</var> (e.g. <var>e</var> <code>- floor(</code><var>e</var><code>)</code>). <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑦④">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Fract) 
     <tr class="algorithm" data-algorithm="scalar case, frexp">
      <td><var>T</var> is f32 
      <td class="nowrap"><code>frexp(</code><var>e</var><code>:</code><var>T</var><code>) -> _frexp_result</code><br> 
      <td>
       Splits <var>e</var> into a significand and exponent of the form <code>significand * 2</code><sup><code>exponent</code></sup>.
    Returns the <code>_frexp_result</code> built-in structure, defined as: 
<pre class="language-rust highlight"><c- k>struct</c-> <c- nc>_frexp_result</c-> <c- p>{</c->
  <c- n>sig</c-> : <c- b>f32</c-><c- p>;</c-> <c- c1>// significand part</c->
  <c- n>exp</c-> : <c- b>i32</c-><c- p>;</c-> <c- c1>// exponent part</c->
<c- p>};</c->
</pre>
        The magnitude of the significand is in the range of [0.5, 1.0) or 0. 
       <p class="note" role="note"><span>Note:</span> A value cannot be explicitly declared with the type <code>_frexp_result</code>, but a value may infer the type.</p>
       <p>(GLSLstd450FrexpStruct)</p>
     <tr class="algorithm" data-algorithm="vector case, frexp">
      <td><var>T</var> is vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>frexp(</code><var>e</var><code>:</code><var>T</var><code>) -> _frexp_result_vec</code><var>N</var><br> 
      <td>
       Splits the components of <var>e</var> into a significand and exponent of the form <code>significand * 2</code><sup><code>exponent</code></sup>.
    Returns the <code>_frexp_result_vec</code><var>N</var> built-in structure, defined as: 
<pre class="language-rust highlight"><c- k>struct</c-> <c- nc>_frexp_result_vecN</c-> <c- p>{</c->
  <c- n>sig</c-> : <c- nc>vecN</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c-> <c- c1>// significand part</c->
  <c- n>exp</c-> : <c- nc>vecN</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>;</c-> <c- c1>// exponent part</c->
<c- p>};</c->
</pre>
        The magnitude of each component of the significand is in the range of [0.5, 1.0) or 0. 
       <p class="note" role="note"><span>Note:</span> A value cannot be explicitly declared with the type <code>_frexp_result_vec</code><var>N</var>, but a value may infer the type.</p>
       <p>(GLSLstd450FrexpStruct)</p>
     <tr class="algorithm" data-algorithm="inverseSqrt">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>inverseSqrt(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the reciprocal of <code>sqrt(</code><var>e</var><code>)</code>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑦⑤">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450InverseSqrt) 
     <tr class="algorithm" data-algorithm="ldexp">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32><br> <var>I</var> is i32 or vec<var>N</var>&lt;i32>, where<br> <var>I</var> is a scalar if <var>T</var> is a scalar, or<br> a vector when <var>T</var> is a vector 
      <td class="nowrap"><code>ldexp(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>I</var> <code>) -></code> <var>T</var> 
      <td>Returns <var>e1</var> <code>* 2</code><sup><var>e2</var></sup>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑦⑥">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Ldexp) 
     <tr class="algorithm" data-algorithm="length">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>length(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> f32 
      <td>Returns the length of <var>e</var> (e.g. <code>abs(</code><var>e</var><code>)</code> if <var>T</var> is a scalar, or <code>sqrt(</code><var>e</var><code>[0]</code><sup><code>2</code></sup> <code>+</code> <var>e</var><code>[1]</code><sup><code>2</code></sup> <code>+ ...)</code> if <var>T</var> is a vector).
    (GLSLstd450Length) 
     <tr class="algorithm" data-algorithm="log">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>log(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the natural logaritm of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑦⑦">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Log) 
     <tr class="algorithm" data-algorithm="log2">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>log2(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the base-2 logarithm of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑦⑧">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Log2) 
     <tr class="algorithm" data-algorithm="max">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>max(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns <var>e2</var> if <var>e1</var> is less than <var>e2</var>, and <var>e1</var> otherwise.
    If one operand is a NaN, the other is returned.
    If both operands are NaNs, a NaN is returned. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑦⑨">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450NMax) 
     <tr class="algorithm" data-algorithm="min">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>min(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns <var>e2</var> if <var>e2</var> is less than <var>e1</var>, and <var>e1</var> otherwise.
    If one operand is a NaN, the other is returned.
    If both operands are NaNs, a NaN is returned. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑧⓪">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450NMin) 
     <tr class="algorithm" data-algorithm="mix">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32><br> <var>U</var> is <var>T</var> or f32 
      <td class="nowrap"><code>mix(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var> <code>,</code><var>e3</var><code>:</code> <var>U</var><code>) -></code> <var>T</var> 
      <td>Returns the linear blend of <var>e1</var> and <var>e2</var> (e.g. <var>e1</var><code>*(1-</code><var>e3</var><code>)+</code><var>e2</var><code>*</code><var>e3</var>). <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑧①">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450FMix) 
     <tr class="algorithm" data-algorithm="scalar case, modf">
      <td><var>T</var> is f32 
      <td class="nowrap"><code>modf(</code><var>e</var><code>:</code><var>T</var><code>) -> _modf_result</code><br> 
      <td>
       Splits <var>e</var> into fractional and whole number parts.
    Returns the <code>_modf_result</code> built-in structure, defined as: 
<pre class="language-rust highlight"><c- k>struct</c-> <c- nc>_modf_result</c-> <c- p>{</c->
  <c- n>fract</c-> : <c- b>f32</c-><c- p>;</c-> <c- c1>// fractional part</c->
  <c- n>whole</c-> : <c- b>f32</c-><c- p>;</c-> <c- c1>// whole part</c->
<c- p>};</c->
</pre>
       <p class="note" role="note"><span>Note:</span> A value cannot be explicitly declared with the type <code>_modf_result</code>, but a value may infer the type.</p>
       <p>(GLSLstd450ModfStruct)</p>
     <tr class="algorithm" data-algorithm="vector case, modf">
      <td><var>T</var> is vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>modf(</code><var>e</var><code>:</code><var>T</var><code>) -> _modf_result_vec</code><var>N</var><br> 
      <td>
       Splits the components of <var>e</var> into fractional and whole number parts.
    Returns the <code>_modf_result_vec</code><var>N</var> built-in structure, defined as: 
<pre class="language-rust highlight"><c- k>struct</c-> <c- nc>_modf_result_vecN</c-> <c- p>{</c->
  <c- n>fract</c-> : <c- nc>vecN</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c-> <c- c1>// fractional part</c->
  <c- n>whole</c-> : <c- nc>vecN</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>;</c-> <c- c1>// whole part</c->
<c- p>};</c->
</pre>
       <p class="note" role="note"><span>Note:</span> A value cannot be explicitly declared with the type <code>_modf_result_vec</code><var>N</var>, but a value may infer the type.</p>
       <p>(GLSLstd450ModfStruct)</p>
     <tr class="algorithm" data-algorithm="vector case, normalize">
      <td><var>T</var> is f32 
      <td class="nowrap"><code>normalize(</code><var>e</var><code>:</code> vec<var>N</var>&lt;<var>T</var>> <code>) -></code> vec<var>N</var>&lt;<var>T</var>> 
      <td>Returns a unit vector in the same direction as <var>e</var>.
    (GLSLstd450Normalize) 
     <tr class="algorithm" data-algorithm="pow">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>pow(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns <var>e1</var> raised to the power <var>e2</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑧②">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Pow) 
     <tr class="algorithm" data-algorithm="quantize to f16">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>quantizeToF16(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>
       Quantizes a 32-bit floating point value <var>e</var> as if <var>e</var> were converted to a <a data-link-type="biblio" href="#biblio-ieee-754">IEEE 754</a> binary16 value,
        and then converted back to a IEEE 754 binary32 value.<br> See <a href="#floating-point-conversion">§ 12.5.2 Floating point conversion</a>.<br> <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑧③">Component-wise</a> when <var>T</var> is a vector.<br> 
       <p class="note" role="note"><span>Note:</span> The vec2&lt;f32> case is the same as <code>unpack2x16float(pack2x16float(</code><var>e</var><code>))</code>.</p>
       <p>(OpQuantizeToF16)</p>
     <tr class="algorithm" data-algorithm="reflect">
      <td><var>T</var> is vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>reflect(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>For the incident vector <var>e1</var> and surface orientation <var>e2</var>, returns the reflection direction <var>e1</var><code>-2*dot(</code><var>e2</var><code>,</code><var>e1</var><code>)*</code><var>e2</var>.
    (GLSLstd450Reflect) 
     <tr class="algorithm" data-algorithm="refract">
      <td><var>T</var> is vec<var>N</var>&lt;f32><br>I is f32 
      <td class="nowrap"><code>refract(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var> <code>,</code><var>e3</var><code>:</code> <var>I</var> <code>) -></code> <var>T</var> 
      <td>For the incident vector <var>e1</var> and surface normal <var>e2</var>, and the ratio of indices of refraction <var>e3</var>,
    let <code>k = 1.0 -</code><var>e3</var><code>*</code><var>e3</var><code>* (1.0 - dot(</code><var>e2</var><code>,</code><var>e1</var><code>) * dot(</code><var>e2</var><code>,</code><var>e1</var><code>))</code>. If <code>k &lt; 0.0</code>, returns the
    refraction vector 0.0, otherwise return the refraction vector <var>e3</var><code>*</code><var>e1</var><code>- (</code><var>e3</var><code>* dot(</code><var>e2</var><code>,</code><var>e1</var><code>) + sqrt(k)) *</code><var>e2</var>.
    (GLSLstd450Refract) 
     <tr class="algorithm" data-algorithm="round">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>round(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Result is the integer <var>k</var> nearest to <var>e</var>, as a floating point value.<br> When <var>e</var> lies halfway between integers <var>k</var> and <var>k</var>+1,
        the result is <var>k</var> when <var>k</var> is even, and <var>k</var>+1 when <var>k</var> is odd.<br> <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑧④">Component-wise</a> when <var>T</var> is a vector.
        (GLSLstd450RoundEven) 
     <tr class="algorithm" data-algorithm="float sign">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>sign(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the sign of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑧⑤">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450FSign) 
     <tr class="algorithm" data-algorithm="sin">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>sin(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the sine of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑧⑥">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Sin) 
     <tr class="algorithm" data-algorithm="sinh">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>sinh(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the hyperbolic sine of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑧⑦">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Sinh) 
     <tr class="algorithm" data-algorithm="smoothStep">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>smoothStep(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var> <code>,</code><var>e3</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the smooth Hermite interpolation between 0 and 1. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑧⑧">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450SmoothStep) 
     <tr class="algorithm" data-algorithm="sqrt">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>sqrt(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the square root of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑧⑨">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Sqrt) 
     <tr class="algorithm" data-algorithm="step">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>step(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns 0.0 if <var>e1</var> is less than <var>e2</var>, and 1.0 otherwise. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑨⓪">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Step) 
     <tr class="algorithm" data-algorithm="tan">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>tan(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the tangent of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑨①">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Tan) 
     <tr class="algorithm" data-algorithm="tanh">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>tanh(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the hyperbolic tangent of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑨②">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Tanh) 
     <tr class="algorithm" data-algorithm="trunc">
      <td><var>T</var> is f32 or vec<var>N</var>&lt;f32> 
      <td class="nowrap"><code>trunc(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Returns the nearest whole number whose absolute value is less than or equal to <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑨③">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450Trunc) 
   </table>
   <h3 class="heading settled" data-level="16.4" id="integer-builtin-functions"><span class="secno">16.4. </span><span class="content">Integer built-in functions</span><a class="self-link" href="#integer-builtin-functions"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="signed abs">
      <td><var>T</var> is i32 or vec<var>N</var>&lt;i32> 
      <td class="nowrap"><code>abs</code>(<var>e</var>: <var>T</var> ) -> <var>T</var> 
      <td>The absolute value of <var>e</var>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑨④">Component-wise</a> when <var>T</var> is a vector.
        If <var>e</var> evaluates to the largest negative value, then the result is <var>e</var>.
        (GLSLstd450SAbs) 
     <tr class="algorithm" data-algorithm="scalar case, unsigned abs">
      <td><var>T</var> is u32 or vec<var>N</var>&lt;u32> 
      <td class="nowrap"><code>abs</code>(<var>e</var>: <var>T</var> ) -> <var>T</var> 
      <td>Result is <var>e</var>.  This is provided for symmetry with <code>abs</code> for signed integers. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑨⑤">Component-wise</a> when <var>T</var> is a vector. 
     <tr class="algorithm" data-algorithm="unsigned clamp">
      <td><var>T</var> is u32 or vec<var>N</var>&lt;u32> 
      <td class="nowrap"><code>clamp(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var><code>,</code><var>e3</var><code>:</code> <var>T</var><code>) -></code> <var>T</var> 
      <td>Returns <code>min(max(</code><var>e1</var><code>,</code><var>e2</var><code>),</code><var>e3</var><code>)</code>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑨⑥">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450UClamp) 
     <tr class="algorithm" data-algorithm="signed clamp">
      <td><var>T</var> is i32 or vec<var>N</var>&lt;i32> 
      <td class="nowrap"><code>clamp(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var><code>,</code><var>e3</var><code>:</code> <var>T</var><code>) -></code> <var>T</var> 
      <td>Returns <code>min(max(</code><var>e1</var><code>,</code><var>e2</var><code>),</code><var>e3</var><code>)</code>. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑨⑦">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450SClamp) 
     <tr class="algorithm" data-algorithm="count 1 bits">
      <td><var>T</var> is i32, u32, vec<var>N</var>&lt;i32>, or vec<var>N</var>&lt;u32> 
      <td class="nowrap"><code>countOneBits(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>The number of 1 bits in the representation of <var>e</var>.<br> Also known as "population count".<br> <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑨⑧">Component-wise</a> when <var>T</var> is a vector.
        (SPIR-V OpBitCount) 
     <tr class="algorithm" data-algorithm="unsigned max">
      <td><var>T</var> is u32 or vec<var>N</var>&lt;u32> 
      <td class="nowrap"><code>max(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var><code>) -></code> <var>T</var> 
      <td>Returns <var>e2</var> if <var>e1</var> is less than <var>e2</var>, and <var>e1</var> otherwise. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise⑨⑨">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450UMax) 
     <tr class="algorithm" data-algorithm="signed max">
      <td><var>T</var> is i32 or vec<var>N</var>&lt;i32> 
      <td class="nowrap"><code>max(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var><code>) -></code> <var>T</var> 
      <td>Returns <var>e2</var> if <var>e1</var> is less than <var>e2</var>, and <var>e1</var> otherwise. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise①⓪⓪">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450SMax) 
     <tr class="algorithm" data-algorithm="unsigned min">
      <td><var>T</var> is u32 or vec<var>N</var>&lt;u32> 
      <td class="nowrap"><code>min(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var><code>) -></code> <var>T</var> 
      <td>Returns <var>e1</var> if <var>e1</var> is less than <var>e2</var>, and <var>e2</var> otherwise. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise①⓪①">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd450UMin) 
     <tr class="algorithm" data-algorithm="signed min">
      <td><var>T</var> is i32 or vec<var>N</var>&lt;i32> 
      <td class="nowrap"><code>min(</code><var>e1</var><code>:</code> <var>T</var> <code>,</code><var>e2</var><code>:</code> <var>T</var><code>) -></code> <var>T</var> 
      <td>Returns <var>e1</var> if <var>e1</var> is less than <var>e2</var>, and <var>e2</var> otherwise. <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise①⓪②">Component-wise</a> when <var>T</var> is a vector.
    (GLSLstd45SUMin) 
     <tr class="algorithm" data-algorithm="bit reversal">
      <td><var>T</var> is i32, u32, vec<var>N</var>&lt;i32>, or vec<var>N</var>&lt;u32> 
      <td class="nowrap"><code>reverseBits(</code><var>e</var><code>:</code> <var>T</var> <code>) -></code> <var>T</var> 
      <td>Reverses the bits in <var>e</var>:  The bit at position <var>k</var> of the result equals the
        bit at position 31-<var>k</var> of <var>e</var>.<br> <a data-link-type="dfn" href="#component-wise" id="ref-for-component-wise①⓪③">Component-wise</a> when <var>T</var> is a vector.
        (SPIR-V OpBitReverse) 
   </table>
   <h3 class="heading settled" data-level="16.5" id="matrix-builtin-functions"><span class="secno">16.5. </span><span class="content">Matrix built-in functions</span><a class="self-link" href="#matrix-builtin-functions"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Description 
    <tbody>
     <tr class="algorithm" data-algorithm="determinant">
      <td><var>T</var> is f32 
      <td class="nowrap"><code>determinant(</code><var>e</var><code>:</code> mat<var>N</var>x<var>N</var>&lt;<var>T</var>> <code>) -></code> <var>T</var> 
      <td>Returns the determinant of <var>e</var>.
    (GLSLstd450Determinant) 
     <tr class="algorithm" data-algorithm="transpose">
      <td><var>T</var> is f32 
      <td class="nowrap"><code>transpose(</code><var>e</var><code>:</code> mat<var>M</var>x<var>N</var>&lt;<var>T</var>> <code>) -></code> mat<var>N</var>x<var>M</var>&lt;<var>T</var>> 
      <td>Returns the transpose of <var>e</var>.
    (OpTranspose) 
   </table>
   <h3 class="heading settled" data-level="16.6" id="vector-builtin-functions"><span class="secno">16.6. </span><span class="content">Vector built-in functions</span><a class="self-link" href="#vector-builtin-functions"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <th>Precondition
      <td>Conclusion
      <td>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="dot">
      <td><var>T</var> is f32 
      <td><code>dot(</code><var>e1</var><code>: vecN&lt;</code><var>T</var><code>>,</code><var>e2</var><code>: vecN&lt;</code><var>T</var><code>>) -></code> <var>T</var> 
      <td>Returns the dot product of <var>e1</var> and <var>e2</var>.
  (OpDot) 
   </table>
   <h3 class="heading settled" data-level="16.7" id="derivative-builtin-functions"><span class="secno">16.7. </span><span class="content">Derivative built-in functions</span><a class="self-link" href="#derivative-builtin-functions"></a></h3>
   <p>See <a href="#derivatives">§ 12.4.2 Derivatives</a>.</p>
   <p>These functions:</p>
   <ul>
    <li data-md>
     <p>Must only be used in a <a data-link-type="dfn" href="#fragment" id="ref-for-fragment④">fragment</a> shader stage.</p>
    <li data-md>
     <p>Must only be invoked in uniform control flow.</p>
   </ul>
   <table class="data">
    <thead>
     <tr>
      <th>Precondition
      <th>Conclusion
      <th>Notes 
    <tbody>
     <tr>
      <td rowspan="9"><var>T</var> is f32 or vecN&lt;f32> 
      <td><code>dpdx(</code><var>e</var><code>:</code><var>T</var><code>) -></code> <var>T</var> 
      <td>Partial derivative of <var>e</var> with respect to window x coordinates.
  The result is the same as either <code>dpdxFine(</code><var>e</var><code>)</code> or <code>dpdxCoarse(</code><var>e</var><code>)</code>.
  (OpDPdx) 
     <tr>
      <td><code>dpdxCoarse(</code><var>e</var><code>:</code><var>T</var><code>) -></code><var>T</var> 
      <td>Returns the partial derivative of <var>e</var> with respect to window x coordinates using local differences.
  This may result in fewer unique positions that <code>dpdxFine(</code><var>e</var><code>)</code>.
  (OpDPdxCoarse) 
     <tr>
      <td><code>dpdxFine(</code><var>e</var><code>:</code><var>T</var><code>) -></code><var>T</var> 
      <td>Returns the partial derivative of <var>e</var> with respect to window x coordinates.
  (OpDPdxFine) 
     <tr>
      <td><code>dpdy(</code><var>e</var><code>:</code><var>T</var><code>) -></code><var>T</var> 
      <td>Partial derivative of <var>e</var> with respect to window y coordinates.
  The result is the same as either <code>dpdyFine(</code><var>e</var><code>)</code> or <code>dpdyCoarse(</code><var>e</var><code>)</code>.
  (OpDPdy) 
     <tr>
      <td><code>dpdyCoarse(</code><var>e</var><code>:</code><var>T</var><code>) -></code><var>T</var> 
      <td>Returns the partial derivative of <var>e</var> with respect to window y coordinates using local differences.
  This may result in fewer unique positions that <code>dpdyFine(</code><var>e</var><code>)</code>.
  (OpDPdyCoarse) 
     <tr>
      <td><code>dpdyFine(</code><var>e</var><code>:</code><var>T</var><code>) -></code><var>T</var> 
      <td>Returns the partial derivative of <var>e</var> with respect to window y coordinates.
  (OpDPdyFine) 
     <tr>
      <td><code>fwidth(</code><var>e</var><code>:</code><var>T</var><code>) -></code><var>T</var> 
      <td>Returns <code>abs(dpdx(</code><var>e</var><code>)) + abs(dpdy(</code><var>e</var><code>))</code>.
  (OpFwidth) 
     <tr>
      <td><code>fwidthCoarse(</code><var>e</var><code>:</code><var>T</var><code>) -></code><var>T</var> 
      <td>Returns <code>abs(dpdxCoarse(</code><var>e</var><code>)) + abs(dpdyCoarse(</code><var>e</var><code>))</code>.
  (OpFwidthCoarse) 
     <tr>
      <td><code>fwidthFine(</code><var>e</var><code>:</code><var>T</var><code>) -></code><var>T</var> 
      <td>Returns <code>abs(dpdxFine(</code><var>e</var><code>)) + abs(dpdyFine(</code><var>e</var><code>))</code>.
  (OpFwidthFine) 
   </table>
   <h3 class="heading settled" data-level="16.8" id="texture-builtin-functions"><span class="secno">16.8. </span><span class="content">Texture built-in functions</span><a class="self-link" href="#texture-builtin-functions"></a></h3>
   <p>In this section, texture types are shown with the following parameters:</p>
   <ul>
    <li data-md>
     <p><var>T</var>, a sampled type.</p>
    <li data-md>
     <p><var>F</var>, a <a data-link-type="dfn" href="#texel-format" id="ref-for-texel-format">texel format</a>.</p>
    <li data-md>
     <p><var>A</var>, an <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode④">access mode</a>.</p>
   </ul>
   <p>Parameter values must be valid for the respective texture types.</p>
   <h4 class="heading settled" data-level="16.8.1" id="texturedimensions"><span class="secno">16.8.1. </span><span class="content"><code>textureDimensions</code></span><a class="self-link" href="#texturedimensions"></a></h4>
   <p>Returns the dimensions of a texture, or texture’s mip level in texels.</p>
<pre class="language-rust highlight"><c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_1d</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_1d</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d_array</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d_array</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_3d</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec3</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_3d</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- nc>vec3</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_cube</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_cube</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_cube_array</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_cube_array</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_multisampled_2d</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c->-> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d</c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d</c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d_array</c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d_array</c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_cube</c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_cube</c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_cube_array</c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_cube_array</c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_multisampled_2d</c-><c- p>)</c->-> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_storage_1d</c-><c- o>&lt;</c-><c- n>F</c-><c- p>,</c-><c- n>A</c-><c- o>></c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_storage_2d</c-><c- o>&lt;</c-><c- n>F</c-><c- p>,</c-><c- n>A</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_storage_2d_array</c-><c- o>&lt;</c-><c- n>F</c-><c- p>,</c-><c- n>A</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_storage_3d</c-><c- o>&lt;</c-><c- n>F</c-><c- p>,</c-><c- n>A</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec3</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
<c- n>textureDimensions</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_external</c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c->
</pre>
   <p><strong>Parameters:</strong></p>
   <table class="data">
    <tbody>
     <tr>
      <td><code>t</code>
      <td> The <a href="#sampled-texture-type">sampled</a>, <a href="#multisampled-texture-type">multisampled</a>, <a href="#texture-depth">depth</a>, <a href="#texture-storage">storage</a>, or <a href="#external-texture-type">external</a> texture. 
     <tr>
      <td><code>level</code>
      <td> The mip level, with level 0 containing a full size version of the texture.<br> If omitted, the dimensions of level 0 are returned. 
   </table>
   <p><strong>Returns:</strong></p>
   <p>The dimensions of the texture in texels.</p>
   <p>For textures based on cubes, the results are the dimensions of each face of the cube.
Cube faces are square, so the x and y components of the result are equal.</p>
   <p>If <code>level</code> is outside the range <code>[0, textureNumLevels(t))</code> then any valid value
for the return type may be returned.</p>
   <h4 class="heading settled" data-level="16.8.2" id="textureload"><span class="secno">16.8.2. </span><span class="content"><code>textureLoad</code></span><a class="self-link" href="#textureload"></a></h4>
   <p>Reads a single texel from a texture without sampling or filtering.</p>
<pre class="language-rust highlight"><c- n>textureLoad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_1d</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>coords</c->: <c- b>i32</c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c->
<c- n>textureLoad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c->
<c- n>textureLoad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d_array</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c->
<c- n>textureLoad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_3d</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c->
<c- n>textureLoad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_multisampled_2d</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>,</c-> <c- n>sample_index</c->: <c- b>i32</c-><c- p>)</c->-> <c- nc>vec4</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c->
<c- n>textureLoad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureLoad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d_array</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureLoad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_multisampled_2d</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>,</c-> <c- n>sample_index</c->: <c- b>i32</c-><c- p>)</c->-> <c- b>f32</c->
<c- nc>textureLoad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_external</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
</pre>
   <p><strong>Parameters:</strong></p>
   <table class="data">
    <tbody>
     <tr>
      <td><code>t</code>
      <td> The <a href="#sampled-texture-type">sampled</a>, <a href="#multisampled-texture-type">multisampled</a>, <a href="#texture-depth">depth</a>,
  or <a href="#external-texture-type">external</a> texture. 
     <tr>
      <td><code>coords</code>
      <td> The 0-based texel coordinate. 
     <tr>
      <td><code>array_index</code>
      <td> The 0-based texture array index. 
     <tr>
      <td><code>level</code>
      <td> The mip level, with level 0 containing a full size version of the texture. 
     <tr>
      <td><code>sample_index</code>
      <td> The 0-based sample index of the multisampled texture. 
   </table>
   <p><strong>Returns:</strong></p>
   <p>The unfiltered texel data.</p>
   <p>An out of bounds access occurs if:</p>
   <ul>
    <li data-md>
     <p>any element of <code>coords</code> is outside the range <code>[0, textureDimensions(t, level))</code> for the corresponding element, or</p>
    <li data-md>
     <p><code>array_index</code> is outside the range <code>[0, textureNumLayers(t))</code>, or</p>
    <li data-md>
     <p><code>level</code> is outside the range <code>[0, textureNumLevels(t))</code></p>
   </ul>
   <p>If an out of bounds access occurs, the built-in function returns one of:</p>
   <ul>
    <li data-md>
     <p>The data for some texel within bounds of the texture</p>
    <li data-md>
     <p>A vector (0,0,0,0) or (0,0,0,1) of the appropriate type for non-depth textures</p>
    <li data-md>
     <p>0.0 for depth textures</p>
   </ul>
   <h4 class="heading settled" data-level="16.8.3" id="texturenumlayers"><span class="secno">16.8.3. </span><span class="content"><code>textureNumLayers</code></span><a class="self-link" href="#texturenumlayers"></a></h4>
   <p>Returns the number of layers (elements) of an array texture.</p>
<pre class="language-rust highlight"><c- n>textureNumLayers</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d_array</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureNumLayers</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_cube_array</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureNumLayers</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d_array</c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureNumLayers</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_cube_array</c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureNumLayers</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_storage_2d_array</c-><c- o>&lt;</c-><c- n>F</c-><c- p>,</c-><c- n>A</c-><c- o>></c-><c- p>)</c-> -> <c- b>i32</c->
</pre>
   <p><strong>Parameters:</strong></p>
   <table class="data">
    <tbody>
     <tr>
      <td><code>t</code>
      <td> The <a href="#sampled-texture-type">sampled</a>, <a href="#multisampled-texture-type">multisampled</a>, <a href="#texture-depth">depth</a> or <a href="#texture-storage">storage</a> array texture. 
   </table>
   <p><strong>Returns:</strong></p>
   <p>If the number of layers (elements) of the array texture.</p>
   <h4 class="heading settled" data-level="16.8.4" id="texturenumlevels"><span class="secno">16.8.4. </span><span class="content"><code>textureNumLevels</code></span><a class="self-link" href="#texturenumlevels"></a></h4>
   <p>Returns the number of mip levels of a texture.</p>
<pre class="language-rust highlight"><c- n>textureNumLevels</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_1d</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureNumLevels</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureNumLevels</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d_array</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureNumLevels</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_3d</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureNumLevels</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_cube</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureNumLevels</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_cube_array</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureNumLevels</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d</c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureNumLevels</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d_array</c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureNumLevels</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_cube</c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureNumLevels</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_cube_array</c-><c- p>)</c-> -> <c- b>i32</c->
</pre>
   <p><strong>Parameters:</strong></p>
   <table class="data">
    <tbody>
     <tr>
      <td><code>t</code>
      <td> The <a href="#sampled-texture-type">sampled</a> or <a href="#texture-depth">depth</a> texture. 
   </table>
   <p><strong>Returns:</strong></p>
   <p>If the number of mip levels for the texture.</p>
   <h4 class="heading settled" data-level="16.8.5" id="texturenumsamples"><span class="secno">16.8.5. </span><span class="content"><code>textureNumSamples</code></span><a class="self-link" href="#texturenumsamples"></a></h4>
   <p>Returns the number samples per texel in a multisampled texture.</p>
<pre class="language-rust highlight"><c- n>textureNumSamples</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_multisampled_2d</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c-> -> <c- b>i32</c->
<c- nc>textureNumSamples</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_multisampled_2d</c-><c- p>)</c-> -> <c- b>i32</c->
</pre>
   <p><strong>Parameters:</strong></p>
   <table class="data">
    <tbody>
     <tr>
      <td><code>t</code>
      <td> The <a href="#multisampled-texture-type">multisampled</a> texture. 
   </table>
   <p><strong>Returns:</strong></p>
   <p>If the number of samples per texel in the multisampled texture.</p>
   <h4 class="heading settled" data-level="16.8.6" id="texturesample"><span class="secno">16.8.6. </span><span class="content"><code>textureSample</code></span><a class="self-link" href="#texturesample"></a></h4>
   <p>Samples a texture.</p>
   <p>Must only be used in a <a data-link-type="dfn" href="#fragment" id="ref-for-fragment⑤">fragment</a> shader stage.
Must only be invoked in uniform control flow.</p>
<pre class="language-rust highlight"><c- n>textureSample</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_1d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- b>f32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSample</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSample</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSample</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d_array</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSample</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d_array</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSample</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_3d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSample</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_3d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSample</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_cube</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSample</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_cube_array</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSample</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSample</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSample</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d_array</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSample</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d_array</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSample</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_cube</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSample</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_cube_array</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>)</c-> -> <c- b>f32</c->
</pre>
   <p><strong>Parameters:</strong></p>
   <table class="data">
    <tbody>
     <tr>
      <td><code>t</code>
      <td> The <a href="#sampled-texture-type">sampled</a>, <a href="#texture-depth">depth</a>,
  or <a href="#external-texture-type">external</a> texture to sample. 
     <tr>
      <td><code>s</code>
      <td> The <a href="#sampler-type">sampler type</a>. 
     <tr>
      <td><code>coords</code>
      <td> The texture coordinates used for sampling. 
     <tr>
      <td><code>array_index</code>
      <td> The 0-based texture array index to sample. 
     <tr>
      <td><code>offset</code>
      <td> The optional texel offset applied to the unnormalized texture coordinate
  before sampling the texture. This offset is applied before applying any
  texture wrapping modes.<br> The <code>offset</code> expression must be a <code>const_expression</code> expression (e.g. <code>vec2&lt;i32>(1, 2)</code>).<br> Each <code>offset</code> component must be at least <code>-8</code> and at most <code>7</code>. Values outside
  of this range will result in a <a data-link-type="dfn" href="#shader-creation-error" id="ref-for-shader-creation-error①">shader-creation error</a>. 
   </table>
   <p><strong>Returns:</strong></p>
   <p>The sampled value.</p>
   <h4 class="heading settled" data-level="16.8.7" id="texturesamplebias"><span class="secno">16.8.7. </span><span class="content"><code>textureSampleBias</code></span><a class="self-link" href="#texturesamplebias"></a></h4>
   <p>Samples a texture with a bias to the mip level.</p>
   <p>Must only be used in a <a data-link-type="dfn" href="#fragment" id="ref-for-fragment⑥">fragment</a> shader stage.
Must only be invoked in uniform control flow.</p>
<pre class="language-rust highlight"><c- n>textureSampleBias</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>bias</c->: <c- b>f32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleBias</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>bias</c->: <c- b>f32</c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleBias</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d_array</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>bias</c->: <c- b>f32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleBias</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d_array</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>bias</c->: <c- b>f32</c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleBias</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_3d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>bias</c->: <c- b>f32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleBias</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_3d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>bias</c->: <c- b>f32</c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleBias</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_cube</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>bias</c->: <c- b>f32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleBias</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_cube_array</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>bias</c->: <c- b>f32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
</pre>
   <p><strong>Parameters:</strong></p>
   <table class="data">
    <tbody>
     <tr>
      <td><code>t</code>
      <td> The <a href="#sampled-texture-type">texture</a> to sample. 
     <tr>
      <td><code>s</code>
      <td> The <a href="#sampler-type">sampler type</a>. 
     <tr>
      <td><code>coords</code>
      <td> The texture coordinates used for sampling. 
     <tr>
      <td><code>array_index</code>
      <td> The 0-based texture array index to sample. 
     <tr>
      <td><code>bias</code>
      <td> The bias to apply to the mip level before sampling. <code>bias</code> must be between <code>-16.0</code> and <code>15.99</code>. 
     <tr>
      <td><code>offset</code>
      <td> The optional texel offset applied to the unnormalized texture coordinate
  before sampling the texture. This offset is applied before applying any
  texture wrapping modes.<br> The <code>offset</code> expression must be a <code>const_expression</code> expression (e.g. <code>vec2&lt;i32>(1, 2)</code>).<br> Each <code>offset</code> component must be at least <code>-8</code> and at most <code>7</code>. Values outside
  of this range will result in a <a data-link-type="dfn" href="#shader-creation-error" id="ref-for-shader-creation-error②">shader-creation error</a>. 
   </table>
   <p><strong>Returns:</strong></p>
   <p>The sampled value.</p>
   <h4 class="heading settled" data-level="16.8.8" id="texturesamplecompare"><span class="secno">16.8.8. </span><span class="content"><code>textureSampleCompare</code></span><a class="self-link" href="#texturesamplecompare"></a></h4>
   <p>Samples a depth texture and compares the sampled depth values against a reference value.</p>
   <p>Must only be used in a <a data-link-type="dfn" href="#fragment" id="ref-for-fragment⑦">fragment</a> shader stage.
Must only be invoked in uniform control flow.</p>
<pre class="language-rust highlight"><c- n>textureSampleCompare</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler_comparison</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>depth_ref</c->: <c- b>f32</c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleCompare</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler_comparison</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>depth_ref</c->: <c- b>f32</c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleCompare</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d_array</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler_comparison</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>depth_ref</c->: <c- b>f32</c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleCompare</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d_array</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler_comparison</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>depth_ref</c->: <c- b>f32</c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleCompare</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_cube</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler_comparison</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>depth_ref</c->: <c- b>f32</c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleCompare</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_cube_array</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler_comparison</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>depth_ref</c->: <c- b>f32</c-><c- p>)</c-> -> <c- b>f32</c->
</pre>
   <p><strong>Parameters:</strong></p>
   <table class="data">
    <tbody>
     <tr>
      <td><code>t</code>
      <td> The <a href="#texture-depth">depth</a> texture to sample. 
     <tr>
      <td><code>s</code>
      <td> The <a href="#sampler-type">sampler comparision</a> type. 
     <tr>
      <td><code>coords</code>
      <td> The texture coordinates used for sampling. 
     <tr>
      <td><code>array_index</code>
      <td> The 0-based texture array index to sample. 
     <tr>
      <td><code>depth_ref</code>
      <td> The reference value to compare the sampled depth value against. 
     <tr>
      <td><code>offset</code>
      <td> The optional texel offset applied to the unnormalized texture coordinate
  before sampling the texture. This offset is applied before applying any
  texture wrapping modes.<br> The <code>offset</code> expression must be a <code>const_expression</code> expression (e.g. <code>vec2&lt;i32>(1, 2)</code>).<br> Each <code>offset</code> component must be at least <code>-8</code> and at most <code>7</code>. Values outside
  of this range will result in a <a data-link-type="dfn" href="#shader-creation-error" id="ref-for-shader-creation-error③">shader-creation error</a>. 
   </table>
   <p><strong>Returns:</strong></p>
   <p>A value in the range <code>[0.0..1.0]</code>.</p>
   <p>Each sampled texel is compared against the reference value using the comparision
operator defined by the <code>sampler_comparison</code>, resulting in either a <code>0</code> or <code>1</code> value for each texel.</p>
   <p>If the sampler uses bilinear filtering then the returned value is
the filtered average of these values, otherwise the comparision result of a
single texel is returned.</p>
   <h4 class="heading settled" data-level="16.8.9" id="texturesamplecomparelevel"><span class="secno">16.8.9. </span><span class="content"><code>textureSampleCompareLevel</code></span><a class="self-link" href="#texturesamplecomparelevel"></a></h4>
   <p>Samples a depth texture and compares the sampled depth values against a reference value.</p>
<pre class="language-rust highlight"><c- n>textureSampleCompareLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler_comparison</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>depth_ref</c->: <c- b>f32</c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleCompareLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler_comparison</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>depth_ref</c->: <c- b>f32</c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleCompareLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d_array</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler_comparison</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>depth_ref</c->: <c- b>f32</c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleCompareLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d_array</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler_comparison</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>depth_ref</c->: <c- b>f32</c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleCompareLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_cube</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler_comparison</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>depth_ref</c->: <c- b>f32</c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleCompareLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_cube_array</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler_comparison</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>depth_ref</c->: <c- b>f32</c-><c- p>)</c-> -> <c- b>f32</c->
</pre>
   <p>The <code>textureSampleCompareLevel</code> function is the same as <code>textureSampleCompare</code>, except that:</p>
   <ul>
    <li data-md>
     <p><code>textureSampleCompareLevel</code> always samples texels from mip level 0.</p>
     <ul>
      <li data-md>
       <p>The function does not compute derivatives.</p>
      <li data-md>
       <p>There is no requirement for <code>textureSampleCompareLevel</code> to be invoked in uniform control flow.</p>
     </ul>
    <li data-md>
     <p><code>textureSampleCompareLevel</code> may be invoked in any shader stage.</p>
   </ul>
   <h4 class="heading settled" data-level="16.8.10" id="texturesamplegrad"><span class="secno">16.8.10. </span><span class="content"><code>textureSampleGrad</code></span><a class="self-link" href="#texturesamplegrad"></a></h4>
   <p>Samples a texture using explicit gradients.</p>
<pre class="language-rust highlight"><c- n>textureSampleGrad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>ddx</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>ddy</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleGrad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>ddx</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>ddy</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleGrad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d_array</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>ddx</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>ddy</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleGrad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d_array</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>ddx</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>ddy</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleGrad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_3d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>ddx</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>ddy</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleGrad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_3d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>ddx</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>ddy</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleGrad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_cube</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>ddx</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>ddy</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleGrad</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_cube_array</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>ddx</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>ddy</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
</pre>
   <p><strong>Parameters:</strong></p>
   <table class="data">
    <tbody>
     <tr>
      <td><code>t</code>
      <td> The <a href="#sampled-texture-type">texture</a> to sample. 
     <tr>
      <td><code>s</code>
      <td> The <a href="#sampler-type">sampler type</a>. 
     <tr>
      <td><code>coords</code>
      <td> The texture coordinates used for sampling. 
     <tr>
      <td><code>array_index</code>
      <td> The 0-based texture array index to sample. 
     <tr>
      <td><code>ddx</code>
      <td> The x direction derivative vector used to compute the sampling locations. 
     <tr>
      <td><code>ddy</code>
      <td> The y direction derivative vector used to compute the sampling locations. 
     <tr>
      <td><code>offset</code>
      <td> The optional texel offset applied to the unnormalized texture coordinate
  before sampling the texture. This offset is applied before applying any
  texture wrapping modes.<br> The <code>offset</code> expression must be a <code>const_expression</code> expression (e.g. <code>vec2&lt;i32>(1, 2)</code>).<br> Each <code>offset</code> component must be at least <code>-8</code> and at most <code>7</code>. Values outside
  of this range will result in a <a data-link-type="dfn" href="#shader-creation-error" id="ref-for-shader-creation-error④">shader-creation error</a>. 
   </table>
   <p><strong>Returns:</strong></p>
   <p>The sampled value.</p>
   <h4 class="heading settled" data-level="16.8.11" id="texturesamplelevel"><span class="secno">16.8.11. </span><span class="content"><code>textureSampleLevel</code></span><a class="self-link" href="#texturesamplelevel"></a></h4>
   <p>Samples a texture using an explicit mip level, or at mip level 0.</p>
<pre class="language-rust highlight"><c- n>textureSampleLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>f32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>f32</c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d_array</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>level</c->: <c- b>f32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_2d_array</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>level</c->: <c- b>f32</c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_3d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>f32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_3d</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>f32</c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_cube</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>f32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_cube_array</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>level</c->: <c- b>f32</c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
<c- n>textureSampleLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d_array</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_2d_array</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>,</c-> <c- n>offset</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_cube</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_depth_cube_array</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>level</c->: <c- b>i32</c-><c- p>)</c-> -> <c- b>f32</c->
<c- nc>textureSampleLevel</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_external</c-><c- p>,</c-> <c- n>s</c->: <c- nc>sampler</c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c-><c- p>)</c-> -> <c- nc>vec4</c-><c- o>&lt;</c-><c- b>f32</c-><c- o>></c->
</pre>
   <p><strong>Parameters:</strong></p>
   <table class="data">
    <tbody>
     <tr>
      <td><code>t</code>
      <td> The <a href="#sampled-texture-type">sampled</a> or <a href="#texture-depth">depth</a> texture to
  sample. 
     <tr>
      <td><code>s</code>
      <td> The <a href="#sampler-type">sampler type</a>. 
     <tr>
      <td><code>coords</code>
      <td> The texture coordinates used for sampling. 
     <tr>
      <td><code>array_index</code>
      <td> The 0-based texture array index to sample. 
     <tr>
      <td><code>level</code>
      <td> The mip level, with level 0 containing a full size version of the texture.
  For the functions where <code>level</code> is a <code>f32</code>, fractional values may interpolate
  between two levels if the format is filterable according to the <a href="https://gpuweb.github.io/gpuweb/#texture-format-caps">Texture Format Capabilities</a>.<br> When not specified, mip level 0 is sampled. 
     <tr>
      <td><code>offset</code>
      <td> The optional texel offset applied to the unnormalized texture coordinate
  before sampling the texture. This offset is applied before applying any
  texture wrapping modes.<br> The <code>offset</code> expression must be a <code>const_expression</code> expression (e.g. <code>vec2&lt;i32>(1, 2)</code>).<br> Each <code>offset</code> component must be at least <code>-8</code> and at most <code>7</code>. Values outside
  of this range will result in a <a data-link-type="dfn" href="#shader-creation-error" id="ref-for-shader-creation-error⑤">shader-creation error</a>. 
   </table>
   <p><strong>Returns:</strong></p>
   <p>The sampled value.</p>
   <h4 class="heading settled" data-level="16.8.12" id="texturestore"><span class="secno">16.8.12. </span><span class="content"><code>textureStore</code></span><a class="self-link" href="#texturestore"></a></h4>
   <p>Writes a single texel to a texture.</p>
<pre class="language-rust highlight"><c- n>textureStore</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_storage_1d</c-><c- o>&lt;</c-><c- n>F</c-><c- p>,</c-><c- n>write</c-><c- o>></c-><c- p>,</c-> <c- n>coords</c->: <c- b>i32</c-><c- p>,</c-> <c- n>value</c->: <c- nc>vec4</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c->
<c- n>textureStore</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_storage_2d</c-><c- o>&lt;</c-><c- n>F</c-><c- p>,</c-><c- n>write</c-><c- o>></c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>,</c-> <c- n>value</c->: <c- nc>vec4</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c->
<c- n>textureStore</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_storage_2d_array</c-><c- o>&lt;</c-><c- n>F</c-><c- p>,</c-><c- n>write</c-><c- o>></c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec2</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>,</c-> <c- n>array_index</c->: <c- b>i32</c-><c- p>,</c-> <c- n>value</c->: <c- nc>vec4</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c->
<c- n>textureStore</c-><c- p>(</c-><c- n>t</c->: <c- nc>texture_storage_3d</c-><c- o>&lt;</c-><c- n>F</c-><c- p>,</c-><c- n>write</c-><c- o>></c-><c- p>,</c-> <c- n>coords</c->: <c- nc>vec3</c-><c- o>&lt;</c-><c- b>i32</c-><c- o>></c-><c- p>,</c-> <c- n>value</c->: <c- nc>vec4</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>)</c->
</pre>
   <p>The channel format <code>T</code> depends on the storage texel format <code>F</code>. <a href="#storage-texel-formats" id="ref-for-storage-texel-formats②">See the texel format table</a> for the mapping of texel
format to channel format.</p>
   <p><strong>Parameters:</strong></p>
   <table class="data">
    <tbody>
     <tr>
      <td><code>t</code>
      <td> The <a href="#texture-storage">write-only storage texture</a>. 
     <tr>
      <td><code>coords</code>
      <td> The 0-based texel coordinate.<br> 
     <tr>
      <td><code>array_index</code>
      <td> The 0-based texture array index. 
     <tr>
      <td><code>value</code>
      <td> The new texel value.<br> 
   </table>
   <p><strong>Note:</strong></p>
   <p>An out-of-bounds access occurs if:</p>
   <ul>
    <li data-md>
     <p>any element of <code>coords</code> is outside the range <code>[0, textureDimensions(t))</code> for the corresponding element, or</p>
    <li data-md>
     <p><code>array_index</code> is outside the range of <code>[0, textureNumLayers(t))</code></p>
   </ul>
   <p>If an out-of-bounds access occurs, the built-in function may do any of the following:</p>
   <ul>
    <li data-md>
     <p>not be executed</p>
    <li data-md>
     <p>store <code>value</code> to some in bounds texel</p>
   </ul>
   <p><strong>TODO:</strong></p>
<pre class="def">TODO(dsinclair): Need gather operations
</pre>
   <h3 class="heading settled" data-level="16.9" id="atomic-builtin-functions"><span class="secno">16.9. </span><span class="content">Atomic built-in functions</span><a class="self-link" href="#atomic-builtin-functions"></a></h3>
   <p>Atomic built-in functions can be used to read/write/read-modify-write atomic
objects. They are the only operations allowed on <a href="#atomic-types">§ 4.2.7 Atomic Types</a>.</p>
   <p>All atomic built-in functions use a <code>relaxed</code> memory ordering (<strong>0</strong>-value
integral constant in SPIR-V for all <code>Memory Semantics</code> operands).
This means synchronization and ordering guarantees only apply among atomic
operations acting on the same <a data-link-type="dfn" href="#memory-locations" id="ref-for-memory-locations⑥">memory locations</a>.
No synchronization or ordering guarantees apply between atomic and
non-atomic memory accesses, or between atomic accesses acting on different
memory locations.</p>
   <p>Atomic built-in functions <code>must</code> not be used in a <a data-link-type="dfn" href="#vertex" id="ref-for-vertex③">vertex</a> shader stage.</p>
   <p>The storage class <code>SC</code> of the <code>atomic_ptr</code> parameter in all atomic built-in
functions <code>must</code> be either <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage①⑦">storage</a> or <a data-link-type="dfn" href="#storage-classes-workgroup" id="ref-for-storage-classes-workgroup⑦">workgroup</a>. <a data-link-type="dfn" href="#storage-classes-workgroup" id="ref-for-storage-classes-workgroup⑧">workgroup</a> atomics have a <strong>Workgroup</strong> memory scope in SPIR-V, while <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage①⑧">storage</a> atomics have a <strong>Device</strong> memory scope in SPIR-V.</p>
   <p>The access mode <code>A</code> in all atomic built-in functions must be <a data-link-type="dfn" href="#access-read_write" id="ref-for-access-read_write①①">read_write</a>.</p>
   <p>TODO: Add links to the eventual memory model descriptions.</p>
   <h4 class="heading settled" data-level="16.9.1" id="atomic-load"><span class="secno">16.9.1. </span><span class="content">Atomic Load</span><a class="self-link" href="#atomic-load"></a></h4>
<pre class="language-rust highlight"><c- n>atomicLoad</c-><c- p>(</c-><c- n>atomic_ptr</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>SC</c-><c- p>,</c-> <c- n>atomic</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>A</c-><c- o>></c-><c- p>)</c-> -> <c- nc>T</c->

<c- c1>// Maps to the SPIR-V instruction OpAtomicLoad.</c->
</pre>
   <p>Returns the atomically loaded the value pointed to by <code>atomic_ptr</code>.
It does not <a data-link-type="dfn" href="#atomic-modification" id="ref-for-atomic-modification">modify</a> the object.</p>
   <h4 class="heading settled" data-level="16.9.2" id="atomic-store"><span class="secno">16.9.2. </span><span class="content">Atomic Store</span><a class="self-link" href="#atomic-store"></a></h4>
<pre class="language-rust highlight"><c- n>atomicStore</c-><c- p>(</c-><c- n>atomic_ptr</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>SC</c-><c- p>,</c-> <c- n>atomic</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>A</c-><c- o>></c-><c- p>,</c-> <c- n>v</c->: <c- nc>T</c-><c- p>)</c->

<c- c1>// Maps to the SPIR-V instruction OpAtomicStore.</c->
</pre>
   <p>Atomically stores the value <code>v</code> in the atomic object pointed to by <code>atomic_ptr</code>.</p>
   <h4 class="heading settled" data-level="16.9.3" id="atomic-rmw"><span class="secno">16.9.3. </span><span class="content">Atomic Read-Modify-Write</span><a class="self-link" href="#atomic-rmw"></a></h4>
<pre class="language-rust highlight"><c- n>atomicAdd</c-><c- p>(</c-><c- n>atomic_ptr</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>SC</c-><c- p>,</c-> <c- n>atomic</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>A</c-><c- o>></c-><c- p>,</c-> <c- n>v</c->: <c- nc>T</c-><c- p>)</c-> -> <c- nc>T</c->
<c- n>atomicSub</c-><c- p>(</c-><c- n>atomic_ptr</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>SC</c-><c- p>,</c-> <c- n>atomic</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>A</c-><c- o>></c-><c- p>,</c-> <c- n>v</c->: <c- nc>T</c-><c- p>)</c-> -> <c- nc>T</c->
<c- n>atomicMax</c-><c- p>(</c-><c- n>atomic_ptr</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>SC</c-><c- p>,</c-> <c- n>atomic</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>A</c-><c- o>></c-><c- p>,</c-> <c- n>v</c->: <c- nc>T</c-><c- p>)</c-> -> <c- nc>T</c->
<c- n>atomicMin</c-><c- p>(</c-><c- n>atomic_ptr</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>SC</c-><c- p>,</c-> <c- n>atomic</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>A</c-><c- o>></c-><c- p>,</c-> <c- n>v</c->: <c- nc>T</c-><c- p>)</c-> -> <c- nc>T</c->
<c- n>atomicAnd</c-><c- p>(</c-><c- n>atomic_ptr</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>SC</c-><c- p>,</c-> <c- n>atomic</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>A</c-><c- o>></c-><c- p>,</c-> <c- n>v</c->: <c- nc>T</c-><c- p>)</c-> -> <c- nc>T</c->
<c- n>atomicOr</c-><c- p>(</c-><c- n>atomic_ptr</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>SC</c-><c- p>,</c-> <c- n>atomic</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>A</c-><c- o>></c-><c- p>,</c-> <c- n>v</c->: <c- nc>T</c-><c- p>)</c-> -> <c- nc>T</c->
<c- n>atomicXor</c-><c- p>(</c-><c- n>atomic_ptr</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>SC</c-><c- p>,</c-> <c- n>atomic</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>A</c-><c- o>></c-><c- p>,</c-> <c- n>v</c->: <c- nc>T</c-><c- p>)</c-> -> <c- nc>T</c->

<c- c1>// Mappings to SPIR-V instructions:</c->
<c- c1>// atomicAdd -> OpAtomicIAdd</c->
<c- c1>// atomicSub -> OpAtomicISub</c->
<c- c1>// atomicMax -> OpAtomicSMax or OpAtomicUMax (depending on the signedness of T)</c->
<c- c1>// atomicMin -> OpAtomicSMin or OpAtomicUMin (depending on the signedness of T)</c->
<c- c1>// atomicAnd -> OpAtomicAnd</c->
<c- c1>// atomicOr  -> OpAtomicOr</c->
<c- c1>// atomicXor -> OpAtomicXor</c->
</pre>
   Each function performs the following steps atomically: 
   <ol>
    <li data-md>
     <p>Load the original value pointed to by <code>atomic_ptr</code>.</p>
    <li data-md>
     <p>Obtains a new value by performing the operation (e.g. max) from the function
name with the value <var>v</var>.</p>
    <li data-md>
     <p>Store the new value using <code>atomic_ptr</code>.</p>
   </ol>
   <p>Each function returns the original value stored in the atomic object.</p>
<pre class="language-rust highlight"><c- n>atomicExchange</c-><c- p>(</c-><c- n>atomic_ptr</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>SC</c-><c- p>,</c-> <c- n>atomic</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>A</c-><c- o>></c-><c- p>,</c-> <c- n>v</c->: <c- nc>T</c-><c- p>)</c-> -> <c- nc>T</c->

<c- c1>// Maps to the SPIR-V instruction OpAtomicExchange.</c->
</pre>
   <p>Atomically stores the value <code>v</code> in the atomic object pointed to <code>atomic_ptr</code> and returns the original value stored in the atomic object.</p>
<pre class="language-rust highlight"><c- n>atomicCompareExchangeWeak</c-><c- p>(</c-><c- n>atomic_ptr</c->: <c- nc>ptr</c-><c- o>&lt;</c-><c- n>SC</c-><c- p>,</c-> <c- n>atomic</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>A</c-><c- o>></c-><c- p>,</c-> <c- n>cmp</c->: <c- nc>T</c-><c- p>,</c-> <c- n>v</c->: <c- nc>T</c-><c- p>)</c-> -> <c- nc>vec2</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c->

<c- c1>// Maps to the SPIR-V instruction OpAtomicCompareExchange.</c->
</pre>
   <p>Performs the following steps atomically:</p>
   <ol>
    <li data-md>
     <p>Load the original value pointed to by <code>atomic_ptr</code>.</p>
    <li data-md>
     <p>Compare the original value to the value <code>v</code> using an equality operation.</p>
    <li data-md>
     <p>Store the value <code>v</code> <code>only if</code> the result of the equality comparison was <strong>true</strong>.</p>
   </ol>
   <p>Returns a two-element vector, where the first element is the original value of
the atomic object and the second element is whether or not the comparison
succeeded (<strong>1</strong> if successful, <strong>0</strong> otherwise).</p>
   <p class="note" role="note"><span>Note:</span> the equality comparison may spuriously fail on some implementations. That
is, the second element of the result vector may be <strong>0</strong> even if the first
element of the result vector equals <code>cmp</code>.</p>
   <h3 class="heading settled" data-level="16.10" id="pack-builtin-functions"><span class="secno">16.10. </span><span class="content">Data packing built-in functions</span><a class="self-link" href="#pack-builtin-functions"></a></h3>
   <p>Data packing builtin functions can be used to encode values using data formats that
do not correspond directly to types in WGSL.
This enables a program to write many densely packed values to memory, which can
reduce a shader’s memory bandwidth demand.</p>
   <table class="data">
    <thead>
     <tr>
      <td>Conclusion
      <td>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="packing 4x8snorm">
      <td class="nowrap"><code>pack4x8snorm</code>(<var>e</var>: vec4&lt;f32>) -> u32 
      <td>Converts four normalized floating point values to 8-bit signed integers, and then combines them
        into one <code>u32</code> value.<br> Component <var>e</var>[<var>i</var>] of the input is converted to an 8-bit twos complement integer value
        ⌊ 0.5 + 127 × min(1, max(-1, <var>e</var>[<var>i</var>])) ⌋ which is then placed in bits
        8 × <var>i</var> through
        8 × <var>i</var> + 7 of the result. 
     <tr class="algorithm" data-algorithm="packing 4x8unorm">
      <td class="nowrap"><code>pack4x8unorm</code>(<var>e</var>: vec4&lt;f32>) -> u32 
      <td>Converts four normalized floating point values to 8-bit unsigned integers, and then combines them
        into one <code>u32</code> value.<br> Component <var>e</var>[<var>i</var>] of the input is converted to an 8-bit unsigned integer value
        ⌊ 0.5 + 255 × min(1, max(0, <var>e</var>[<var>i</var>])) ⌋ which is then placed in bits
        8 × <var>i</var> through
        8 × <var>i</var> + 7 of the result. 
     <tr class="algorithm" data-algorithm="packing 2x16snorm">
      <td class="nowrap"><code>pack2x16snorm</code>(<var>e</var>: vec2&lt;f32>) -> u32 
      <td>Converts two normalized floating point values to 16-bit signed integers, and then combines them
        into one <code>u32</code> value.<br> Component <var>e</var>[<var>i</var>] of the input is converted to a 16-bit twos complement integer value
        ⌊ 0.5 + 32767 × min(1, max(-1, <var>e</var>[<var>i</var>])) ⌋ which is then placed in bits
        16 × <var>i</var> through
        16 × <var>i</var> + 15 of the result. 
     <tr class="algorithm" data-algorithm="packing 2x16unorm">
      <td class="nowrap"><code>pack2x16unorm</code>(<var>e</var>: vec2&lt;f32>) -> u32 
      <td>Converts two normalized floating point values to 16-bit unsigned integers, and then combines them
        into one <code>u32</code> value.<br> Component <var>e</var>[<var>i</var>] of the input is converted to a 16-bit unsigned integer value
        ⌊ 0.5 + 65535 × min(1, max(0, <var>e</var>[<var>i</var>])) ⌋ which is then placed in bits
        16 × <var>i</var> through
        16 × <var>i</var> + 15 of the result. 
     <tr class="algorithm" data-algorithm="packing 2x16float">
      <td class="nowrap"><code>pack2x16float</code>(<var>e</var>: vec2&lt;f32>) -> u32 
      <td>Converts two floating point values to half-precision floating point numbers, and then combines
        them into one one <code>u32</code> value.<br> Component <var>e</var>[<var>i</var>] of the input is converted to a <a data-link-type="biblio" href="#biblio-ieee-754">IEEE-754</a> binary16 value, which is then
        placed in bits
        16 × <var>i</var> through
        16 × <var>i</var> + 15 of the result.
        See <a href="#floating-point-conversion">§ 12.5.2 Floating point conversion</a>. 
   </table>
   <h3 class="heading settled" data-level="16.11" id="unpack-builtin-functions"><span class="secno">16.11. </span><span class="content">Data unpacking built-in functions</span><a class="self-link" href="#unpack-builtin-functions"></a></h3>
   <p>Data unpacking builtin functions can be used to decode values in
data formats that do not correspond directly to types in WGSL.
This enables a program to read many densely packed values from memory, which can
reduce a shader’s memory bandwidth demand.</p>
   <table class="data">
    <thead>
     <tr>
      <td>Conclusion
      <td>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="unpacking 4x8snorm">
      <td class="nowrap"><code>unpack4x8snorm</code>(<var>e</var>: u32) -> vec4&lt;f32> 
      <td>Decomposes a 32-bit value into four 8-bit chunks, then reinterprets
        each chunk as a signed normalized floating point value.<br> Component <var>i</var> of the result is max(<var>v</var> ÷ 127, -1), where <var>v</var> is the interpretation of
        bits 8×<var>i</var> through 8×<var>i</var>+7 of <var>e</var> as a twos-complement signed integer. 
     <tr class="algorithm" data-algorithm="unpacking 4x8unorm">
      <td class="nowrap"><code>unpack4x8unorm</code>(<var>e</var>: u32) -> vec4&lt;f32> 
      <td>Decomposes a 32-bit value into four 8-bit chunks, then reinterprets
        each chunk as an unsigned normalized floating point value.<br> Component <var>i</var> of the result is <var>v</var> ÷ 255, where <var>v</var> is the interpretation of
        bits 8×<var>i</var> through 8×<var>i</var>+7 of <var>e</var> as an unsigned integer. 
     <tr class="algorithm" data-algorithm="unpacking 2x16snorm">
      <td class="nowrap"><code>unpack2x16snorm</code>(<var>e</var>: u32) -> vec2&lt;f32> 
      <td>Decomposes a 32-bit value into two 16-bit chunks, then reinterprets
        each chunk as a signed normalized floating point value.<br> Component <var>i</var> of the result is max(<var>v</var> ÷ 32767, -1), where <var>v</var> is the interpretation of
        bits 16×<var>i</var> through 16×<var>i</var>+15 of <var>e</var> as a twos-complement signed integer. 
     <tr class="algorithm" data-algorithm="unpacking 2x16unorm">
      <td class="nowrap"><code>unpack2x16unorm</code>(<var>e</var>: u32) -> vec2&lt;f32> 
      <td>Decomposes a 32-bit value into two 16-bit chunks, then reinterprets
        each chunk as an unsigned normalized floating point value.<br> Component <var>i</var> of the result is <var>v</var> ÷ 65535, where <var>v</var> is the interpretation of
        bits 16×<var>i</var> through 16×<var>i</var>+15 of <var>e</var> as an unsigned integer. 
     <tr class="algorithm" data-algorithm="unpacking 2x16float">
      <td class="nowrap"><code>unpack2x16float</code>(<var>e</var>: u32) -> vec2&lt;f32> 
      <td>Decomposes a 32-bit value into two 16-bit chunks, and reinterpets each chunk
        as a floating point value.<br> Component <var>i</var> of the result is the f32 representation of <var>v</var>,
        where <var>v</var> is the interpretation of bits 16×<var>i</var> through 16×<var>i</var>+15 of <var>e</var> as an <a data-link-type="biblio" href="#biblio-ieee-754">IEEE-754</a> binary16 value.
        See <a href="#floating-point-conversion">§ 12.5.2 Floating point conversion</a>. 
   </table>
   <h3 class="heading settled" data-level="16.12" id="sync-builtin-functions"><span class="secno">16.12. </span><span class="content">Synchronization built-in functions</span><a class="self-link" href="#sync-builtin-functions"></a></h3>
   <p>WGSL provides the following synchronization functions:</p>
<pre class="language-rust highlight"><c- k>fn</c-> <c- nf>storageBarrier</c-><c- p>()</c->
<c- k>fn</c-> <c- nf>workgroupBarrier</c-><c- p>()</c->
</pre>
   <p>All synchronization functions execute a control barrier with Acquire/Release
memory ordering. That is, all synchronization functions, and affected memory
and atomic operations are ordered in <a href="#program-order">§ 12.1.2 Program order (within an invocation) TODO</a> relative to the
synchronization function.  Additionally, the affected memory and atomic
operations program-ordered before the synchronization function must be visible
to all other threads in the workgroup before any affected memory or atomic
operation program-ordered after the synchronization function is executed by a
member of the workgroup.
All synchronization functions must only be used in the <a data-link-type="dfn" href="#compute" id="ref-for-compute③">compute</a> shader stage.</p>
   <p>storageBarrier affects memory and atomic operations in the <a data-link-type="dfn" href="#storage-classes-storage" id="ref-for-storage-classes-storage①⑨">storage</a> storage class.</p>
   <p>workgroupBarrier affects memory and atomic operations in the <a data-link-type="dfn" href="#storage-classes-workgroup" id="ref-for-storage-classes-workgroup⑨">workgroup</a> storage class.</p>
   <p>TODO: Add links to the eventual memory model.</p>
   <div class="example spirv barrier mapping no-marker" id="example-d8187cc3">
    <a class="self-link" href="#example-d8187cc3"></a>
    <div class="marker">EXAMPLE: Mapping workgroupBarrier to SPIR-V</div>
<pre>storageBarrier();
// Maps to:
// Execution Scope is Workgroup = %uint_2
// Memory Scope is Device = %uint_1
// Memory Semantics are AcquireRelease | UniformMemory (0x8 | 0x40) = %uint_72
// OpControlBarrier %uint_2 %uint_1 %uint_72

workgroupBarrier();
// Maps to:
// Execution and Memory Scope are Workgroup = %uint_2
// Memory semantics are AcquireRelease | WorkgroupMemory (0x8 | 0x100) = %uint_264
// OpControlBarrier %uint_2 %uint_2 %uint_264

workgroupBarrier();
storageBarrier();
// Or, equivalently:
storageBarrier();
workgroupBarrier();
// Could be mapped to a single OpControlBarrier:
// Execution scope is Workgroup = %uint_2
// Memory Scope is Device = %uint_1
// Memory semantics are AcquireRelease | UniformMemory | WorkgroupMemory
//   (0x8 | 0x40 | 0x100) = %uint_328
// OpControlBarrier %uint_2 %uint_1 %uint_328
</pre>
   </div>
   <h3 class="heading settled" data-level="16.13" id="value-steering-functions"><span class="secno">16.13. </span><span class="content">Value-steering functions</span><a class="self-link" href="#value-steering-functions"></a></h3>
   <table class="data">
    <thead>
     <tr>
      <th>Conclusion
      <td>Notes 
    <tbody>
     <tr class="algorithm" data-algorithm="compute a value then ignore it">
      <td class="nowrap"> <code>ignore</code>(<var>e</var>: <var>T</var>) 
      <td>
       Evaluates <var>e</var>, and then ignores the result.<br> Type <var>T</var> is any type that is valid as a function parameter. 
       <p class="note" role="note"><span>Note:</span> An argument to <code>ignore()</code> cannot have an atomic or runtime-sized array type, but pointers to these types can be used.</p>
   </table>
   <h2 class="heading settled" data-level="17" id="junkyard"><span class="secno">17. </span><span class="content">MATERIAL TO BE MOVED TO A NEW HOME OR DELETED</span><a class="self-link" href="#junkyard"></a></h2>
   <p>WGSL has operations for:</p>
   <ul>
    <li data-md>
     <p>creating a new composite value from an old one by replacing one of its components</p>
   </ul>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note. </p>
   <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
   <p>Requirements phrased in the imperative as part of algorithms
    (such as "strip any leading space characters"
    or "return false and abort these steps")
    are to be interpreted with the meaning of the key word
    ("must", "should", "may", etc)
    used in introducing the algorithm. </p>
   <p>Conformance requirements phrased as algorithms or specific steps
    can be implemented in any manner,
    so long as the end result is equivalent.
    In particular, the algorithms defined in this specification
    are intended to be easy to understand
    and are not intended to be performant.
    Implementers are encouraged to optimize. </p>
  </div>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#access-mode">access mode</a><span>, in § 4.3.2</span>
   <li><a href="#address-of">address-of</a><span>, in § 6.15</span>
   <li><a href="#attribute-align">align</a><span>, in § 3.6</span>
   <li><a href="#alignof">AlignOf</a><span>, in § 4.3.7</span>
   <li><a href="#alignofmember">AlignOfMember</a><span>, in § 4.3.7</span>
   <li><a href="#array">array</a><span>, in § 4.2.8</span>
   <li><a href="#arrayed-texture">arrayed texture</a><span>, in § 4.5</span>
   <li><a href="#array-size">array size</a><span>, in § 4.5</span>
   <li><a href="#assignment-statement">assignment statement</a><span>, in § 7.2</span>
   <li><a href="#atomic-modification">atomic modification</a><span>, in § 4.2.7</span>
   <li><a href="#atomic-type">atomic type</a><span>, in § 4.2.7</span>
   <li><a href="#attribute">attribute</a><span>, in § 3.6</span>
   <li><a href="#attribute-binding">binding</a><span>, in § 3.6</span>
   <li><a href="#attribute-block">block</a><span>, in § 3.6</span>
   <li><a href="#bool">bool</a><span>, in § 4.2.1</span>
   <li><a href="#attribute-builtin">builtin</a><span>, in § 3.6</span>
   <li><a href="#built-in-functions">built-in functions</a><span>, in § 16</span>
   <li><a href="#built-in-input-variable">built-in input variable</a><span>, in § 9.3.1.1</span>
   <li><a href="#built-in-output-variable">built-in output variable</a><span>, in § 9.3.1.1</span>
   <li><a href="#call-site">call site</a><span>, in § 8.2</span>
   <li><a href="#ceiling-expression">ceiling expression</a><span>, in § 1.3</span>
   <li><a href="#channel-format">channel format</a><span>, in § 4.5.1</span>
   <li><a href="#channel-formats">Channel Formats</a><span>, in § 4.5.1</span>
   <li><a href="#channels">channels</a><span>, in § 4.5.1</span>
   <li><a href="#channel-transfer-function">channel transfer function</a><span>, in § 4.5.1</span>
   <li><a href="#components">components</a><span>, in § 4.2.10</span>
   <li><a href="#component-type">component type</a><span>, in § 4.2.5</span>
   <li><a href="#component-wise">component-wise</a><span>, in § 4.2.5</span>
   <li><a href="#composite">composite</a><span>, in § 4.2.10</span>
   <li><a href="#composite-reference-component-expression">composite reference component expression</a><span>, in § 4.4.4</span>
   <li><a href="#compute">compute</a><span>, in § 9.1</span>
   <li><a href="#compute-shader-grid">compute shader grid</a><span>, in § 12.3</span>
   <li><a href="#compute-shader-stage">compute shader stage</a><span>, in § 9.1</span>
   <li><a href="#constructible">constructible</a><span>, in § 4.2.11</span>
   <li><a href="#correctly-rounded">correctly rounded</a><span>, in § 12.5.1</span>
   <li><a href="#declaration">declaration</a><span>, in § 3.8</span>
   <li><a href="#directive">directive</a><span>, in § 3.7</span>
   <li><a href="#dispatch-command">dispatch command</a><span>, in § 1.2</span>
   <li><a href="#dispatch-size">dispatch size</a><span>, in § 12.3</span>
   <li><a href="#draw-command">draw command</a><span>, in § 1.2</span>
   <li><a href="#dynamic-context">dynamic context</a><span>, in § 4.1</span>
   <li><a href="#dynamic-error">dynamic error</a><span>, in § 2.1</span>
   <li><a href="#element-count">element count</a><span>, in § 4.2.8</span>
   <li><a href="#element-stride">element stride</a><span>, in § 4.3.7.3</span>
   <li><a href="#enable-directive">enable directive</a><span>, in § 10.1</span>
   <li><a href="#entry-point">entry point</a><span>, in § 9.2</span>
   <li><a href="#entry-point-io-type">Entry point IO type</a><span>, in § 9.3.1</span>
   <li><a href="#expression">expression</a><span>, in § 4.1</span>
   <li><a href="#extension">extension</a><span>, in § 10</span>
   <li><a href="#f32">f32</a><span>, in § 4.2.3</span>
   <li><a href="#fixed-size-array">fixed-size array</a><span>, in § 4.2.8</span>
   <li><a href="#floor-expression">floor expression</a><span>, in § 1.3</span>
   <li><a href="#formal-parameter">formal parameter</a><span>, in § 8.1</span>
   <li><a href="#fragment">fragment</a><span>, in § 9.1</span>
   <li><a href="#fragment-shader-stage">fragment shader stage</a><span>, in § 9.1</span>
   <li>
    function
    <ul>
     <li><a href="#function-function">dfn for function</a><span>, in § 8</span>
     <li><a href="#storage-classes-function">dfn for storage classes</a><span>, in § 4.3.6</span>
    </ul>
   <li><a href="#function-body">function body</a><span>, in § 8.1</span>
   <li><a href="#function-call">function call</a><span>, in § 8.2</span>
   <li><a href="#function-declaration">function declaration</a><span>, in § 8.1</span>
   <li><a href="#function-scope">function scope</a><span>, in § 5.3</span>
   <li><a href="#functions-in-a-shader-stage">functions in a shader stage</a><span>, in § 9.2</span>
   <li><a href="#global-invocation-id">global invocation ID</a><span>, in § 12.3</span>
   <li><a href="#gpucomputepipeline">GPUComputePipeline</a><span>, in § 9.1</span>
   <li><a href="#gpurenderpipeline">GPURenderPipeline</a><span>, in § 9.1</span>
   <li><a href="#attribute-group">group</a><span>, in § 3.6</span>
   <li><a href="#storage-classes-handle">handle</a><span>, in § 4.3.6</span>
   <li><a href="#host-shareable">host-shareable</a><span>, in § 4.3.5</span>
   <li><a href="#i32">i32</a><span>, in § 4.2.2</span>
   <li><a href="#implicit-stride">implicit stride</a><span>, in § 4.3.7.3</span>
   <li><a href="#indirection">indirection</a><span>, in § 6.16</span>
   <li><a href="#inherited-from">inherited from</a><span>, in § 12.5.1</span>
   <li><a href="#in-scope">in scope</a><span>, in § 3.8</span>
   <li><a href="#integer-scalar">integer scalar</a><span>, in § 4.2.4</span>
   <li><a href="#interface-of-a-shader-stage">interface of a shader stage</a><span>, in § 9.3</span>
   <li><a href="#attribute-interpolate">interpolate</a><span>, in § 3.6</span>
   <li><a href="#interpolation-sampling">interpolation sampling</a><span>, in § 9.3.1.3</span>
   <li><a href="#interpolation-type">interpolation type</a><span>, in § 9.3.1.3</span>
   <li><a href="#invalid-memory-reference">invalid memory reference</a><span>, in § 4.4.2</span>
   <li><a href="#attribute-invariant">invariant</a><span>, in § 3.6</span>
   <li><a href="#invocations">invocations</a><span>, in § 1.2</span>
   <li><a href="#io-shareable">IO-shareable</a><span>, in § 4.3.4</span>
   <li><a href="#iteration">iteration</a><span>, in § 7.3.4</span>
   <li><a href="#left-hand-side">left-hand side</a><span>, in § 7.2</span>
   <li><a href="#let-declaration">let declaration</a><span>, in § 5</span>
   <li><a href="#lifetime">lifetime</a><span>, in § 5</span>
   <li><a href="#load-rule">Load Rule</a><span>, in § 4.4.3</span>
   <li><a href="#local-invocation-id">local invocation ID</a><span>, in § 12.3</span>
   <li><a href="#local-invocation-index">local invocation index</a><span>, in § 12.3</span>
   <li><a href="#attribute-location">location</a><span>, in § 3.6</span>
   <li><a href="#loop-body">loop body</a><span>, in § 7.3.4</span>
   <li><a href="#matrix">matrix</a><span>, in § 4.2.6</span>
   <li><a href="#memory-access">memory access</a><span>, in § 4.3.2</span>
   <li><a href="#memory-layout">memory layout</a><span>, in § 4.3.7</span>
   <li><a href="#memory-locations">memory locations</a><span>, in § 4.3.1</span>
   <li><a href="#memory-view">memory view</a><span>, in § 4.4</span>
   <li><a href="#module-scope">module scope</a><span>, in § 3.8</span>
   <li><a href="#name">name</a><span>, in § 3.8</span>
   <li><a href="#non-arrayed-texture">non-arrayed texture</a><span>, in § 4.5</span>
   <li><a href="#numeric-scalar">numeric scalar</a><span>, in § 4.2.4</span>
   <li><a href="#numeric-vector">numeric vector</a><span>, in § 4.2.5</span>
   <li><a href="#offsetofmember">OffsetOfMember</a><span>, in § 4.3.7</span>
   <li><a href="#originating-variable">originating variable</a><span>, in § 4.4.2</span>
   <li><a href="#overlap">overlap</a><span>, in § 4.3.1</span>
   <li><a href="#attribute-override">override</a><span>, in § 3.6</span>
   <li><a href="#partial-derivative">partial derivative</a><span>, in § 12.4.2</span>
   <li><a href="#pipeline">pipeline</a><span>, in § 9.1</span>
   <li><a href="#pipeline-constant-id">pipeline constant ID</a><span>, in § 5.2</span>
   <li><a href="#pipeline-creation">Pipeline creation</a><span>, in § 2</span>
   <li><a href="#pipeline-creation-error">pipeline-creation error</a><span>, in § 2.1</span>
   <li><a href="#pipeline-input">pipeline input</a><span>, in § 9.3.1</span>
   <li><a href="#pipeline-output">pipeline output</a><span>, in § 9.3.1</span>
   <li><a href="#pipeline-overridable">pipeline-overridable</a><span>, in § 5.2</span>
   <li><a href="#pipeline-overridable-constant-has-a-default-value">pipeline-overridable constant has a default value</a><span>, in § 5.2</span>
   <li><a href="#pipeline-overridable-constant-identifier-string">pipeline-overridable constant identifier string</a><span>, in § 5.2</span>
   <li><a href="#plain-type">plain type</a><span>, in § 4.2</span>
   <li><a href="#pointee-type">pointee type</a><span>, in § 4.4</span>
   <li><a href="#pointer-type">pointer type</a><span>, in § 4.4</span>
   <li><a href="#predeclared">predeclared</a><span>, in § 3.8</span>
   <li><a href="#storage-classes-private">private</a><span>, in § 4.3.6</span>
   <li><a href="#program-error">program error</a><span>, in § 2.1</span>
   <li><a href="#access-read">read</a><span>, in § 4.3.2</span>
   <li><a href="#read-access">read access</a><span>, in § 4.3.2</span>
   <li><a href="#access-read_write">read_write</a><span>, in § 4.3.2</span>
   <li><a href="#reassociation">Reassociation</a><span>, in § 12.5.1</span>
   <li><a href="#reference-type">reference type</a><span>, in § 4.4</span>
   <li><a href="#requiredalignof">RequiredAlignOf</a><span>, in § 4.3.7.5</span>
   <li><a href="#resolves">resolves</a><span>, in § 3.8</span>
   <li><a href="#resource">resource</a><span>, in § 9.3.2</span>
   <li><a href="#resource-interface-of-a-shader">resource interface of a shader</a><span>, in § 9.3.2</span>
   <li><a href="#return">return</a><span>, in § 7.3.9</span>
   <li><a href="#return-type">return type</a><span>, in § 8.1</span>
   <li><a href="#right-hand-side">right-hand side</a><span>, in § 7.2</span>
   <li><a href="#roundup">roundUp</a><span>, in § 1.3</span>
   <li><a href="#runtime-sized">runtime-sized</a><span>, in § 4.2.8</span>
   <li><a href="#sampler">sampler</a><span>, in § 4.5.7</span>
   <li><a href="#scalar">scalar</a><span>, in § 4.2.4</span>
   <li><a href="#scope">scope</a><span>, in § 3.8</span>
   <li><a href="#semantics-of-an-expression">semantics of an expression</a><span>, in § 4.1.1</span>
   <li><a href="#shader">shader</a><span>, in § 1.2</span>
   <li><a href="#shader-creation-error">shader-creation error</a><span>, in § 2.1</span>
   <li><a href="#shader-execution-end">Shader execution end</a><span>, in § 2</span>
   <li><a href="#shader-execution-start">Shader execution start</a><span>, in § 2</span>
   <li><a href="#shader-module-creation">Shader module creation</a><span>, in § 2</span>
   <li><a href="#shader-stages">shader stages</a><span>, in § 9.1</span>
   <li><a href="#attribute-size">size</a><span>, in § 3.6</span>
   <li><a href="#sizeof">SizeOf</a><span>, in § 4.3.7</span>
   <li><a href="#sizeofmember">SizeOfMember</a><span>, in § 4.3.7</span>
   <li><a href="#attribute-stage">stage</a><span>, in § 3.6</span>
   <li><a href="#statically-accessed">statically accessed</a><span>, in § 9.3</span>
   <li><a href="#statically-typed-language">statically typed language</a><span>, in § 4.1</span>
   <li><a href="#static-context">static context</a><span>, in § 4.1</span>
   <li><a href="#static-type">static type</a><span>, in § 4.1</span>
   <li><a href="#storable">storable</a><span>, in § 4.3.3</span>
   <li><a href="#storage-classes-storage">storage</a><span>, in § 4.3.6</span>
   <li><a href="#storage-buffer">storage buffer</a><span>, in § 5.1</span>
   <li><a href="#storage-classes">storage classes</a><span>, in § 4.3.6</span>
   <li><a href="#storage-texel-formats">storage-texel-formats</a><span>, in § 4.5.1</span>
   <li><a href="#storage-texture">storage texture</a><span>, in § 4.5.5</span>
   <li><a href="#store-type">store type</a><span>, in § 4.4</span>
   <li><a href="#attribute-stride">stride</a><span>, in § 3.6</span>
   <li><a href="#strideof">StrideOf</a><span>, in § 4.3.7</span>
   <li><a href="#structure">structure</a><span>, in § 4.2.9</span>
   <li><a href="#subexpressions">subexpressions</a><span>, in § 4.1</span>
   <li><a href="#texel">texel</a><span>, in § 4.5</span>
   <li><a href="#texel-format">texel format</a><span>, in § 4.5.1</span>
   <li><a href="#texture">texture</a><span>, in § 4.5</span>
   <li><a href="#transpose">transpose</a><span>, in § 1.3</span>
   <li><a href="#type">type</a><span>, in § 4</span>
   <li><a href="#type-assertion">type assertion</a><span>, in § 4.1</span>
   <li><a href="#type-checking">Type checking</a><span>, in § 4.1</span>
   <li><a href="#type-error">type error</a><span>, in § 4.1</span>
   <li><a href="#type-rule">type rule</a><span>, in § 4.1</span>
   <li><a href="#type-rule-applies-to-an-expression">type rule applies to an expression</a><span>, in § 4.1</span>
   <li><a href="#type-rule-tables">type rule tables</a><span>, in § 4.1.1</span>
   <li><a href="#u32">u32</a><span>, in § 4.2.2</span>
   <li><a href="#ulp">ULP</a><span>, in § 12.5.1</span>
   <li><a href="#storage-classes-uniform">uniform</a><span>, in § 4.3.6</span>
   <li><a href="#uniform-buffer">uniform buffer</a><span>, in § 5.1</span>
   <li><a href="#user-defined-function">user-defined function</a><span>, in § 8</span>
   <li><a href="#variable">variable</a><span>, in § 5</span>
   <li><a href="#variable-declaration">variable declaration</a><span>, in § 5</span>
   <li><a href="#vector">vector</a><span>, in § 4.2.5</span>
   <li><a href="#vertex">vertex</a><span>, in § 9.1</span>
   <li><a href="#vertex-shader-stage">vertex shader stage</a><span>, in § 9.1</span>
   <li><a href="#well-typed">well-typed</a><span>, in § 4.1</span>
   <li>
    workgroup
    <ul>
     <li><a href="#compute-shader-stage-workgroup">dfn for compute shader stage</a><span>, in § 12.3</span>
     <li><a href="#storage-classes-workgroup">dfn for storage classes</a><span>, in § 4.3.6</span>
    </ul>
   <li><a href="#workgroup-grid">workgroup grid</a><span>, in § 12.3</span>
   <li><a href="#workgroup-id">workgroup ID</a><span>, in § 12.3</span>
   <li><a href="#attribute-workgroup_size">workgroup_size</a><span>, in § 3.6</span>
   <li><a href="#access-write">write</a><span>, in § 4.3.2</span>
   <li><a href="#write-access">write access</a><span>, in § 4.3.2</span>
   <li><a href="#write-only-storage-texture">write-only storage texture</a><span>, in § 4.5.5</span>
   <li><a href="#zero-value">zero value</a><span>, in § 6.4</span>
  </ul>
  <aside class="dfn-panel" data-for="term-for-_a_id_image_format_a_image_format">
   <a href="https://www.khronos.org/registry/spir-v/specs/unified1/SPIRV.html#_a_id_image_format_a_image_format">https://www.khronos.org/registry/spir-v/specs/unified1/SPIRV.html#_a_id_image_format_a_image_format</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-_a_id_image_format_a_image_format">4.5.1. Texel formats</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[SPIR-V]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-_a_id_image_format_a_image_format">image formats</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-ieee-754">[IEEE-754]
   <dd><a href="http://ieeexplore.ieee.org/servlet/opac?punumber=4610933"><cite>IEEE Standard for Floating-Point Arithmetic</cite></a>. 29 August 2008. URL: <a href="http://ieeexplore.ieee.org/servlet/opac?punumber=4610933">http://ieeexplore.ieee.org/servlet/opac?punumber=4610933</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-spir-v">[SPIR-V]
   <dd>John Kessenich; Boaz Ouriel; Raun Krisch. <a href="https://www.khronos.org/registry/spir-v/specs/unified1/SPIRV.html"><cite>SPIR-V Specification</cite></a>. URL: <a href="https://www.khronos.org/registry/spir-v/specs/unified1/SPIRV.html">https://www.khronos.org/registry/spir-v/specs/unified1/SPIRV.html</a>
   <dt id="biblio-vulkanmemorymodel">[VulkanMemoryModel]
   <dd>Jeff Bolz; et al. <a href="https://www.khronos.org/registry/vulkan/specs/1.2-extensions/html/vkspec.html#memory-model"><cite>Vulkan Memory Model</cite></a>. URL: <a href="https://www.khronos.org/registry/vulkan/specs/1.2-extensions/html/vkspec.html#memory-model">https://www.khronos.org/registry/vulkan/specs/1.2-extensions/html/vkspec.html#memory-model</a>
   <dt id="biblio-webgpu">[WebGPU]
   <dd>Dzmitry Malyshau; Justin Fan; Kai Ninomiya. <a href="https://gpuweb.github.io/gpuweb/"><cite>WebGPU</cite></a>. Editor's Draft. URL: <a href="https://gpuweb.github.io/gpuweb/">https://gpuweb.github.io/gpuweb/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Array types should differ if they have different element strides.
See https://github.com/gpuweb/gpuweb/issues/1534<a href="#issue-36e81624"> ↵ </a></div>
   <div class="issue"> The WebGPU pipeline creation API must specify how API-supplied values are mapped to
shader scalar values.  For booleans, I suggest using a 32-bit integer, where only 0 maps to <code>false</code>.
If WGSL gains non-32-bit numeric scalars, I recommend overridable constants continue being 32-bit
numeric types.<a href="#issue-d99564c7"> ↵ </a></div>
   <div class="issue"> <a href="#uniform-control-flow">§ 12.2.1 Uniform control flow TODO</a> needs to state whether all invocations being discarded maintains uniform control flow.<a href="#issue-f6ed1173"> ↵ </a></div>
   <div class="issue"> Revisit aliasing rules for clarity.<a href="#issue-3f300e66"> ↵ </a></div>
   <div class="issue"> Can we query upper bounds on workgroup size dimensions?  Is it independent of the shader, or
  a property to be queried after creating the shader module?<a href="#issue-1bad4e2b"> ↵ </a></div>
   <div class="issue"> in Vulkan, builtin variables occoupy I/O location slots counting toward limits.<a href="#issue-d1420752"> ↵ </a></div>
   <div class="issue"> <a href="https://github.com/gpuweb/gpuweb/issues/1045">WebGPU issue 1045</a>:
Dispatch group counts must be positive.
However, how do we handle an indirect dispatch that specifies a group count of zero.<a href="#issue-04b819b3"> ↵ </a></div>
   <div class="issue"> (dneto) Default rounding mode is an implementation choice.  Is that what we want?<a href="#issue-5abef8be"> ↵ </a></div>
   <div class="issue"> Check behaviour of the f32 to f16 conversion for numbers just beyond the max normal f16 values.
I’ve written what an NVIDIA GPU does.  See https://github.com/google/amber/pull/918 for an executable test case.<a href="#issue-d2d1e989"> ↵ </a></div>
  </div>
  <aside class="dfn-panel" data-for="draw-command">
   <b><a href="#draw-command">#draw-command</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-draw-command">2. Shader Lifecycle</a>
    <li><a href="#ref-for-draw-command①">9.1. Shader Stages</a> <a href="#ref-for-draw-command②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dispatch-command">
   <b><a href="#dispatch-command">#dispatch-command</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dispatch-command">2. Shader Lifecycle</a>
    <li><a href="#ref-for-dispatch-command①">9.1. Shader Stages</a> <a href="#ref-for-dispatch-command②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="invocations">
   <b><a href="#invocations">#invocations</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-invocations">2. Shader Lifecycle</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="floor-expression">
   <b><a href="#floor-expression">#floor-expression</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-floor-expression">16.3. Float built-in functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="ceiling-expression">
   <b><a href="#ceiling-expression">#ceiling-expression</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ceiling-expression">16.3. Float built-in functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="roundup">
   <b><a href="#roundup">#roundup</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-roundup">4.3.7.1. Alignment and Size</a> <a href="#ref-for-roundup①">(2)</a> <a href="#ref-for-roundup②">(3)</a>
    <li><a href="#ref-for-roundup③">4.3.7.2. Structure Layout Rules</a> <a href="#ref-for-roundup④">(2)</a>
    <li><a href="#ref-for-roundup⑤">4.3.7.3. Array Layout Rules</a>
    <li><a href="#ref-for-roundup⑥">4.3.7.5. Storage Class Layout Constraints</a> <a href="#ref-for-roundup⑦">(2)</a> <a href="#ref-for-roundup⑧">(3)</a> <a href="#ref-for-roundup⑨">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transpose">
   <b><a href="#transpose">#transpose</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transpose">6.9. Arithmetic Expressions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="shader-module-creation">
   <b><a href="#shader-module-creation">#shader-module-creation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-shader-module-creation">2.1. Kinds of errors</a>
    <li><a href="#ref-for-shader-module-creation①">4.2.8. Array Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="pipeline-creation">
   <b><a href="#pipeline-creation">#pipeline-creation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-pipeline-creation">2.1. Kinds of errors</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="shader-creation-error">
   <b><a href="#shader-creation-error">#shader-creation-error</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-shader-creation-error">6.15. Address-Of Expression</a>
    <li><a href="#ref-for-shader-creation-error①">16.8.6. textureSample</a>
    <li><a href="#ref-for-shader-creation-error②">16.8.7. textureSampleBias</a>
    <li><a href="#ref-for-shader-creation-error③">16.8.8. textureSampleCompare</a>
    <li><a href="#ref-for-shader-creation-error④">16.8.10. textureSampleGrad</a>
    <li><a href="#ref-for-shader-creation-error⑤">16.8.11. textureSampleLevel</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="attribute-align">
   <b><a href="#attribute-align">#attribute-align</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-attribute-align">4.2.9. Structure Types</a>
    <li><a href="#ref-for-attribute-align①">4.3.5. Host-shareable Types</a>
    <li><a href="#ref-for-attribute-align②">4.3.7.2. Structure Layout Rules</a>
    <li><a href="#ref-for-attribute-align③">4.3.7.4. Internal Layout of Values</a>
    <li><a href="#ref-for-attribute-align④">4.3.7.5. Storage Class Layout Constraints</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="attribute-binding">
   <b><a href="#attribute-binding">#attribute-binding</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-attribute-binding">5.1. Module Scope Variables</a> <a href="#ref-for-attribute-binding①">(2)</a>
    <li><a href="#ref-for-attribute-binding②">9.3.2. Resource interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="attribute-block">
   <b><a href="#attribute-block">#attribute-block</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-attribute-block">4.2.9. Structure Types</a>
    <li><a href="#ref-for-attribute-block①">5.1. Module Scope Variables</a> <a href="#ref-for-attribute-block②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="attribute-builtin">
   <b><a href="#attribute-builtin">#attribute-builtin</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-attribute-builtin">4.2.9. Structure Types</a>
    <li><a href="#ref-for-attribute-builtin①">8.1. Declaring a user-defined function</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="attribute-group">
   <b><a href="#attribute-group">#attribute-group</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-attribute-group">3.6. Attributes</a>
    <li><a href="#ref-for-attribute-group①">5.1. Module Scope Variables</a> <a href="#ref-for-attribute-group②">(2)</a>
    <li><a href="#ref-for-attribute-group③">9.3.2. Resource interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="attribute-interpolate">
   <b><a href="#attribute-interpolate">#attribute-interpolate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-attribute-interpolate">9.3.1.3. Interpolation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="attribute-location">
   <b><a href="#attribute-location">#attribute-location</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-attribute-location">4.2.9. Structure Types</a>
    <li><a href="#ref-for-attribute-location①">8.1. Declaring a user-defined function</a>
    <li><a href="#ref-for-attribute-location②">9.3.1.3. Interpolation</a>
    <li><a href="#ref-for-attribute-location③">9.3.1.4. Input-output Locations</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="attribute-override">
   <b><a href="#attribute-override">#attribute-override</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-attribute-override">5.2. Module Constants</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="attribute-size">
   <b><a href="#attribute-size">#attribute-size</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-attribute-size">4.2.9. Structure Types</a>
    <li><a href="#ref-for-attribute-size①">4.3.5. Host-shareable Types</a>
    <li><a href="#ref-for-attribute-size②">4.3.7.2. Structure Layout Rules</a> <a href="#ref-for-attribute-size③">(2)</a>
    <li><a href="#ref-for-attribute-size④">4.3.7.4. Internal Layout of Values</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="attribute-stage">
   <b><a href="#attribute-stage">#attribute-stage</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-attribute-stage">8.1. Declaring a user-defined function</a>
    <li><a href="#ref-for-attribute-stage①">9.2.1. Function attributes for entry points</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="attribute-stride">
   <b><a href="#attribute-stride">#attribute-stride</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-attribute-stride">4.2.8. Array Types</a>
    <li><a href="#ref-for-attribute-stride①">4.2.9. Structure Types</a>
    <li><a href="#ref-for-attribute-stride②">4.3.5. Host-shareable Types</a>
    <li><a href="#ref-for-attribute-stride③">4.3.7.1. Alignment and Size</a> <a href="#ref-for-attribute-stride④">(2)</a>
    <li><a href="#ref-for-attribute-stride⑤">4.3.7.3. Array Layout Rules</a> <a href="#ref-for-attribute-stride⑥">(2)</a>
    <li><a href="#ref-for-attribute-stride⑦">4.3.7.4. Internal Layout of Values</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="attribute-workgroup_size">
   <b><a href="#attribute-workgroup_size">#attribute-workgroup_size</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-attribute-workgroup_size">8.1. Declaring a user-defined function</a>
    <li><a href="#ref-for-attribute-workgroup_size①">9.2.1. Function attributes for entry points</a>
    <li><a href="#ref-for-attribute-workgroup_size②">12.3. Compute Shaders and Workgroups</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="directive">
   <b><a href="#directive">#directive</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-directive">11. WGSL program TODO</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="declaration">
   <b><a href="#declaration">#declaration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-declaration">4. Types</a>
    <li><a href="#ref-for-declaration①">10.1. Enable Directive</a> <a href="#ref-for-declaration②">(2)</a>
    <li><a href="#ref-for-declaration③">11. WGSL program TODO</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="name">
   <b><a href="#name">#name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-name">5.2. Module Constants</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="scope">
   <b><a href="#scope">#scope</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-scope">10.1. Enable Directive</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="in-scope">
   <b><a href="#in-scope">#in-scope</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-in-scope">4.4.4. Forming reference and pointer values</a>
    <li><a href="#ref-for-in-scope①">5.3. Function Scope Variables and Constants</a>
    <li><a href="#ref-for-in-scope②">6.13. Variable Identifier Expression</a>
    <li><a href="#ref-for-in-scope③">6.14. Formal Parameter Expression</a>
    <li><a href="#ref-for-in-scope④">6.17. Constant Identifier Expression</a> <a href="#ref-for-in-scope⑤">(2)</a>
    <li><a href="#ref-for-in-scope⑥">7.1. Compound Statement</a>
    <li><a href="#ref-for-in-scope⑦">7.3.3. Switch Statement</a> <a href="#ref-for-in-scope⑧">(2)</a>
    <li><a href="#ref-for-in-scope⑨">7.3.4. Loop Statement</a>
    <li><a href="#ref-for-in-scope①⓪">7.3.5. For Statement</a> <a href="#ref-for-in-scope①①">(2)</a>
    <li><a href="#ref-for-in-scope①②">8.1. Declaring a user-defined function</a> <a href="#ref-for-in-scope①③">(2)</a>
    <li><a href="#ref-for-in-scope①④">9.3. Shader Interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="predeclared">
   <b><a href="#predeclared">#predeclared</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-predeclared">4. Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="resolves">
   <b><a href="#resolves">#resolves</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-resolves">4.4.4. Forming reference and pointer values</a>
    <li><a href="#ref-for-resolves①">5. var and let</a> <a href="#ref-for-resolves②">(2)</a>
    <li><a href="#ref-for-resolves③">6.13. Variable Identifier Expression</a>
    <li><a href="#ref-for-resolves④">6.14. Formal Parameter Expression</a>
    <li><a href="#ref-for-resolves⑤">6.17. Constant Identifier Expression</a> <a href="#ref-for-resolves⑥">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="module-scope">
   <b><a href="#module-scope">#module-scope</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-module-scope">1.2. Technical Overview</a>
    <li><a href="#ref-for-module-scope①">4.3.6. Storage Classes</a> <a href="#ref-for-module-scope②">(2)</a> <a href="#ref-for-module-scope③">(3)</a> <a href="#ref-for-module-scope④">(4)</a> <a href="#ref-for-module-scope⑤">(5)</a>
    <li><a href="#ref-for-module-scope⑥">5. var and let</a>
    <li><a href="#ref-for-module-scope⑦">5.1. Module Scope Variables</a> <a href="#ref-for-module-scope⑧">(2)</a>
    <li><a href="#ref-for-module-scope⑨">5.2. Module Constants</a>
    <li><a href="#ref-for-module-scope①⓪">8.1. Declaring a user-defined function</a>
    <li><a href="#ref-for-module-scope①①">9.3. Shader Interface</a>
    <li><a href="#ref-for-module-scope①②">9.3.1.1. Built-in Inputs and Outputs</a>
    <li><a href="#ref-for-module-scope①③">10.1. Enable Directive</a>
    <li><a href="#ref-for-module-scope①④">11. WGSL program TODO</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="type">
   <b><a href="#type">#type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-type">4.4. Memory View Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dynamic-context">
   <b><a href="#dynamic-context">#dynamic-context</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dynamic-context">5.3. Function Scope Variables and Constants</a>
    <li><a href="#ref-for-dynamic-context①">8.2. Function calls</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="type-rule">
   <b><a href="#type-rule">#type-rule</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-type-rule">4.1.1. Type rule tables</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="plain-type">
   <b><a href="#plain-type">#plain-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-plain-type">4.2. Plain Types</a>
    <li><a href="#ref-for-plain-type①">4.2.8. Array Types</a>
    <li><a href="#ref-for-plain-type②">4.2.9. Structure Types</a>
    <li><a href="#ref-for-plain-type③">4.2.11. Constructible Types</a>
    <li><a href="#ref-for-plain-type④">4.3.3. Storable Types</a>
    <li><a href="#ref-for-plain-type⑤">4.3.6. Storage Classes</a>
    <li><a href="#ref-for-plain-type⑥">4.4. Memory View Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="bool">
   <b><a href="#bool">#bool</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-bool">4.1. Type Checking</a>
    <li><a href="#ref-for-bool①">4.2.4. Scalar Types</a>
    <li><a href="#ref-for-bool②">4.3.4. IO-shareable Types</a> <a href="#ref-for-bool③">(2)</a>
    <li><a href="#ref-for-bool④">4.3.5. Host-shareable Types</a> <a href="#ref-for-bool⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="u32">
   <b><a href="#u32">#u32</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-u32">4.2.4. Scalar Types</a> <a href="#ref-for-u32①">(2)</a> <a href="#ref-for-u32②">(3)</a>
    <li><a href="#ref-for-u32③">4.2.7. Atomic Types</a>
    <li><a href="#ref-for-u32④">4.3.7.1. Alignment and Size</a>
    <li><a href="#ref-for-u32⑤">4.3.7.4. Internal Layout of Values</a>
    <li><a href="#ref-for-u32⑥">4.3.7.5. Storage Class Layout Constraints</a>
    <li><a href="#ref-for-u32⑦">6.5. Conversion Expressions</a>
    <li><a href="#ref-for-u32⑧">12.5.2. Floating point conversion</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="i32">
   <b><a href="#i32">#i32</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-i32">4.2.4. Scalar Types</a> <a href="#ref-for-i32①">(2)</a> <a href="#ref-for-i32②">(3)</a>
    <li><a href="#ref-for-i32③">4.2.7. Atomic Types</a>
    <li><a href="#ref-for-i32④">4.3.7.1. Alignment and Size</a>
    <li><a href="#ref-for-i32⑤">4.3.7.4. Internal Layout of Values</a> <a href="#ref-for-i32⑥">(2)</a>
    <li><a href="#ref-for-i32⑦">4.3.7.5. Storage Class Layout Constraints</a>
    <li><a href="#ref-for-i32⑧">6.5. Conversion Expressions</a>
    <li><a href="#ref-for-i32⑨">12.5.2. Floating point conversion</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="f32">
   <b><a href="#f32">#f32</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-f32">4.2.4. Scalar Types</a> <a href="#ref-for-f32①">(2)</a>
    <li><a href="#ref-for-f32②">4.3.7.1. Alignment and Size</a>
    <li><a href="#ref-for-f32③">4.3.7.4. Internal Layout of Values</a>
    <li><a href="#ref-for-f32④">4.3.7.5. Storage Class Layout Constraints</a>
    <li><a href="#ref-for-f32⑤">12.5.2. Floating point conversion</a> <a href="#ref-for-f32⑥">(2)</a> <a href="#ref-for-f32⑦">(3)</a> <a href="#ref-for-f32⑧">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="scalar">
   <b><a href="#scalar">#scalar</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-scalar">3.6. Attributes</a>
    <li><a href="#ref-for-scalar①">4.2. Plain Types</a>
    <li><a href="#ref-for-scalar②">4.2.5. Vector Types</a> <a href="#ref-for-scalar③">(2)</a>
    <li><a href="#ref-for-scalar④">4.2.7. Atomic Types</a>
    <li><a href="#ref-for-scalar⑤">4.2.8. Array Types</a>
    <li><a href="#ref-for-scalar⑥">4.2.9. Structure Types</a>
    <li><a href="#ref-for-scalar⑦">4.2.11. Constructible Types</a>
    <li><a href="#ref-for-scalar⑧">4.3.3. Storable Types</a>
    <li><a href="#ref-for-scalar⑨">4.3.4. IO-shareable Types</a> <a href="#ref-for-scalar①⓪">(2)</a>
    <li><a href="#ref-for-scalar①①">5.2. Module Constants</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="numeric-scalar">
   <b><a href="#numeric-scalar">#numeric-scalar</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-numeric-scalar">3.6. Attributes</a>
    <li><a href="#ref-for-numeric-scalar①">4.2.5. Vector Types</a>
    <li><a href="#ref-for-numeric-scalar②">4.3.5. Host-shareable Types</a>
    <li><a href="#ref-for-numeric-scalar③">6.6. Reinterpretation of Representation Expressions</a> <a href="#ref-for-numeric-scalar④">(2)</a>
    <li><a href="#ref-for-numeric-scalar⑤">9.3.1.2. User-defined Inputs and Outputs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="integer-scalar">
   <b><a href="#integer-scalar">#integer-scalar</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-integer-scalar">4.2.8. Array Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="vector">
   <b><a href="#vector">#vector</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-vector">4.2.10. Composite Types</a>
    <li><a href="#ref-for-vector①">4.2.11. Constructible Types</a>
    <li><a href="#ref-for-vector②">4.3.3. Storable Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="numeric-vector">
   <b><a href="#numeric-vector">#numeric-vector</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-numeric-vector">3.6. Attributes</a>
    <li><a href="#ref-for-numeric-vector①">4.3.4. IO-shareable Types</a> <a href="#ref-for-numeric-vector②">(2)</a>
    <li><a href="#ref-for-numeric-vector③">4.3.5. Host-shareable Types</a>
    <li><a href="#ref-for-numeric-vector④">6.6. Reinterpretation of Representation Expressions</a> <a href="#ref-for-numeric-vector⑤">(2)</a>
    <li><a href="#ref-for-numeric-vector⑥">9.3.1.2. User-defined Inputs and Outputs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="component-wise">
   <b><a href="#component-wise">#component-wise</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-component-wise">6.5. Conversion Expressions</a> <a href="#ref-for-component-wise①">(2)</a> <a href="#ref-for-component-wise②">(3)</a> <a href="#ref-for-component-wise③">(4)</a> <a href="#ref-for-component-wise④">(5)</a> <a href="#ref-for-component-wise⑤">(6)</a> <a href="#ref-for-component-wise⑥">(7)</a> <a href="#ref-for-component-wise⑦">(8)</a> <a href="#ref-for-component-wise⑧">(9)</a> <a href="#ref-for-component-wise⑨">(10)</a> <a href="#ref-for-component-wise①⓪">(11)</a> <a href="#ref-for-component-wise①①">(12)</a>
    <li><a href="#ref-for-component-wise①②">6.6. Reinterpretation of Representation Expressions</a> <a href="#ref-for-component-wise①③">(2)</a>
    <li><a href="#ref-for-component-wise①④">6.8. Logical Expressions</a> <a href="#ref-for-component-wise①⑤">(2)</a> <a href="#ref-for-component-wise①⑥">(3)</a>
    <li><a href="#ref-for-component-wise①⑦">6.9. Arithmetic Expressions</a> <a href="#ref-for-component-wise①⑧">(2)</a> <a href="#ref-for-component-wise①⑨">(3)</a> <a href="#ref-for-component-wise②⓪">(4)</a> <a href="#ref-for-component-wise②①">(5)</a> <a href="#ref-for-component-wise②②">(6)</a> <a href="#ref-for-component-wise②③">(7)</a> <a href="#ref-for-component-wise②④">(8)</a> <a href="#ref-for-component-wise②⑤">(9)</a> <a href="#ref-for-component-wise②⑥">(10)</a> <a href="#ref-for-component-wise②⑦">(11)</a> <a href="#ref-for-component-wise②⑧">(12)</a> <a href="#ref-for-component-wise②⑨">(13)</a> <a href="#ref-for-component-wise③⓪">(14)</a>
    <li><a href="#ref-for-component-wise③①">6.10. Comparison Expressions TODO</a> <a href="#ref-for-component-wise③②">(2)</a> <a href="#ref-for-component-wise③③">(3)</a> <a href="#ref-for-component-wise③④">(4)</a> <a href="#ref-for-component-wise③⑤">(5)</a> <a href="#ref-for-component-wise③⑥">(6)</a> <a href="#ref-for-component-wise③⑦">(7)</a> <a href="#ref-for-component-wise③⑧">(8)</a> <a href="#ref-for-component-wise③⑨">(9)</a> <a href="#ref-for-component-wise④⓪">(10)</a> <a href="#ref-for-component-wise④①">(11)</a> <a href="#ref-for-component-wise④②">(12)</a> <a href="#ref-for-component-wise④③">(13)</a> <a href="#ref-for-component-wise④④">(14)</a> <a href="#ref-for-component-wise④⑤">(15)</a> <a href="#ref-for-component-wise④⑥">(16)</a> <a href="#ref-for-component-wise④⑦">(17)</a> <a href="#ref-for-component-wise④⑧">(18)</a>
    <li><a href="#ref-for-component-wise④⑨">6.11. Bit Expressions TODO</a> <a href="#ref-for-component-wise⑤⓪">(2)</a> <a href="#ref-for-component-wise⑤①">(3)</a> <a href="#ref-for-component-wise⑤②">(4)</a> <a href="#ref-for-component-wise⑤③">(5)</a> <a href="#ref-for-component-wise⑤④">(6)</a> <a href="#ref-for-component-wise⑤⑤">(7)</a>
    <li><a href="#ref-for-component-wise⑤⑥">16.1. Logical built-in functions</a>
    <li><a href="#ref-for-component-wise⑤⑦">16.2. Value-testing built-in functions</a> <a href="#ref-for-component-wise⑤⑧">(2)</a> <a href="#ref-for-component-wise⑤⑨">(3)</a> <a href="#ref-for-component-wise⑥⓪">(4)</a>
    <li><a href="#ref-for-component-wise⑥①">16.3. Float built-in functions</a> <a href="#ref-for-component-wise⑥②">(2)</a> <a href="#ref-for-component-wise⑥③">(3)</a> <a href="#ref-for-component-wise⑥④">(4)</a> <a href="#ref-for-component-wise⑥⑤">(5)</a> <a href="#ref-for-component-wise⑥⑥">(6)</a> <a href="#ref-for-component-wise⑥⑦">(7)</a> <a href="#ref-for-component-wise⑥⑧">(8)</a> <a href="#ref-for-component-wise⑥⑨">(9)</a> <a href="#ref-for-component-wise⑦⓪">(10)</a> <a href="#ref-for-component-wise⑦①">(11)</a> <a href="#ref-for-component-wise⑦②">(12)</a> <a href="#ref-for-component-wise⑦③">(13)</a> <a href="#ref-for-component-wise⑦④">(14)</a> <a href="#ref-for-component-wise⑦⑤">(15)</a> <a href="#ref-for-component-wise⑦⑥">(16)</a> <a href="#ref-for-component-wise⑦⑦">(17)</a> <a href="#ref-for-component-wise⑦⑧">(18)</a> <a href="#ref-for-component-wise⑦⑨">(19)</a> <a href="#ref-for-component-wise⑧⓪">(20)</a> <a href="#ref-for-component-wise⑧①">(21)</a> <a href="#ref-for-component-wise⑧②">(22)</a> <a href="#ref-for-component-wise⑧③">(23)</a> <a href="#ref-for-component-wise⑧④">(24)</a> <a href="#ref-for-component-wise⑧⑤">(25)</a> <a href="#ref-for-component-wise⑧⑥">(26)</a> <a href="#ref-for-component-wise⑧⑦">(27)</a> <a href="#ref-for-component-wise⑧⑧">(28)</a> <a href="#ref-for-component-wise⑧⑨">(29)</a> <a href="#ref-for-component-wise⑨⓪">(30)</a> <a href="#ref-for-component-wise⑨①">(31)</a> <a href="#ref-for-component-wise⑨②">(32)</a> <a href="#ref-for-component-wise⑨③">(33)</a>
    <li><a href="#ref-for-component-wise⑨④">16.4. Integer built-in functions</a> <a href="#ref-for-component-wise⑨⑤">(2)</a> <a href="#ref-for-component-wise⑨⑥">(3)</a> <a href="#ref-for-component-wise⑨⑦">(4)</a> <a href="#ref-for-component-wise⑨⑧">(5)</a> <a href="#ref-for-component-wise⑨⑨">(6)</a> <a href="#ref-for-component-wise①⓪⓪">(7)</a> <a href="#ref-for-component-wise①⓪①">(8)</a> <a href="#ref-for-component-wise①⓪②">(9)</a> <a href="#ref-for-component-wise①⓪③">(10)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="matrix">
   <b><a href="#matrix">#matrix</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-matrix">4.2.10. Composite Types</a>
    <li><a href="#ref-for-matrix①">4.2.11. Constructible Types</a>
    <li><a href="#ref-for-matrix②">4.3.3. Storable Types</a>
    <li><a href="#ref-for-matrix③">4.3.5. Host-shareable Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="atomic-type">
   <b><a href="#atomic-type">#atomic-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-atomic-type">4.2. Plain Types</a>
    <li><a href="#ref-for-atomic-type①">4.2.8. Array Types</a>
    <li><a href="#ref-for-atomic-type②">4.2.9. Structure Types</a>
    <li><a href="#ref-for-atomic-type③">4.3.3. Storable Types</a>
    <li><a href="#ref-for-atomic-type④">4.3.5. Host-shareable Types</a> <a href="#ref-for-atomic-type⑤">(2)</a>
    <li><a href="#ref-for-atomic-type⑥">4.3.7.4. Internal Layout of Values</a>
    <li><a href="#ref-for-atomic-type⑦">6.4. Zero Value Expressions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="atomic-modification">
   <b><a href="#atomic-modification">#atomic-modification</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-atomic-modification">16.9.1. Atomic Load</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="array">
   <b><a href="#array">#array</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-array">3.6. Attributes</a> <a href="#ref-for-array①">(2)</a>
    <li><a href="#ref-for-array②">4.2.10. Composite Types</a>
    <li><a href="#ref-for-array③">4.3.3. Storable Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fixed-size-array">
   <b><a href="#fixed-size-array">#fixed-size-array</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fixed-size-array">4.2.11. Constructible Types</a>
    <li><a href="#ref-for-fixed-size-array①">4.3.5. Host-shareable Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="runtime-sized">
   <b><a href="#runtime-sized">#runtime-sized</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-runtime-sized">4.3.5. Host-shareable Types</a> <a href="#ref-for-runtime-sized①">(2)</a>
    <li><a href="#ref-for-runtime-sized②">4.3.6. Storage Classes</a>
    <li><a href="#ref-for-runtime-sized③">6.4. Zero Value Expressions</a>
    <li><a href="#ref-for-runtime-sized④">9.3.3. Resource layout compatibility</a> <a href="#ref-for-runtime-sized⑤">(2)</a> <a href="#ref-for-runtime-sized⑥">(3)</a>
    <li><a href="#ref-for-runtime-sized⑦">16.2. Value-testing built-in functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="structure">
   <b><a href="#structure">#structure</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-structure">3.6. Attributes</a> <a href="#ref-for-structure①">(2)</a> <a href="#ref-for-structure②">(3)</a> <a href="#ref-for-structure③">(4)</a> <a href="#ref-for-structure④">(5)</a> <a href="#ref-for-structure⑤">(6)</a>
    <li><a href="#ref-for-structure⑥">4.2.8. Array Types</a>
    <li><a href="#ref-for-structure⑦">4.2.9. Structure Types</a>
    <li><a href="#ref-for-structure⑧">4.2.10. Composite Types</a>
    <li><a href="#ref-for-structure⑨">4.2.11. Constructible Types</a>
    <li><a href="#ref-for-structure①⓪">4.3.3. Storable Types</a>
    <li><a href="#ref-for-structure①①">4.3.4. IO-shareable Types</a>
    <li><a href="#ref-for-structure①②">4.3.5. Host-shareable Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="composite">
   <b><a href="#composite">#composite</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-composite">4.2. Plain Types</a>
    <li><a href="#ref-for-composite①">4.3.6. Storage Classes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="constructible">
   <b><a href="#constructible">#constructible</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-constructible">4.2.11. Constructible Types</a>
    <li><a href="#ref-for-constructible①">4.3.6. Storage Classes</a> <a href="#ref-for-constructible②">(2)</a> <a href="#ref-for-constructible③">(3)</a>
    <li><a href="#ref-for-constructible④">5.2. Module Constants</a>
    <li><a href="#ref-for-constructible⑤">5.3. Function Scope Variables and Constants</a> <a href="#ref-for-constructible⑥">(2)</a>
    <li><a href="#ref-for-constructible⑦">6.3. Type Constructor Expressions</a> <a href="#ref-for-constructible⑧">(2)</a>
    <li><a href="#ref-for-constructible⑨">6.4. Zero Value Expressions</a> <a href="#ref-for-constructible①⓪">(2)</a> <a href="#ref-for-constructible①①">(3)</a> <a href="#ref-for-constructible①②">(4)</a> <a href="#ref-for-constructible①③">(5)</a> <a href="#ref-for-constructible①④">(6)</a>
    <li><a href="#ref-for-constructible①⑤">7.2. Assignment Statement</a>
    <li><a href="#ref-for-constructible①⑥">8.1. Declaring a user-defined function</a>
    <li><a href="#ref-for-constructible①⑦">8.3. Restrictions on functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="memory-locations">
   <b><a href="#memory-locations">#memory-locations</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-memory-locations">4.4. Memory View Types</a>
    <li><a href="#ref-for-memory-locations①">4.4.2. Originating variable</a> <a href="#ref-for-memory-locations②">(2)</a> <a href="#ref-for-memory-locations③">(3)</a>
    <li><a href="#ref-for-memory-locations④">7.2. Assignment Statement</a>
    <li><a href="#ref-for-memory-locations⑤">8.3. Restrictions on functions</a>
    <li><a href="#ref-for-memory-locations⑥">16.9. Atomic built-in functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="memory-access">
   <b><a href="#memory-access">#memory-access</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-memory-access">4.4. Memory View Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="read-access">
   <b><a href="#read-access">#read-access</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-read-access">4.4.3. Use cases for references and pointers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="write-access">
   <b><a href="#write-access">#write-access</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-write-access">4.4.3. Use cases for references and pointers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-mode">
   <b><a href="#access-mode">#access-mode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-mode">4.4. Memory View Types</a> <a href="#ref-for-access-mode①">(2)</a> <a href="#ref-for-access-mode②">(3)</a>
    <li><a href="#ref-for-access-mode③">5. var and let</a>
    <li><a href="#ref-for-access-mode④">16.8. Texture built-in functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-read">
   <b><a href="#access-read">#access-read</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-read">4.3.6. Storage Classes</a> <a href="#ref-for-access-read①">(2)</a> <a href="#ref-for-access-read②">(3)</a>
    <li><a href="#ref-for-access-read③">4.4.1. Access Mode Defaults</a> <a href="#ref-for-access-read④">(2)</a>
    <li><a href="#ref-for-access-read⑤">4.4.3. Use cases for references and pointers</a>
    <li><a href="#ref-for-access-read⑥">5.1. Module Scope Variables</a> <a href="#ref-for-access-read⑦">(2)</a>
    <li><a href="#ref-for-access-read⑧">9.3.3. Resource layout compatibility</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-write">
   <b><a href="#access-write">#access-write</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-write">4.4.3. Use cases for references and pointers</a>
    <li><a href="#ref-for-access-write①">4.5.5. Storage Texture Types</a>
    <li><a href="#ref-for-access-write②">7.2. Assignment Statement</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-read_write">
   <b><a href="#access-read_write">#access-read_write</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-read_write">4.2.7. Atomic Types</a>
    <li><a href="#ref-for-access-read_write①">4.3.6. Storage Classes</a> <a href="#ref-for-access-read_write②">(2)</a> <a href="#ref-for-access-read_write③">(3)</a> <a href="#ref-for-access-read_write④">(4)</a>
    <li><a href="#ref-for-access-read_write⑤">4.4.1. Access Mode Defaults</a>
    <li><a href="#ref-for-access-read_write⑥">4.4.3. Use cases for references and pointers</a> <a href="#ref-for-access-read_write⑦">(2)</a>
    <li><a href="#ref-for-access-read_write⑧">5.1. Module Scope Variables</a>
    <li><a href="#ref-for-access-read_write⑨">7.2. Assignment Statement</a>
    <li><a href="#ref-for-access-read_write①⓪">9.3.3. Resource layout compatibility</a>
    <li><a href="#ref-for-access-read_write①①">16.9. Atomic built-in functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="storable">
   <b><a href="#storable">#storable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storable">4.3. Memory</a>
    <li><a href="#ref-for-storable①">4.3.3. Storable Types</a>
    <li><a href="#ref-for-storable②">4.4. Memory View Types</a> <a href="#ref-for-storable③">(2)</a>
    <li><a href="#ref-for-storable④">4.4.5. Comparison with references and pointers in other languages</a>
    <li><a href="#ref-for-storable⑤">5. var and let</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="io-shareable">
   <b><a href="#io-shareable">#io-shareable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-io-shareable">4.3.5. Host-shareable Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="host-shareable">
   <b><a href="#host-shareable">#host-shareable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-host-shareable">4.3.6. Storage Classes</a> <a href="#ref-for-host-shareable①">(2)</a>
    <li><a href="#ref-for-host-shareable②">4.3.7. Memory Layout</a> <a href="#ref-for-host-shareable③">(2)</a>
    <li><a href="#ref-for-host-shareable④">4.3.7.1. Alignment and Size</a>
    <li><a href="#ref-for-host-shareable⑤">5.1. Module Scope Variables</a> <a href="#ref-for-host-shareable⑥">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="storage-classes">
   <b><a href="#storage-classes">#storage-classes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-classes">1.2. Technical Overview</a>
    <li><a href="#ref-for-storage-classes①">4.4. Memory View Types</a> <a href="#ref-for-storage-classes②">(2)</a> <a href="#ref-for-storage-classes③">(3)</a>
    <li><a href="#ref-for-storage-classes④">5. var and let</a> <a href="#ref-for-storage-classes⑤">(2)</a>
    <li><a href="#ref-for-storage-classes⑥">6.13. Variable Identifier Expression</a>
    <li><a href="#ref-for-storage-classes⑦">7.2. Assignment Statement</a>
    <li><a href="#ref-for-storage-classes⑧">9.3. Shader Interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="storage-classes-function">
   <b><a href="#storage-classes-function">#storage-classes-function</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-classes-function">1.2. Technical Overview</a>
    <li><a href="#ref-for-storage-classes-function①">5. var and let</a> <a href="#ref-for-storage-classes-function②">(2)</a>
    <li><a href="#ref-for-storage-classes-function③">5.1. Module Scope Variables</a>
    <li><a href="#ref-for-storage-classes-function④">5.3. Function Scope Variables and Constants</a>
    <li><a href="#ref-for-storage-classes-function⑤">8.3. Restrictions on functions</a> <a href="#ref-for-storage-classes-function⑥">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="storage-classes-private">
   <b><a href="#storage-classes-private">#storage-classes-private</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-classes-private">1.2. Technical Overview</a>
    <li><a href="#ref-for-storage-classes-private①">5. var and let</a> <a href="#ref-for-storage-classes-private②">(2)</a>
    <li><a href="#ref-for-storage-classes-private③">5.1. Module Scope Variables</a>
    <li><a href="#ref-for-storage-classes-private④">8.3. Restrictions on functions</a> <a href="#ref-for-storage-classes-private⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="storage-classes-workgroup">
   <b><a href="#storage-classes-workgroup">#storage-classes-workgroup</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-classes-workgroup">1.2. Technical Overview</a>
    <li><a href="#ref-for-storage-classes-workgroup①">4.2.7. Atomic Types</a> <a href="#ref-for-storage-classes-workgroup②">(2)</a>
    <li><a href="#ref-for-storage-classes-workgroup③">5.1. Module Scope Variables</a>
    <li><a href="#ref-for-storage-classes-workgroup④">8.3. Restrictions on functions</a> <a href="#ref-for-storage-classes-workgroup⑤">(2)</a>
    <li><a href="#ref-for-storage-classes-workgroup⑥">12.3. Compute Shaders and Workgroups</a>
    <li><a href="#ref-for-storage-classes-workgroup⑦">16.9. Atomic built-in functions</a> <a href="#ref-for-storage-classes-workgroup⑧">(2)</a>
    <li><a href="#ref-for-storage-classes-workgroup⑨">16.12. Synchronization built-in functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="storage-classes-uniform">
   <b><a href="#storage-classes-uniform">#storage-classes-uniform</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-classes-uniform">4.3.7. Memory Layout</a> <a href="#ref-for-storage-classes-uniform①">(2)</a> <a href="#ref-for-storage-classes-uniform②">(3)</a>
    <li><a href="#ref-for-storage-classes-uniform③">4.3.7.5. Storage Class Layout Constraints</a> <a href="#ref-for-storage-classes-uniform④">(2)</a> <a href="#ref-for-storage-classes-uniform⑤">(3)</a> <a href="#ref-for-storage-classes-uniform⑥">(4)</a>
    <li><a href="#ref-for-storage-classes-uniform⑦">5.1. Module Scope Variables</a> <a href="#ref-for-storage-classes-uniform⑧">(2)</a>
    <li><a href="#ref-for-storage-classes-uniform⑨">9.3. Shader Interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="storage-classes-storage">
   <b><a href="#storage-classes-storage">#storage-classes-storage</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-classes-storage">4.2.8. Array Types</a>
    <li><a href="#ref-for-storage-classes-storage①">4.3.7. Memory Layout</a> <a href="#ref-for-storage-classes-storage②">(2)</a> <a href="#ref-for-storage-classes-storage③">(3)</a>
    <li><a href="#ref-for-storage-classes-storage④">4.3.7.5. Storage Class Layout Constraints</a> <a href="#ref-for-storage-classes-storage⑤">(2)</a> <a href="#ref-for-storage-classes-storage⑥">(3)</a>
    <li><a href="#ref-for-storage-classes-storage⑦">4.4.1. Access Mode Defaults</a> <a href="#ref-for-storage-classes-storage⑧">(2)</a>
    <li><a href="#ref-for-storage-classes-storage⑨">5. var and let</a>
    <li><a href="#ref-for-storage-classes-storage①⓪">5.1. Module Scope Variables</a> <a href="#ref-for-storage-classes-storage①①">(2)</a>
    <li><a href="#ref-for-storage-classes-storage①②">8.3. Restrictions on functions</a>
    <li><a href="#ref-for-storage-classes-storage①③">9.3. Shader Interface</a>
    <li><a href="#ref-for-storage-classes-storage①④">9.3.3. Resource layout compatibility</a> <a href="#ref-for-storage-classes-storage①⑤">(2)</a> <a href="#ref-for-storage-classes-storage①⑥">(3)</a>
    <li><a href="#ref-for-storage-classes-storage①⑦">16.9. Atomic built-in functions</a> <a href="#ref-for-storage-classes-storage①⑧">(2)</a>
    <li><a href="#ref-for-storage-classes-storage①⑨">16.12. Synchronization built-in functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="storage-classes-handle">
   <b><a href="#storage-classes-handle">#storage-classes-handle</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-classes-handle">4.5. Texture and Sampler Types</a>
    <li><a href="#ref-for-storage-classes-handle①">5.1. Module Scope Variables</a>
    <li><a href="#ref-for-storage-classes-handle②">6.15. Address-Of Expression</a>
    <li><a href="#ref-for-storage-classes-handle③">9.3. Shader Interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="alignof">
   <b><a href="#alignof">#alignof</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-alignof">4.3.7.1. Alignment and Size</a> <a href="#ref-for-alignof①">(2)</a> <a href="#ref-for-alignof②">(3)</a> <a href="#ref-for-alignof③">(4)</a> <a href="#ref-for-alignof④">(5)</a> <a href="#ref-for-alignof⑤">(6)</a> <a href="#ref-for-alignof⑥">(7)</a> <a href="#ref-for-alignof⑦">(8)</a> <a href="#ref-for-alignof⑧">(9)</a> <a href="#ref-for-alignof⑨">(10)</a>
    <li><a href="#ref-for-alignof①⓪">4.3.7.2. Structure Layout Rules</a> <a href="#ref-for-alignof①①">(2)</a> <a href="#ref-for-alignof①②">(3)</a>
    <li><a href="#ref-for-alignof①③">4.3.7.3. Array Layout Rules</a> <a href="#ref-for-alignof①④">(2)</a> <a href="#ref-for-alignof①⑤">(3)</a>
    <li><a href="#ref-for-alignof①⑥">4.3.7.5. Storage Class Layout Constraints</a> <a href="#ref-for-alignof①⑦">(2)</a> <a href="#ref-for-alignof①⑧">(3)</a> <a href="#ref-for-alignof①⑨">(4)</a> <a href="#ref-for-alignof②⓪">(5)</a> <a href="#ref-for-alignof②①">(6)</a> <a href="#ref-for-alignof②②">(7)</a> <a href="#ref-for-alignof②③">(8)</a> <a href="#ref-for-alignof②④">(9)</a> <a href="#ref-for-alignof②⑤">(10)</a> <a href="#ref-for-alignof②⑥">(11)</a> <a href="#ref-for-alignof②⑦">(12)</a> <a href="#ref-for-alignof②⑧">(13)</a> <a href="#ref-for-alignof②⑨">(14)</a> <a href="#ref-for-alignof③⓪">(15)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="alignofmember">
   <b><a href="#alignofmember">#alignofmember</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-alignofmember">4.3.7.1. Alignment and Size</a> <a href="#ref-for-alignofmember①">(2)</a>
    <li><a href="#ref-for-alignofmember②">4.3.7.2. Structure Layout Rules</a> <a href="#ref-for-alignofmember③">(2)</a> <a href="#ref-for-alignofmember④">(3)</a> <a href="#ref-for-alignofmember⑤">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sizeof">
   <b><a href="#sizeof">#sizeof</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sizeof">4.3.7.1. Alignment and Size</a> <a href="#ref-for-sizeof①">(2)</a> <a href="#ref-for-sizeof②">(3)</a> <a href="#ref-for-sizeof③">(4)</a> <a href="#ref-for-sizeof④">(5)</a>
    <li><a href="#ref-for-sizeof⑤">4.3.7.2. Structure Layout Rules</a> <a href="#ref-for-sizeof⑥">(2)</a> <a href="#ref-for-sizeof⑦">(3)</a>
    <li><a href="#ref-for-sizeof⑧">4.3.7.3. Array Layout Rules</a> <a href="#ref-for-sizeof⑨">(2)</a> <a href="#ref-for-sizeof①⓪">(3)</a>
    <li><a href="#ref-for-sizeof①①">4.3.7.5. Storage Class Layout Constraints</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sizeofmember">
   <b><a href="#sizeofmember">#sizeofmember</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sizeofmember">4.3.7.1. Alignment and Size</a>
    <li><a href="#ref-for-sizeofmember①">4.3.7.2. Structure Layout Rules</a> <a href="#ref-for-sizeofmember②">(2)</a> <a href="#ref-for-sizeofmember③">(3)</a> <a href="#ref-for-sizeofmember④">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="strideof">
   <b><a href="#strideof">#strideof</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-strideof">4.3.7.3. Array Layout Rules</a> <a href="#ref-for-strideof①">(2)</a> <a href="#ref-for-strideof②">(3)</a>
    <li><a href="#ref-for-strideof③">4.3.7.4. Internal Layout of Values</a>
    <li><a href="#ref-for-strideof④">4.3.7.5. Storage Class Layout Constraints</a> <a href="#ref-for-strideof⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="offsetofmember">
   <b><a href="#offsetofmember">#offsetofmember</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-offsetofmember">4.3.7.1. Alignment and Size</a>
    <li><a href="#ref-for-offsetofmember①">4.3.7.2. Structure Layout Rules</a> <a href="#ref-for-offsetofmember②">(2)</a> <a href="#ref-for-offsetofmember③">(3)</a>
    <li><a href="#ref-for-offsetofmember④">4.3.7.4. Internal Layout of Values</a>
    <li><a href="#ref-for-offsetofmember⑤">4.3.7.5. Storage Class Layout Constraints</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="element-stride">
   <b><a href="#element-stride">#element-stride</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-element-stride">4.3.7. Memory Layout</a>
    <li><a href="#ref-for-element-stride①">4.3.7.5. Storage Class Layout Constraints</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="requiredalignof">
   <b><a href="#requiredalignof">#requiredalignof</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-requiredalignof">4.3.7.5. Storage Class Layout Constraints</a> <a href="#ref-for-requiredalignof①">(2)</a> <a href="#ref-for-requiredalignof②">(3)</a> <a href="#ref-for-requiredalignof③">(4)</a> <a href="#ref-for-requiredalignof④">(5)</a> <a href="#ref-for-requiredalignof⑤">(6)</a> <a href="#ref-for-requiredalignof⑥">(7)</a> <a href="#ref-for-requiredalignof⑦">(8)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="memory-view">
   <b><a href="#memory-view">#memory-view</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-memory-view">4.4. Memory View Types</a> <a href="#ref-for-memory-view①">(2)</a> <a href="#ref-for-memory-view②">(3)</a>
    <li><a href="#ref-for-memory-view③">5. var and let</a>
    <li><a href="#ref-for-memory-view④">6.15. Address-Of Expression</a>
    <li><a href="#ref-for-memory-view⑤">6.16. Indirection Expression</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="reference-type">
   <b><a href="#reference-type">#reference-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reference-type">4. Types</a>
    <li><a href="#ref-for-reference-type①">4.4. Memory View Types</a>
    <li><a href="#ref-for-reference-type②">5. var and let</a> <a href="#ref-for-reference-type③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="store-type">
   <b><a href="#store-type">#store-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-store-type">3.6. Attributes</a>
    <li><a href="#ref-for-store-type①">4.2.8. Array Types</a>
    <li><a href="#ref-for-store-type②">4.3.5. Host-shareable Types</a>
    <li><a href="#ref-for-store-type③">4.3.7. Memory Layout</a>
    <li><a href="#ref-for-store-type④">4.5. Texture and Sampler Types</a>
    <li><a href="#ref-for-store-type⑤">5. var and let</a> <a href="#ref-for-store-type⑥">(2)</a>
    <li><a href="#ref-for-store-type⑦">5.1. Module Scope Variables</a> <a href="#ref-for-store-type⑧">(2)</a> <a href="#ref-for-store-type⑨">(3)</a> <a href="#ref-for-store-type①⓪">(4)</a>
    <li><a href="#ref-for-store-type①①">5.3. Function Scope Variables and Constants</a>
    <li><a href="#ref-for-store-type①②">6.13. Variable Identifier Expression</a>
    <li><a href="#ref-for-store-type①③">9.3.1.1. Built-in Inputs and Outputs</a> <a href="#ref-for-store-type①④">(2)</a>
    <li><a href="#ref-for-store-type①⑤">9.3.3. Resource layout compatibility</a> <a href="#ref-for-store-type①⑥">(2)</a> <a href="#ref-for-store-type①⑦">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="pointer-type">
   <b><a href="#pointer-type">#pointer-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-pointer-type">4.4. Memory View Types</a>
    <li><a href="#ref-for-pointer-type①">4.4.1. Access Mode Defaults</a>
    <li><a href="#ref-for-pointer-type②">5.3. Function Scope Variables and Constants</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="originating-variable">
   <b><a href="#originating-variable">#originating-variable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-originating-variable">4.4.2. Originating variable</a> <a href="#ref-for-originating-variable①">(2)</a>
    <li><a href="#ref-for-originating-variable②">4.4.4. Forming reference and pointer values</a>
    <li><a href="#ref-for-originating-variable③">6.7.1.3. Component reference from vector reference</a> <a href="#ref-for-originating-variable④">(2)</a> <a href="#ref-for-originating-variable⑤">(3)</a> <a href="#ref-for-originating-variable⑥">(4)</a> <a href="#ref-for-originating-variable⑦">(5)</a>
    <li><a href="#ref-for-originating-variable⑧">6.7.2. Matrix Access Expression</a>
    <li><a href="#ref-for-originating-variable⑨">6.7.3. Array Access Expression</a> <a href="#ref-for-originating-variable①⓪">(2)</a>
    <li><a href="#ref-for-originating-variable①①">6.7.4. Structure Access Expression</a>
    <li><a href="#ref-for-originating-variable①②">8.3. Restrictions on functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="invalid-memory-reference">
   <b><a href="#invalid-memory-reference">#invalid-memory-reference</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-invalid-memory-reference">6.7.1.3. Component reference from vector reference</a>
    <li><a href="#ref-for-invalid-memory-reference①">6.7.2. Matrix Access Expression</a>
    <li><a href="#ref-for-invalid-memory-reference②">6.7.3. Array Access Expression</a> <a href="#ref-for-invalid-memory-reference③">(2)</a>
    <li><a href="#ref-for-invalid-memory-reference④">6.15. Address-Of Expression</a>
    <li><a href="#ref-for-invalid-memory-reference⑤">6.16. Indirection Expression</a>
    <li><a href="#ref-for-invalid-memory-reference⑥">7.2. Assignment Statement</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="load-rule">
   <b><a href="#load-rule">#load-rule</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-load-rule">4.4.2. Originating variable</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="texture">
   <b><a href="#texture">#texture</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-texture">4.3.3. Storable Types</a>
    <li><a href="#ref-for-texture①">4.3.6. Storage Classes</a>
    <li><a href="#ref-for-texture②">4.5. Texture and Sampler Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="texel-format">
   <b><a href="#texel-format">#texel-format</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-texel-format">16.8. Texture built-in functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="channel-formats">
   <b><a href="#channel-formats">#channel-formats</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-channel-formats">4.5.1. Texel formats</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="channel-transfer-function">
   <b><a href="#channel-transfer-function">#channel-transfer-function</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-channel-transfer-function">4.5.1. Texel formats</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="storage-texel-formats">
   <b><a href="#storage-texel-formats">#storage-texel-formats</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-texel-formats">4.5.5. Storage Texture Types</a> <a href="#ref-for-storage-texel-formats①">(2)</a>
    <li><a href="#ref-for-storage-texel-formats">16.8.12. textureStore</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="write-only-storage-texture">
   <b><a href="#write-only-storage-texture">#write-only-storage-texture</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-write-only-storage-texture">9.3.3. Resource layout compatibility</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sampler">
   <b><a href="#sampler">#sampler</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sampler">4.3.3. Storable Types</a>
    <li><a href="#ref-for-sampler①">4.3.6. Storage Classes</a> <a href="#ref-for-sampler②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="let-declaration">
   <b><a href="#let-declaration">#let-declaration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-let-declaration">4.4.3. Use cases for references and pointers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="variable">
   <b><a href="#variable">#variable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-variable">4.3.3. Storable Types</a>
    <li><a href="#ref-for-variable①">4.4.3. Use cases for references and pointers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="variable-declaration">
   <b><a href="#variable-declaration">#variable-declaration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-variable-declaration">4.4.1. Access Mode Defaults</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="lifetime">
   <b><a href="#lifetime">#lifetime</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-lifetime">5. var and let</a>
    <li><a href="#ref-for-lifetime①">5.3. Function Scope Variables and Constants</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="uniform-buffer">
   <b><a href="#uniform-buffer">#uniform-buffer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-uniform-buffer">3.6. Attributes</a>
    <li><a href="#ref-for-uniform-buffer①">4.2.9. Structure Types</a>
    <li><a href="#ref-for-uniform-buffer②">4.3.5. Host-shareable Types</a>
    <li><a href="#ref-for-uniform-buffer③">4.3.6. Storage Classes</a>
    <li><a href="#ref-for-uniform-buffer④">4.3.7. Memory Layout</a>
    <li><a href="#ref-for-uniform-buffer⑤">9.3.2. Resource interface</a>
    <li><a href="#ref-for-uniform-buffer⑥">9.3.3. Resource layout compatibility</a> <a href="#ref-for-uniform-buffer⑦">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="storage-buffer">
   <b><a href="#storage-buffer">#storage-buffer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-buffer">3.6. Attributes</a>
    <li><a href="#ref-for-storage-buffer①">4.2.7. Atomic Types</a>
    <li><a href="#ref-for-storage-buffer②">4.2.9. Structure Types</a>
    <li><a href="#ref-for-storage-buffer③">4.3.5. Host-shareable Types</a>
    <li><a href="#ref-for-storage-buffer④">4.3.6. Storage Classes</a>
    <li><a href="#ref-for-storage-buffer⑤">4.3.7. Memory Layout</a>
    <li><a href="#ref-for-storage-buffer⑥">9.3.2. Resource interface</a>
    <li><a href="#ref-for-storage-buffer⑦">9.3.3. Resource layout compatibility</a> <a href="#ref-for-storage-buffer⑧">(2)</a> <a href="#ref-for-storage-buffer⑨">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="pipeline-overridable">
   <b><a href="#pipeline-overridable">#pipeline-overridable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-pipeline-overridable">3.6. Attributes</a>
    <li><a href="#ref-for-pipeline-overridable①">4.2.8. Array Types</a>
    <li><a href="#ref-for-pipeline-overridable②">6.17. Constant Identifier Expression</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="pipeline-constant-id">
   <b><a href="#pipeline-constant-id">#pipeline-constant-id</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-pipeline-constant-id">5.2. Module Constants</a>
    <li><a href="#ref-for-pipeline-constant-id①">6.17. Constant Identifier Expression</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="function-scope">
   <b><a href="#function-scope">#function-scope</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-function-scope">4.3.6. Storage Classes</a>
    <li><a href="#ref-for-function-scope①">5. var and let</a>
    <li><a href="#ref-for-function-scope②">8.2. Function calls</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="zero-value">
   <b><a href="#zero-value">#zero-value</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-zero-value">4.4.2. Originating variable</a>
    <li><a href="#ref-for-zero-value①">5. var and let</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="address-of">
   <b><a href="#address-of">#address-of</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-address-of">4.4.3. Use cases for references and pointers</a> <a href="#ref-for-address-of①">(2)</a>
    <li><a href="#ref-for-address-of②">4.4.4. Forming reference and pointer values</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="indirection">
   <b><a href="#indirection">#indirection</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-indirection">4.4.3. Use cases for references and pointers</a>
    <li><a href="#ref-for-indirection①">4.4.4. Forming reference and pointer values</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="assignment-statement">
   <b><a href="#assignment-statement">#assignment-statement</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-assignment-statement">4.4.2. Originating variable</a>
    <li><a href="#ref-for-assignment-statement①">4.4.3. Use cases for references and pointers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="iteration">
   <b><a href="#iteration">#iteration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-iteration">7.3.5. For Statement</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="return">
   <b><a href="#return">#return</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-return">7.3.9. Return Statement</a>
    <li><a href="#ref-for-return①">8.1. Declaring a user-defined function</a>
    <li><a href="#ref-for-return②">8.2. Function calls</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="function-function">
   <b><a href="#function-function">#function-function</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-function-function">1.2. Technical Overview</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="user-defined-function">
   <b><a href="#user-defined-function">#user-defined-function</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-user-defined-function">1.2. Technical Overview</a>
    <li><a href="#ref-for-user-defined-function①">8.3. Restrictions on functions</a> <a href="#ref-for-user-defined-function②">(2)</a>
    <li><a href="#ref-for-user-defined-function③">9.2. Entry point declaration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="function-declaration">
   <b><a href="#function-declaration">#function-declaration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-function-declaration">3.8. Declaration and scope</a>
    <li><a href="#ref-for-function-declaration①">9.2. Entry point declaration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="return-type">
   <b><a href="#return-type">#return-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-return-type">6.12. Function Call Expression</a>
    <li><a href="#ref-for-return-type①">7.3.9. Return Statement</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="formal-parameter">
   <b><a href="#formal-parameter">#formal-parameter</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-formal-parameter">4.4.3. Use cases for references and pointers</a>
    <li><a href="#ref-for-formal-parameter①">4.4.4. Forming reference and pointer values</a>
    <li><a href="#ref-for-formal-parameter②">8.1. Declaring a user-defined function</a>
    <li><a href="#ref-for-formal-parameter③">8.2. Function calls</a>
    <li><a href="#ref-for-formal-parameter④">8.3. Restrictions on functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="function-call">
   <b><a href="#function-call">#function-call</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-function-call">6.12. Function Call Expression</a>
    <li><a href="#ref-for-function-call①">7.4. Function Call Statement</a>
    <li><a href="#ref-for-function-call②">8.3. Restrictions on functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="call-site">
   <b><a href="#call-site">#call-site</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-call-site">4.4.2. Originating variable</a>
    <li><a href="#ref-for-call-site①">4.4.4. Forming reference and pointer values</a>
    <li><a href="#ref-for-call-site②">6.14. Formal Parameter Expression</a>
    <li><a href="#ref-for-call-site③">7.3.9. Return Statement</a>
    <li><a href="#ref-for-call-site④">8.2. Function calls</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="pipeline">
   <b><a href="#pipeline">#pipeline</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-pipeline">8. Functions</a>
    <li><a href="#ref-for-pipeline①">9.3.1.3. Interpolation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="gpucomputepipeline">
   <b><a href="#gpucomputepipeline">#gpucomputepipeline</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-gpucomputepipeline">1.2. Technical Overview</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="compute-shader-stage">
   <b><a href="#compute-shader-stage">#compute-shader-stage</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-compute-shader-stage">1.2. Technical Overview</a>
    <li><a href="#ref-for-compute-shader-stage①">3.6. Attributes</a>
    <li><a href="#ref-for-compute-shader-stage②">4.3.6. Storage Classes</a>
    <li><a href="#ref-for-compute-shader-stage③">12.3. Compute Shaders and Workgroups</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="gpurenderpipeline">
   <b><a href="#gpurenderpipeline">#gpurenderpipeline</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-gpurenderpipeline">1.2. Technical Overview</a>
    <li><a href="#ref-for-gpurenderpipeline①">7.3.10. Discard Statement</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="shader-stages">
   <b><a href="#shader-stages">#shader-stages</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-shader-stages">1.2. Technical Overview</a>
    <li><a href="#ref-for-shader-stages①">2. Shader Lifecycle</a>
    <li><a href="#ref-for-shader-stages②">4.3.6. Storage Classes</a> <a href="#ref-for-shader-stages③">(2)</a>
    <li><a href="#ref-for-shader-stages④">8. Functions</a>
    <li><a href="#ref-for-shader-stages⑤">9.2. Entry point declaration</a>
    <li><a href="#ref-for-shader-stages⑥">9.3. Shader Interface</a>
    <li><a href="#ref-for-shader-stages⑦">9.3.2. Resource interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="compute">
   <b><a href="#compute">#compute</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-compute">3.6. Attributes</a> <a href="#ref-for-compute①">(2)</a>
    <li><a href="#ref-for-compute②">9.3.1.2. User-defined Inputs and Outputs</a>
    <li><a href="#ref-for-compute③">16.12. Synchronization built-in functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="vertex">
   <b><a href="#vertex">#vertex</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-vertex">3.6. Attributes</a>
    <li><a href="#ref-for-vertex①">8.3. Restrictions on functions</a>
    <li><a href="#ref-for-vertex②">9.3.1.3. Interpolation</a>
    <li><a href="#ref-for-vertex③">16.9. Atomic built-in functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fragment">
   <b><a href="#fragment">#fragment</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fragment">3.6. Attributes</a>
    <li><a href="#ref-for-fragment①">7.3.10. Discard Statement</a>
    <li><a href="#ref-for-fragment②">9.3.1.3. Interpolation</a> <a href="#ref-for-fragment③">(2)</a>
    <li><a href="#ref-for-fragment④">16.7. Derivative built-in functions</a>
    <li><a href="#ref-for-fragment⑤">16.8.6. textureSample</a>
    <li><a href="#ref-for-fragment⑥">16.8.7. textureSampleBias</a>
    <li><a href="#ref-for-fragment⑦">16.8.8. textureSampleCompare</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="entry-point">
   <b><a href="#entry-point">#entry-point</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-entry-point">1.2. Technical Overview</a>
    <li><a href="#ref-for-entry-point①">2. Shader Lifecycle</a>
    <li><a href="#ref-for-entry-point②">7.3.9. Return Statement</a>
    <li><a href="#ref-for-entry-point③">7.3.10. Discard Statement</a>
    <li><a href="#ref-for-entry-point④">8. Functions</a>
    <li><a href="#ref-for-entry-point⑤">12.3. Compute Shaders and Workgroups</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="functions-in-a-shader-stage">
   <b><a href="#functions-in-a-shader-stage">#functions-in-a-shader-stage</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-functions-in-a-shader-stage">1.2. Technical Overview</a>
    <li><a href="#ref-for-functions-in-a-shader-stage①">7.3.10. Discard Statement</a>
    <li><a href="#ref-for-functions-in-a-shader-stage②">9.3. Shader Interface</a>
    <li><a href="#ref-for-functions-in-a-shader-stage③">9.3.1.1. Built-in Inputs and Outputs</a>
    <li><a href="#ref-for-functions-in-a-shader-stage④">9.3.2. Resource interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="statically-accessed">
   <b><a href="#statically-accessed">#statically-accessed</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-statically-accessed">1.2. Technical Overview</a>
    <li><a href="#ref-for-statically-accessed①">9.3. Shader Interface</a>
    <li><a href="#ref-for-statically-accessed②">9.3.2. Resource interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="entry-point-io-type">
   <b><a href="#entry-point-io-type">#entry-point-io-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-entry-point-io-type">9.2. Entry point declaration</a> <a href="#ref-for-entry-point-io-type①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="pipeline-input">
   <b><a href="#pipeline-input">#pipeline-input</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-pipeline-input">1.2. Technical Overview</a> <a href="#ref-for-pipeline-input①">(2)</a>
    <li><a href="#ref-for-pipeline-input②">9.1. Shader Stages</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="pipeline-output">
   <b><a href="#pipeline-output">#pipeline-output</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-pipeline-output">1.2. Technical Overview</a>
    <li><a href="#ref-for-pipeline-output①">9.1. Shader Stages</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="built-in-input-variable">
   <b><a href="#built-in-input-variable">#built-in-input-variable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-built-in-input-variable">3.6. Attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="built-in-output-variable">
   <b><a href="#built-in-output-variable">#built-in-output-variable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-built-in-output-variable">3.6. Attributes</a>
    <li><a href="#ref-for-built-in-output-variable①">8.3. Restrictions on functions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="interpolation-type">
   <b><a href="#interpolation-type">#interpolation-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-interpolation-type">3.6. Attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="interpolation-sampling">
   <b><a href="#interpolation-sampling">#interpolation-sampling</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-interpolation-sampling">3.6. Attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="resource">
   <b><a href="#resource">#resource</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-resource">1.2. Technical Overview</a> <a href="#ref-for-resource①">(2)</a> <a href="#ref-for-resource②">(3)</a>
    <li><a href="#ref-for-resource③">2. Shader Lifecycle</a>
    <li><a href="#ref-for-resource④">3.6. Attributes</a> <a href="#ref-for-resource⑤">(2)</a>
    <li><a href="#ref-for-resource⑥">9.1. Shader Stages</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="resource-interface-of-a-shader">
   <b><a href="#resource-interface-of-a-shader">#resource-interface-of-a-shader</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-resource-interface-of-a-shader">1.2. Technical Overview</a>
    <li><a href="#ref-for-resource-interface-of-a-shader①">3.6. Attributes</a>
    <li><a href="#ref-for-resource-interface-of-a-shader②">5.1. Module Scope Variables</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="extension">
   <b><a href="#extension">#extension</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-extension">10.1. Enable Directive</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="compute-shader-stage-workgroup">
   <b><a href="#compute-shader-stage-workgroup">#compute-shader-stage-workgroup</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-compute-shader-stage-workgroup">1.2. Technical Overview</a>
    <li><a href="#ref-for-compute-shader-stage-workgroup①">4.2.7. Atomic Types</a>
    <li><a href="#ref-for-compute-shader-stage-workgroup②">4.3.6. Storage Classes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="workgroup-grid">
   <b><a href="#workgroup-grid">#workgroup-grid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-workgroup-grid">3.6. Attributes</a>
    <li><a href="#ref-for-workgroup-grid①">15. Built-in variables</a> <a href="#ref-for-workgroup-grid②">(2)</a> <a href="#ref-for-workgroup-grid③">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="local-invocation-id">
   <b><a href="#local-invocation-id">#local-invocation-id</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-local-invocation-id">12.3. Compute Shaders and Workgroups</a>
    <li><a href="#ref-for-local-invocation-id①">15. Built-in variables</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="local-invocation-index">
   <b><a href="#local-invocation-index">#local-invocation-index</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-local-invocation-index">15. Built-in variables</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dispatch-size">
   <b><a href="#dispatch-size">#dispatch-size</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dispatch-size">15. Built-in variables</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="compute-shader-grid">
   <b><a href="#compute-shader-grid">#compute-shader-grid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-compute-shader-grid">15. Built-in variables</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="global-invocation-id">
   <b><a href="#global-invocation-id">#global-invocation-id</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-global-invocation-id">15. Built-in variables</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="workgroup-id">
   <b><a href="#workgroup-id">#workgroup-id</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-workgroup-id">15. Built-in variables</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="correctly-rounded">
   <b><a href="#correctly-rounded">#correctly-rounded</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-correctly-rounded">12.5.1. Floating Point Accuracy</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="ulp">
   <b><a href="#ulp">#ulp</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ulp">12.5.1. Floating Point Accuracy</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="built-in-functions">
   <b><a href="#built-in-functions">#built-in-functions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-built-in-functions">1.2. Technical Overview</a>
    <li><a href="#ref-for-built-in-functions①">3.8. Declaration and scope</a>
    <li><a href="#ref-for-built-in-functions②">8. Functions</a>
    <li><a href="#ref-for-built-in-functions③">8.3. Restrictions on functions</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>
<script>/* script-var-click-highlighting */

    document.addEventListener("click", e=>{
        if(e.target.nodeName == "VAR") {
            highlightSameAlgoVars(e.target);
        }
    });
    {
        const indexCounts = new Map();
        const indexNames = new Map();
        function highlightSameAlgoVars(v) {
            // Find the algorithm container.
            let algoContainer = null;
            let searchEl = v;
            while(algoContainer == null && searchEl != document.body) {
                searchEl = searchEl.parentNode;
                if(searchEl.hasAttribute("data-algorithm")) {
                    algoContainer = searchEl;
                }
            }

            // Not highlighting document-global vars,
            // too likely to be unrelated.
            if(algoContainer == null) return;

            const algoName = algoContainer.getAttribute("data-algorithm");
            const varName = getVarName(v);
            const addClass = !v.classList.contains("selected");
            let highlightClass = null;
            if(addClass) {
                const index = chooseHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] += 1;
                indexNames.set(algoName+"///"+varName, index);
                highlightClass = nameFromIndex(index);
            } else {
                const index = previousHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] -= 1;
                highlightClass = nameFromIndex(index);
            }

            // Find all same-name vars, and toggle their class appropriately.
            for(const el of algoContainer.querySelectorAll("var")) {
                if(getVarName(el) == varName) {
                    el.classList.toggle("selected", addClass);
                    el.classList.toggle(highlightClass, addClass);
                }
            }
        }
        function getVarName(el) {
            return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
        }
        function chooseHighlightIndex(algoName, varName) {
            let indexes = null;
            if(indexCounts.has(algoName)) {
                indexes = indexCounts.get(algoName);
            } else {
                // 7 classes right now
                indexes = [0,0,0,0,0,0,0];
                indexCounts.set(algoName, indexes);
            }

            // If the element was recently unclicked,
            // *and* that color is still unclaimed,
            // give it back the same color.
            const lastIndex = previousHighlightIndex(algoName, varName);
            if(indexes[lastIndex] === 0) return lastIndex;

            // Find the earliest index with the lowest count.
            const minCount = Math.min.apply(null, indexes);
            let index = null;
            for(var i = 0; i < indexes.length; i++) {
                if(indexes[i] == minCount) {
                    return i;
                }
            }
        }
        function previousHighlightIndex(algoName, varName) {
            return indexNames.get(algoName+"///"+varName);
        }
        function nameFromIndex(index) {
            return "selected" + index;
        }
    }
    </script>