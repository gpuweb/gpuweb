// Use this in browser: https://docs.github.com/en/codespaces/developing-in-codespaces/creating-a-codespace-for-a-repository
// Use this in local VS Code: https://docs.github.com/en/codespaces/developing-in-codespaces/using-github-codespaces-in-visual-studio-code

// This devcontainer.json is as minimal as possible to mimick the CI environment.
// In this way, it is easier to develop for the CI. To achieve this, the devcontainer
// uses the image directly, and only copies the grammar from cache to bootstrap a similar
// environment as CI, since entrypoint.sh is not run on creation.

// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/universal
{
	"name": "",

	"image": "ghcr.io/gpuweb/gpuweb:main",

	// Command here copies the grammar from cache to avoid installing from scratch.
	// This behavior is also used in the entrypoint.sh, but devcontainer does not
	// run entrypoint by default. And only this copy operation is helpful.
	"postCreateCommand": "cp -r /grammar ./wgsl/"
}
